(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283,368],{80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},75992:function(){},78110:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){},39868:function(e,t,n){Promise.resolve().then(n.bind(n,41291))},41291:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r,o,i=n(45008),s=n(11920),a=n(26588);let c=null;async function d(e,t){let n=`${c.webServiceAPIEndpoint}/graphql`,r=window.location.toString(),o=await fetch(n,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({query:"mutation CreateIntent($input: CreateIntentInput!) {\n    createIntent (input: $input) {\n      intentId\n    }\n  }",variables:{input:{type:e,redirectUrl:r,payload:t}}})}),i=(await o?.json()).data.createIntent.intentId||null;return console.log("intentId",i),i}function l(e,t){let n;switch(e){case o.REQUEST_CREDENTIALS:n="intent/request-credentials";break;case o.IMPORT_CREDENTIALS:n="intent/import-credentials";break;default:throw Error(`Unable to build front end intent endpoint for unknown intent type ${e}`)}return`${c.webServiceEndpoint}/${n}?rid=${t}`}(r=o||(o={})).REQUEST_CREDENTIALS="REQUEST_CREDENTIALS",r.IMPORT_CREDENTIALS="IMPORT_CREDENTIALS";let p={};async function u(){let e=function(){let e=new URL(window.location.href);return new URLSearchParams(e.search).get("rid")}();if(e){console.log("The Mydentity connector found an intent ID in the url - now processing the result");let t=await async function(e){let t=`${c.webServiceAPIEndpoint}/graphql`,n=`mutation ServerIntentResponse {
    serveIntentResponse (id: "${e}") {
      id type requestPayload responsePayload
    }
  }`,r=await fetch(t,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({query:n})}),o=await r?.json();return o?.data?.serveIntentResponse}(e);if(console.log("response intent",t),!t)return void s.logger.warn("Mydentity has no info about the intent we've tried to process from the url. Skipping");!async function(e){let t=await p[e.type]?.(e);h?.(e.requestPayload.requestId,t)}(t)}}let h=null,E=()=>{try{return s.connectivity.getApplicationDID()}catch{return null}};class m{static registerResponseProcessors(){var e,t,n,r;e=o.REQUEST_CREDENTIALS,t=m.processRequestCredentialsResponse,p[e]=t,n=o.IMPORT_CREDENTIALS,r=m.processImportCredentialsResponse,p[n]=r}static async requestCredentials(e,t){let n={...t,caller:E(),requestId:e},r=await d(o.REQUEST_CREDENTIALS,n),i=l(o.REQUEST_CREDENTIALS,r);window.location.href=i}static async processRequestCredentialsResponse(e){return a.VerifiablePresentation.parse(e.responsePayload)}static async importCredentials(e,t,n){let r=E(),i={credentials:t.map(e=>e.toString()),options:n,caller:r,requestId:e},s=await d(o.IMPORT_CREDENTIALS,i),a=l(o.IMPORT_CREDENTIALS,s);window.location.href=a}static async processImportCredentialsResponse(e){return e.responsePayload.map(e=>({id:a.DIDURL.from(e)}))}}class w{constructor(e){this.name="mydentity",c=Object.assign({},{webServiceEndpoint:"https://ownmydentity.com",webServiceAPIEndpoint:"https://api.ownmydentity.com"},e),this.registerResponseProcessors()}getWeb3Provider(){throw Error("Method not implemented.")}async getDisplayName(){return"Mydentity"}registerResponseProcessors(){m.registerResponseProcessors()}registerResponseHandler(e){s.logger.log("Registered response handler on the web connector"),h=e,u()}requestCredentialsV2(e,t){return m.requestCredentials(e,t)}issueCredential(e,t,n,r,o){throw Error("Method not implemented.")}importCredentialsV2(e,t,n){return m.importCredentials(e,t,n)}deleteCredentials(e,t){throw Error("Method not implemented.")}signData(e,t,n){throw Error("Method not implemented.")}requestPublish(){throw Error("Method not implemented.")}updateHiveVaultAddress(e,t){throw Error("Method not implemented.")}importCredentialContext(e,t){throw Error("Method not implemented.")}generateAppIdCredential(e,t){throw Error("Method not implemented.")}generateHiveBackupCredential(e,t,n){throw Error("Method not implemented.")}pay(e){throw Error("Method not implemented.")}voteForDPoS(){throw Error("Method not implemented.")}voteForCRCouncil(){throw Error("Method not implemented.")}voteForCRProposal(){throw Error("Method not implemented.")}sendSmartContractTransaction(e){throw Error("Method not implemented.")}onBoard(e,t,n,r){throw Error("Method not implemented.")}}var y=n(2265),f=e=>{let{children:t}=e;return(0,y.useEffect)(()=>{let e=new w({webServiceEndpoint:"https://ownmydentity.com",webServiceAPIEndpoint:"https://api.ownmydentity.com"});return s.connectivity.registerConnector(e),s.connectivity.setApplicationDID("did:elastos:inDxwJsTKBbGkeSJZ5NPA6p8mb3F6i7ytA"),()=>{(0,i.N)()}}),t}},45008:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(11920);function o(){r.connectivity.getAvailableConnectors().forEach(e=>{console.log("Unregistering connector ".concat(e.name)),r.connectivity.unregisterConnector(e.name)})}}},function(e){e.O(0,[990,988,787,443,218,18,431,971,596,744],function(){return e(e.s=39868)}),_N_E=e.O()}]);