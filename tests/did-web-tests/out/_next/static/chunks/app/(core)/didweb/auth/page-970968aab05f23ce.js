(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{4081:function(e,s,t){Promise.resolve().then(t.bind(t,90035))},90035:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var n=t(57437),l=t(10061),a=t(2265);async function i(e){console.log("Creating and importing a credential");let s="unsafepass",{Features:n,DefaultDIDAdapter:l,DIDBackend:a,DIDStore:i,RootIdentity:r,Mnemonic:o,Issuer:c,VerifiableCredential:d,DID:u}=await Promise.all([t.e(787),t.e(443),t.e(218),t.e(431),t.e(368)]).then(t.bind(t,26588)),{didAccessV2:m}=await Promise.resolve().then(t.bind(t,11920));n.enableJsonLdContext(!0),a.initialize(new l("mainnet"));let p=await i.open("client-side-store"),x=await r.createFromMnemonic(o.getInstance().generate(),"",p,s,!0);console.log("Created identity:",x);let f=await x.newDid(s,0,!0);console.log("Issuer DID:",f);let h=await c.create(f);console.log("Issuer:",h);let b=u.from("did:elastos:insTmxdDDuS9wHHfeYD1h5C2onEHh3D8Vq");console.log("Target DID:",b);let w=[e&&"https://ns.elastos.org/credentials/displayable/v1#DisplayableCredential"].filter(e=>!!e),v=new d.Builder(h,b),C=await v.id("#testinstance"+Math.random()).properties({prescription1:"Drink more",prescription2:"Eat less",subField:{firstSubValue:"Yes",secondSubValue:"Tomorrow"},...e&&{displayable:{icon:"nowhere",title:"Medical certificate",description:"${prescription1}, ${prescription2}"}}}).types(...w).seal(s);console.log("Generated credential:",C),await m.importCredentials([C])}let r=()=>{let[e,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=null;return setTimeout(async()=>{let{didAccessV2:s}=await Promise.resolve().then(t.bind(t,11920));e=s.onImportCredentialsResponse((e,s)=>{console.log("onImportCredentialsResponse",e,s),o(s)})},500),()=>e},[]);let c=async e=>{s(!0),await i(e)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.c,{onClick:()=>c(!0),busy:e,children:"Import displayable credential"}),(0,n.jsx)(l.c,{onClick:()=>c(!1),busy:e,children:"Import non displayable credential"}),r&&(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mb-6",children:"Credentials that have been imported:"}),r.map((e,s)=>(0,n.jsx)("div",{className:"text-sm max-w-xl break-words",children:e.id.toString()},s))]})]})};var o=t(11920);let c=()=>{let[e,s]=(0,a.useState)(!1),[t,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=null;return setTimeout(()=>{e=o.didAccessV2.onRequestCredentialsResponse((e,s)=>{console.log("onRequestCredentialsResponse",e,s),i(s)})},500),()=>e},[]);let r=async()=>{i(null),s(!0),await o.didAccessV2.requestCredentials({claims:[o.DID.simpleTypeClaim("Your name","NameCredential",!1)]},{purpose:"authenticate user",customJson:{appData:123}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.c,{onClick:r,busy:e,children:"Request name credential"}),t&&(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mb-6",children:"Presentation has been received:"}),(0,n.jsx)("div",{className:" text-sm max-w-xl break-words",children:t.toString()})]})]})};var d=()=>(0,n.jsx)("div",{className:"col-span-full",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,n.jsx)(c,{}),(0,n.jsx)(r,{})]})})},10061:function(e,s,t){"use strict";t.d(s,{c:function(){return r}});var n=t(57437),l=t(6882),a=t(49050),i=t(57042);let r=e=>{let{leftIcon:s,size:t="medium",mode:r="default",onClick:o,children:c,busy:d=!1,disabled:u=!1,className:m}=e,p=(0,n.jsx)(l.Z,{size:16});return(0,n.jsx)("div",{className:(0,i.Z)("flex",m),children:(0,n.jsx)(a.Z,{className:"flex-1",startIcon:d?p:s,disabled:d||u,size:t,color:"default"===r?"primary":"error",variant:"contained",onClick:o,children:c})})}}},function(e){e.O(0,[990,988,18,310,510,971,596,744],function(){return e(e.s=4081)}),_N_E=e.O()}]);