(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{50104:function(e,s,t){Promise.resolve().then(t.bind(t,39222))},39222:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var l=t(57437),n=t(10061),a=t(2265);async function i(e){console.log("Creating and importing a credential");let s="unsafepass",{Features:l,DefaultDIDAdapter:n,DIDBackend:a,DIDStore:i,RootIdentity:r,Mnemonic:c,Issuer:o,VerifiableCredential:d,DID:u}=await Promise.all([t.e(787),t.e(443),t.e(218),t.e(431),t.e(368)]).then(t.bind(t,26588)),{didAccessV2:m}=await Promise.resolve().then(t.bind(t,11920));l.enableJsonLdContext(!0),a.initialize(new n("mainnet"));let p=await i.open("client-side-store"),x=await r.createFromMnemonic(c.getInstance().generate(),"",p,s,!0);console.log("Created identity:",x);let h=await x.newDid(s,0,!0);console.log("Issuer DID:",h);let f=await o.create(h);console.log("Issuer:",f);let b=u.from("did:elastos:insTmxdDDuS9wHHfeYD1h5C2onEHh3D8Vq");console.log("Target DID:",b);let w=[e&&"https://ns.elastos.org/credentials/displayable/v1#DisplayableCredential"].filter(e=>!!e),C=new d.Builder(f,b),g=await C.id("#testinstance"+Math.random()).properties({prescription1:"Drink more",prescription2:"Eat less",subField:{firstSubValue:"Yes",secondSubValue:"Tomorrow"},...e&&{displayable:{icon:"nowhere",title:"Medical certificate",description:"${prescription1}, ${prescription2}"}}}).types(...w).seal(s);console.log("Generated credential:",g),await m.importCredentials([g])}let r=()=>{let[e,s]=(0,a.useState)(!1),[r,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=null;return setTimeout(async()=>{let{didAccessV2:l}=await Promise.resolve().then(t.bind(t,11920));e=l.onImportCredentialsResponse((e,t)=>{console.log("onImportCredentialsResponse",e,t),t&&c(t),s(!1)})},500),()=>e},[]);let o=async e=>{s(!0),await i(e)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.c,{onClick:()=>o(!0),busy:e,children:"Import displayable credential"}),(0,l.jsx)(n.c,{onClick:()=>o(!1),busy:e,children:"Import non displayable credential"}),r&&(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mb-6",children:"Credentials that have been imported:"}),r.map((e,s)=>(0,l.jsx)("div",{className:"text-sm max-w-xl break-words",children:e.id.toString()},s))]})]})};var c=t(11920);let o=()=>{let[e,s]=(0,a.useState)(!1),[t,i]=(0,a.useState)(null),[r,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=null;return setTimeout(()=>{e=c.didAccessV2.onRequestCredentialsResponse((e,t)=>{console.log("onRequestCredentialsResponse",e,t),t&&i(t),s(!1)})},500),()=>e},[]);let d=async()=>{o(null),i(null),s(!0);try{let e=new c.DID.DIDAccess,s=await e.requestCredentials({claims:[c.DID.simpleTypeClaim("Your name","NameCredential",!1)]});console.log("credentials",s),i(s)}catch(e){console.log("exception:",e),o(e.toString())}finally{s(!1)}},u=async()=>{o(null),i(null),s(!0);try{await c.didAccessV2.requestCredentials({claims:[c.DID.simpleTypeClaim("Your name","NameCredential",!1),c.DID.standardEmailClaim("Used during the KYC process",!1)]},{purpose:"authenticate user",customJson:{appData:123}})}catch(e){console.log("exception:",e),o(e.toString()),s(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.c,{onClick:d,busy:e,children:"Request name credential (V1)"}),(0,l.jsx)(n.c,{onClick:u,busy:e,children:"Request name credential (V2)"}),t&&(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mb-6",children:"Presentation has been received:"}),(0,l.jsx)("div",{className:" text-sm max-w-xl break-words",children:t.toString()})]}),r&&(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mb-6",children:"Request Credentials Failed:"}),(0,l.jsx)("div",{className:" text-sm max-w-xl break-words",children:r})]})]})};var d=()=>(0,l.jsx)("div",{className:"col-span-full",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,l.jsx)(o,{}),(0,l.jsx)(r,{})]})})},10061:function(e,s,t){"use strict";t.d(s,{c:function(){return r}});var l=t(57437),n=t(6882),a=t(49050),i=t(57042);let r=e=>{let{leftIcon:s,size:t="medium",mode:r="default",onClick:c,children:o,busy:d=!1,disabled:u=!1,className:m}=e,p=(0,l.jsx)(n.Z,{size:16});return(0,l.jsx)("div",{className:(0,i.Z)("flex",m),children:(0,l.jsx)(a.Z,{className:"flex-1",startIcon:d?p:s,disabled:d||u,size:t,color:"default"===r?"primary":"error",variant:"contained",onClick:c,children:o})})}}},function(e){e.O(0,[990,988,18,310,510,971,596,744],function(){return e(e.s=50104)}),_N_E=e.O()}]);