(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{4081:function(e,t,s){Promise.resolve().then(s.bind(s,92858))},92858:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var n=s(57437),l=s(1347);let a=new l.X(null);var i=s(2265);let r=(e,t)=>{let[s,n]=(0,i.useState)(null==e?void 0:e.getValue()),[l,a]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!e)return;let s=e.subscribe({next:e=>{n(e),null==t||t(e)},error:a});return()=>s.unsubscribe()},[e]),[s]};var o=s(10061);async function c(e,t){console.log("Creating and importing a credential");let n="unsafepass",{Features:l,DefaultDIDAdapter:a,DIDBackend:i,DIDStore:r,RootIdentity:o,Mnemonic:c,Issuer:d,VerifiableCredential:u,DID:m}=await Promise.all([s.e(787),s.e(443),s.e(218),s.e(431),s.e(368)]).then(s.bind(s,26588)),{didAccessV2:p}=await Promise.resolve().then(s.bind(s,11920));l.enableJsonLdContext(!0),i.initialize(new a("mainnet"));let x=await r.open("client-side-store"),f=await o.createFromMnemonic(c.getInstance().generate(),"",x,n,!0);console.log("Created identity:",f);let b=await f.newDid(n,0,!0);console.log("Issuer DID:",b);let h=await d.create(b);console.log("Issuer:",h);let v=m.from(e);console.log("Target DID:",e);let w=[t&&"https://ns.elastos.org/credentials/displayable/v1#DisplayableCredential"].filter(e=>!!e),g=new u.Builder(h,v),j=await g.id("#testinstance"+Math.random()).properties({prescription1:"Drink more",prescription2:"Eat less",subField:{firstSubValue:"Yes",secondSubValue:"Tomorrow"},...t&&{displayable:{icon:"nowhere",title:"Medical certificate",description:"${prescription1}, ${prescription2}"}}}).types(...w).seal(n);console.log("Generated credential:",j),await p.importCredentials([j])}let d=()=>{let[e,t]=(0,i.useState)(!1),[l,d]=(0,i.useState)(null),[u]=r(a);(0,i.useEffect)(()=>{let e=null;return setTimeout(async()=>{let{didAccessV2:t}=await Promise.resolve().then(s.bind(s,11920));e=t.onImportCredentialsResponse((e,t)=>{console.log("onImportCredentialsResponse",e,t),d(t)})},500),()=>e},[]);let m=async e=>{t(!0),await c(u,e)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.c,{onClick:()=>m(!0),busy:e,disabled:!u,children:"Import displayable credential"}),(0,n.jsx)(o.c,{onClick:()=>m(!1),busy:e,disabled:!u,children:"Import non displayable credential"}),l&&(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mb-6",children:"Credentials that have been imported:"}),l.map((e,t)=>(0,n.jsx)("div",{className:"text-sm max-w-xl break-words",children:e.id.toString()},t))]})]})};var u=s(11920);let m=()=>{let[e,t]=(0,i.useState)(!1),[s,l]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=null;return setTimeout(()=>{e=u.didAccessV2.onRequestCredentialsResponse((e,t)=>{console.log("onRequestCredentialsResponse",e,t),l(t),t&&a.next(t.getHolder().toString())})},500),()=>e},[]);let r=async()=>{l(null),t(!0),await u.didAccessV2.requestCredentials({claims:[u.DID.simpleTypeClaim("Your name","NameCredential",!1)]},{purpose:"authenticate user",customJson:{appData:123}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.c,{onClick:r,busy:e,children:"Request name credential"}),s&&(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mb-6",children:"Presentation has been received:"}),(0,n.jsx)("div",{className:" text-sm max-w-xl break-words",children:s.toString()})]})]})};var p=()=>{let[e]=r(a);return(0,n.jsxs)("div",{className:"col-span-full",children:[e&&(0,n.jsx)("div",{className:"mb-4 text-center",children:e}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,n.jsx)(m,{}),(0,n.jsx)(d,{})]})]})}},10061:function(e,t,s){"use strict";s.d(t,{c:function(){return r}});var n=s(57437),l=s(6882),a=s(49050),i=s(57042);let r=e=>{let{leftIcon:t,size:s="medium",mode:r="default",onClick:o,children:c,busy:d=!1,disabled:u=!1,className:m}=e,p=(0,n.jsx)(l.Z,{size:16});return(0,n.jsx)("div",{className:(0,i.Z)("flex",m),children:(0,n.jsx)(a.Z,{className:"flex-1",startIcon:d?p:t,disabled:d||u,size:s,color:"default"===r?"primary":"error",variant:"contained",onClick:o,children:c})})}}},function(e){e.O(0,[990,988,18,310,510,971,596,744],function(){return e(e.s=4081)}),_N_E=e.O()}]);