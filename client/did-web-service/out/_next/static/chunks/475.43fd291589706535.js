(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{83104:function(e,t,r){!function(){var t={528:function(e,t,r){var n=r(685),i=r(310),s=e.exports;for(var o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);function a(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}s.request=function(e,t){return e=a(e),n.request.call(this,e,t)},s.get=function(e,t){return e=a(e),n.get.call(this,e,t)}},685:function(e){"use strict";e.exports=r(72909)},310:function(e){"use strict";e.exports=r(40692)}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,i),o=!1}finally{o&&delete n[e]}return s.exports}i.ab="//";var s=i(528);e.exports=s}()},40692:function(e,t,r){!function(){var t={452:function(e){"use strict";e.exports=r(9875)}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,i),o=!1}finally{o&&delete n[e]}return s.exports}i.ab="//";var s={};!function(){var e,t=(e=i(452))&&"object"==typeof e&&"default"in e?e.default:e,r=/https?|ftp|gopher|file/;function n(e){"string"==typeof e&&(e=m(e));var n,i,s,o,a,u,c,l,d,h=(i=(n=e).auth,s=n.hostname,o=n.protocol||"",a=n.pathname||"",u=n.hash||"",c=n.query||"",l=!1,i=i?encodeURIComponent(i).replace(/%3A/i,":")+"@":"",n.host?l=i+n.host:s&&(l=i+(~s.indexOf(":")?"["+s+"]":s),n.port&&(l+=":"+n.port)),c&&"object"==typeof c&&(c=t.encode(c)),d=n.search||c&&"?"+c||"",o&&":"!==o.substr(-1)&&(o+=":"),n.slashes||(!o||r.test(o))&&!1!==l?(l="//"+(l||""),a&&"/"!==a[0]&&(a="/"+a)):l||(l=""),u&&"#"!==u[0]&&(u="#"+u),d&&"?"!==d[0]&&(d="?"+d),{protocol:o,host:l,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:d=d.replace("#","%23"),hash:u});return""+h.protocol+h.host+h.pathname+h.search+h.hash}var o="http://",a=o+"w.w",u=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,c=/https?|ftp|gopher|file/;function l(e,t){var r="string"==typeof e?m(e):e;e="object"==typeof e?n(e):e;var i=m(t),s="";r.protocol&&!r.slashes&&(s=r.protocol,e=e.replace(r.protocol,""),s+="/"===t[0]||"/"===e[0]?"/":""),s&&i.protocol&&(s="",i.slashes||(s=i.protocol,t=t.replace(i.protocol,"")));var l=e.match(u);l&&!i.protocol&&(e=e.substr((s=l[1]+(l[2]||"")).length),/^\/\/[^/]/.test(t)&&(s=s.slice(0,-1)));var d=new URL(e,a+"/"),h=new URL(t,d).toString().replace(a,""),p=i.protocol||r.protocol;return p+=r.slashes||i.slashes?"//":"",!s&&p?h=h.replace(o,p):s&&(h=h.replace(o,"")),c.test(h)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==h.slice(-1)||(h=h.slice(0,-1)),s&&(h=s+("/"===h[0]?h.substr(1):h)),h}function d(){}d.prototype.parse=m,d.prototype.format=n,d.prototype.resolve=l,d.prototype.resolveObject=l;var h=/^https?|ftp|gopher|file/,p=/^(.*?)([#?].*)/,f=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,g=/^([a-z0-9.+-]*:)?\/\/\/*/i,y=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function m(e,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),e&&"object"==typeof e&&e instanceof d)return e;var s=(e=e.trim()).match(p);e=s?s[1].replace(/\\/g,"/")+s[2]:e.replace(/\\/g,"/"),y.test(e)&&"/"!==e.slice(-1)&&(e+="/");var o=!/(^javascript)/.test(e)&&e.match(f),u=g.test(e),c="";o&&(h.test(o[1])||(c=o[1].toLowerCase(),e=""+o[2]+o[3]),o[2]||(u=!1,h.test(o[1])?(c=o[1],e=""+o[3]):e="//"+o[3]),3!==o[2].length&&1!==o[2].length||(c=o[1],e="/"+o[3]));var l,m=(s?s[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),v=m&&m[1],_=new d,b="",w="";try{l=new URL(e)}catch(t){b=t,c||i||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(w="/",e=e.substr(1));try{l=new URL(e,a)}catch(e){return _.protocol=c,_.href=c,_}}_.slashes=u&&!w,_.host="w.w"===l.host?"":l.host,_.hostname="w.w"===l.hostname?"":l.hostname.replace(/(\[|\])/g,""),_.protocol=b?c||null:l.protocol,_.search=l.search.replace(/\\/g,"%5C"),_.hash=l.hash.replace(/\\/g,"%5C");var S=e.split("#");!_.search&&~S[0].indexOf("?")&&(_.search="?"),_.hash||""!==S[1]||(_.hash="#"),_.query=r?t.decode(l.search.substr(1)):_.search.substr(1),_.pathname=w+(o?l.pathname.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}}):l.pathname),"about:"===_.protocol&&"blank"===_.pathname&&(_.protocol="",_.pathname=""),b&&"/"!==e[0]&&(_.pathname=_.pathname.substr(1)),c&&!h.test(c)&&"/"!==e.slice(-1)&&"/"===_.pathname&&(_.pathname=""),_.path=_.pathname+_.search,_.auth=[l.username,l.password].map(decodeURIComponent).filter(Boolean).join(":"),_.port=l.port,v&&!_.host.endsWith(v)&&(_.host+=v,_.port=v.slice(1)),_.href=w?""+_.pathname+_.search+_.hash:n(_);var E=/^(file)/.test(_.href)?["host","hostname"]:[];return Object.keys(_).forEach(function(e){~E.indexOf(e)||(_[e]=_[e]||null)}),_}s.parse=m,s.format=n,s.resolve=l,s.resolveObject=function(e,t){return m(l(e,t))},s.Url=d}(),e.exports=s}()},9875:function(e){!function(){"use strict";var t={815:function(e){e.exports=function(e,r,n,i){r=r||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(r);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var l,d,h,p,f=e[c].replace(o,"%20"),g=f.indexOf(n);(g>=0?(l=f.substr(0,g),d=f.substr(g+1)):(l=f,d=""),h=decodeURIComponent(l),p=decodeURIComponent(d),Object.prototype.hasOwnProperty.call(s,h))?t(s[h])?s[h].push(p):s[h]=[s[h],p]:s[h]=p}return s};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},577:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,s,o,a){return(s=s||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e)?n(i(e),function(i){var a=encodeURIComponent(t(i))+o;return r(e[i])?n(e[i],function(e){return a+encodeURIComponent(t(e))}).join(s):a+encodeURIComponent(t(e[i]))}).join(s):a?encodeURIComponent(t(a))+o+encodeURIComponent(t(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},o=!0;try{t[e](s,s.exports,n),o=!1}finally{o&&delete r[e]}return s.exports}n.ab="//";var i={};i.decode=i.parse=n(815),i.encode=i.stringify=n(577),e.exports=i}()},72909:function(e,t,r){var n=r(25566),i=r(67133).Buffer;!function(){var t={523:function(e){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function r(e,r,n){n||(n=Error);class i extends n{constructor(e,t,n){super("string"==typeof r?r:r(e,t,n))}}i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){var i,s,o,a,u;let c,l;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(c="must not be",t=t.replace(/^not /,"")):c="must be",o=" argument",(void 0===a||a>e.length)&&(a=e.length),e.substring(a-o.length,a)===o)l=`The ${e} ${c} ${n(t,"type")}`;else{let r=("number"!=typeof u&&(u=0),u+1>e.length||-1===e.indexOf(".",u))?"argument":"property";l=`The "${e}" ${r} ${c} ${n(t,"type")}`}return l+`. Received type ${typeof r}`},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,r){"use strict";var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var s=r(709),o=r(337);r(782)(l,s);for(var a=i(o.prototype),u=0;u<a.length;u++){var c=a[u];l.prototype[c]||(l.prototype[c]=o.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,r){"use strict";e.exports=i;var n=r(170);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(782)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},709:function(e,t,i){"use strict";e.exports=P,P.ReadableState=A,i(361).EventEmitter;var s,o,a,u,c,l=function(e,t){return e.listeners(t).length},d=i(678),h=i(300).Buffer,p=r.g.Uint8Array||function(){},f=i(837);o=f&&f.debuglog?f.debuglog("stream"):function(){};var g=i(379),y=i(25),m=i(776).getHighWaterMark,v=i(646).q,_=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,w=v.ERR_METHOD_NOT_IMPLEMENTED,S=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(782)(P,d);var E=y.errorOrDestroy,T=["error","close","destroy","pause","resume"];function A(e,t,r){s=s||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof s),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a||(a=i(704).s),this.decoder=new a(e.encoding),this.encoding=e.encoding)}function P(e){if(s=s||i(403),!(this instanceof P))return new P(e);var t=this instanceof s;this._readableState=new A(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),d.call(this)}function O(e,t,r,n,i){o("readableAddChunk",t);var s,a,u,c,l,d=e._readableState;if(null===t)d.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}}(e,d);else{if(i||(s=d,a=t,h.isBuffer(a)||a instanceof p||"string"==typeof a||void 0===a||s.objectMode||(u=new _("chunk",["string","Buffer","Uint8Array"],a)),l=u),l)E(e,l);else if(d.objectMode||t&&t.length>0){if("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===h.prototype||(c=t,t=h.from(c)),n)d.endEmitted?E(e,new S):x(e,d,t,!0);else if(d.ended)E(e,new b);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!r?(t=d.decoder.write(t),d.objectMode||0!==t.length?x(e,d,t,!1):k(e,d)):x(e,d,t,!1)}}else n||(d.reading=!1,k(e,d))}return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),k(e,t)}function R(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var r;t.highWaterMark=((r=e)>=1073741824?r=1073741824:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}function D(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(I,e))}function I(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function k(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(C,e,t))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){o("readable nexttick read 0"),e.read(0)}function L(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function B(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function H(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),P.prototype.destroy=y.destroy,P.prototype._undestroy=y.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=h.from(e,t),t=""),r=!0),O(this,e,t,!1,r)},P.prototype.unshift=function(e){return O(this,e,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(e){a||(a=i(704).s);var t=new a(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},P.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return o("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?B(this):D(this),null;if(0===(e=R(e,r))&&r.ended)return 0===r.length&&B(this),null;var i=r.needReadable;return o("need readable",i),(0===r.length||r.length-e<r.highWaterMark)&&o("length less than watermark",i=!0),r.ended||r.reading?o("reading or ended",i=!1):i&&(o("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=R(n,r))),null===(t=e>0?U(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&B(this)),null!==t&&this.emit("data",t),t},P.prototype._read=function(e){E(this,new w("_read()"))},P.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===n.stdout||e===n.stderr?g:a;function a(){o("onend"),e.end()}i.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",function t(n,s){o("onunpipe"),n===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,o("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",d),c=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u())});var u=function(){var e=r._readableState;o("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&l(r,"data")&&(e.flowing=!0,M(r))};e.on("drain",u);var c=!1;function d(t){o("ondata");var n=e.write(t);o("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==H(i.pipes,e))&&!c&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(t){o("onerror",t),g(),e.removeListener("error",h),0===l(e,"error")&&E(e,t)}function p(){e.removeListener("finish",f),g()}function f(){o("onfinish"),e.removeListener("close",p),g()}function g(){o("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",p),e.once("finish",f),e.emit("pipe",r),i.flowing||(o("pipe resume"),r.resume()),e},P.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=H(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},P.prototype.on=function(e,t){var r=d.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?D(this):i.reading||n.nextTick(j,this)),r},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(e,t){var r=d.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(N,this),r},P.prototype.removeAllListeners=function(e){var t=d.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(N,this),t},P.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(L,this,e))),e.paused=!1,this},P.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!=i)&&(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<T.length;s++)e.on(T[s],this.emit.bind(this,T[s]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=i(871)),u(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),P._fromList=U,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(e,t){return void 0===c&&(c=i(727)),c(P,e,t)})},170:function(e,t,r){"use strict";e.exports=l;var n=r(646).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(403);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,r){h(e,t,r)})}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}r(782)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(e,t,i){"use strict";function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){(function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(void 0),n=n.next}t.corkedRequestsFree.next=e})(t,e)}}e.exports=P,P.WritableState=A;var o,a,u={deprecate:i(769)},c=i(678),l=i(300).Buffer,d=r.g.Uint8Array||function(){},h=i(25),p=i(776).getHighWaterMark,f=i(646).q,g=f.ERR_INVALID_ARG_TYPE,y=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,_=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,w=f.ERR_STREAM_WRITE_AFTER_END,S=f.ERR_UNKNOWN_ENCODING,E=h.errorOrDestroy;function T(){}function A(e,t,r){o=o||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new m;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,i?(n.nextTick(s,t),n.nextTick(k,e,r),e._writableState.errorEmitted=!0,E(e,t)):(s(t),e._writableState.errorEmitted=!0,E(e,t),k(e,r));else{var o=D(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||R(e,r),i?n.nextTick(x,e,r,o,s):x(e,r,o,s)}})(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function P(e){var t=this instanceof(o=o||i(403));if(!t&&!a.call(P,this))return new P(e);this._writableState=new A(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function O(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function x(e,t,r,n){r||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,n(),k(e,t)}function R(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,O(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,d=t.objectMode?1:u.length;if(O(e,t,!1,d,u,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final(function(r){t.pendingcb--,r&&E(e,r),t.prefinished=!0,e.emit("prefinish"),k(e,t)})}function k(e,t){var r=D(t);if(r&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(I,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}i(782)(P,c),A.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(A.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===P&&e&&e._writableState instanceof A}})):a=function(e){return e instanceof this},P.prototype.pipe=function(){E(this,new v)},P.prototype.write=function(e,t,r){var i,s,o,a,u,c,h,p=this._writableState,f=!1,y=!p.objectMode&&(i=e,l.isBuffer(i)||i instanceof d);return y&&!l.isBuffer(e)&&(s=e,e=l.from(s)),("function"==typeof t&&(r=t,t=null),y?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof r&&(r=T),p.ending)?(o=r,E(this,a=new w),n.nextTick(o,a)):(y||(u=e,c=r,null===u?h=new b:"string"==typeof u||p.objectMode||(h=new g("chunk",["string","Buffer"],u)),!h||(E(this,h),n.nextTick(c,h),0)))&&(p.pendingcb++,f=function(e,t,r,n,i,s){if(!r){var o,a,u=(o=n,a=i,t.objectMode||!1===t.decodeStrings||"string"!=typeof o||(o=l.from(o,a)),o);n!==u&&(r=!0,i="buffer",n=u)}var c=t.objectMode?1:n.length;t.length+=c;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else O(e,t,!1,c,n,i,s);return d}(this,p,y,e,t,r)),f},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(e,t,r){r(new y("_write()"))},P.prototype._writev=null,P.prototype.end=function(e,t,r){var i,s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||(i=r,s.ending=!0,k(this,s),i&&(s.finished?n.nextTick(i):this.once("finish",i)),s.ended=!0,this.writable=!1),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),P.prototype.destroy=h.destroy,P.prototype._undestroy=h.undestroy,P.prototype._destroy=function(e,t){t(e)}},871:function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s,o=r(698),a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function f(e,t){return{value:e,done:t}}function g(e){var t=e[a];if(null!==t){var r=e[p].read();null!==r&&(e[d]=null,e[a]=null,e[u]=null,t(f(r,!1)))}}function y(e){n.nextTick(g,e)}var m=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((i(s={get stream(){return this[p]},next:function(){var e,t,r=this,i=this[c];if(null!==i)return Promise.reject(i);if(this[l])return Promise.resolve(f(void 0,!0));if(this[p].destroyed)return new Promise(function(e,t){n.nextTick(function(){r[c]?t(r[c]):e(f(void 0,!0))})});var s=this[d];if(s)t=new Promise((e=this,function(t,r){s.then(function(){if(e[l]){t(f(void 0,!0));return}e[h](t,r)},r)}));else{var o=this[p].read();if(null!==o)return Promise.resolve(f(o,!1));t=new Promise(this[h])}return this[d]=t,t}},Symbol.asyncIterator,function(){return this}),i(s,"return",function(){var e=this;return new Promise(function(t,r){e[p].destroy(null,function(e){if(e){r(e);return}t(f(void 0,!0))})})}),s),m);e.exports=function(e){var t,r=Object.create(v,(i(t={},p,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var n=r[p].read();n?(r[d]=null,r[a]=null,r[u]=null,e(f(n,!1))):(r[a]=e,r[u]=t)},writable:!0}),t));return r[d]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[u];null!==t&&(r[d]=null,r[a]=null,r[u]=null,t(e)),r[c]=e;return}var n=r[a];null!==n&&(r[d]=null,r[a]=null,r[u]=null,n(f(void 0,!0))),r[l]=!0}),e.on("readable",y.bind(null,r)),r}},379:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(300).Buffer,o=r(837).inspect,a=o&&o.custom||"inspect";e.exports=function(){var e,t;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=o,s.prototype.copy.call(t,n,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:a,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{depth:0,customInspect:!1}))}}],i(r.prototype,e),t&&i(r,t),r}()},25:function(e){"use strict";function t(e,t){i(e,t),r(e)}function r(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,s){var o=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?s?s(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(i,this,e)):n.nextTick(i,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!s&&e?o._writableState?o._writableState.errorEmitted?n.nextTick(r,o):(o._writableState.errorEmitted=!0,n.nextTick(t,o,e)):n.nextTick(t,o,e):s?(n.nextTick(r,o),s(e)):n.nextTick(r,o)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},698:function(e,t,r){"use strict";var n=r(646).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),o=s||i,a=!1,s=function(){if(!a){a=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.apply(this,t)}};var o,a,u=r.readable||!1!==r.readable&&t.readable,c=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||h()},d=t._writableState&&t._writableState.finished,h=function(){c=!1,d=!0,u||s.call(t)},p=t._readableState&&t._readableState.endEmitted,f=function(){u=!1,p=!0,c||s.call(t)},g=function(e){s.call(t,e)},y=function(){var e;return u&&!p?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):c&&!d?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",h)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",h),t.on("abort",y),t.req?m():t.on("request",m)):c&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",f),t.on("finish",h),!1!==r.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",h),t.removeListener("abort",y),t.removeListener("request",m),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",f),t.removeListener("error",g),t.removeListener("close",y)}}},727:function(e,t,r){"use strict";function n(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){r(e);return}a.done?t(u):Promise.resolve(u).then(n,i)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var s=r(646).q.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,r){if(t&&"function"==typeof t.next)o=t;else if(t&&t[Symbol.asyncIterator])o=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])o=t[Symbol.iterator]();else throw new s("iterable",["Iterable"],t);var o,a=new e(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({objectMode:!0},r)),u=!1;function c(){return l.apply(this,arguments)}function l(){var e;return e=function*(){try{var e=yield o.next(),t=e.value;e.done?a.push(null):a.push((yield t))?c():u=!1}catch(e){a.destroy(e)}},(l=function(){var t=this,r=arguments;return new Promise(function(i,s){var o=e.apply(t,r);function a(e){n(o,i,s,a,u,"next",e)}function u(e){n(o,i,s,a,u,"throw",e)}a(void 0)})}).apply(this,arguments)}return a._read=function(){u||(u=!0,c())},a}},442:function(e,t,r){"use strict";var n,i=r(646).q,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e,t,i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];var h=(e=l).length&&"function"==typeof e[e.length-1]?e.pop():a;if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new s("streams");var p=l.map(function(e,i){var s,a,c,d,f,g=i<l.length-1;return a=s=function(e){t||(t=e),e&&p.forEach(u),g||(p.forEach(u),h(t))},c=!1,s=function(){c||(c=!0,a.apply(void 0,arguments))},d=!1,e.on("close",function(){d=!0}),void 0===n&&(n=r(698)),n(e,{readable:g,writable:i>0},function(e){if(e)return s(e);d=!0,s()}),f=!1,function(t){if(!d&&!f){if(f=!0,e.setHeader&&"function"==typeof e.abort)return e.abort();if("function"==typeof e.destroy)return e.destroy();s(t||new o("pipe"))}}});return l.reduce(c)}},776:function(e,t,r){"use strict";var n=r(646).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var s=null!=t.highWaterMark?t.highWaterMark:i?t[r]:null;if(null!=s){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var o=i?r:"highWaterMark";throw new n(o,s)}return Math.floor(s)}return e.objectMode?16:16384}}},678:function(e,t,r){e.exports=r(781)},726:function(e,t,r){var i=r(781);"disable"===n.env.READABLE_STREAM&&i?(e.exports=i.Readable,Object.assign(e.exports,i),e.exports.Stream=i):((t=e.exports=r(709)).Stream=i||t,t.Readable=t,t.Writable=r(337),t.Duplex=r(403),t.Transform=r(170),t.PassThrough=r(889),t.finished=r(698),t.pipeline=r(442))},55:function(e,t,r){var n=r(300),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},813:function(e,t,n){var i=n(450),s=n(254),o=n(911),a=n(523),u=n(310);t.request=function(e,t){e="string"==typeof e?u.parse(e):o(e);var n=-1===r.g.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||n,a=e.hostname||e.host,c=e.port,l=e.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),e.url=(a?s+"//"+a:"")+(c?":"+c:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var d=new i(e);return t&&d.on("response",t),d},t.get=function(e,r){var n=t.request(e,r);return n.end(),n},t.ClientRequest=i,t.IncomingMessage=s.IncomingMessage,t.Agent=function(){},t.Agent.defaultMaxSockets=4,t.globalAgent=new t.Agent,t.STATUS_CODES=a,t.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},301:function(e,t){var n;function i(){if(void 0!==n)return n;if(r.g.XMLHttpRequest){n=new r.g.XMLHttpRequest;try{n.open("GET",r.g.XDomainRequest?"/":"https://example.com")}catch(e){n=null}}else n=null;return n}function s(e){var t=i();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function o(e){return"function"==typeof e}t.fetch=o(r.g.fetch)&&o(r.g.ReadableStream),t.writableStream=o(r.g.WritableStream),t.abortController=o(r.g.AbortController),t.arraybuffer=t.fetch||s("arraybuffer"),t.msstream=!t.fetch&&s("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&s("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!i()&&o(i().overrideMimeType),n=null},450:function(e,t,s){var o=s(301),a=s(782),u=s(254),c=s(726),l=u.IncomingMessage,d=u.readyStates,h=e.exports=function(e){var t,r,n,s=this;c.Writable.call(s),s._opts=e,s._body=[],s._headers={},e.auth&&s.setHeader("Authorization","Basic "+i.from(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){s.setHeader(t,e.headers[t])});var a=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)a=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!o.overrideMimeType;else if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw Error("Invalid value for opts.mode");else n=!0;s._mode=(t=n,r=a,o.fetch&&r?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":"text"),s._fetchTimer=null,s.on("finish",function(){s._onFinish()})};a(h,c.Writable),h.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===p.indexOf(r)&&(this._headers[r]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,s=null;"GET"!==t.method&&"HEAD"!==t.method&&(s=new Blob(e._body,{type:(i["content-type"]||{}).value||""}));var a=[];if(Object.keys(i).forEach(function(e){var t=i[e].name,r=i[e].value;Array.isArray(r)?r.forEach(function(e){a.push([t,e])}):a.push([t,r])}),"fetch"===e._mode){var u=null;if(o.abortController){var c=new AbortController;u=c.signal,e._fetchAbortController=c,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.g.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}r.g.fetch(e._opts.url,{method:e._opts.method,headers:a,body:s||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:u}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.g.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var l=e._xhr=new r.g.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){n.nextTick(function(){e.emit("error",t)});return}"responseType"in l&&(l.responseType=e._mode),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(l.timeout=t.requestTimeout,l.ontimeout=function(){e.emit("requestTimeout")}),a.forEach(function(e){l.setRequestHeader(e[0],e[1])}),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",Error("XHR error"))};try{l.send(s)}catch(t){n.nextTick(function(){e.emit("error",t)});return}}}},h.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},h.prototype._write=function(e,t,r){this._body.push(e),r()},h.prototype.abort=h.prototype.destroy=function(){this._destroyed=!0,r.g.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},h.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(this,e,t,r)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},254:function(e,t,s){var o=s(301),a=s(782),u=s(726),c=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(e,t,s,a){var c=this;if(u.Readable.call(c),c._mode=s,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){n.nextTick(function(){c.emit("close")})}),"fetch"===s){if(c._fetchResponse=t,c.url=t.url,c.statusCode=t.status,c.statusMessage=t.statusText,t.headers.forEach(function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)}),o.writableStream){var l=new WritableStream({write:function(e){return new Promise(function(t,r){c._destroyed?r():c.push(i.from(e))?t():c._resumeFetch=t})},close:function(){r.g.clearTimeout(a),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{t.body.pipeTo(l).catch(function(e){r.g.clearTimeout(a),c._destroyed||c.emit("error",e)});return}catch(e){}}var d=t.body.getReader();!function e(){d.read().then(function(t){if(!c._destroyed){if(t.done){r.g.clearTimeout(a),c.push(null);return}c.push(i.from(t.value)),e()}}).catch(function(e){r.g.clearTimeout(a),c._destroyed||c.emit("error",e)})}()}else if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(t[2])):void 0!==c.headers[r]?c.headers[r]+=", "+t[2]:c.headers[r]=t[2],c.rawHeaders.push(t[1],t[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var h=c.rawHeaders["mime-type"];if(h){var p=h.match(/;\s*charset=([^;])(;|$)/);p&&(c._charset=p[1].toLowerCase())}c._charset||(c._charset="utf-8")}};a(l,u.Readable),l.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text":if((n=t.responseText).length>e._pos){var s=n.substr(e._pos);if("x-user-defined"===e._charset){for(var o=i.alloc(s.length),a=0;a<s.length;a++)o[a]=255&s.charCodeAt(a);e.push(o)}else e.push(s,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==c.DONE||!t.response)break;n=t.response,e.push(i.from(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==c.LOADING||!n)break;e.push(i.from(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==c.LOADING)break;var u=new r.g.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(i.from(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(n)}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}},704:function(e,t,r){"use strict";var n=r(55).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:this.write=h,this.end=p;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(e){e.exports=function(e,r){if(t("noDeprecation"))return e;var n=!1;return function(){if(!n){if(t("throwDeprecation"))throw Error(r);t("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return e.apply(this,arguments)}};function t(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},911:function(e){e.exports=function(){for(var e={},r=0;r<arguments.length;r++){var n=arguments[r];for(var i in n)t.call(n,i)&&(e[i]=n[i])}return e};var t=Object.prototype.hasOwnProperty},300:function(e){"use strict";e.exports=r(67133)},361:function(e){"use strict";e.exports=r(512)},781:function(e){"use strict";e.exports=r(48290)},310:function(e){"use strict";e.exports=r(40692)},837:function(e){"use strict";e.exports=r(40942)}},s={};function o(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}},i=!0;try{t[e](n,n.exports,o),i=!1}finally{i&&delete s[e]}return n.exports}o.ab="//";var a=o(813);e.exports=a}()},19063:function(e,t,r){var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=n&&i&&"function"==typeof i.get?i.get:null,o=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&u&&"function"==typeof u.get?u.get:null,l=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,g=Object.prototype.toString,y=Function.prototype.toString,m=String.prototype.match,v=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,w=String.prototype.toLowerCase,S=RegExp.prototype.test,E=Array.prototype.concat,T=Array.prototype.join,A=Array.prototype.slice,P=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,x=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,D="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===D?"object":"symbol")?Symbol.toStringTag:null,k=Object.prototype.propertyIsEnumerable,C=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function N(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-P(-e):P(e);if(n!==e){var i=String(n),s=v.call(t,i.length+1);return _.call(i,r,"$&_")+"."+_.call(_.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,r,"$&_")}var j=r(24654),L=j.custom,M=H(L)?L:null;function U(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function B(e){return"[object Array]"===z(e)&&(!I||!("object"==typeof e&&I in e))}function F(e){return"[object RegExp]"===z(e)&&(!I||!("object"==typeof e&&I in e))}function H(e){if(D)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,i){var a=r||{};if(G(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(G(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!G(a,"customInspect")||a.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(a,"indent")&&null!==a.indent&&"	"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;return e(v.call(t,0,r.maxStringLength),r)+"... "+n+" more character"+(n>1?"s":"")}return U(_.call(_.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,W),"single",r)}(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var b=String(t);return g?N(t,b):b}if("bigint"==typeof t){var S=String(t)+"n";return g?N(t,S):S}var P=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=P&&P>0&&"object"==typeof t)return B(t)?"[Array]":"[Object]";var x=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=T.call(Array(e.indent+1)," ")}return{base:r,prev:T.call(Array(t+1),r)}}(a,n);if(void 0===i)i=[];else if(V(i,t)>=0)return"[Circular]";function L(t,r,s){if(r&&(i=A.call(i)).push(r),s){var o={depth:a.depth};return G(a,"quoteStyle")&&(o.quoteStyle=a.quoteStyle),e(t,o,n+1,i)}return e(t,a,n+1,i)}if("function"==typeof t&&!F(t)){var q=function(e){if(e.name)return e.name;var t=m.call(y.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),X=Y(t,L);return"[Function"+(q?": "+q:" (anonymous)")+"]"+(X.length>0?" { "+T.call(X,", ")+" }":"")}if(H(t)){var Z=D?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!=typeof t||D?Z:$(Z)}if(t&&"object"==typeof t&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)){for(var ee,et="<"+w.call(String(t.nodeName)),er=t.attributes||[],en=0;en<er.length;en++)et+=" "+er[en].name+"="+U((ee=er[en].value,_.call(String(ee),/"/g,"&quot;")),"double",a);return et+=">",t.childNodes&&t.childNodes.length&&(et+="..."),et+="</"+w.call(String(t.nodeName))+">"}if(B(t)){if(0===t.length)return"[]";var ei=Y(t,L);return x&&!function(e){for(var t=0;t<e.length;t++)if(V(e[t],"\n")>=0)return!1;return!0}(ei)?"["+J(ei,x)+"]":"[ "+T.call(ei,", ")+" ]"}if("[object Error]"===z(t)&&(!I||!("object"==typeof t&&I in t))){var es=Y(t,L);return"cause"in Error.prototype||!("cause"in t)||k.call(t,"cause")?0===es.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(es,", ")+" }":"{ ["+String(t)+"] "+T.call(E.call("[cause]: "+L(t.cause),es),", ")+" }"}if("object"==typeof t&&u){if(M&&"function"==typeof t[M]&&j)return j(t,{depth:P-n});if("symbol"!==u&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var eo=[];return o&&o.call(t,function(e,r){eo.push(L(r,t,!0)+" => "+L(e,t))}),K("Map",s.call(t),eo,x)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ea=[];return l&&l.call(t,function(e){ea.push(L(e,t))}),K("Set",c.call(t),ea,x)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Q("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Q("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Q("WeakRef");if("[object Number]"===z(t)&&(!I||!("object"==typeof t&&I in t)))return $(L(Number(t)));if(function(e){if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}(t))return $(L(O.call(t)));if("[object Boolean]"===z(t)&&(!I||!("object"==typeof t&&I in t)))return $(f.call(t));if("[object String]"===z(t)&&(!I||!("object"==typeof t&&I in t)))return $(L(String(t)));if(!("[object Date]"===z(t)&&(!I||!("object"==typeof t&&I in t)))&&!F(t)){var eu=Y(t,L),ec=C?C(t)===Object.prototype:t instanceof Object||t.constructor===Object,el=t instanceof Object?"":"null prototype",ed=!ec&&I&&Object(t)===t&&I in t?v.call(z(t),8,-1):el?"Object":"",eh=(ec||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ed||el?"["+T.call(E.call([],ed||[],el||[]),": ")+"] ":"");return 0===eu.length?eh+"{}":x?eh+"{"+J(eu,x)+"}":eh+"{ "+T.call(eu,", ")+" }"}return String(t)};var q=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return q.call(e,t)}function z(e){return g.call(e)}function V(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function W(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function $(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function K(e,t,r,n){return e+" ("+t+") {"+(n?J(r,n):T.call(r,", "))+"}"}function J(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+T.call(e,","+r)+"\n"+t.prev}function Y(e,t){var r,n=B(e),i=[];if(n){i.length=e.length;for(var s=0;s<e.length;s++)i[s]=G(e,s)?t(e[s],e):""}var o="function"==typeof x?x(e):[];if(D){r={};for(var a=0;a<o.length;a++)r["$"+o[a]]=o[a]}for(var u in e)G(e,u)&&(!n||String(Number(u))!==u||!(u<e.length))&&(D&&r["$"+u]instanceof Symbol||(S.call(/[^\w$]/,u)?i.push(t(u,e)+": "+t(e[u],e)):i.push(u+": "+t(e[u],e))));if("function"==typeof x)for(var c=0;c<o.length;c++)k.call(e,o[c])&&i.push("["+t(o[c])+"]: "+t(e[o[c]],e));return i}},62578:function(e){"use strict";var t=String.prototype.replace,r=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:n.RFC3986,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986}},76548:function(e,t,r){"use strict";var n=r(81414),i=r(17889),s=r(62578);e.exports={formats:s,parse:i,stringify:n}},17889:function(e,t,r){"use strict";var n=r(19975),i=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t){var r={__proto__:null},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,l=u.split(t.delimiter,c),d=-1,h=t.charset;if(t.charsetSentinel)for(p=0;p<l.length;++p)0===l[p].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[p]?h="utf-8":"utf8=%26%2310003%3B"===l[p]&&(h="iso-8859-1"),d=p,p=l.length);for(p=0;p<l.length;++p)if(p!==d){var p,f,g,y=l[p],m=y.indexOf("]="),v=-1===m?y.indexOf("="):m+1;-1===v?(f=t.decoder(y,o.decoder,h,"key"),g=t.strictNullHandling?null:""):(f=t.decoder(y.slice(0,v),o.decoder,h,"key"),g=n.maybeMap(a(y.slice(v+1),t),function(e){return t.decoder(e,o.decoder,h,"value")})),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=g.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),y.indexOf("[]=")>-1&&(g=s(g)?[g]:g),i.call(r,f)?r[f]=n.combine(r[f],g):r[f]=g}return r},c=function(e,t,r,n){for(var i=n?t:a(t,r),s=e.length-1;s>=0;--s){var o,u=e[s];if("[]"===u&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,l=parseInt(c,10);r.parseArrays||""!==c?!isNaN(l)&&u!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[])[l]=i:"__proto__"!==c&&(o[c]=i):o={0:i}}i=o}return i},l=function(e,t,r,n){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),u=a?s.slice(0,a.index):s,l=[];if(u){if(!r.plainObjects&&i.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var d=0;r.depth>0&&null!==(a=o.exec(s))&&d<r.depth;){if(d+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+s.slice(a.index)+"]"),c(l,t,r,n)}},d=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:o.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}};e.exports=function(e,t){var r=d(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var i="string"==typeof e?u(e,r):e,s=r.plainObjects?Object.create(null):{},o=Object.keys(i),a=0;a<o.length;++a){var c=o[a],h=l(c,i[c],r,"string"==typeof e);s=n.merge(s,h,r)}return!0===r.allowSparse?s:n.compact(s)}},81414:function(e,t,r){"use strict";var n=r(87331),i=r(19975),s=r(62578),o=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,u(t)?t:[t])},d=Date.prototype.toISOString,h=s.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:h,formatter:s.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},f={},g=function e(t,r,s,o,a,c,d,h,g,y,m,v,_,b,w,S){for(var E,T,A=t,P=S,O=0,x=!1;void 0!==(P=P.get(f))&&!x;){var R=P.get(t);if(O+=1,void 0!==R){if(R===O)throw RangeError("Cyclic object value");x=!0}void 0===P.get(f)&&(O=0)}if("function"==typeof h?A=h(r,A):A instanceof Date?A=m(A):"comma"===s&&u(A)&&(A=i.maybeMap(A,function(e){return e instanceof Date?m(e):e})),null===A){if(a)return d&&!b?d(r,p.encoder,w,"key",v):r;A=""}if("string"==typeof(E=A)||"number"==typeof E||"boolean"==typeof E||"symbol"==typeof E||"bigint"==typeof E||i.isBuffer(A))return d?[_(b?r:d(r,p.encoder,w,"key",v))+"="+_(d(A,p.encoder,w,"value",v))]:[_(r)+"="+_(String(A))];var D=[];if(void 0===A)return D;if("comma"===s&&u(A))b&&d&&(A=i.maybeMap(A,d)),T=[{value:A.length>0?A.join(",")||null:void 0}];else if(u(h))T=h;else{var I=Object.keys(A);T=g?I.sort(g):I}for(var k=o&&u(A)&&1===A.length?r+"[]":r,C=0;C<T.length;++C){var N=T[C],j="object"==typeof N&&void 0!==N.value?N.value:A[N];if(!c||null!==j){var L=u(A)?"function"==typeof s?s(k,N):k:k+(y?"."+N:"["+N+"]");S.set(t,O);var M=n();M.set(f,S),l(D,e(j,L,s,o,a,c,"comma"===s&&b&&u(A)?null:d,h,g,y,m,v,_,b,w,M))}}return D},y=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=s.default;if(void 0!==e.format){if(!o.call(s.formatters,e.format))throw TypeError("Unknown format option provided.");r=e.format}var n=s.formatters[r],i=p.filter;return("function"==typeof e.filter||u(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}};e.exports=function(e,t){var r,i,s=e,o=y(t);"function"==typeof o.filter?s=(0,o.filter)("",s):u(o.filter)&&(r=o.filter);var c=[];if("object"!=typeof s||null===s)return"";i=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=a[i];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var h="comma"===d&&t&&t.commaRoundTrip;r||(r=Object.keys(s)),o.sort&&r.sort(o.sort);for(var p=n(),f=0;f<r.length;++f){var m=r[f];o.skipNulls&&null===s[m]||l(c,g(s[m],m,d,h,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,p))}var v=c.join(o.delimiter),_=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""}},19975:function(e,t,r){"use strict";var n=r(62578),i=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(s(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}},u=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:u,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],s=i.obj[i.prop],o=Object.keys(s),u=0;u<o.length;++u){var c=o[u],l=s[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:s,prop:c}),r.push(l))}return a(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,i,s){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var u="",c=0;c<a.length;++c){var l=a.charCodeAt(c);if(45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===n.RFC1738&&(40===l||41===l)){u+=a.charAt(c);continue}if(l<128){u+=o[l];continue}if(l<2048){u+=o[192|l>>6]+o[128|63&l];continue}if(l<55296||l>=57344){u+=o[224|l>>12]+o[128|l>>6&63]+o[128|63&l];continue}c+=1,u+=o[240|(l=65536+((1023&l)<<10|1023&a.charCodeAt(c)))>>18]+o[128|l>>12&63]+o[128|l>>6&63]+o[128|63&l]}return u},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(s(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(s(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var o=t;return(s(t)&&!s(r)&&(o=u(t,n)),s(t)&&s(r))?(r.forEach(function(r,s){if(i.call(t,s)){var o=t[s];o&&"object"==typeof o&&r&&"object"==typeof r?t[s]=e(o,r,n):t.push(r)}else t[s]=r}),t):Object.keys(r).reduce(function(t,s){var o=r[s];return i.call(t,s)?t[s]=e(t[s],o,n):t[s]=o,t},o)}}},87331:function(e,t,r){"use strict";var n=r(51597),i=r(50710),s=r(19063),o=n("%TypeError%"),a=n("%WeakMap%",!0),u=n("%Map%",!0),c=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),d=i("WeakMap.prototype.has",!0),h=i("Map.prototype.get",!0),p=i("Map.prototype.set",!0),f=i("Map.prototype.has",!0),g=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},y=function(e,t){var r=g(e,t);return r&&r.value},m=function(e,t,r){var n=g(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new o("Side channel does not contain "+s(e))},get:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(e)return c(e,n)}else if(u){if(t)return h(t,n)}else if(r)return y(r,n)},has:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(e)return d(e,n)}else if(u){if(t)return f(t,n)}else if(r)return!!g(r,n);return!1},set:function(n,i){a&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new a),l(e,n,i)):u?(t||(t=new u),p(t,n,i)):(r||(r={key:{},next:null}),m(r,n,i))}};return n}},86115:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceBuilder=t.ResponseInterceptor=t.RequestInterceptor=t.BaseService=t.nonHTTPRequestMethod=void 0;let l=o(r(76548)),d=c(r(51138)),h=r(58723),p=r(78769);d.default.defaults.withCredentials=!0;let f="__nonHTTPRequestMethod__";t.nonHTTPRequestMethod=(e,t)=>{Object.defineProperty(e[t],f,{value:!0,writable:!1})};class g{constructor(e){this._endpoint=e.endpoint,this._httpClient=new _(e),this._methodMap=new Map,this._timeout=e.timeout,this._logCallback=e.logCallback;let t=this._getInstanceMethodNames();t.forEach(e=>{this._methodMap[e]=this[e]});let r=this;for(let e of t){let t={enumerable:!0,configurable:!0,get(){let t=r._methodMap[e],n=Object.getOwnPropertyDescriptor(t,f);return n&&!0===n.value||"_logCallback"===e?t:(...t)=>r._wrap(e,t)},set:t=>{r._methodMap[e]=t}};Object.defineProperty(this,e,t)}}isClientStandalone(){return this._httpClient.isStandalone()}useRequestInterceptor(e){return this._httpClient.useRequestInterceptor(e)}useResponseInterceptor(e){return this._httpClient.useResponseInterceptor(e)}ejectRequestInterceptor(e){this._httpClient.ejectRequestInterceptor(e)}ejectResponseInterceptor(e){this._httpClient.ejectResponseInterceptor(e)}setEndpoint(e){this._endpoint=e}setLogCallback(e){this._logCallback=e}setTimeout(e){this._timeout=e}_getInstanceMethodNames(){let e=[],t=this;do e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);while(t);return e.sort().filter((e,t,r)=>e!==r[t+1]&&this[e]&&"function"==typeof this[e])}_wrap(e,t){return u(this,void 0,void 0,function*(){let r,n;let{url:i,method:s,headers:o,query:a,data:u}=this._resolveParameters(e,t),c=this._makeConfig(e,i,s,o,a,u);try{n=yield this._httpClient.sendRequest(c)}catch(e){r=e,n=e.response}if(this._logCallback&&this._logCallback(c,n),r)throw r;return n})}_resolveParameters(e,t){let r=this._resolveUrl(e,t),n=this._resolveHttpMethod(e),i=this._resolveHeaders(e,t),s=this._resolveQuery(e,t),o=this._resolveData(e,i,t);return i["content-type"]&&-1!==i["content-type"].indexOf("multipart/form-data")&&p.isNode&&(i=Object.assign(Object.assign({},i),o.getHeaders())),{url:r,method:n,headers:i,query:s,data:o}}_makeConfig(e,t,r,n,i,s){let o={url:t,method:r,headers:n,params:i,data:s};if(this.__meta__[e].responseType&&(o.responseType=this.__meta__[e].responseType),this.__meta__[e].requestTransformer&&(o.transformRequest=this.__meta__[e].requestTransformer),this.__meta__[e].responseTransformer&&(o.transformResponse=this.__meta__[e].responseTransformer),o.timeout=this.__meta__[e].timeout||this._timeout,this.__meta__[e].deprecated){let t=`[warning] Deprecated method: "${e}". `;this.__meta__[e].deprecatedHint&&(t+=this.__meta__[e].deprecatedHint),console.warn(t)}return this.__meta__[e].queryArrayFormat&&(o.paramsSerializer=t=>l.stringify(t,{arrayFormat:this.__meta__[e].queryArrayFormat})),o=Object.assign(Object.assign({},o),this.__meta__[e].config)}_resolveUrl(e,t){let r=this.__meta__,n=this._endpoint,i=r.basePath,s=r[e].path,o=r[e].pathParams,a=r[e].options||{},u=this.makeURL(n,i,s,a);for(let e in o)o[e]&&(u=u.replace(RegExp(`{${o[e]}}`),t[e]));return u}makeURL(e,t,r,n){let i=/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(r);return i?r:n.ignoreBasePath?[e,r].join(""):[e,t,r].join("")}_resolveHttpMethod(e){let t=this.__meta__;return t[e].method}_resolveHeaders(e,t){let r=this.__meta__,n=r[e].headers||{},i=r[e].headerParams;for(let e in i)i[e]&&(n[i[e]]=t[e]);let s=r[e].headerMapIndex;if(s>=0)for(let e in t[s])t[s][e]&&(n[e]=t[s][e]);return n}_resolveQuery(e,t){let r=this.__meta__,n=r[e].query||{},i=r[e].queryParams;for(let e in i)i[e]&&(n[i[e]]=t[e]);let s=r[e].queryMapIndex;if(s>=0)for(let e in t[s])t[s][e]&&(n[e]=t[s][e]);return n}_resolveData(e,t,r){let n=this.__meta__,i=n[e].bodyIndex,s=n[e].fields||{},o=n[e].parts||{},a=n[e].fieldMapIndex,u=n[e].gqlQuery,c=n[e].gqlOperationName,l=n[e].gqlVariablesIndex,d={};if(i>=0&&(d=Array.isArray(r[i])?r[i]:Object.assign(Object.assign({},d),r[i])),Object.keys(s).length>0){let e={};for(let t in s)s[t]&&(e[s[t]]=r[t]);d=Object.assign(Object.assign({},d),e)}if(a>=0){let e={};for(let t in r[a])r[a][t]&&(e[t]=r[a][t]);d=Object.assign(Object.assign({},d),e)}if(Object.keys(o).length>0){let e={};for(let t in o)o[t]&&(e[o[t]]=r[t]);d=Object.assign(Object.assign({},d),e)}u&&(d.query=u,c&&(d.operationName=c),l>=0&&(d.variables=r[l]));let p=t["content-type"]||"application/json",f=new h.DataResolverFactory,g=f.createDataResolver(p);return g.resolve(t,d)}}s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",Boolean)],g.prototype,"isClientStandalone",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[Function]),a("design:returntype",Number)],g.prototype,"useRequestInterceptor",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[Function]),a("design:returntype",Number)],g.prototype,"useResponseInterceptor",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[Number]),a("design:returntype",void 0)],g.prototype,"ejectRequestInterceptor",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[Number]),a("design:returntype",void 0)],g.prototype,"ejectResponseInterceptor",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String]),a("design:returntype",void 0)],g.prototype,"setEndpoint",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],g.prototype,"setLogCallback",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[Number]),a("design:returntype",void 0)],g.prototype,"setTimeout",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",Array)],g.prototype,"_getInstanceMethodNames",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,Array]),a("design:returntype",Promise)],g.prototype,"_wrap",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,Array]),a("design:returntype",Object)],g.prototype,"_resolveParameters",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,String,String,Object,Object,Object]),a("design:returntype",Object)],g.prototype,"_makeConfig",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,Array]),a("design:returntype",String)],g.prototype,"_resolveUrl",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,String,String,Object]),a("design:returntype",String)],g.prototype,"makeURL",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String]),a("design:returntype",String)],g.prototype,"_resolveHttpMethod",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,Array]),a("design:returntype",Object)],g.prototype,"_resolveHeaders",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,Array]),a("design:returntype",Object)],g.prototype,"_resolveQuery",null),s([t.nonHTTPRequestMethod,a("design:type",Function),a("design:paramtypes",[String,Object,Array]),a("design:returntype",Object)],g.prototype,"_resolveData",null),t.BaseService=g;class y{onRejected(e){}}class m extends y{}t.RequestInterceptor=m;class v extends y{}t.ResponseInterceptor=v,t.ServiceBuilder=class{constructor(){this._endpoint="",this._standalone=!1,this._requestInterceptors=[],this._responseInterceptors=[],this._timeout=6e4,this._logCallback=null}build(e){return new e(this)}setEndpoint(e){return this._endpoint=e,this}setStandalone(e){return this._standalone=e,this}setRequestInterceptors(...e){return this._requestInterceptors.push(...e),this}setResponseInterceptors(...e){return this._responseInterceptors.push(...e),this}setTimeout(e){return this._timeout=e,this}setLogCallback(e){return this._logCallback=e,this}get endpoint(){return this._endpoint}get standalone(){return this._standalone}get requestInterceptors(){return this._requestInterceptors}get responseInterceptors(){return this._responseInterceptors}get timeout(){return this._timeout}get logCallback(){return this._logCallback}};class _{constructor(e){this.axios=d.default,this.standalone=!1,!0===e.standalone?(this.axios=d.default.create(),this.standalone=!0):"function"==typeof e.standalone&&(this.axios=e.standalone),e.requestInterceptors.forEach(e=>{e instanceof m?this.axios.interceptors.request.use(e.onFulfilled.bind(e),e.onRejected.bind(e)):this.axios.interceptors.request.use(e)}),e.responseInterceptors.forEach(e=>{e instanceof v?this.axios.interceptors.response.use(e.onFulfilled.bind(e),e.onRejected.bind(e)):this.axios.interceptors.response.use(e)})}isStandalone(){return this.standalone}sendRequest(e){return u(this,void 0,void 0,function*(){return this.axios(e)})}useRequestInterceptor(e){return this.axios.interceptors.request.use(e)}useResponseInterceptor(e){return this.axios.interceptors.response.use(e)}ejectRequestInterceptor(e){this.axios.interceptors.request.eject(e)}ejectResponseInterceptor(e){this.axios.interceptors.response.eject(e)}}},33036:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpContentType=t.DATA_CONTENT_TYPES=void 0,t.DATA_CONTENT_TYPES=["application/x-www-form-urlencoded","multipart/form-data","application/json","text/xml"],(r=t.HttpContentType||(t.HttpContentType={})).urlencoded="application/x-www-form-urlencoded",r.multipart="multipart/form-data",r.json="application/json",r.xml="text/xml"},58723:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataResolverFactory=t.TextXmlResolver=t.JsonResolver=t.MultiPartResolver=t.FormUrlencodedResolver=t.BaseDataResolver=void 0;let a=s(r(76548)),u=o(r(8810)),c=r(33036);class l{resolve(e,t){throw Error("Can not call this method in BaseDataResolver.")}}t.BaseDataResolver=l;class d extends l{constructor(){super()}resolve(e,t){return(e=>{let t={};for(let r in e)e.hasOwnProperty(r)&&("object"==typeof e[r]?t[r]=JSON.stringify(e[r]):t[r]=e[r]);return a.stringify(t)})(t)}}t.FormUrlencodedResolver=d;class h extends l{constructor(){super()}resolve(e,t){let r=new u.default;for(let e in t)if(Array.isArray(t[e]))for(let n of t[e]){let t=this.getFormDataAppendOptions(n);r.append(e,n.value,t)}else if(Array.isArray(t[e].value))for(let n of t[e].value){let i=this.getFormDataAppendOptions(t[e]);r.append(e,n,i)}else{let n=this.getFormDataAppendOptions(t[e]);r.append(e,t[e].value,n)}return r}getFormDataAppendOptions(e){let t={};return Object.keys(e).forEach(r=>{"value"!==r&&(t[r]=e[r])}),t}}t.MultiPartResolver=h;class p extends l{constructor(){super()}resolve(e,t){return t}}t.JsonResolver=p;class f extends l{constructor(){super()}resolve(e,t){return t}}t.TextXmlResolver=f;let g=new Map;g.set("application/x-www-form-urlencoded",d),g.set("multipart/form-data",h),g.set("application/json",p),g.set("text/xml",f),t.DataResolverFactory=class{createDataResolver(e){let t=e.toLowerCase();for(let e of c.DATA_CONTENT_TYPES)if(t.includes(e)){let t=this._getDataResolverCls(e);return new t}return new(this._getDataResolverCls("application/json"))}_getDataResolverCls(e){return g.get(e)||p}}},50003:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deprecated=t.GraphQLVariables=t.GraphQL=t.Config=t.ResponseStatus=t.Timeout=t.ResponseTransformer=t.RequestTransformer=t.ResponseType=t.Part=t.Multipart=t.FieldMap=t.Field=t.FormUrlEncoded=t.QueryMap=t.Query=t.Queries=t.QueryArrayFormat=t.HeaderMap=t.Header=t.Headers=t.Body=t.Path=t.BasePath=t.OPTIONS=t.HEAD=t.DELETE=t.PATCH=t.PUT=t.POST=t.GET=void 0;let r=(e,t)=>{e.__meta__||(e.__meta__={}),e.__meta__[t]||(e.__meta__[t]={})},n=(e,t,n)=>(i,s,o)=>{r(i,s),i.__meta__[s].method=e,i.__meta__[s].path=t,i.__meta__[s].options=n};t.GET=(e,t)=>n("GET",e,t),t.POST=(e,t)=>n("POST",e,t),t.PUT=(e,t)=>n("PUT",e,t),t.PATCH=(e,t)=>n("PATCH",e,t),t.DELETE=(e,t)=>n("DELETE",e,t),t.HEAD=(e,t)=>n("HEAD",e,t),t.OPTIONS=(e,t)=>n("OPTIONS",e,t),t.BasePath=e=>t=>{r(t.prototype,"basePath"),t.prototype.__meta__.basePath=e},t.Path=e=>(t,n,i)=>{r(t,n),t.__meta__[n].pathParams||(t.__meta__[n].pathParams={}),t.__meta__[n].pathParams[i]=e},t.Body=(e,t,n)=>{r(e,t),e.__meta__[t].bodyIndex=n},t.Headers=e=>(t,n,i)=>{r(t,n),t.__meta__[n].headers||(t.__meta__[n].headers={}),t.__meta__[n].headers=e},t.Header=e=>(t,n,i)=>{r(t,n),t.__meta__[n].headerParams||(t.__meta__[n].headerParams={}),t.__meta__[n].headerParams[i]=e},t.HeaderMap=(e,t,n)=>{r(e,t),e.__meta__[t].headerMapIndex=n},t.QueryArrayFormat=e=>(t,n,i)=>{r(t,n),t.__meta__[n].queryArrayFormat=e},t.Queries=e=>(t,n,i)=>{r(t,n),t.__meta__[n].query||(t.__meta__[n].query={}),t.__meta__[n].query=e},t.Query=e=>(t,n,i)=>{r(t,n),t.__meta__[n].queryParams||(t.__meta__[n].queryParams={}),t.__meta__[n].queryParams[i]=e},t.QueryMap=(e,t,n)=>{r(e,t),e.__meta__[t].queryMapIndex=n},t.FormUrlEncoded=(e,r,n)=>{(0,t.Headers)({"content-type":"application/x-www-form-urlencoded;charset=utf-8"})(e,r,n)},t.Field=e=>(t,n,i)=>{r(t,n),t.__meta__[n].fields||(t.__meta__[n].fields={}),t.__meta__[n].fields[i]=e},t.FieldMap=(e,t,n)=>{r(e,t),e.__meta__[t].fieldMapIndex=n},t.Multipart=(e,r,n)=>{(0,t.Headers)({"content-type":"multipart/form-data"})(e,r,n)},t.Part=e=>(t,n,i)=>{r(t,n),t.__meta__[n].parts||(t.__meta__[n].parts={}),t.__meta__[n].parts[i]=e},t.ResponseType=e=>(t,n)=>{r(t,n),t.__meta__[n].responseType=e},t.RequestTransformer=e=>(t,n)=>{r(t,n),t.__meta__[n].requestTransformer=e},t.ResponseTransformer=e=>(t,n)=>{r(t,n),t.__meta__[n].responseTransformer=e},t.Timeout=e=>(t,n)=>{r(t,n),t.__meta__[n].timeout=e},t.ResponseStatus=e=>(t,n)=>{r(t,n),t.__meta__[n].responseStatus=e},t.Config=e=>(t,n)=>{r(t,n),t.__meta__[n].config=e},t.GraphQL=(e,t)=>(n,i)=>{r(n,i),n.__meta__[i].gqlQuery=e,n.__meta__[i].gqlOperationName=t},t.GraphQLVariables=(e,t,n)=>{r(e,t),e.__meta__[t].gqlVariablesIndex=n},t.Deprecated=e=>(t,n,i)=>{r(t,n),t.__meta__[n].deprecated=!0,t.__meta__[n].deprecatedHint=e}},74810:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(86115),t),i(r(50003),t)},78769:function(e,t,r){"use strict";var n=r(25566);Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=void 0,t.isNode=void 0!==n&&null!=n.versions&&null!=n.versions.node},51138:function(e,t,r){e.exports=r(5110)},51046:function(e,t,r){"use strict";var n=r(18983),i=r(17929),s=r(14187),o=r(69615),a=r(80879),u=r(12326),c=r(66579),l=r(21533);e.exports=function(e){return new Promise(function(t,r){var d=e.data,h=e.headers,p=e.responseType;n.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(g+":"+y)}var m=a(e.baseURL,e.url);function v(){if(f){var n="getAllResponseHeaders"in f?u(f.getAllResponseHeaders()):null;i(t,r,{data:p&&"text"!==p&&"json"!==p?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}}if(f.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(v)},f.onabort=function(){f&&(r(l("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var _=(e.withCredentials||c(m))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;_&&(h[e.xsrfHeaderName]=_)}"setRequestHeader"in f&&n.forEach(h,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)}),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),p&&"json"!==p&&(f.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),r(e),f=null)}),d||(d=null),f.send(d)})}},5110:function(e,t,r){"use strict";var n=r(18983),i=r(74260),s=r(19507),o=r(35299);function a(e){var t=new s(e),r=i(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var u=a(r(59758));u.Axios=s,u.create=function(e){return a(o(u.defaults,e))},u.Cancel=r(34839),u.CancelToken=r(51860),u.isCancel=r(61939),u.all=function(e){return Promise.all(e)},u.spread=r(11552),u.isAxiosError=r(78809),e.exports=u,e.exports.default=u},34839:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},51860:function(e,t,r){"use strict";var n=r(34839);function i(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},61939:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},19507:function(e,t,r){"use strict";var n=r(18983),i=r(69615),s=r(66457),o=r(83054),a=r(35299),u=r(10704),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,r=e.transitional;void 0!==r&&u.assertOptions(r,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(i=i&&t.synchronous,n.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!i){var l=[o,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(s),t=Promise.resolve(e);l.length;)t=t.then(l.shift(),l.shift());return t}for(var d=e;n.length;){var h=n.shift(),p=n.shift();try{d=h(d)}catch(e){p(e);break}}try{t=o(d)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},l.prototype.getUri=function(e){return i((e=a(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(e){l.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}}),n.forEach(["post","put","patch"],function(e){l.prototype[e]=function(t,r,n){return this.request(a(n||{},{method:e,url:t,data:r}))}}),e.exports=l},66457:function(e,t,r){"use strict";var n=r(18983);function i(){this.handlers=[]}i.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},80879:function(e,t,r){"use strict";var n=r(22278),i=r(15803);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},21533:function(e,t,r){"use strict";var n=r(21506);e.exports=function(e,t,r,i,s){return n(Error(e),t,r,i,s)}},83054:function(e,t,r){"use strict";var n=r(18983),i=r(18667),s=r(61939),o=r(59758);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return a(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(a(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},21506:function(e){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},35299:function(e,t,r){"use strict";var n=r(18983);e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function c(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=u(void 0,e[i])):r[i]=u(e[i],t[i])}n.forEach(i,function(e){n.isUndefined(t[e])||(r[e]=u(void 0,t[e]))}),n.forEach(s,c),n.forEach(o,function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=u(void 0,e[i])):r[i]=u(void 0,t[i])}),n.forEach(a,function(n){n in t?r[n]=u(e[n],t[n]):n in e&&(r[n]=u(void 0,e[n]))});var l=i.concat(s).concat(o).concat(a),d=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===l.indexOf(e)});return n.forEach(d,c),r}},17929:function(e,t,r){"use strict";var n=r(21533);e.exports=function(e,t,r){var i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},18667:function(e,t,r){"use strict";var n=r(18983),i=r(59758);e.exports=function(e,t,r){var s=this||i;return n.forEach(r,function(r){e=r.call(s,e,t)}),e}},59758:function(e,t,r){"use strict";var n,i=r(25566),s=r(18983),o=r(14867),a=r(21506),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?n=r(51046):void 0!==i&&"[object process]"===Object.prototype.toString.call(i)&&(n=r(51046)),n),transformRequest:[function(e,t){return(o(t,"Accept"),o(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e))?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,r){if(s.isString(e))try{return(0,JSON.parse)(e),s.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&s.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(e){l.headers[e]={}}),s.forEach(["post","put","patch"],function(e){l.headers[e]=s.merge(u)}),e.exports=l},74260:function(e){"use strict";e.exports=function(e,t){return function(){for(var r=Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},69615:function(e,t,r){"use strict";var n=r(18983);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var s,o=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))}))}),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},15803:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},14187:function(e,t,r){"use strict";var n=r(18983);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},22278:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},78809:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},66579:function(e,t,r){"use strict";var n=r(18983);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},14867:function(e,t,r){"use strict";var n=r(18983);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},12326:function(e,t,r){"use strict";var n=r(18983),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,o={};return e&&n.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t&&!(o[t]&&i.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([r]):o[t]=o[t]?o[t]+", "+r:r)}),o}},11552:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},10704:function(e,t,r){"use strict";var n=r(71359),i={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var s={},o=n.version.split(".");function a(e,t){for(var r=t?t.split("."):o,n=e.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])break}return!1}i.transitional=function(e,t,r){var i=t&&a(t);function o(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,a){if(!1===e)throw Error(o(n," has been removed in "+t));return i&&!s[n]&&(s[n]=!0,console.warn(o(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},e.exports={isOlderVersion:a,assertOptions:function(e,t,r){if("object"!=typeof e)throw TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],o=t[s];if(o){var a=e[s],u=void 0===a||o(a,s,e);if(!0!==u)throw TypeError("option "+s+" must be "+u);continue}if(!0!==r)throw Error("Unknown option "+s)}},validators:i}},18983:function(e,t,r){"use strict";var n=r(74260),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,n){u(t[n])&&u(r)?t[n]=e(t[n],r):u(r)?t[n]=e({},r):s(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)l(arguments[n],r);return t},extend:function(e,t,r){return l(t,function(t,i){r&&"function"==typeof t?e[i]=n(t,r):e[i]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},8810:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},20475:function(e,t,r){"use strict";r.r(t),r.d(t,{APINotImplementedException:function(){return ey},AboutService:function(){return tU},AccessToken:function(){return tk},AggregatedCondition:function(){return rD},AggregatedExecutable:function(){return rJ},AlreadyExistsException:function(){return ef},AndCondition:function(){return rk},AnonymousScriptRunner:function(){return rO},AppContext:function(){return eb},AppContextParameters:function(){return ne},AppInfo:function(){return rc},ApplicationNotFoundException:function(){return ep},AscendingSortItem:function(){return r7},AuthService:function(){return eT},Backup:function(){return nn},BackupDetail:function(){return ni},BackupInfo:function(){return rd},BackupIsInProcessException:function(){return Z},BackupNotFoundException:function(){return eo},BackupResult:function(){return t8},BackupResultResult:function(){return h},BackupResultState:function(){return d},BackupService:function(){return rt},BackupSubscription:function(){return rS},BadContextProviderException:function(){return N},BadRequestException:function(){return Y},Collection:function(){return tX},CollectionNotFoundException:function(){return eu},Condition:function(){return rR},Context:function(){return t2},CountExecutable:function(){return rW},CountExecutableBody:function(){return rV},CountOptions:function(){return r8},DIDNotPublishedException:function(){return j},DIDResolveException:function(){return G},DIDResolverAlreadySetupException:function(){return U},DIDResolverNotSetupException:function(){return L},DIDResolverSetupException:function(){return M},DatabaseService:function(){return t1},DefaultAppContextProvider:function(){return nt},DeleteExecutable:function(){return rq},DeleteExecutableBody:function(){return rH},DescendingSortItem:function(){return r9},DeserializationError:function(){return W},ElaDidErrorException:function(){return ee},Executable:function(){return rN},ExecutableDatabaseBody:function(){return rj},ExecutableFileBody:function(){return rL},ExecutableType:function(){return rC},FileDownloadExecutable:function(){return rX},FileHashExecutable:function(){return rK},FileInfo:function(){return tz},FileNotFoundException:function(){return el},FilePropertiesExecutable:function(){return rZ},FileUploadExecutable:function(){return rY},FilesService:function(){return tQ},FilledOrderDetail:function(){return ns},FindExecutable:function(){return rz},FindExecutableBody:function(){return rG},FindOptions:function(){return r3},ForbiddenException:function(){return er},HashInfo:function(){return tV},HiveBackupContext:function(){return nr},HiveException:function(){return k},IOException:function(){return V},IllegalArgumentException:function(){return C},IllegalDidFormatException:function(){return B},InsertExecutable:function(){return rQ},InsertExecutableBody:function(){return r$},InsertOptions:function(){return r2},InsertResult:function(){return tK},InsufficientStorageException:function(){return em},InvalidParameterException:function(){return X},IpfsRunner:function(){return rE},JWTException:function(){return z},Logger:function(){return I},MalformedDIDException:function(){return Q},NetworkException:function(){return J},NodeInfo:function(){return tL},NodeVersion:function(){return tj},NotFoundException:function(){return ei},NotImplementedException:function(){return F},OrCondition:function(){return rI},Order:function(){return ry},OrderNotFoundException:function(){return ed},OrderState:function(){return p},PathNotExistException:function(){return H},PaymentService:function(){return rb},PricingPlan:function(){return rh},PricingPlanNotFoundException:function(){return ec},PromotionService:function(){return rA},Provider:function(){return nu},ProviderNotSetException:function(){return q},QueryHasResultCondition:function(){return rF},QueryHasResultConditionBody:function(){return rB},QueryHasResultConditionOptions:function(){return rU},QueryOptions:function(){return r5},Receipt:function(){return rm},ReceiptNotFoundException:function(){return eh},ScriptNotFoundException:function(){return ea},ScriptRunner:function(){return rP},ScriptingService:function(){return t5},ServerException:function(){return eg},ServerUnknownException:function(){return ev},ServiceEndpoint:function(){return tB},SortItem:function(){return r6},SubscriptionInfo:function(){return rl},UnauthorizedException:function(){return et},UpdateExecutable:function(){return r1},UpdateExecutableBody:function(){return r0},UpdateOptions:function(){return r4},UpdateResult:function(){return tJ},Vault:function(){return rg},VaultDetail:function(){return no},VaultFrozenException:function(){return en},VaultInfo:function(){return rp},VaultNotFoundException:function(){return es},VaultSubscription:function(){return rM}});var n,i,s,o,a,u,c,l,d,h,p,f=r(26588),g=r(74810),y=r(69810),m=r(67133),v=r(48290),_=r(67171),b=r(54131),w=r(72909),S=r(83104),E=r(74548),T=r(67133).Buffer;/*
  @license
    hive.js v2.9.12
    Wed, 13 Sep 2023 02:59:53 GMT - commit unknown

    Released under the MIT License.
*/function A(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function P(e,t){return function(r,n){t(r,n,e)}}function O(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function x(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}class R{}R.SEPARATOR="/";class D{constructor(e,t){this.id=e,this.name=t}}class I{constructor(e){this.context=e||"",this.cid=this.initializeCID()}static setDefaultLevel(e){I.DEFAULT_LOG_LEVEL=e}static getDefaultLevel(){return I.DEFAULT_LOG_LEVEL}setLevel(e){this.logLevel=e}getLevel(){return this.logLevel?this.logLevel:I.DEFAULT_LOG_LEVEL}levelIs(e){let t=this.logLevel?this.logLevel:I.DEFAULT_LOG_LEVEL;return e.id>=t.id}initializeCID(){return this.cid=Math.random().toString(36).substring(2,9),this.cid}currentCID(){return this.cid}resetCID(){this.cid=""}log(...e){this.getLevel().id<=I.INFO.id&&console.log(this.format(I.INFO,e))}info(...e){this.getLevel().id<=I.INFO.id&&console.log(this.format(I.INFO,e))}debug(...e){this.getLevel().id<=I.DEBUG.id&&console.log(this.format(I.DEBUG,e))}trace(...e){this.getLevel().id<=I.TRACE.id&&console.log(this.format(I.TRACE,e))}warn(...e){this.getLevel().id<=I.WARNING.id&&console.log(this.format(I.WARNING,e))}error(...e){this.getLevel().id<=I.ERROR.id&&console.log(this.format(I.ERROR,e))}format(e,t){let r=(new Date).toISOString()+" "+e.name.toUpperCase()+" "+this.context+" "+(this.cid?"("+this.cid+") ":"");if(!t||t.length<1)return r;let n=String(t[0]);for(let e=1;e<t.length;e++)n=n.replace(/\{\}/,String(t[e]));return r+" "+n}}I.TRACE=new D(0,"TRACE"),I.DEBUG=new D(1,"DEBUG"),I.INFO=new D(2,"INFO"),I.WARNING=new D(3,"WARN"),I.ERROR=new D(4,"ERROR"),I.DEFAULT_LOG_LEVEL=I.TRACE;class k extends Error{constructor(e,t){super(e+(t?"\nCaused by: "+t.message+(t.stack?"\nCaused by: "+t.stack:""):"")),this.causedBy=t,Object.setPrototypeOf(this,new.target.prototype)}}class C extends k{}class N extends k{}class j extends k{}class L extends k{}class M extends k{}class U extends k{}class B extends k{}class F extends k{}class H extends k{}class q extends k{}class G extends k{}class z extends k{}class V extends k{}class W extends k{}class $ extends k{}class Q extends C{}class K extends C{}class J extends k{constructor(e,t){super("Unknown network exception with message: "+e,t)}}class Y extends k{}class X extends k{}class Z extends k{}class ee extends k{}class et extends k{}class er extends k{}class en extends k{}class ei extends k{}class es extends k{}class eo extends k{}class ea extends k{}class eu extends k{}class ec extends k{}class el extends k{}class ed extends k{}class eh extends k{}class ep extends k{}class ef extends k{}class eg extends k{}class ey extends k{}class em extends k{}class ev extends k{}class e_{static forHttpCode(e,t,r,n){let i=t||"";switch(e){case e_.BAD_REQUEST:return r==this.IC_INVALID_PARAMETER?new X(i,n):r==this.IC_BACKUP_IS_IN_PROCESS?new Z(i,n):r==this.IC_ELADID_ERROR?new ee(i,n):new Y(i,n);case e_.UNAUTHORIZED:return new et(i,n);case e_.FORBIDDEN:return r==this.IC_VAULT_FROZEN?new en(i,n):new er(i,n);case e_.NOT_FOUND:return r==this.IC_VAULT_NOT_FOUND?new es(i,n):r==this.IC_BACKUP_NOT_FOUND?new eo(i,n):r==this.IC_SCRIPT_NOT_FOUND?new ea(i,n):r==this.IC_COLLECTION_NOT_FOUND?new eu(i,n):r==this.IC_PRICING_PLAN_NOT_FOUND?new ec(i,n):r==this.IC_FILE_NOT_FOUND?new el(i,n):r==this.IC_ORDER_NOT_FOUND?new ed(i,n):r==this.IC_RECEIPT_NOT_FOUND?new eh(i,n):r==this.IC_APPLICATION_NOT_FOUND?new ep(i,n):new ei(i,n);case e_.ALREADY_EXISTS:return new ef(i,n);case e_.SERVER_EXCEPTION:return new eg(i,n);case e_.NOT_IMPLEMENTED:return new ey(i,n);case e_.INSUFFICIENT_STORAGE:return new em(i,n);default:return new ev(i,n)}}}e_.BAD_REQUEST=400,e_.UNAUTHORIZED=401,e_.FORBIDDEN=403,e_.NOT_FOUND=404,e_.ALREADY_EXISTS=455,e_.SERVER_EXCEPTION=500,e_.NOT_IMPLEMENTED=501,e_.INSUFFICIENT_STORAGE=507,e_.IC_INVALID_PARAMETER=1,e_.IC_BACKUP_IS_IN_PROCESS=2,e_.IC_ELADID_ERROR=3,e_.IC_VAULT_FROZEN=1,e_.IC_VAULT_NOT_FOUND=1,e_.IC_BACKUP_NOT_FOUND=2,e_.IC_SCRIPT_NOT_FOUND=3,e_.IC_COLLECTION_NOT_FOUND=4,e_.IC_PRICING_PLAN_NOT_FOUND=5,e_.IC_FILE_NOT_FOUND=6,e_.IC_ORDER_NOT_FOUND=7,e_.IC_RECEIPT_NOT_FOUND=8,e_.IC_APPLICATION_NOT_FOUND=9;class eb{constructor(e,t,r){this.contextProvider=e,this.userDid=t,this.appDid=r,this.forceResolve=!1,this.networkTimeout=3e4}static setNetworkTimeout(e){eb.networkTimeout=e}static getNetworkTimeout(){return eb.networkTimeout}getAppContextProvider(){return this.contextProvider}getUserDid(){return this.userDid}getAppDid(){return this.appDid}getProviderAddress(){return x(this,void 0,void 0,function*(){return yield eb.getProviderAddressByUserDid(this.userDid,null,this.forceResolve)})}static setupResolver(e,t){if(null==t||null==e)throw new C("Invalid parameters to setup DID resolver");if(eb.resolverHasSetup)throw new U;this.LOG.trace("Initializing DIDBackend with "+e),f.DIDBackend.initialize(new f.DefaultDIDAdapter(e)),eb.resolverHasSetup=!0}static build(e,t,r){if(null==e)throw new C("Missing AppContext provider");if(null==t)throw new C("Missing user DID");if(null==r)throw new C("Missing an application DID when creating AppContext instance");if(null==e.getLocalDataDir())throw new N("Missing method to acquire data location");if(null==e.getAppInstanceDocument())throw new N("Missing method to acquire App instance DID document");if(!eb.resolverHasSetup)throw new L;return new eb(e,t,r)}setUserDidForceResolveFlag(e){return this.forceResolve=e,this}static getProviderAddressByUserDid(e,t,r){return x(this,void 0,void 0,function*(){if(null==e)throw new C("Missing input parameter for target Did");if(null!=t)return t;try{let t=null,n=new f.DID(e),i=yield n.resolve(!!r);if(null==i)throw new j("The DID "+e+" has not published onto sideChain");if(t=i.selectServices(null,"HiveVault"),null==t||0==t.length)throw new q("No 'HiveVault' services declared on DID document "+e);return t[0].getServiceEndpoint()}catch(t){throw eb.LOG.error(`Resolve the hive url from did ${e} failed: ${t}, ${t.stack}`),t instanceof Q?new C("Malformed did string: "+e,t):t instanceof G?new J("Resolving DID failed: "+t.message,t):t}})}}eb.LOG=new I("AppContext"),eb.networkTimeout=3e4,eb.debug=!1,eb.resolverHasSetup=!1;class ew{static handleResponseData(e,t){if(!e)return e;let r=null;try{if(r=JSON.parse(e),"error"in r&&r.error&&"message"in r.error)return r}catch(e){}return t?r?t(r):e:T.from(e,"binary")}}class eS{constructor(e){this.serviceContext=e}getServiceContext(){return this.serviceContext}getEncryptionCipher(e,t,r){return x(this,void 0,void 0,function*(){let n=this.serviceContext.getAppContext().getAppContextProvider().getAppInstanceDocument();return yield n.createCipher(e,t,r)})}getAPI(e,t){return x(this,void 0,void 0,function*(){return null==this.api&&(this.api=(new g.ServiceBuilder).setEndpoint((yield this.serviceContext.getProviderAddress())).setRequestInterceptors(e=>(eS._LOG.info("REQUEST: URL={}, METHOD={}, TOKEN={}, {}",e.url,e.method,"Authorization"in e.headers?e.headers.Authorization:"null",`ARGS=${JSON.stringify(e.params)}, BODY=${JSON.stringify(e.data)}`),e.withCredentials=!1,e.timeout=eb.getNetworkTimeout(),e.maxContentLength=1/0,e.maxBodyLength=1/0,t?Object.assign(Object.assign({},e),t):e)).setResponseInterceptors(e=>(eS._LOG.info("RESPONSE: URL={}, METHOD={}, STATUS={}, BODY={}",e.config.url,e.config.method,e.status,JSON.stringify(e.data)),e)).build(e)),this.api})}callAPI(e,t,r){return x(this,void 0,void 0,function*(){let n=yield this.getAPI(e,r);try{let e=yield t(n);if(!e)throw new ev;return e.data}catch(e){yield this.handleResponseError(e)}})}getAccessToken(){return x(this,void 0,void 0,function*(){if(!this.serviceContext.hasAppContext())return"";let e=this.serviceContext.getAccessToken();return"token "+(yield e.fetch())})}tryHandleResponseError(e){return x(this,void 0,void 0,function*(){if(!("response"in e)||!e.response||"object"!=typeof e.response)return;"config"in e&&"url"in e.config&&e.config.url&&eS._LOG.info("ERROR RESPONSE: URL={}, METHOD={}, STATUS={}, BODY={}",e.config.url,e.config.method,JSON.stringify(e.response.status),JSON.stringify(e.response.data));let t=e.response;if(t.status>=300){401==t.status&&this.serviceContext.hasAppContext()&&(yield this.serviceContext.getAccessToken().invalidate());let[e,r,n,i]=[t.status,-1,"",t.data];throw i&&"object"==typeof i&&"error"in i&&"message"in i.error&&("internal_code"in i.error&&(r=i.error.internal_code),n=i.error.message),e_.forHttpCode(e,n,r)}})}handleResponseError(e){return x(this,void 0,void 0,function*(){throw e instanceof Error&&(yield this.tryHandleResponseError(e)),new J(e.message,e)})}}eS._LOG=new I("RestServiceT");let eE=class extends g.BaseService{signIn(e){return x(this,void 0,void 0,function*(){throw new F})}auth(e){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.POST)("/did/signin"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.challenge)),P(0,g.Body),O("design:type",Function),O("design:paramtypes",[Object]),O("design:returntype",Promise)],eE.prototype,"signIn",null),A([(0,g.POST)("/did/auth"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.token)),P(0,g.Body),O("design:type",Function),O("design:paramtypes",[Object]),O("design:returntype",Promise)],eE.prototype,"auth",null),eE=A([(0,g.BasePath)("/api/v2")],eE);class eT extends eS{constructor(e){super(e),this.contextProvider=e.getAppContext().getAppContextProvider()}fetch(){return x(this,void 0,void 0,function*(){eT.LOG.trace("fetch::start fetch the access token");let e=this.contextProvider.getAppInstanceDocument();eT.LOG.trace("fetch::application instance document:"+e.toString(!0));let t=null;try{t=yield this.signIn(e),eT.LOG.debug("fetch::challenge :"+t)}catch(e){throw new et("Failed to get token with signin()",e)}try{let e=yield this.contextProvider.getAuthorization(t);eT.LOG.debug("fetch::challenge response "+e);let r=yield this.auth(e,this.contextProvider.getAppInstanceDocument());return eT.LOG.debug("fetch::token "+r),r}catch(e){throw new et("Failed to get token with auth()",e)}})}signIn(e){return x(this,void 0,void 0,function*(){let t=yield this.callAPI(eE,t=>x(this,void 0,void 0,function*(){return yield t.signIn({id:JSON.parse(e.toString(!0))})}));return this.checkValid(t,e.getSubject().toString())})}auth(e,t){return x(this,void 0,void 0,function*(){let r=yield this.callAPI(eE,t=>x(this,void 0,void 0,function*(){return yield t.auth({challenge_response:e})}));return this.checkValid(r,t.getSubject().toString())})}checkValid(e,t){return x(this,void 0,void 0,function*(){let r=null;try{r=(yield(new f.JWTParserBuilder).setAllowedClockSkewSeconds(300).build().parse(e)).getBody(),eT.LOG.trace("Claims->getExpiration(): "+(1e3*r.getExpiration()>Date.now()).toString()),eT.LOG.trace("Claims->getAudience(): "+r.getAudience()+":"+t),eT.LOG.trace("is equal:"+(r.getAudience()===t).toString())}catch(e){throw new z(`failed to parse jwt string: ${JSON.stringify(e)}`,e)}if(1e3*r.getExpiration()<Date.now())throw new z("jwt string expired");if(r.getAudience()!==t)throw new z(`jwt string with invalid audience: ${r.getAudience()}, expected: ${t}`);return e})}}function eA(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}eT.LOG=new I("AuthService");var eP={exports:{}};"function"==typeof Object.create?eP.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:eP.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var eO={exports:{}},ex=eA(o||(o=r.t(m,2)));/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */!function(e,t){var r=ex.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=ex:(n(ex,t),t.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return ex.SlowBuffer(e)}}(eO,eO.exports);var eR=eA(a||(a=r.t(v,2))),eD=eO.exports.Buffer,eI=eR.Transform;function ek(e){eI.call(this),this._block=eD.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}(0,eP.exports)(ek,eI),ek.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},ek.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},ek.prototype.update=function(e,t){if(function(e,t){if(!eD.isBuffer(e)&&"string"!=typeof e)throw TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw Error("Digest already called");eD.isBuffer(e)||(e=eD.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var s=0,o=8*e.length;o>0;++s)this._length[s]+=o,(o=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*o);return this},ek.prototype._update=function(){throw Error("_update is not implemented")},ek.prototype.digest=function(e){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},ek.prototype._digest=function(){throw Error("_digest is not implemented")};var eC=eP.exports,eN=eO.exports.Buffer,ej=Array(16);function eL(){ek.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function eM(e,t){return e<<t|e>>>32-t}function eU(e,t,r,n,i,s,o){return eM(e+(t&r|~t&n)+i+s|0,o)+t|0}function eB(e,t,r,n,i,s,o){return eM(e+(t&n|r&~n)+i+s|0,o)+t|0}function eF(e,t,r,n,i,s,o){return eM(e+(t^r^n)+i+s|0,o)+t|0}function eH(e,t,r,n,i,s,o){return eM(e+(r^(t|~n))+i+s|0,o)+t|0}eC(eL,ek),eL.prototype._update=function(){for(var e=0;e<16;++e)ej[e]=this._block.readInt32LE(4*e);var t=this._a,r=this._b,n=this._c,i=this._d;t=eU(t,r,n,i,ej[0],3614090360,7),i=eU(i,t,r,n,ej[1],3905402710,12),n=eU(n,i,t,r,ej[2],606105819,17),r=eU(r,n,i,t,ej[3],3250441966,22),t=eU(t,r,n,i,ej[4],4118548399,7),i=eU(i,t,r,n,ej[5],1200080426,12),n=eU(n,i,t,r,ej[6],2821735955,17),r=eU(r,n,i,t,ej[7],4249261313,22),t=eU(t,r,n,i,ej[8],1770035416,7),i=eU(i,t,r,n,ej[9],2336552879,12),n=eU(n,i,t,r,ej[10],4294925233,17),r=eU(r,n,i,t,ej[11],2304563134,22),t=eU(t,r,n,i,ej[12],1804603682,7),i=eU(i,t,r,n,ej[13],4254626195,12),n=eU(n,i,t,r,ej[14],2792965006,17),t=eB(t,r=eU(r,n,i,t,ej[15],1236535329,22),n,i,ej[1],4129170786,5),i=eB(i,t,r,n,ej[6],3225465664,9),n=eB(n,i,t,r,ej[11],643717713,14),r=eB(r,n,i,t,ej[0],3921069994,20),t=eB(t,r,n,i,ej[5],3593408605,5),i=eB(i,t,r,n,ej[10],38016083,9),n=eB(n,i,t,r,ej[15],3634488961,14),r=eB(r,n,i,t,ej[4],3889429448,20),t=eB(t,r,n,i,ej[9],568446438,5),i=eB(i,t,r,n,ej[14],3275163606,9),n=eB(n,i,t,r,ej[3],4107603335,14),r=eB(r,n,i,t,ej[8],1163531501,20),t=eB(t,r,n,i,ej[13],2850285829,5),i=eB(i,t,r,n,ej[2],4243563512,9),n=eB(n,i,t,r,ej[7],1735328473,14),t=eF(t,r=eB(r,n,i,t,ej[12],2368359562,20),n,i,ej[5],4294588738,4),i=eF(i,t,r,n,ej[8],2272392833,11),n=eF(n,i,t,r,ej[11],1839030562,16),r=eF(r,n,i,t,ej[14],4259657740,23),t=eF(t,r,n,i,ej[1],2763975236,4),i=eF(i,t,r,n,ej[4],1272893353,11),n=eF(n,i,t,r,ej[7],4139469664,16),r=eF(r,n,i,t,ej[10],3200236656,23),t=eF(t,r,n,i,ej[13],681279174,4),i=eF(i,t,r,n,ej[0],3936430074,11),n=eF(n,i,t,r,ej[3],3572445317,16),r=eF(r,n,i,t,ej[6],76029189,23),t=eF(t,r,n,i,ej[9],3654602809,4),i=eF(i,t,r,n,ej[12],3873151461,11),n=eF(n,i,t,r,ej[15],530742520,16),t=eH(t,r=eF(r,n,i,t,ej[2],3299628645,23),n,i,ej[0],4096336452,6),i=eH(i,t,r,n,ej[7],1126891415,10),n=eH(n,i,t,r,ej[14],2878612391,15),r=eH(r,n,i,t,ej[5],4237533241,21),t=eH(t,r,n,i,ej[12],1700485571,6),i=eH(i,t,r,n,ej[3],2399980690,10),n=eH(n,i,t,r,ej[10],4293915773,15),r=eH(r,n,i,t,ej[1],2240044497,21),t=eH(t,r,n,i,ej[8],1873313359,6),i=eH(i,t,r,n,ej[15],4264355552,10),n=eH(n,i,t,r,ej[6],2734768916,15),r=eH(r,n,i,t,ej[13],1309151649,21),t=eH(t,r,n,i,ej[4],4149444226,6),i=eH(i,t,r,n,ej[11],3174756917,10),n=eH(n,i,t,r,ej[2],718787259,15),r=eH(r,n,i,t,ej[9],3951481745,21),this._a=this._a+t|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+i|0},eL.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=eN.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};var eq=ex.Buffer,eG=eP.exports,ez=Array(16),eV=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],eW=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],e$=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],eQ=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function eK(){ek.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function eJ(e,t){return e<<t|e>>>32-t}eG(eK,ek),eK.prototype._update=function(){for(var e,t,r,n,i,s,o,a,u,c,l,d,h,p,f,g,y,m,v,_,b,w,S,E,T,A,P,O,x,R,D,I,k,C,N,j,L,M,U,B,F,H,q,G,z,V,W,$,Q,K,J,Y,X=0;X<16;++X)ez[X]=this._block.readInt32LE(4*X);for(var Z=0|this._a,ee=0|this._b,et=0|this._c,er=0|this._d,en=0|this._e,ei=0|this._a,es=0|this._b,eo=0|this._c,ea=0|this._d,eu=0|this._e,ec=0;ec<80;ec+=1)ec<16?(e=Z,t=ee,r=et,n=er,i=en,J=eJ(e+(t^r^n)+ez[eV[ec]]+0|0,e$[ec])+i|0,s=ei,o=es,a=eo,u=ea,c=eu,Y=eJ(s+(o^(a|~u))+ez[eW[ec]]+1352829926|0,eQ[ec])+c|0):ec<32?(l=Z,d=ee,h=et,p=er,f=en,J=eJ(l+(d&h|~d&p)+ez[eV[ec]]+1518500249|0,e$[ec])+f|0,g=ei,y=es,m=eo,v=ea,_=eu,Y=eJ(g+(y&v|m&~v)+ez[eW[ec]]+1548603684|0,eQ[ec])+_|0):ec<48?(b=Z,w=ee,S=et,E=er,T=en,J=eJ(b+((w|~S)^E)+ez[eV[ec]]+1859775393|0,e$[ec])+T|0,A=ei,P=es,O=eo,x=ea,R=eu,Y=eJ(A+((P|~O)^x)+ez[eW[ec]]+1836072691|0,eQ[ec])+R|0):ec<64?(D=Z,I=ee,k=et,C=er,N=en,J=eJ(D+(I&C|k&~C)+ez[eV[ec]]+2400959708|0,e$[ec])+N|0,j=ei,L=es,M=eo,U=ea,B=eu,Y=eJ(j+(L&M|~L&U)+ez[eW[ec]]+2053994217|0,eQ[ec])+B|0):(F=Z,H=ee,q=et,G=er,z=en,J=eJ(F+(H^(q|~G))+ez[eV[ec]]+2840853838|0,e$[ec])+z|0,V=ei,W=es,$=eo,Q=ea,K=eu,Y=eJ(V+(W^$^Q)+ez[eW[ec]]+0|0,eQ[ec])+K|0),Z=en,en=er,er=eJ(et,10),et=ee,ee=J,ei=eu,eu=ea,ea=eJ(eo,10),eo=es,es=Y;var el=this._b+et+ea|0;this._b=this._c+er+eu|0,this._c=this._d+en+ei|0,this._d=this._e+Z+es|0,this._e=this._a+ee+eo|0,this._a=el},eK.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=eq.alloc?eq.alloc(20):new eq(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};var eY={exports:{}},eX=eO.exports.Buffer;function eZ(e,t){this._block=eX.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}eZ.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=eX.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,s=this._len,o=0;o<i;){for(var a=s%n,u=Math.min(i-o,n-a),c=0;c<u;c++)r[a+c]=e[o+c];o+=u,(s+=u)%n==0&&this._update(r)}return this._len+=i,this},eZ.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s},eZ.prototype._update=function(){throw Error("_update must be implemented by subclass")};var e0=eP.exports,e1=eO.exports.Buffer,e2=[1518500249,1859775393,-1894007588,-899497514],e3=Array(80);function e4(){this.init(),this._w=e3,eZ.call(this,64,56)}e0(e4,eZ),e4.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},e4.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,o=0|this._d,a=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=r[u-3]^r[u-8]^r[u-14]^r[u-16];for(var c=0;c<80;++c){var l,d,h,p,f=~~(c/20),g=0|((t=n)<<5|t>>>27)+(l=i,d=s,h=o,0===f?l&d|~l&h:2===f?l&d|l&h|d&h:l^d^h)+a+r[c]+e2[f];a=o,o=s,s=(p=i)<<30|p>>>2,i=n,n=g}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},e4.prototype._hash=function(){var e=e1.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var e5=eP.exports,e8=eO.exports.Buffer,e6=[1518500249,1859775393,-1894007588,-899497514],e7=Array(80);function e9(){this.init(),this._w=e7,eZ.call(this,64,56)}e5(e9,eZ),e9.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},e9.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,o=0|this._d,a=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=(t=r[u-3]^r[u-8]^r[u-14]^r[u-16])<<1|t>>>31;for(var c=0;c<80;++c){var l,d,h,p,f,g=~~(c/20),y=((l=n)<<5|l>>>27)+(d=i,h=s,p=o,0===g?d&h|~d&p:2===g?d&h|d&p|h&p:d^h^p)+a+r[c]+e6[g]|0;a=o,o=s,s=(f=i)<<30|f>>>2,i=n,n=y}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},e9.prototype._hash=function(){var e=e8.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var te=eP.exports,tt=eO.exports.Buffer,tr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],tn=Array(64);function ti(){this.init(),this._w=tn,eZ.call(this,64,56)}te(ti,eZ),ti.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},ti.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,o=0|this._d,a=0|this._e,u=0|this._f,c=0|this._g,l=0|this._h,d=0;d<16;++d)r[d]=e.readInt32BE(4*d);for(;d<64;++d)r[d]=0|(((t=r[d-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[d-7]+(((p=r[d-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3)+r[d-16];for(var h=0;h<64;++h){var p,f,g,y,m,v,_,b,w=l+(((f=a)>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(g=a,y=u,(m=c)^g&(y^m))+tr[h]+r[h]|0,S=(((v=n)>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+((_=n)&(b=i)|s&(_|b))|0;l=c,c=u,u=a,a=o+w|0,o=s,s=i,i=n,n=w+S|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=u+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0},ti.prototype._hash=function(){var e=tt.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var ts=eP.exports,to=eO.exports.Buffer,ta=Array(64);function tu(){this.init(),this._w=ta,eZ.call(this,64,56)}ts(tu,ti),tu.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},tu.prototype._hash=function(){var e=to.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var tc=eP.exports,tl=eO.exports.Buffer,td=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],th=Array(160);function tp(){this.init(),this._w=th,eZ.call(this,128,112)}function tf(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function tg(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function ty(e,t){return e>>>0<t>>>0?1:0}tc(tp,eZ),tp.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},tp.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,s=0|this._dh,o=0|this._eh,a=0|this._fh,u=0|this._gh,c=0|this._hh,l=0|this._al,d=0|this._bl,h=0|this._cl,p=0|this._dl,f=0|this._el,g=0|this._fl,y=0|this._gl,m=0|this._hl,v=0;v<32;v+=2)t[v]=e.readInt32BE(4*v),t[v+1]=e.readInt32BE(4*v+4);for(;v<160;v+=2){var _,b,w,S,E,T,A,P,O=t[v-30],x=t[v-30+1],R=((_=O)>>>1|(b=x)<<31)^(_>>>8|b<<24)^_>>>7,D=((w=x)>>>1|(S=O)<<31)^(w>>>8|S<<24)^(w>>>7|S<<25),I=((E=O=t[v-4])>>>19|(T=x=t[v-4+1])<<13)^(T>>>29|E<<3)^E>>>6,k=((A=x)>>>19|(P=O)<<13)^(P>>>29|A<<3)^(A>>>6|P<<26),C=t[v-14],N=t[v-14+1],j=t[v-32],L=t[v-32+1],M=D+N|0,U=R+C+ty(M,D)|0;U=(U=U+I+ty(M=M+k|0,k)|0)+j+ty(M=M+L|0,L)|0,t[v]=U,t[v+1]=M}for(var B=0;B<160;B+=2){U=t[B],M=t[B+1];var F,H,q,G,z,V,W,$,Q,K,J=(F=r)&(H=n)|i&(F|H),Y=(q=l)&(G=d)|h&(q|G),X=tf(r,l),Z=tf(l,r),ee=tg(o,f),et=tg(f,o),er=td[B],en=td[B+1],ei=(z=o,V=a,(W=u)^z&(V^W)),es=($=f,Q=g,(K=y)^$&(Q^K)),eo=m+et|0,ea=c+ee+ty(eo,m)|0;ea=(ea=(ea=ea+ei+ty(eo=eo+es|0,es)|0)+er+ty(eo=eo+en|0,en)|0)+U+ty(eo=eo+M|0,M)|0;var eu=Z+Y|0,ec=X+J+ty(eu,Z)|0;c=u,m=y,u=a,y=g,a=o,g=f,o=s+ea+ty(f=p+eo|0,p)|0,s=i,p=h,i=n,h=d,n=r,d=l,r=ea+ec+ty(l=eo+eu|0,eo)|0}this._al=this._al+l|0,this._bl=this._bl+d|0,this._cl=this._cl+h|0,this._dl=this._dl+p|0,this._el=this._el+f|0,this._fl=this._fl+g|0,this._gl=this._gl+y|0,this._hl=this._hl+m|0,this._ah=this._ah+r+ty(this._al,l)|0,this._bh=this._bh+n+ty(this._bl,d)|0,this._ch=this._ch+i+ty(this._cl,h)|0,this._dh=this._dh+s+ty(this._dl,p)|0,this._eh=this._eh+o+ty(this._el,f)|0,this._fh=this._fh+a+ty(this._fl,g)|0,this._gh=this._gh+u+ty(this._gl,y)|0,this._hh=this._hh+c+ty(this._hl,m)|0},tp.prototype._hash=function(){var e=tl.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var tm=eP.exports,tv=eO.exports.Buffer,t_=Array(160);function tb(){this.init(),this._w=t_,eZ.call(this,128,112)}tm(tb,tp),tb.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},tb.prototype._hash=function(){var e=tv.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var tw=eY.exports=function(e){var t=tw[e=e.toLowerCase()];if(!t)throw Error(e+" is not supported (we accept pull requests)");return new t};tw.sha=e4,tw.sha1=e9,tw.sha224=tu,tw.sha256=ti,tw.sha384=tb,tw.sha512=tp;var tS=eA(u||(u=r.t(_,2))),tE=eO.exports.Buffer,tT=eR.Transform,tA=tS.StringDecoder;function tP(e){tT.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}(0,eP.exports)(tP,tT),tP.prototype.update=function(e,t,r){"string"==typeof e&&(e=tE.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},tP.prototype.setAutoPadding=function(){},tP.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state")},tP.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state")},tP.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state")},tP.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},tP.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},tP.prototype._finalOrDigest=function(e){var t=this.__final()||tE.alloc(0);return e&&(t=this._toString(t,e,!0)),t},tP.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new tA(t),this._encoding=t),this._encoding!==t)throw Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var tO=eP.exports,tx=eY.exports;function tR(e){tP.call(this,"digest"),this._hash=e}tO(tR,tP),tR.prototype._update=function(e){this._hash.update(e)},tR.prototype._final=function(){return this._hash.digest()};var tD=function(e){return"md5"===(e=e.toLowerCase())?new eL:"rmd160"===e||"ripemd160"===e?new eK:new tR(tx(e))};class tI{static hashTwice(e){let t=tD("sha256").update(e).digest();return tD("sha256").update(t).digest()}static sha256ripemd160(e){let t=tD("sha256").update(e).digest();return tD("ripemd160").update(t).digest()}static encodeToString(...e){let t=e.reduce((e,t)=>T.concat([e,t]),T.from(""));return tD("sha256").update(t).digest().toString()}static encodeToBuffer(...e){let t=e.reduce((e,t)=>T.concat([e,t]),T.from(""));return tD("sha256").update(t).digest()}static encodeToStr(e){return b.createHmac("sha256","hive node sha256 secret").update(e).digest("hex")}}class tk{constructor(e,t){this.endpoint=e,this.authService=new eT(e),this.bridge=new tC(e),this.jwtCode=null,this.storageKey=null}getStorageKey(){return x(this,void 0,void 0,function*(){if(!this.storageKey){let e=this.endpoint.getUserDid(),t=this.endpoint.getAppDid(),r=yield this.endpoint.getProviderAddress();this.storageKey=tI.encodeToStr(`${e};${t};${r}`)}return this.storageKey})}fetch(){return x(this,void 0,void 0,function*(){return null!=this.jwtCode||(this.jwtCode=yield tk.tokenQueue.add(()=>x(this,void 0,void 0,function*(){let e=yield this.restoreToken();return null!=e||(e=yield this.fetchFromRemote()),e}))),this.jwtCode})}invalidate(){return this.clearToken()}fetchFromRemote(){return x(this,void 0,void 0,function*(){let e=yield this.authService.fetch(),t=yield this.getStorageKey();return this.endpoint.getStorage().storeAccessToken(t,e),yield this.bridge.flush(e),e})}restoreToken(){return x(this,void 0,void 0,function*(){let e=yield this.getStorageKey(),t=this.endpoint.getStorage().loadAccessToken(e);return null==t?null:(yield this.isExpired(t))?(yield this.clearToken(e),null):(yield this.bridge.flush(t),t)})}isExpired(e){return x(this,void 0,void 0,function*(){try{let t=(yield(new f.JWTParserBuilder).setAllowedClockSkewSeconds(300).build().parse(e)).getBody();return null==t||1e3*t.getExpiration()<Date.now()}catch(e){return tk.LOG.info(`Got an error when checking token expired: ${e}, ${e.stack}`),!0}})}clearToken(e){return x(this,void 0,void 0,function*(){let t=e||(yield this.getStorageKey());this.endpoint.getStorage().clearAccessToken(t)})}}tk.LOG=new I("AccessToken"),tk.tokenQueue=new y(1);class tC{constructor(e){this.endpoint=e}flush(e){return x(this,void 0,void 0,function*(){try{let t=(yield(new f.JWTParserBuilder).setAllowedClockSkewSeconds(300).build().parse(e)).getBody();this.endpoint.flushDids(t.getAudience(),t.getIssuer())}catch(e){throw tC.LOG.error("An error occured in the BridgeHandler"),e}})}target(){return this.endpoint}}tC.LOG=new I("BridgeHandler");class tN{constructor(e,t){let r=e;r.endsWith(R.SEPARATOR)||(r+=R.SEPARATOR),r+=this.compatDid(t),this.isOnBrowser()||this.createDirectory(r),this.basePath=r}loadBackupCredential(e){return this.readContent(this.makeFullPath(tN.BACKUP,this.compatDid(e)))}loadAccessToken(e){return this.readContent(this.makeFullPath(tN.TOKENS,this.compatDid(e)))}loadAccessTokenByAddress(e){return this.readContent(this.makeFullPath(tN.TOKENS,tI.encodeToString(T.from(e))))}storeBackupCredential(e,t){this.writeContent(this.makeFullPath(tN.BACKUP,this.compatDid(e)),t)}storeAccessToken(e,t){this.writeContent(this.makeFullPath(tN.TOKENS,this.compatDid(e)),t)}storeAccessTokenByAddress(e,t){this.writeContent(this.makeFullPath(tN.TOKENS,tI.encodeToString(T.from(e))),t)}clearBackupCredential(e){this.deleteContent(this.makeFullPath(tN.BACKUP,this.compatDid(e)))}clearAccessToken(e){this.deleteContent(this.makeFullPath(tN.TOKENS,this.compatDid(e)))}clearAccessTokenByAddress(e){this.deleteContent(this.makeFullPath(tN.TOKENS,tI.encodeToString(T.from(e))))}isOnBrowser(){return"undefined"!=typeof window}getLocalStorage(){return window.localStorage}getFs(){return require("fs")}createDirectory(e){if(!this.getFs().existsSync(e)){let t=e.startsWith(R.SEPARATOR)?R.SEPARATOR:"";for(let r of e.split(R.SEPARATOR))r&&(t=t+r+R.SEPARATOR,this.getFs().existsSync(t)||this.getFs().mkdirSync(t))}}readContent(e){if(!e)return null;if(this.isOnBrowser())return this.getLocalStorage().getItem(e);if(!this.getFs().existsSync(e))return null;try{return this.getFs().readFileSync(e,{encoding:"utf-8"})}catch(e){return tN.LOG.error(`read content error: ${e.message}`),null}}writeContent(e,t){if(!e)return;if(this.isOnBrowser())return void this.getLocalStorage().setItem(e,t);let r=e.substring(0,e.lastIndexOf(R.SEPARATOR));this.createDirectory(r);try{this.getFs().writeFileSync(e,t,{encoding:"utf-8"})}catch(e){tN.LOG.error(`write content error: ${e.message}`)}}deleteContent(e){if(e){if(this.isOnBrowser())this.getLocalStorage().removeItem(e);else try{this.getFs().existsSync(e)&&this.getFs().unlinkSync(e)}catch(e){tN.LOG.error(e.message)}}}makeFullPath(e,t){return this.basePath+e+R.SEPARATOR+t}compatDid(e){let t=e.split(":");return t.length>=3?t[2]:e}}tN.LOG=new I("FileStorage"),tN.BACKUP="credential-backup",tN.TOKENS="tokens";class tj{constructor(e,t,r){this.major=e,this.minor=t,this.patch=r}getMajor(){return this.major}getMinor(){return this.minor}getPatch(){return this.patch}toString(){let e=[];return this.major&&e.push(this.major),this.minor&&e.push(this.minor),this.patch&&e.push(this.patch),e.join(".")}}class tL{setServiceDid(e){return this.service_did=e,this}setOwnerDid(e){return this.owner_did=e,this}setOwnershipPresentation(e){return this.ownership_presentation=e,this}setName(e){return this.name=e,this}setEmail(e){return this.email=e,this}setDescription(e){return this.description=e,this}setVersion(e){return this.version=e,this}setLastCommitId(e){return this.last_commit_id=e,this}setUserCount(e){return this.user_count=e,this}setVaultCount(e){return this.vault_count=e,this}setBackupCount(e){return this.backup_count=e,this}setLatestAccessTime(e){return this.latest_access_time=e,this}setMemoryUsed(e){return this.memory_used=e,this}setMemoryTotal(e){return this.memory_total=e,this}setStorageUsed(e){return this.storage_used=e,this}setStorageTotal(e){return this.storage_total=e,this}getServiceDid(){return this.service_did}getOwnerDid(){return this.owner_did}getOwnershipPresentation(){return this.ownership_presentation}getName(){return this.name}getEmail(){return this.email}getDescription(){return this.description}getVersion(){return this.version}getLastCommitId(){return this.last_commit_id}getUserCount(){return this.user_count}getVaultCount(){return this.vault_count}getBackupCount(){return this.backup_count}getLatestAccessTime(){return this.latest_access_time}getMemoryUsed(){return this.memory_used}getMemoryTotal(){return this.memory_total}getStorageUsed(){return this.storage_used}getStorageTotal(){return this.storage_total}}let tM=class extends g.BaseService{version(){return x(this,void 0,void 0,function*(){throw new F})}commitId(){return x(this,void 0,void 0,function*(){throw new F})}info(e){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.GET)("/node/version"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>new tj(e.major,e.minor,e.patch))),O("design:type",Function),O("design:paramtypes",[]),O("design:returntype",Promise)],tM.prototype,"version",null),A([(0,g.GET)("/node/commit_id"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.commit_id)),O("design:type",Function),O("design:paramtypes",[]),O("design:returntype",Promise)],tM.prototype,"commitId",null),A([(0,g.GET)("/node/info"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>{let t=-1==e.latest_access_time?null:new Date(1e3*Number(e.latest_access_time));return(new tL).setServiceDid(e.service_did).setOwnerDid(e.owner_did).setOwnershipPresentation(f.VerifiablePresentation.parse(JSON.stringify(e.ownership_presentation))).setName(e.name).setEmail(e.email).setDescription(e.description).setVersion(e.version).setLastCommitId(e.last_commit_id).setUserCount(e.user_count).setVaultCount(e.vault_count).setBackupCount(e.backup_count).setLatestAccessTime(t).setMemoryUsed(e.memory_used).setMemoryTotal(e.memory_total).setStorageUsed(e.storage_used).setStorageTotal(e.storage_total)})),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],tM.prototype,"info",null),tM=A([(0,g.BasePath)("/api/v2")],tM);class tU extends eS{constructor(e){super(e)}getNodeVersion(){return x(this,void 0,void 0,function*(){return yield this.callAPI(tM,e=>x(this,void 0,void 0,function*(){return yield e.version()}))})}getCommitId(){return x(this,void 0,void 0,function*(){return yield this.callAPI(tM,e=>x(this,void 0,void 0,function*(){return yield e.commitId()}))})}getInfo(){return x(this,void 0,void 0,function*(){return yield this.callAPI(tM,e=>x(this,void 0,void 0,function*(){return yield e.info((yield this.getAccessToken()))}))})}}class tB{constructor(e,t){if(!e&&!t)throw new X("Invalid parameter: context and providerAddress can not all empty");this.context=e,this.providerAddress=t,this.init()}init(){if(this.aboutService=new tU(this),this.context){let e=this.context.getAppContextProvider().getLocalDataDir();e.endsWith(R.SEPARATOR)||(e+=R.SEPARATOR),this.dataStorage=new tN(e,this.context.getUserDid()),this.accessToken=new tk(this,this.dataStorage),this.aboutServiceAuth=new tU(this)}}hasAppContext(){return null!=this.context}getAccessToken(){if(!this.context)throw new X("AppContext not setup");return this.accessToken}getProviderAddress(){return x(this,void 0,void 0,function*(){return this.providerAddress||(this.providerAddress=yield this.context.getProviderAddress()),this.providerAddress})}getAppContext(){if(!this.context)throw new X("AppContext not setup");return this.context}getUserDid(){if(!this.context)throw new X("AppContext not setup");return this.context.getUserDid()}getAppDid(){if(!this.context)throw new X("AppContext not setup");return this.context.getAppDid()}getAppInstanceDid(){return this.appInstanceDid}getServiceDid(){return this.serviceInstanceDid}getServiceInstanceDid(){return x(this,void 0,void 0,function*(){if(!this.serviceInstanceDid){if(!this.context)throw new X("AppContext not setup");yield this.accessToken.fetch()}return this.serviceInstanceDid})}flushDids(e,t){this.appInstanceDid=e,this.serviceInstanceDid=t}getStorage(){if(!this.context)throw new X("AppContext not setup");return this.dataStorage}getNodeVersion(){return x(this,void 0,void 0,function*(){return yield this.aboutService.getNodeVersion()})}getLatestCommitId(){return x(this,void 0,void 0,function*(){return yield this.aboutService.getCommitId()})}getNodeInfo(){return x(this,void 0,void 0,function*(){if(!this.context)throw new X("AppContext not setup");return yield this.aboutServiceAuth.getInfo()})}}function tF(e,t){if(!e)throw new X(t)}function tH(e,t){if(null===e)throw new X(t)}class tq{constructor(e,t){this.cipher=e,this.value=t}encryptMessage(e,t){return this.cipher.encrypt(e,t)}decryptMessage(e,t){return this.cipher.decrypt(e,t)}concatUint8Arrays(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}encryptStream(e){let t=this.cipher.createEncryptionStream(),[r,n,i]=[tq.TRUNK_SIZE,e.length,t.header()],[s,o]=[0,i];for(;s<n-1;){let i=s+r>=n-1,a=i?n-s:r,u=t.pushAny(e.slice(s,s+a),i);o=null===o?u:this.concatUint8Arrays(o,u),s+=a}return T.from(o)}decryptStream(e){let t=f.DecryptionStream.getHeaderLen();if(!e||e.length<t)throw new X("Invalid cipher data to decrypt");let r=e.slice(0,t),n=this.cipher.createDecryptionStream(r),[i,s]=[e.length,tq.TRUNK_SIZE+f.DecryptionStream.getEncryptExtraSize()],[o,a]=[r.length,null];for(;o<i-1;){let t=o+s>=i-1?i-o:s,r=n.pull(e.slice(o,o+t));a=null===a?r:this.concatUint8Arrays(a,r),o+=t}return T.from(a)}encrypt(){throw new F}decrypt(){throw new F}}tq.TRUNK_SIZE=4096,tq.ENCRYPT_METHOD="user_did";class tG extends tq{constructor(e,t,r,n){super(e,r),this.nonce=t,this.encryptedType=n}isBasicType(){let e=typeof this.value;return"number"===e||"boolean"==e||"string"==e}getEncryptedType(){switch(typeof this.value){case"string":return tG.TYPE_STRING;case"boolean":return tG.TYPE_BOOLEAN;case"number":return tG.TYPE_NUMBER}throw new X(`Got an unexpected basic type value, ${this.value}(${typeof this.value})`)}encrypt(){let e=this.value.toString();return this.encryptMessage(T.from(e),this.nonce).toString("hex")}decrypt(){let e=T.from(this.value,"hex"),t=this.decryptMessage(e,this.nonce).toString();switch(this.encryptedType){case tG.TYPE_STRING:return t;case tG.TYPE_BOOLEAN:return"true"===t;case tG.TYPE_NUMBER:return Number(t)}throw new X(`Got an unexpected encrypted type value, ${this.value}(${typeof this.value})`)}}tG.TYPE_STRING=2,tG.TYPE_BOOLEAN=8,tG.TYPE_NUMBER=16;class tz{setName(e){return this.name=e,this}setAsFile(e){return this.is_file=e,this}setSize(e){return this.size=e,this}setCreated(e){return this.created=e,this}setUpdated(e){return this.updated=e,this}getName(){return this.name}isFile(){return this.is_file}getSize(){return this.size}getCreated(){return new Date(1e3*this.created)}getUpdated(){return new Date(1e3*this.updated)}}class tV{setName(e){return this.name=e,this}setAlgorithm(e){return this.name=e,this}setHash(e){return this.name=e,this}getName(){return this.name}getAlgorithm(){return this.algorithm}getHash(){return this.hash}}let tW=class extends g.BaseService{upload(e,t,r,n,i,s){return x(this,void 0,void 0,function*(){throw new F})}download(e,t){return x(this,void 0,void 0,function*(){throw new F})}listChildren(e,t){return x(this,void 0,void 0,function*(){throw new F})}getMetadata(e,t){return x(this,void 0,void 0,function*(){throw new F})}getHash(e,t){return x(this,void 0,void 0,function*(){throw new F})}copy(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}move(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}delete(e,t){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.PUT)("/files/{path}"),(0,g.RequestTransformer)((e,t)=>e.data),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.cid)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Query)("public")),P(2,(0,g.Query)("is_encrypt")),P(3,(0,g.Query)("encrypt_method")),P(4,(0,g.Path)("path")),P(5,g.Body),O("design:type",Function),O("design:paramtypes",[String,Boolean,Boolean,String,String,Object]),O("design:returntype",Promise)],tW.prototype,"upload",null),A([(0,g.GET)("/files/{path}"),(0,g.ResponseType)("arraybuffer"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],tW.prototype,"download",null),A([(0,g.GET)("/files/{path}?comp=children"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.value.map(e=>(new tz).setCreated(e.created).setUpdated(e.updated).setName(e.name).setAsFile(e.is_file).setSize(e.size)))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],tW.prototype,"listChildren",null),A([(0,g.GET)("/files/{path}?comp=metadata"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new tz).setCreated(e.created).setUpdated(e.updated).setName(e.name).setAsFile(e.is_file).setSize(e.size))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],tW.prototype,"getMetadata",null),A([(0,g.GET)("/files/{path}?comp=hash"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new tV).setName(e.name).setAlgorithm(e.algorithm).setHash(e.hash))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],tW.prototype,"getHash",null),A([(0,g.PUT)("/files/{path}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.name)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),P(2,(0,g.Query)("dest")),O("design:type",Function),O("design:paramtypes",[String,String,String]),O("design:returntype",Promise)],tW.prototype,"copy",null),A([(0,g.PATCH)("/files/{path}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.name)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),P(2,(0,g.Query)("to")),O("design:type",Function),O("design:paramtypes",[String,String,String]),O("design:returntype",Promise)],tW.prototype,"move",null),A([(0,g.DELETE)("/files/{path}"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("path")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],tW.prototype,"delete",null),tW=A([(0,g.BasePath)("/api/v2/vault")],tW);class t${onProgress(e){}}class tQ extends eS{constructor(e){super(e)}download(e,t=new t$){return x(this,void 0,void 0,function*(){return tH(e,"Remote file path is mandatory."),yield this.callAPI(tW,t=>x(this,void 0,void 0,function*(){return t.download((yield this.getAccessToken()),e)}),{onDownloadProgress:e=>{let r=Math.round(100*e.loaded/e.total);t.onProgress(r)}})})}uploadInternal(e,t,r=new t$,n=!1,i=!1){return x(this,void 0,void 0,function*(){tH(e,"Remote destination path is mandatory."),tH(t,"data must be provided.");let s=t instanceof T?t:T.from(t);tF(s.length>0,"No data to upload.");let o=i?tq.ENCRYPT_METHOD:null;return yield this.callAPI(tW,t=>x(this,void 0,void 0,function*(){return yield t.upload((yield this.getAccessToken()),n,i,o,e,{data:s})}),{onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);r.onProgress(t)}})})}upload(e,t,r=new t$,n=!1){return x(this,void 0,void 0,function*(){return this.uploadInternal(e,t,r,n)})}list(e){return x(this,void 0,void 0,function*(){return yield this.callAPI(tW,t=>x(this,void 0,void 0,function*(){return t.listChildren((yield this.getAccessToken()),e)}))})}stat(e){return x(this,void 0,void 0,function*(){return yield this.callAPI(tW,t=>x(this,void 0,void 0,function*(){return t.getMetadata((yield this.getAccessToken()),e)}))})}hash(e){return x(this,void 0,void 0,function*(){return yield this.callAPI(tW,t=>x(this,void 0,void 0,function*(){return t.getHash((yield this.getAccessToken()),e)}))})}move(e,t){return x(this,void 0,void 0,function*(){return yield this.callAPI(tW,r=>x(this,void 0,void 0,function*(){return r.move((yield this.getAccessToken()),e,t)}))})}copy(e,t){return x(this,void 0,void 0,function*(){return yield this.callAPI(tW,r=>x(this,void 0,void 0,function*(){return r.copy((yield this.getAccessToken()),e,t)}))})}delete(e){return x(this,void 0,void 0,function*(){yield this.callAPI(tW,t=>x(this,void 0,void 0,function*(){return t.delete((yield this.getAccessToken()),e)}))})}}class tK{setAcknowledge(e){return this.acknowledged=e,this}setInsertedIds(e){return this.inserted_ids=e,this}isAcknowledge(){return this.acknowledged}getInsertedIds(){return this.inserted_ids}}class tJ{setAcknowledged(e){return this.acknowledged=e,this}setMatchedCount(e){return this.matched_count=e,this}setModifiedCount(e){return this.modified_count=e,this}setUpsertedId(e){return this.upserted_id=e,this}isAcknowledged(){return this.acknowledged}getMatchedCount(){return this.matched_count}getModifiedCount(){return this.modified_count}getUpsertedId(){return this.upserted_id}}class tY{setItems(e){return this.items=e,this}setEncrypt(e){return this.is_encrypt=e,this}setEncryptMethod(e){return this.encrypt_method=e,this}getItems(){return this.items}isEncrypt(){return this.is_encrypt}getEncryptMethod(){return this.encrypt_method}}class tX{setName(e){return this.name=e,this}setEncrypt(e){return this.is_encrypt=e,this}setEncryptMethod(e){return this.encrypt_method=e,this}getName(){return this.name}isEncrypt(){return this.is_encrypt}getEncryptMethod(){return this.encrypt_method}}class tZ extends tY{}let t0=class extends g.BaseService{getCollections(e){return x(this,void 0,void 0,function*(){throw new F})}createCollection(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}deleteCollection(e,t){return x(this,void 0,void 0,function*(){throw new F})}insert(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}count(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}update(e,t,r,n){return x(this,void 0,void 0,function*(){throw new F})}delete(e,t,r,n){return x(this,void 0,void 0,function*(){throw new F})}find(e,t,r,n,i){return x(this,void 0,void 0,function*(){throw new F})}query(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.GET)("/collections"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.collections.map(e=>(new tX).setName(e.name).setEncrypt(e.is_encrypt).setEncryptMethod(e.encrypt_method)))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],t0.prototype,"getCollections",null),A([(0,g.PUT)("/collections/{collectionName}"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t0.prototype,"createCollection",null),A([(0,g.DELETE)("/{collectionName}"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],t0.prototype,"deleteCollection",null),A([(0,g.POST)("/collection/{collectionName}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new tK).setAcknowledge(e.acknowledge).setInsertedIds(e.inserted_ids))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t0.prototype,"insert",null),A([(0,g.POST)("/collection/{collectionName}?op=count"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.count)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t0.prototype,"count",null),A([(0,g.PATCH)("/collection/{collectionName}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new tJ).setAcknowledged(e.acknowledged).setMatchedCount(e.matched_count).setModifiedCount(e.modified_count).setUpsertedId(e.upserted_id))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,(0,g.Query)("updateone")),P(3,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Boolean,Object]),O("design:returntype",Promise)],t0.prototype,"update",null),A([(0,g.DELETE)("/collection/{collectionName}"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,(0,g.Query)("deleteone")),P(3,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Boolean,Object]),O("design:returntype",Promise)],t0.prototype,"delete",null),A([(0,g.GET)("/{collectionName}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new tY).setItems(e.items).setEncrypt(e.is_encrypt).setEncryptMethod(e.encrypt_method))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,(0,g.Query)("filter")),P(3,(0,g.Query)("skip")),P(4,(0,g.Query)("limit")),O("design:type",Function),O("design:paramtypes",[String,String,String,Number,Number]),O("design:returntype",Promise)],t0.prototype,"find",null),A([(0,g.POST)("/query"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new tZ).setItems(e.items).setEncrypt(e.is_encrypt).setEncryptMethod(e.encrypt_method))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("collectionName")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t0.prototype,"query",null),t0=A([(0,g.BasePath)("/api/v2/vault/db")],t0);class t1 extends eS{constructor(e){super(e)}getCollections(){return x(this,void 0,void 0,function*(){return yield this.callAPI(t0,e=>x(this,void 0,void 0,function*(){return yield e.getCollections((yield this.getAccessToken()))}))})}createCollectionInternal(e,t=!1){return x(this,void 0,void 0,function*(){let r={};t&&(r.is_encrypt=!0,r.encrypt_method=tq.ENCRYPT_METHOD),yield this.callAPI(t0,t=>x(this,void 0,void 0,function*(){return yield t.createCollection((yield this.getAccessToken()),e,r)}))})}createCollection(e){return x(this,void 0,void 0,function*(){return this.createCollectionInternal(e)})}deleteCollection(e){return x(this,void 0,void 0,function*(){yield this.callAPI(t0,t=>x(this,void 0,void 0,function*(){return yield t.deleteCollection((yield this.getAccessToken()),e)}))})}insertOne(e,t,r){return x(this,void 0,void 0,function*(){return yield this.insertMany(e,[t],r)})}insertMany(e,t,r){return x(this,void 0,void 0,function*(){let n={document:t};return r&&(n.options=r),yield this.callAPI(t0,t=>x(this,void 0,void 0,function*(){return yield t.insert((yield this.getAccessToken()),e,n)}))})}countDocuments(e,t,r){return x(this,void 0,void 0,function*(){let n={filter:t};return r&&(n.options=r),yield this.callAPI(t0,t=>x(this,void 0,void 0,function*(){return yield t.count((yield this.getAccessToken()),e,n)}))})}findOne(e,t,r){return x(this,void 0,void 0,function*(){let n=yield this.findMany(e,t,r);return n&&0!==n.length?n[0]:null})}findManyInternal(e,t,r){return x(this,void 0,void 0,function*(){let n=t||{},i=r?r.getSkip():void 0,s=r?r.getLimit():void 0;return yield this.callAPI(t0,t=>x(this,void 0,void 0,function*(){return yield t.find((yield this.getAccessToken()),e,JSON.stringify(n),i,s)}))})}findMany(e,t,r){return x(this,void 0,void 0,function*(){return(yield this.findManyInternal(e,t,r)).getItems()})}queryInternal(e,t,r){return x(this,void 0,void 0,function*(){let n={collection:e,filter:t};return r&&(n.options=r),yield this.callAPI(t0,t=>x(this,void 0,void 0,function*(){return yield t.query((yield this.getAccessToken()),e,n)}))})}query(e,t,r){return x(this,void 0,void 0,function*(){return(yield this.queryInternal(e,t,r)).getItems()})}updateOne(e,t,r,n){return x(this,void 0,void 0,function*(){return yield this.updateInternal(e,!0,t,r,n)})}updateMany(e,t,r,n){return x(this,void 0,void 0,function*(){return yield this.updateInternal(e,!1,t,r,n)})}deleteOne(e,t){return x(this,void 0,void 0,function*(){return yield this.deleteInternal(e,!0,t)})}deleteMany(e,t){return x(this,void 0,void 0,function*(){return yield this.deleteInternal(e,!1,t)})}updateInternal(e,t,r,n,i){return x(this,void 0,void 0,function*(){let s={filter:r,update:n};return i&&(s.options=i),yield this.callAPI(t0,r=>x(this,void 0,void 0,function*(){return yield r.update((yield this.getAccessToken()),e,t,s)}))})}deleteInternal(e,t,r){return x(this,void 0,void 0,function*(){yield this.callAPI(t0,n=>x(this,void 0,void 0,function*(){return yield n.delete((yield this.getAccessToken()),e,t,{filter:r})}))})}}class t2{setTargetDid(e){return this.target_did=e,this}setTargetAppDid(e){return this.target_app_did=e,this}getTargetDid(){return this.target_did}getTargetAppDid(){return this.target_app_did}}class t3{setName(e){return this.name=e,this}setCondition(e){return this.condition=e,this}setExecutable(e){return this.executable=e,this}setAllowAnonymousUser(e){return this.allowAnonymousUser=e,this}setAllowAnonymousApp(e){return this.allowAnonymousApp=e,this}getName(){return this.name}getCondition(){return this.condition}getExecutable(){return this.executable}getAllowAnonymousUser(){return this.allowAnonymousUser}getAllowAnonymousApp(){return this.allowAnonymousApp}}let t4=class extends g.BaseService{registerScript(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}getScripts(e,t,r,n){return x(this,void 0,void 0,function*(){throw new F})}runScript(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}runScriptUrl(e,t,r,n,i){return x(this,void 0,void 0,function*(){throw new F})}unregisterScript(e,t){return x(this,void 0,void 0,function*(){throw new F})}uploadFile(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}downloadFile(e,t){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.PUT)("/vault/scripting/{scriptName}"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("scriptName")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t4.prototype,"registerScript",null),A([(0,g.GET)("/vault/scripting/scripts"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.scripts.map(e=>(new t3).setName(e.name).setCondition(e.condition).setExecutable(e.executable).setAllowAnonymousUser(e.allowAnonymousUser).setAllowAnonymousApp(e.allowAnonymousApp)))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("name")),P(2,(0,g.Path)("skip")),P(3,(0,g.Path)("limit")),O("design:type",Function),O("design:paramtypes",[String,String,Number,Number]),O("design:returntype",Promise)],t4.prototype,"getScripts",null),A([(0,g.PATCH)("/vault/scripting/{scriptName}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("scriptName")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t4.prototype,"runScript",null),A([(0,g.GET)("/vault/scripting/{scriptName}/{targetDid}@{targetAppDid}/{params}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("scriptName")),P(2,(0,g.Path)("targetDid")),P(3,(0,g.Path)("targetAppDid")),P(4,(0,g.Path)("params")),O("design:type",Function),O("design:paramtypes",[String,String,String,String,String]),O("design:returntype",Promise)],t4.prototype,"runScriptUrl",null),A([(0,g.DELETE)("/vault/scripting/{scriptName}"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("scriptName")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],t4.prototype,"unregisterScript",null),A([(0,g.PUT)("/vault/scripting/stream/{transactionId}"),(0,g.RequestTransformer)((e,t)=>e.data),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("transactionId")),P(2,g.Body),O("design:type",Function),O("design:paramtypes",[String,String,Object]),O("design:returntype",Promise)],t4.prototype,"uploadFile",null),A([(0,g.GET)("/vault/scripting/stream/{transactionId}"),(0,g.ResponseType)("arraybuffer"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e)),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("transactionId")),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",Promise)],t4.prototype,"downloadFile",null),t4=A([(0,g.BasePath)("/api/v2")],t4);class t5 extends eS{constructor(e){super(e)}registerScript(e,t,r,n,i){return x(this,void 0,void 0,function*(){tH(e,"Missing script name."),tH(t,"Missing executable script"),yield this.callAPI(t4,s=>x(this,void 0,void 0,function*(){return yield s.registerScript((yield this.getAccessToken()),e,{executable:t,condition:r||void 0,allowAnonymousUser:n,allowAnonymousApp:i})}))})}unregisterScript(e){return x(this,void 0,void 0,function*(){tH(e,"Missing script name."),yield this.callAPI(t4,t=>x(this,void 0,void 0,function*(){return yield t.unregisterScript((yield this.getAccessToken()),e)}))})}getScripts(e,t,r){return x(this,void 0,void 0,function*(){return yield this.callAPI(t4,n=>x(this,void 0,void 0,function*(){return yield n.getScripts((yield this.getAccessToken()),e,t,r)}))})}callScript(e,t,r,n){return x(this,void 0,void 0,function*(){tH(e,"Missing script name."),tH(t,"Missing parameters to run the script"),tH(r,"Missing target user DID"),tH(n,"Missing target application DID");let i=(new t2).setTargetDid(r).setTargetAppDid(n);return yield this.callAPI(t4,r=>x(this,void 0,void 0,function*(){return yield r.runScript((yield this.getAccessToken()),e,{context:i,params:t})}))})}callScriptUrl(e,t,r,n){return x(this,void 0,void 0,function*(){return tH(e,"Missing script name."),tH(t,"Missing parameters to run the script"),tH(r,"Missing target user DID"),tH(n,"Missing target application DID"),yield this.callAPI(t4,i=>x(this,void 0,void 0,function*(){return yield i.runScriptUrl((yield this.getAccessToken()),e,r,n,t)}))})}uploadFile(e,t,r=new t$){return x(this,void 0,void 0,function*(){tH(e,"Missing transactionId."),tH(t,"data must be provided.");let n=t instanceof T?t:T.from(t);return tF(n.length>0,"No data to upload."),t5.LOG.debug("Uploading "+n.byteLength+" byte(s)"),yield this.callAPI(t4,t=>x(this,void 0,void 0,function*(){return yield t.uploadFile((yield this.getAccessToken()),e,{data:n})}),{onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);r.onProgress(t)}})})}downloadFile(e,t=new t$){return x(this,void 0,void 0,function*(){tH(e,"Missing transactionId.");let r=yield this.callAPI(t4,t=>x(this,void 0,void 0,function*(){return t.downloadFile((yield this.getAccessToken()),e)}),{onDownloadProgress:function(e){let r=Math.round(100*e.loaded/e.total);t.onProgress(r)}});return t5.LOG.debug("Downloaded "+T.byteLength(r)+" byte(s)."),r})}parseHiveUrl(e){if(!e||!e.startsWith("hive://"))throw new X("Invalid hive url: no hive prefix");let t=e.substring(7).split("/");if(t.length<2)throw new X("Invalid hive url: must contain at least one slash");let r=t[0].split("@");if(2!==r.length)throw new X("Invalid hive url: must contain two DIDs");let n=t[1].split("?params="),i=null;return n.length>=2&&(i=n[1]),{targetUsrDid:r[0],targetAppDid:r[1],scriptName:n[0],params:(e=>{if(!e)return"{}";try{return JSON.parse(e),e}catch(e){return"{}"}})(i)}}downloadFileByHiveUrl(e){return x(this,void 0,void 0,function*(){let t=this.parseHiveUrl(e),r=yield eb.getProviderAddressByUserDid(t.targetUsrDid,null,!0);t5.LOG.info(`Got the hive url for targetDid: ${r}`);let n=new tB(this.getServiceContext().getAppContext(),r),i=new t5(n),s=yield i.callScriptUrl(t.scriptName,t.params,t.targetUsrDid,t.targetAppDid);return yield i.downloadFile(Object.values(s)[0].transaction_id)})}}t5.LOG=new I("ScriptingService"),(n=d||(d={})).STATE_STOP="stop",n.STATE_BACKUP="backup",n.STATE_RESTORE="restore",(i=h||(h={})).RESULT_SUCCESS="success",i.RESULT_FAILED="failed",i.RESULT_PROCESS="process";class t8{setState(e){return this.state=e,this}setResult(e){return this.result=e,this}setMessage(e){return this.message=e,this}getState(){return this.state}getResult(){return this.result}getMessage(){return this.message}}class t6{constructor(e,t,r){this.endpoint=e,this.backupContext=t,this.nextFetcher=r}fetch(){return x(this,void 0,void 0,function*(){let e=yield this.getStorageKey(),t=this.endpoint.getStorage().loadBackupCredential(e);if(t){let r=f.VerifiableCredential.parse(t);(yield r.getExpirationDate()).getTime()<Date.now()&&(this.endpoint.getStorage().clearBackupCredential(e),t=null)}return null==t&&(t=yield this.nextFetcher.fetch(),this.endpoint.getStorage().storeBackupCredential(e,t)),t})}invalidate(){throw new F}getStorageKey(){return x(this,void 0,void 0,function*(){if(!this.storageKey){let e=this.endpoint.getUserDid(),t=this.backupContext.getParameter("targetServiceDid"),r=`${e};${yield this.endpoint.getServiceInstanceDid()};${t}`;this.storageKey=tI.encodeToStr(r)}return this.storageKey})}}class t7{constructor(e,t,r,n){this.serviceContext=e,this.backupContext=t,this.targetDid=r,this.targetHost=n}fetch(){return x(this,void 0,void 0,function*(){try{let e=yield this.serviceContext.getServiceInstanceDid();return yield this.backupContext.getAuthorization(e,this.targetDid,this.targetHost)}catch(e){throw new et("Failed to create backup credential.",e)}})}invalidate(){throw new F}}class t9{constructor(e,t){this.endpoint=e;let r=new t7(e,t,t.getParameter("targetServiceDid"),t.getParameter("targetAddress"));this.credentialFetcher=new t6(e,t,r)}getToken(){return x(this,void 0,void 0,function*(){return null!=this.jwtCode||(this.jwtCode=yield this.credentialFetcher.fetch()),this.jwtCode})}}let re=class extends g.BaseService{getState(e){return x(this,void 0,void 0,function*(){throw new F})}saveToNode(e,t){return x(this,void 0,void 0,function*(){throw new F})}restoreFromNode(e,t){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.GET)("/vault/content"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new t8).setState(function(e){if("stop"===e)return d.STATE_STOP;if("backup"===e)return d.STATE_BACKUP;if("restore"===e)return d.STATE_RESTORE;throw new ev("Unknown state.")}(e.state)).setResult(function(e){if("success"===e)return h.RESULT_SUCCESS;if("failed"===e)return h.RESULT_FAILED;if("process"===e)return h.RESULT_PROCESS;throw new ev("Unknown result.")}(e.result)).setMessage(e.message))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],re.prototype,"getState",null),A([(0,g.POST)("/vault/content?to=hive_node"),P(0,(0,g.Header)("Authorization")),P(1,g.Body),O("design:type",Function),O("design:paramtypes",[String,Object]),O("design:returntype",Promise)],re.prototype,"saveToNode",null),A([(0,g.POST)("/vault/content?from=hive_node"),P(0,(0,g.Header)("Authorization")),P(1,g.Body),O("design:type",Function),O("design:paramtypes",[String,Object]),O("design:returntype",Promise)],re.prototype,"restoreFromNode",null),re=A([(0,g.BasePath)("/api/v2")],re);class rt extends eS{constructor(e){super(e)}setBackupContext(e){this.credentialCode=new t9(this.getServiceContext(),e)}startBackup(e){return x(this,void 0,void 0,function*(){yield this.callAPI(re,e=>x(this,void 0,void 0,function*(){return yield e.saveToNode((yield this.getAccessToken()),{credential:yield this.credentialCode.getToken()})})),yield this.waitByCheckResult(e)})}waitByCheckResult(e){return x(this,void 0,void 0,function*(){let t=e=>new Promise(t=>{setTimeout(t,e)}),r=null;do r=yield this.checkResult(),e&&e(r.getResult(),r.getMessage()),yield t(1e3);while(r.getResult()==h.RESULT_PROCESS)})}stopBackup(){return x(this,void 0,void 0,function*(){return yield new Promise((e,t)=>{t(new F)})})}restoreFrom(e){return x(this,void 0,void 0,function*(){yield this.callAPI(re,e=>x(this,void 0,void 0,function*(){return yield e.restoreFromNode((yield this.getAccessToken()),{credential:yield this.credentialCode.getToken()})})),yield this.waitByCheckResult(e)})}stopRestore(){return x(this,void 0,void 0,function*(){return yield new Promise((e,t)=>{t(new F)})})}checkResult(){return x(this,void 0,void 0,function*(){return yield this.callAPI(re,e=>x(this,void 0,void 0,function*(){return yield e.getState((yield this.getAccessToken()))}))})}}class rr extends tq{constructor(e,t){super(e,t)}encrypt(){let e=this.value instanceof T?this.value:T.from(this.value);return this.encryptStream(e)}decrypt(){let e=this.value instanceof T?this.value:T.from(this.value);return this.decryptStream(e)}}class rn extends tQ{constructor(e,t){super(e),this.cipher=t}download(e,t=new t$){let r=Object.create(null,{download:{get:()=>super.download}});return x(this,void 0,void 0,function*(){let n=yield r.download.call(this,e,t);return T.from(new rr(this.cipher,n).decrypt())})}upload(e,t,r=new t$,n=!1){let i=Object.create(null,{uploadInternal:{get:()=>super.uploadInternal}});return x(this,void 0,void 0,function*(){if(tF(!!t,"Invalid data"),n)throw new X("No support for public the encrypted file.");let s=T.from(new rr(this.cipher,t).encrypt());return i.uploadInternal.call(this,e,s,r,n,!0)})}}class ri extends tq{constructor(e,t,r){super(e,r),this.nonce=t}encrypt(){let e=t=>{if(null==t)return null;if(t.constructor==Object){let r={};for(let[n,i]of Object.entries(t))r[n]=e(i);return r}if(Array.isArray(t)){let r=[];for(let n of t)r.push(e(n));return r}let r=new tG(this.cipher,this.nonce,t);return{__binary__:r.encrypt(),__type__:r.getEncryptedType()}};if(!this.value||this.value.constructor!==Object)throw new X(`Invalid dictionary ${JSON.stringify(this.value)}(${typeof this.value})`);return e(this.value)}decrypt(){let e=t=>{if(null==t)return null;if(t.constructor==Object){if("__binary__"in t&&"__type__"in t)return new tG(this.cipher,this.nonce,t.__binary__,t.__type__).decrypt();let r={};for(let[n,i]of Object.entries(t))r[n]=e(i);return r}if(Array.isArray(t)){let r=[];for(let n of t)r.push(e(n));return r}return t};return JSON.parse(JSON.stringify(e(this.value)))}}class rs extends tq{constructor(e,t,r){super(e,r),this.nonce=t}encrypt(){let e=this.value;if(null==e)return null;if(e.constructor!=Object)return rs.LOG.info(`Unexpected filter type ${typeof e}.`),e;let t={};for(let[r,n]of Object.entries(e)){let e=new tG(this.cipher,this.nonce,n);e.isBasicType()?(t[`${r}.__binary__`]=e.encrypt(),t[`${r}.__type__`]=e.getEncryptedType()):t[r]=n}return t}decrypt(){throw new F}}rs.LOG=new I("EncryptionFilter");class ro extends tq{constructor(e,t,r){super(e,r),this.nonce=t}encrypt(){let e=this.value;return null==e?null:("$set"in e&&e.$set&&e.$set.constructor==Object&&(e.$set=new ri(this.cipher,this.nonce,e.$set).encrypt()),"$setOnInsert"in e&&e.$setOnInsert&&e.$setOnInsert.constructor==Object&&(e.$setOnInsert=new ri(this.cipher,this.nonce,e.$setOnInsert).encrypt()),e)}decrypt(){throw new F}}class ra{constructor(e,t){this.cipher=e,this.nonce=t}static getGeneralJsonDict(e,t){let r=JSON.stringify(e),n=JSON.parse(r);if(n.constructor!=Object)throw new X(t);return n}encryptDoc(e,t=!0){let r=ra.getGeneralJsonDict(e,"The document must be dictionary.");if(0==Object.keys(r).length)return{};let n=new ri(this.cipher,this.nonce,r);return t?n.encrypt():n.decrypt()}encryptDocs(e,t=!0){let r=[];for(let n of e)r.push(this.encryptDoc(n,t));return r}encryptFilter(e){let t=ra.getGeneralJsonDict(e,"The filter must be dictionary.");return 0==Object.keys(t).length?{}:new rs(this.cipher,this.nonce,t).encrypt()}encryptUpdate(e){let t=ra.getGeneralJsonDict(e,"The update must be dictionary.");return 0==Object.keys(t).length?{}:new ro(this.cipher,this.nonce,t).encrypt()}}class ru extends t1{constructor(e,t,r){super(e),this.databaseEncrypt=new ra(t,r)}createCollection(e){let t=Object.create(null,{createCollectionInternal:{get:()=>super.createCollectionInternal}});return x(this,void 0,void 0,function*(){return t.createCollectionInternal.call(this,e,!0)})}insertOne(e,t,r){let n=Object.create(null,{insertMany:{get:()=>super.insertMany}});return x(this,void 0,void 0,function*(){return n.insertMany.call(this,e,[this.databaseEncrypt.encryptDoc(t)],r)})}insertMany(e,t,r){let n=Object.create(null,{insertMany:{get:()=>super.insertMany}});return x(this,void 0,void 0,function*(){return n.insertMany.call(this,e,this.databaseEncrypt.encryptDocs(t),r)})}countDocuments(e,t,r){let n=Object.create(null,{countDocuments:{get:()=>super.countDocuments}});return x(this,void 0,void 0,function*(){return n.countDocuments.call(this,e,this.databaseEncrypt.encryptFilter(t),r)})}findOne(e,t,r){let n=Object.create(null,{findOne:{get:()=>super.findOne}});return x(this,void 0,void 0,function*(){return n.findOne.call(this,e,this.databaseEncrypt.encryptFilter(t),r)})}findMany(e,t,r){let n=Object.create(null,{findManyInternal:{get:()=>super.findManyInternal}});return x(this,void 0,void 0,function*(){let i=yield n.findManyInternal.call(this,e,this.databaseEncrypt.encryptFilter(t),r);if(!i.isEncrypt())throw new X("Cannot decrypt the documents from the encryption collection.");return this.databaseEncrypt.encryptDocs(i.getItems(),!1)})}query(e,t,r){let n=Object.create(null,{queryInternal:{get:()=>super.queryInternal}});return x(this,void 0,void 0,function*(){let i=yield n.queryInternal.call(this,e,this.databaseEncrypt.encryptFilter(t),r);if(!i.isEncrypt())throw new X("Cannot decrypt the documents from the encryption collection.");return this.databaseEncrypt.encryptDocs(i.getItems(),!1)})}updateOne(e,t,r,n){let i=Object.create(null,{updateInternal:{get:()=>super.updateInternal}});return x(this,void 0,void 0,function*(){let s=this.databaseEncrypt.encryptFilter(t),o=this.databaseEncrypt.encryptUpdate(r);return yield i.updateInternal.call(this,e,!0,s,o,n)})}updateMany(e,t,r,n){return x(this,void 0,void 0,function*(){let i=this.databaseEncrypt.encryptFilter(t),s=this.databaseEncrypt.encryptUpdate(r);return yield this.updateInternal(e,!1,i,s,n)})}deleteOne(e,t){let r=Object.create(null,{deleteOne:{get:()=>super.deleteOne}});return x(this,void 0,void 0,function*(){yield r.deleteOne.call(this,e,this.databaseEncrypt.encryptFilter(t))})}deleteMany(e,t){let r=Object.create(null,{deleteMany:{get:()=>super.deleteMany}});return x(this,void 0,void 0,function*(){yield r.deleteMany.call(this,e,this.databaseEncrypt.encryptFilter(t))})}}class rc{setName(e){return this.name=e,this}setDeveloperDid(e){return this.developer_did=e,this}setIconUrl(e){return this.icon_url=e,this}setUserDid(e){return this.user_did=e,this}setAppDid(e){return this.app_did=e,this}setUsedStorageSize(e){return this.used_storage_size=e,this}setAccessAccount(e){return this.access_count=e,this}setAccessAmount(e){return this.access_amount=e,this}setAccessLastTime(e){return this.access_last_time=e,this}getName(){return this.name}getDeveloperDid(){return this.developer_did}getIconUrl(){return this.icon_url}getUserDid(){return this.user_did}getAppDid(){return this.app_did}getUsedStorageSize(){return this.used_storage_size}getAccessCount(){return this.access_count}getAccessAmount(){return this.access_amount}getAccessLastTime(){return this.access_last_time}}class rl{setServiceDid(e){return this.serviceDid=e,this}setStorageQuota(e){return this.storageQuota=e,this}setStorageUsed(e){return this.storageUsed=e,this}setCreated(e){return this.created=e,this}setUpdated(e){return this.updated=e,this}setPricePlan(e){return this.pricePlan=e,this}setStartTime(e){return this.startTime=e,this}setEndTime(e){return this.endTime=e,this}getServiceDid(){return this.serviceDid}getStorageQuota(){return this.storageQuota}getStorageUsed(){return this.storageUsed}getCreated(){return this.created}getUpdated(){return this.updated}getPricePlan(){return this.pricePlan}getStartTime(){return this.startTime}getEndTime(){return this.endTime}}class rd extends rl{}class rh{setAmount(e){return this.amount=e,this}setCurrency(e){return this.currency=e,this}setMaxStorage(e){return this.maxStorage=e,this}setName(e){return this.name=e,this}setServiceDays(e){return this.serviceDays=e,this}getAmount(){return this.amount}getCurrency(){return this.currency}getMaxStorage(){return this.maxStorage}getName(){return this.name}getServiceDays(){return this.serviceDays}}class rp extends rl{setAppCount(e){return this.app_count=e,this}setAccessCount(e){return this.access_count=e,this}setAccessAmount(e){return this.access_amount=e,this}setAccessLastTime(e){return this.access_last_time=e,this}getAppCount(){return this.app_count}getAccessCount(){return this.access_count}getAccessAmount(){return this.access_amount}getAccessLastTime(){return this.access_last_time}}let rf=class extends g.BaseService{getVaultPricePlans(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}getBackupPricePlans(e,t,r){return x(this,void 0,void 0,function*(){throw new F})}subscribeToVault(e){return x(this,void 0,void 0,function*(){throw new F})}activateVault(e){return x(this,void 0,void 0,function*(){throw new F})}deactivateVault(e){return x(this,void 0,void 0,function*(){throw new F})}unsubscribeVault(e,t){return x(this,void 0,void 0,function*(){throw new F})}getVaultInfo(e){return x(this,void 0,void 0,function*(){throw new F})}getVaultAppStats(e){return x(this,void 0,void 0,function*(){throw new F})}subscribeToBackup(e){return x(this,void 0,void 0,function*(){throw new F})}activateBackup(e){return x(this,void 0,void 0,function*(){throw new F})}deactivateBackup(e){return x(this,void 0,void 0,function*(){throw new F})}unsubscribeBackup(e){return x(this,void 0,void 0,function*(){throw new F})}getBackupInfo(e){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.GET)("/subscription/pricing_plan"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.pricingPlans.map(e=>(new rh).setAmount(e.amount).setCurrency(e.currency).setMaxStorage(e.maxStorage).setName(e.name).setServiceDays(e.serviceDays)))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Query)("subscription")),P(2,(0,g.Query)("name")),O("design:type",Function),O("design:paramtypes",[String,String,String]),O("design:returntype",Promise)],rf.prototype,"getVaultPricePlans",null),A([(0,g.GET)("/subscription/pricing_plan"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.backupPlans.map(e=>(new rh).setAmount(e.amount).setCurrency(e.currency).setMaxStorage(e.maxStorage).setName(e.name).setServiceDays(e.serviceDays)))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Query)("subscription")),P(2,(0,g.Query)("name")),O("design:type",Function),O("design:paramtypes",[String,String,String]),O("design:returntype",Promise)],rf.prototype,"getBackupPricePlans",null),A([(0,g.PUT)("/subscription/vault"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new rp).setAppCount(e.app_count).setAccessCount(e.access_count).setAccessAmount(e.access_amount).setAccessLastTime(e.access_last_time).setServiceDid(e.service_did).setStorageQuota(e.storage_quota).setStorageUsed(e.storage_used).setCreated(new Date(1e3*Number(e.created))).setUpdated(new Date(1e3*Number(e.updated))).setPricePlan(e.pricing_plan))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"subscribeToVault",null),A([(0,g.POST)("/subscription/vault?op=activation"),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"activateVault",null),A([(0,g.POST)("/subscription/vault?op=deactivation"),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"deactivateVault",null),A([(0,g.DELETE)("/subscription/vault"),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Query)("force")),O("design:type",Function),O("design:paramtypes",[String,Boolean]),O("design:returntype",Promise)],rf.prototype,"unsubscribeVault",null),A([(0,g.GET)("/subscription/vault"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>{let t=-1==e.access_last_time?null:new Date(1e3*Number(e.access_last_time));return(new rp).setAppCount(e.app_count).setAccessCount(e.access_count).setAccessAmount(e.access_amount).setAccessLastTime(t).setServiceDid(e.service_did).setStorageQuota(e.storage_quota).setStorageUsed(e.storage_used).setStartTime(new Date(1e3*Number(e.start_time))).setEndTime(e.end_time>0?new Date(1e3*Number(e.end_time)):null).setCreated(new Date(1e3*Number(e.created))).setUpdated(new Date(1e3*Number(e.updated))).setPricePlan(e.pricing_plan)})),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"getVaultInfo",null),A([(0,g.GET)("/subscription/vault/app_stats"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.apps.map(t=>{let r=-1==t.access_last_time?null:new Date(1e3*e.access_last_time);return(new rc).setName(t.name).setDeveloperDid(t.developer_did).setIconUrl(t.icon_url).setUserDid(t.user_did).setAppDid(t.app_did).setUsedStorageSize(t.used_storage_size).setAccessAccount(t.access_count).setAccessAmount(t.access_amount).setAccessLastTime(r)}))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"getVaultAppStats",null),A([(0,g.PUT)("/subscription/backup"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new rd).setServiceDid(e.service_did).setStorageQuota(e.storage_quota).setStorageUsed(e.storage_used).setCreated(new Date(1e3*Number(e.created))).setUpdated(new Date(1e3*Number(e.updated))).setPricePlan(e.pricing_plan))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"subscribeToBackup",null),A([(0,g.POST)("/subscription/backup?op=activation"),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"activateBackup",null),A([(0,g.POST)("/subscription/backup?op=deactivation"),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"deactivateBackup",null),A([(0,g.DELETE)("/subscription/backup"),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"unsubscribeBackup",null),A([(0,g.GET)("/subscription/backup"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new rd).setServiceDid(e.service_did).setStorageQuota(e.storage_quota).setStorageUsed(e.storage_used).setStartTime(new Date(1e3*Number(e.start_time))).setEndTime(e.start_time>0?new Date(1e3*Number(e.start_time)):null).setCreated(new Date(1e3*Number(e.created))).setUpdated(new Date(1e3*Number(e.updated))).setPricePlan(e.pricing_plan))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rf.prototype,"getBackupInfo",null),rf=A([(0,g.BasePath)("/api/v2")],rf);class rg extends eS{constructor(e,t){super(new tB(e,t)),this.filesService=new tQ(this.getServiceContext()),this.databaseService=new t1(this.getServiceContext()),this.scripting=new t5(this.getServiceContext()),this.backupService=new rt(this.getServiceContext())}enableEncryption(e){return x(this,void 0,void 0,function*(){if(this.cipher)throw new $("Encryption ciper already being enabled.");try{let t=this.getServiceContext().getAppContext().getAppDid();this.cipher=yield this.getEncryptionCipher(t,0,e)}catch(e){throw new $(`Generating encryption cipher error: ${e}`)}})}getFilesService(e=!1){if(e&&null===this.cipher)throw new X("Encryption has not been enabled, call 'enableEncrytpion'");return e&&!this.encryptedFileServcie&&(this.encryptedFileServcie=new rn(this.getServiceContext(),this.cipher)),e?this.encryptedFileServcie:this.filesService}getDatabaseService(e=!1){if(e&&null===this.cipher)throw new X("Encryption has not been enabled, call 'enableEncrytpion'");return e&&!this.encryptedDBService&&(this.encryptedDBService=new ru(this.getServiceContext(),this.cipher,rg.DATABASE_NONCE)),e?this.encryptedDBService:this.databaseService}getScriptingService(){return this.scripting}getBackupService(){return this.backupService}getAppStats(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.getVaultAppStats((yield this.getAccessToken()))}))})}}rg.DATABASE_NONCE=T.from("404142434445464748494a4b4c4d4e4f5051525354555657","hex"),(s=p||(p={})).NORMAL="normal",s.EXPIRED="expired",s.PAID="paid",s.ARCHIVE="archive";class ry{setOrderId(e){return this.order_id=e,this}setSubscription(e){return this.subscription=e,this}setPricingPlan(e){return this.pricing_plan=e,this}setPayingDid(e){return this.paying_did=e,this}setPaymentAmount(e){return this.payment_amount=e,this}setCreateTime(e){return this.create_time=e,this}setExpirationTime(e){return this.expiration_time=e,this}setReceivingAddress(e){return this.receiving_address=e,this}setState(e){return this.state=e,this}setProof(e){return this.proof=e,this}getOrderId(){return this.order_id}getSubscription(){return this.subscription}getPricingPlan(){return this.pricing_plan}getPayingDid(){return this.paying_did}getPaymentAmount(){return this.payment_amount}getCreateTime(){return this.create_time}getExpirationTime(){return this.expiration_time}getReceivingAddress(){return this.receiving_address}getState(){return this.state}getProof(){return this.proof}}class rm{setReceiptId(e){return this.receipt_id=e,this}setOrderId(e){return this.order_id=e,this}setSubscription(e){return this.subscription=e,this}setPricingPlan(e){return this.pricing_plan=e,this}setPaymentAmount(e){return this.payment_amount=e,this}setPaidDid(e){return this.paid_did=e,this}setCreateTime(e){return this.create_time=e,this}setReceivingAddress(e){return this.receiving_address=e,this}setReceiptProof(e){return this.receipt_proof=e,this}getReceiptId(){return this.receipt_id}getOrderId(){return this.order_id}getSubscription(){return this.subscription}getPricingPlan(){return this.pricing_plan}getPaymentAmount(){return this.payment_amount}getPaidDid(){return this.paid_did}getCreateTime(){return this.create_time}getReceivingAddress(){return this.receiving_address}getReceiptProof(){return this.receipt_proof}}function rv(e){if("normal"===e)return p.NORMAL;if("expired"===e)return p.EXPIRED;if("paid"===e)return p.PAID;if("archive"===e)return p.ARCHIVE;throw new ev("Unknown result.")}let r_=class extends g.BaseService{version(e){return x(this,void 0,void 0,function*(){throw new F})}placeOrder(e,t){return x(this,void 0,void 0,function*(){throw new F})}settleOrder(e,t){return x(this,void 0,void 0,function*(){throw new F})}getOrders(e,t){return x(this,void 0,void 0,function*(){throw new F})}getReceipts(e,t){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.GET)("/payment/version"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.version)),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],r_.prototype,"version",null),A([(0,g.PUT)("/payment/order"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new ry).setOrderId(e.order_id).setSubscription(e.subscription).setPricingPlan(e.pricing_plan).setPayingDid(e.paying_did).setPaymentAmount(e.payment_amount).setCreateTime(e.create_time).setExpirationTime(e.expiration_time).setReceivingAddress(e.receiving_address).setState(rv(e.state)).setProof(e.proof))),P(0,(0,g.Header)("Authorization")),P(1,g.Body),O("design:type",Function),O("design:paramtypes",[String,Object]),O("design:returntype",Promise)],r_.prototype,"placeOrder",null),A([(0,g.POST)("/payment/order/{orderId}"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>(new rm).setReceiptId(e.receipt_id).setOrderId(e.order_id).setSubscription(e.subscription).setPricingPlan(e.pricing_plan).setPaymentAmount(e.payment_amount).setPaidDid(e.paid_did).setCreateTime(e.create_time).setReceivingAddress(e.receiving_address).setReceiptProof(e.receipt_proof))),P(0,(0,g.Header)("Authorization")),P(1,(0,g.Path)("orderId")),O("design:type",Function),O("design:paramtypes",[String,Number]),O("design:returntype",Promise)],r_.prototype,"settleOrder",null),A([(0,g.GET)("/payment/order"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.orders.map(t=>(new ry).setOrderId(e.order_id).setSubscription(e.subscription).setPricingPlan(e.pricing_plan).setPayingDid(e.paying_did).setPaymentAmount(e.payment_amount).setCreateTime(e.create_time).setExpirationTime(e.expiration_time).setReceivingAddress(e.receiving_address).setState(rv(e.state)).setProof(e.proof)))),P(0,(0,g.Header)("Authorization")),P(1,g.Body),O("design:type",Function),O("design:paramtypes",[String,Object]),O("design:returntype",Promise)],r_.prototype,"getOrders",null),A([(0,g.GET)("/payment/receipt"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.receipts.map(e=>(new rm).setReceiptId(e.receipt_id).setOrderId(e.order_id).setSubscription(e.subscription).setPricingPlan(e.pricing_plan).setPaymentAmount(e.payment_amount).setPaidDid(e.paid_did).setCreateTime(e.create_time).setReceivingAddress(e.receiving_address).setReceiptProof(e.receipt_proof)))),P(0,(0,g.Header)("Authorization")),P(1,g.Body),O("design:type",Function),O("design:paramtypes",[String,Object]),O("design:returntype",Promise)],r_.prototype,"getReceipts",null),r_=A([(0,g.BasePath)("/api/v2")],r_);class rb extends eS{constructor(e){super(e)}placeOrder(e,t){return x(this,void 0,void 0,function*(){return tH(e,"Missing subscription."),tH(t,"Missing pricing name."),yield this.callAPI(r_,r=>x(this,void 0,void 0,function*(){return yield r.placeOrder((yield this.getAccessToken()),{subscription:e,pricing_name:t})}))})}payOrder(){return x(this,void 0,void 0,function*(){return yield new Promise((e,t)=>{t(new F("Please use payment SDK."))})})}settleOrder(e){return x(this,void 0,void 0,function*(){return tH(e,"Missing order id."),yield this.callAPI(r_,t=>x(this,void 0,void 0,function*(){return yield t.settleOrder((yield this.getAccessToken()),e)}))})}getOrder(e,t){return x(this,void 0,void 0,function*(){if(tH(e,"Missing subscription."),tH(t,"Missing order id."),"vault"!=e&&"backup"!=e)throw new C("Invalid subscription. Must be 'vault' or 'backup'");let r=yield this.getOrdersInternal(e,t);return r?r[0]:null})}getOrders(e){return x(this,void 0,void 0,function*(){if(tH(e,"Missing subscription."),"vault"!=e&&"backup"!=e)throw new C("Invalid subscription. Must be 'vault' or 'backup'");return yield this.getOrdersInternal(e)})}getOrdersInternal(e,t){return x(this,void 0,void 0,function*(){return yield this.callAPI(r_,r=>x(this,void 0,void 0,function*(){return yield r.getOrders((yield this.getAccessToken()),{subscription:e,order_id:t})}))})}getReceipts(e){return x(this,void 0,void 0,function*(){return yield this.callAPI(r_,t=>x(this,void 0,void 0,function*(){return yield t.getReceipts((yield this.getAccessToken()),{order_id:e})}))})}getVersion(){return x(this,void 0,void 0,function*(){return yield this.callAPI(r_,e=>x(this,void 0,void 0,function*(){return yield e.version((yield this.getAccessToken()))}))})}}class rw extends eS{constructor(e){super(e)}getVaultPricingPlanList(){return x(this,void 0,void 0,function*(){return this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.getVaultPricePlans((yield this.getAccessToken()),"vault")}))})}getVaultPricingPlan(e){return x(this,void 0,void 0,function*(){tF(!!e,"Invalid plan name.");let t=yield this.callAPI(rf,t=>x(this,void 0,void 0,function*(){return yield t.getVaultPricePlans((yield this.getAccessToken()),"vault",e)}));return t?t[0]:null})}getVaultInfo(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.getVaultInfo((yield this.getAccessToken()))}))})}subscribeToVault(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.subscribeToVault((yield this.getAccessToken()))}))})}unsubscribeVault(e){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,t=>x(this,void 0,void 0,function*(){return yield t.unsubscribeVault((yield this.getAccessToken()),e)}))})}activateVault(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.activateVault((yield this.getAccessToken()))}))})}deactivateVault(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.deactivateVault((yield this.getAccessToken()))}))})}getBackupPricingPlanList(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.getBackupPricePlans((yield this.getAccessToken()),"backup")}))})}getBackupPricingPlan(e){return x(this,void 0,void 0,function*(){tF(!!e,"Invalid plan name.");let t=yield this.callAPI(rf,t=>x(this,void 0,void 0,function*(){return yield t.getBackupPricePlans((yield this.getAccessToken()),"backup",e)}));return t?t[0]:null})}getBackupInfo(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.getBackupInfo((yield this.getAccessToken()))}))})}subscribeToBackup(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.subscribeToBackup((yield this.getAccessToken()))}))})}unsubscribeBackup(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.unsubscribeBackup((yield this.getAccessToken()))}))})}activateBackup(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.activateBackup((yield this.getAccessToken()))}))})}deactivateBackup(){return x(this,void 0,void 0,function*(){return yield this.callAPI(rf,e=>x(this,void 0,void 0,function*(){return yield e.deactivateBackup((yield this.getAccessToken()))}))})}}class rS extends tB{constructor(e,t){super(e,t),this.paymentService=new rb(this),this.subscriptionService=new rw(this)}getPricingPlanList(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.getBackupPricingPlanList()})}getPricingPlan(e){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.getBackupPricingPlan(e)})}subscribe(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.subscribeToBackup()})}checkSubscription(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.getBackupInfo()})}unsubscribe(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.unsubscribeBackup()})}placeOrder(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.placeOrder("backup",e)})}getOrder(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.getOrder("backup",e)})}settleOrder(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.settleOrder(e)})}getOrders(){return x(this,void 0,void 0,function*(){return yield this.paymentService.getOrders("backup")})}getReceipts(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.getReceipts(e)})}getVersion(){return x(this,void 0,void 0,function*(){return yield this.paymentService.getVersion()})}}class rE{constructor(e){this.ipfsGatewayUrl=e||"https://ipfs.trinity-tech.io",this.https=this.ipfsGatewayUrl.startsWith("https://")?c||(c=r.t(S,2)):l||(l=r.t(w,2))}getFile(e){return new Promise(t=>{let r=[];this.https.get(`${this.ipfsGatewayUrl}/ipfs/${e}`,function(e){e.on("data",e=>r.push(e)).on("end",()=>{t(T.concat(r))})})})}}let rT=class extends g.BaseService{promoteToVault(e){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.POST)("/backup/promotion"),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],rT.prototype,"promoteToVault",null),rT=A([(0,g.BasePath)("/api/v2")],rT);class rA extends eS{constructor(e){super(e)}promote(){return x(this,void 0,void 0,function*(){yield this.callAPI(rT,e=>x(this,void 0,void 0,function*(){return yield e.promoteToVault((yield this.getAccessToken()))}))})}}class rP extends tB{constructor(e,t){if(super(e,t),!e)throw new X("Invalid parameter context");this.scriptService=new t5(this)}callScript(e,t,r,n){return x(this,void 0,void 0,function*(){return yield this.scriptService.callScript(e,t,r,n)})}callScriptUrl(e,t,r,n){return x(this,void 0,void 0,function*(){return yield this.scriptService.callScriptUrl(e,t,r,n)})}uploadFile(e,t,r=new t$){return x(this,void 0,void 0,function*(){return yield this.scriptService.uploadFile(e,t,r)})}downloadFile(e,t=new t$){return x(this,void 0,void 0,function*(){return yield this.scriptService.downloadFile(e,t)})}downloadFileByHiveUrl(e){return x(this,void 0,void 0,function*(){return yield this.scriptService.downloadFileByHiveUrl(e)})}}class rO extends tB{constructor(e){if(super(null,e),!e)throw new X("Invalid parameter context");this.scriptService=new t5(this)}callScript(e,t,r,n){return x(this,void 0,void 0,function*(){return yield this.scriptService.callScript(e,t,r,n)})}callScriptUrl(e,t,r,n){return x(this,void 0,void 0,function*(){return yield this.scriptService.callScriptUrl(e,t,r,n)})}uploadFile(e,t,r=new t$){return x(this,void 0,void 0,function*(){return yield this.scriptService.uploadFile(e,t,r)})}downloadFile(e,t=new t$){return x(this,void 0,void 0,function*(){return yield this.scriptService.downloadFile(e,t)})}downloadAnonymousFile(e,t,r){return x(this,void 0,void 0,function*(){let n=yield this.scriptService.callScript("__anonymous_files__",{path:r},e,t);return yield this.scriptService.downloadFile(Object.values(n)[0].transaction_id)})}}class rx{constructor(e,t,r){if(this.name=e,this.type=t,this.body=r,!this.name)throw new X("Invalid name")}getName(){return this.name}getType(){return this.type}getBody(){return this.body}}class rR extends rx{constructor(e,t,r){super(e,t,r)}}class rD extends rR{constructor(e,t,r){super(e,t,r||[])}appendCondition(e){if(!e)throw new X("Invalid condition");return e instanceof rD?e.getBody()&&super.getBody().push(...e.getBody()):super.getBody().push(e),this}}rD.AND="and",rD.OR="or";class rI extends rD{constructor(e,t){super(e,rD.OR,t)}}class rk extends rD{constructor(e,t){super(e,rD.AND,t)}}class rC{}rC.AGGREGATED="aggregated",rC.FIND="find",rC.COUNT="count",rC.INSERT="insert",rC.UPDATE="update",rC.DELETE="delete",rC.FILE_UPLOAD="fileUpload",rC.FILE_DOWNLOAD="fileDownload",rC.FILE_PROPERTIES="fileProperties",rC.FILE_HASH="fileHash";class rN extends rx{constructor(e,t,r){super(e,t,r),this.output=!0}setOutput(e){return this.output=e,this}isOutput(){return this.output}static createRunFileParams(e){return{path:e}}}class rj{constructor(e){if(this.collection=e,!this.collection)throw new X("Invalid collection")}getCollection(){return this.collection}}class rL{constructor(e){this.path=e||"$params.path"}}class rM extends tB{constructor(e,t){super(e,t),this.paymentService=new rb(this),this.subscriptionService=new rw(this)}getPricingPlanList(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.getVaultPricingPlanList()})}getPricingPlan(e){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.getVaultPricingPlan(e)})}subscribe(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.subscribeToVault()})}activate(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.activateVault()})}deactivate(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.deactivateVault()})}checkSubscription(){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.getVaultInfo()})}unsubscribe(e=!1){return x(this,void 0,void 0,function*(){return yield this.subscriptionService.unsubscribeVault(e)})}placeOrder(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.placeOrder("vault",e)})}getOrder(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.getOrder("vault",e)})}settleOrder(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.settleOrder(e)})}getOrders(){return x(this,void 0,void 0,function*(){return yield this.paymentService.getOrders("vault")})}getReceipts(e){return x(this,void 0,void 0,function*(){return yield this.paymentService.getReceipts(e)})}getVersion(){return x(this,void 0,void 0,function*(){return yield this.paymentService.getVersion()})}}class rU{constructor(e,t,r){this.skip=e,this.limit=t,this.maxTimeMS=r}getSkip(){return this.skip}getLimit(){return this.limit}getMaxTimeMS(){return this.maxTimeMS}}class rB{constructor(e,t,r){this.collection=e,this.filter=t,this.options=r}getCollection(){return this.collection}getFilter(){return this.filter}getOptions(){return this.options}}class rF extends rR{constructor(e,t,r,n){super(e,rF.TYPE,new rB(t,r,n))}}rF.TYPE="queryHasResults";class rH extends rj{constructor(e,t){if(super(e),this.filter=t,!this.filter)throw new X("Invalid filter")}getFilter(){return this.filter}}class rq extends rN{constructor(e,t,r){super(e,rC.DELETE,new rH(t,r))}}class rG extends rj{constructor(e,t,r){if(super(e),this.filter=t,this.options=r,!this.filter)throw new X("Invalid filter")}getFilter(){return this.filter}getOptions(){return this.options}}class rz extends rN{constructor(e,t,r,n){super(e,rC.FIND,new rG(t,r,n))}}class rV extends rj{constructor(e,t,r){if(super(e),this.filter=t,this.options=r,!this.filter)throw new X("Invalid filter")}getFilter(){return this.filter}getOptions(){return this.options}}class rW extends rN{constructor(e,t,r,n){super(e,rC.COUNT,new rV(t,r,n))}}class r$ extends rj{constructor(e,t,r){if(super(e),this.document=t,this.options=r,!this.document)throw new X("Invalid document")}getDocument(){return this.document}getOptions(){return this.options}}class rQ extends rN{constructor(e,t,r,n){super(e,rC.INSERT,new r$(t,r,n))}}class rK extends rN{constructor(e){super(e,rC.FILE_HASH,new rL)}}class rJ extends rN{constructor(e,t){super(e,rC.AGGREGATED,t||[])}appendExecutable(e){if(!e)throw new X("Invalid executable");return e instanceof rJ?e.getBody()&&super.getBody().push(...e.getBody()):super.getBody().push(e),this}}class rY extends rN{constructor(e){super(e,rC.FILE_UPLOAD,new rL)}}class rX extends rN{constructor(e,t){super(e,rC.FILE_DOWNLOAD,new rL(t))}}class rZ extends rN{constructor(e){super(e,rC.FILE_PROPERTIES,new rL)}}class r0 extends rj{constructor(e,t,r,n){if(super(e),this.filter=t,this.update=r,this.options=n,!this.filter)throw new X("Invalid filter");if(!this.update)throw new X("Invalid update")}getFilter(){return this.filter}getUpdate(){return this.update}getOptions(){return this.options}}class r1 extends rN{constructor(e,t,r,n,i){super(e,rC.UPDATE,new r0(t,r,n,i))}}class r2{constructor(){this.timestamp=!0}setBypassDocumentValidation(e){return this.bypass_document_validation=e,this}setOrdered(e){return this.ordered=e,this}setTimestamp(e){return this.timestamp=e,this}isBypassDocumentValidation(){return this.bypass_document_validation}isOrdered(){return this.ordered}isTimestamp(){return this.timestamp}}class r3{setSkip(e){return this.skip=e,this}setLimit(e){return this.limit=e,this}getSkip(){return this.skip}getLimit(){return this.limit}}class r4{constructor(){this.timestamp=!0}setUpsert(e){return this.upsert=e,this}setBypassDocumentValidation(e){return this.bypass_document_validation=e,this}setTimestamp(e){return this.timestamp=e,this}isUpsert(){return this.bypass_document_validation}isBypassDocumentValidation(){return this.bypass_document_validation}isTimestamp(){return this.timestamp}}class r5 extends r3{setProjection(e){return this.projection=e,this}setSort(e){return this.sort=e?e.map(e=>[e.getKey(),e.getOrder()]):void 0,this}setAllowPartialResults(e){return this.allow_partial_results=e,this}setReturnKey(e){return this.return_key=e,this}setShowRecordId(e){return this.show_record_id=e,this}setBatchSize(e){return this.batch_size=e,this}getProjection(){return this.projection}getSort(){return this.sort}isAllowPartialResults(){return this.allow_partial_results}isReturnKey(){return this.return_key}isShowRecordId(){return this.show_record_id}getBatchSize(){return this.batch_size}}class r8{setSkip(e){return this.skip=e,this}setLimit(e){return this.limit=e,this}setMaxTimeMS(e){return this.maxTimeMS=e,this}getSkip(){return this.skip}getLimit(){return this.limit}getMaxTimeMS(){return this.maxTimeMS}}class r6{constructor(e,t){this.key=e,this.order=t}getKey(){return this.key}getOrder(){return this.order}}r6.ASCENDING=1,r6.DESCENDING=-1;class r7 extends r6{constructor(e){super(e,r6.ASCENDING)}}class r9 extends r6{constructor(e){super(e,r6.DESCENDING)}}class ne{}class nt{constructor(e){this.contextParameters=e}static create(e){return x(this,void 0,void 0,function*(){let t=new nt(e);return yield t.init(),t})}init(){return x(this,void 0,void 0,function*(){this.appRootId=yield this.initPrivateIdentity(this.contextParameters.appMnemonics,this.contextParameters.appDID,this.contextParameters.appStorePass),nt.LOG.debug("Init app private identity"),this.userRootId=yield this.initPrivateIdentity(this.contextParameters.userMnemonics,this.contextParameters.userDID,this.contextParameters.userStorePass),nt.LOG.debug("Init user private identity"),yield this.initDid(this.appRootId),yield this.initDid(this.userRootId),this.appDID=yield this.store.loadDid(this.contextParameters.appDID)})}initPrivateIdentity(e,t,r){return x(this,void 0,void 0,function*(){this.store=yield f.DIDStore.open(this.contextParameters.storePath),nt.LOG.debug("Opens store");let t,n=f.RootIdentity.getIdFromMnemonic(e,this.contextParameters.appPhrasePass);if(nt.LOG.debug("ID from mnemonic {} : {}",e,n),yield this.store.containsRootIdentity(n))return nt.LOG.debug("Store constains RootIdentity"),yield this.store.loadRootIdentity(n);try{nt.LOG.info("Creating root identity for mnemonic {}",e),t=yield f.RootIdentity.createFromMnemonic(e,this.contextParameters.appPhrasePass,this.store,r)}catch(t){throw nt.LOG.error("Error Creating root identity for mnemonic {}. Error {}",e,JSON.stringify(t)),new K("Error Creating root identity for mnemonic",t)}return yield t.synchronize(),t.setDefaultDid(this.contextParameters.appDID),t})}initDid(e){return x(this,void 0,void 0,function*(){let t=yield this.store.listDids();if(t.length>0)return void(this.contextParameters.appDID=t[0]);nt.LOG.debug("Init app did");let r=yield e.getDefaultDid(),n=yield r.resolve();yield this.store.storeDid(n),nt.LOG.debug("Resolve app doc")})}getLocalDataDir(){return this.contextParameters.storePath}getAppInstanceDocument(){return this.appDID}getAuthorization(e){return x(this,void 0,void 0,function*(){try{let t=(yield(new f.JWTParserBuilder).setAllowedClockSkewSeconds(300).build().parse(e)).getBody();if(null==t)throw new k("Invalid jwt token as authorization.");nt.LOG.debug("getAuthorization createPresentation");let r=yield this.issueDiplomaFor(f.DID.from(this.contextParameters.appDID));nt.LOG.debug("diploma created");let n=yield this.createPresentation(r,t.getIssuer(),t.get("nonce"));return yield this.createToken(n,t.getIssuer())}catch(e){nt.LOG.error("{} stack {}",e,e.stack)}})}getIssuer(){return x(this,void 0,void 0,function*(){nt.LOG.debug("getIssuer");let e=yield this.store.loadDid(this.contextParameters.userDID);nt.LOG.debug("userDocument: {}",e.toString(!0));try{return yield f.Issuer.create(e)}catch(e){return nt.LOG.debug("error new Issuer {}",e),null}})}issueDiplomaFor(e){return x(this,void 0,void 0,function*(){nt.LOG.debug("issueDiplomaFor");let t={};t.appDid=e.toString(),t.appInstanceDid=e.toString();let r=E();r=r.add(5,"year");let n=(yield this.getIssuer()).issueFor(e),i=yield n.id(f.DIDURL.from("#app-id-credential",e)).type("AppIdCredential").properties(t).expirationDate(r.toDate()).seal(this.getUserStorePassword());return nt.LOG.debug("VerifiableCredential IsValid: {}",i.isValid()),i})}createPresentation(e,t,r){return x(this,void 0,void 0,function*(){nt.LOG.debug("create Presentation");let n=yield f.VerifiablePresentation.createFor(this.getAppDid(),null,this.getDIDStore()),i=yield n.credentials(e).realm(t).nonce(r).seal(this.getAppStorePassword());return nt.LOG.debug("VerifiablePresentation:{}",i.toString()),i})}getAppStorePassword(){return this.contextParameters.appStorePass}getUserStorePassword(){return this.contextParameters.userStorePass}getAppDocument(){return x(this,void 0,void 0,function*(){return yield this.store.loadDid(this.contextParameters.appDID)})}createToken(e,t){return x(this,void 0,void 0,function*(){let r=E(),n=r.unix(),i=r.unix(),s=r.add(3,"month").unix(),o=yield this.getAppDocument();return yield o.jwtBuilder().addHeader(f.JWTHeader.TYPE,f.JWTHeader.JWT_TYPE).addHeader("version","1.0").setSubject("DIDAuthResponse").setAudience(t).setIssuedAt(n).setExpiration(s).setNotBefore(i).claimsWithJson("presentation",e.toString(!0)).sign(this.contextParameters.appStorePass)})}getDIDStore(){return this.store}getAppDid(){return f.DID.from(this.contextParameters.appDID)}}nt.LOG=new I("DefaultAppContextProvider");class nr{constructor(e,t){this.targetServiceDid=e,this.targetProviderAddress=t}getAuthorization(e,t,r){return Promise.resolve("")}getType(){return null}getParameter(e){switch(e){case"targetAddress":return this.targetProviderAddress;case"targetServiceDid":return this.targetServiceDid}return null}}class nn extends tB{constructor(e,t){super(e,t),this.promotionService=new rA(this)}getPromotionService(){return this.promotionService}}class ni{setPricingName(e){return this.pricing_using=e,this}setMaxStorage(e){return this.max_storage=e,this}setUseStorage(e){return this.use_storage=e,this}setUserDid(e){return this.user_did=e,this}getPricingName(){return this.pricing_using}getMaxStorage(){return this.max_storage}getUseStorage(){return this.use_storage}getUserDid(){return this.user_did}}class ns{setOrderId(e){return this.order_id=e,this}setReceiptId(e){return this.receipt_id=e,this}setUserDid(e){return this.user_did=e,this}setSubscription(e){return this.subscription=e,this}setPricingName(e){return this.pricing_name=e,this}setElaAmount(e){return this.ela_amount=e,this}setElaAddress(e){return this.ela_address=e,this}setPaidDid(e){return this.paid_did=e,this}getOrderId(){return this.order_id}getReceiptId(){return this.receipt_id}getUserDid(){return this.user_did}getSubscription(){return this.subscription}getPricingName(){return this.pricing_name}getElaAmount(){return this.ela_amount}getElaAddress(){return this.ela_address}getPaidDid(){return this.paid_did}}class no{setPricingName(e){return this.pricing_using=e,this}setMaxStorage(e){return this.max_storage=e,this}setFileUseStorage(e){return this.file_use_storage=e,this}setDatabaseUseStorage(e){return this.db_use_storage=e,this}setUserDid(e){return this.user_did=e,this}getPricingName(){return this.pricing_using}getMaxStorage(){return this.max_storage}getFileUseStorage(){return this.file_use_storage}getDatabaseUseStorage(){return this.db_use_storage}getUserDid(){return this.user_did}}let na=class extends g.BaseService{getVaults(e){return x(this,void 0,void 0,function*(){throw new F})}getBackups(e){return x(this,void 0,void 0,function*(){throw new F})}getFilledOrders(e){return x(this,void 0,void 0,function*(){throw new F})}};A([(0,g.GET)("/provider/vaults"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.vaults.map(e=>(new no).setPricingName(e.pricing_using).setMaxStorage(e.max_storage).setFileUseStorage(e.file_use_storage).setDatabaseUseStorage(e.db_use_storage).setUserDid(e.user_did)))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],na.prototype,"getVaults",null),A([(0,g.GET)("/provider/backups"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.backups.map(e=>(new ni).setPricingName(e.pricing_using).setMaxStorage(e.max_storage).setUseStorage(e.use_storage).setUserDid(e.user_did)))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],na.prototype,"getBackups",null),A([(0,g.GET)("/provider/filled_orders"),(0,g.ResponseTransformer)((e,t)=>ew.handleResponseData(e,e=>e.orders.map(e=>(new ns).setOrderId(e.order_id).setReceiptId(e.receipt_id).setUserDid(e.user_did).setSubscription(e.subscription).setPricingName(e.pricing_name).setElaAmount(e.ela_amount).setElaAddress(e.ela_address).setPaidDid(e.paid_did)))),P(0,(0,g.Header)("Authorization")),O("design:type",Function),O("design:paramtypes",[String]),O("design:returntype",Promise)],na.prototype,"getFilledOrders",null),na=A([(0,g.BasePath)("/api/v2")],na);class nu extends tB{constructor(e,t){super(e,t),this.restService=new eS(this)}getVaults(){return x(this,void 0,void 0,function*(){return yield this.restService.callAPI(na,e=>x(this,void 0,void 0,function*(){return yield e.getVaults((yield this.restService.getAccessToken()))}))})}getBackups(){return x(this,void 0,void 0,function*(){return yield this.restService.callAPI(na,e=>x(this,void 0,void 0,function*(){return yield e.getBackups((yield this.restService.getAccessToken()))}))})}getFilledOrders(){return x(this,void 0,void 0,function*(){return yield this.restService.callAPI(na,e=>x(this,void 0,void 0,function*(){return yield e.getFilledOrders((yield this.restService.getAccessToken()))}))})}}I.setDefaultLevel(I.DEBUG)},71359:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);