"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1385],{7045:function(e,t,n){var i,r,a,s=n(2265);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"#fff",className:"account_svg__icon",viewBox:"0 0 1024 1024"},e),i||(i=s.createElement("path",{d:"M962.4 1012.8s0 .8 0 0H988h-25.6zM704 338.4c0-143.2-115.2-260-258.4-260s-258.4 116.8-258.4 260 116 260 258.4 260S704 481.6 704 338.4zm-472 0C232 220 328 124 445.6 124s213.6 96 213.6 214.4-96 214.4-213.6 214.4S232 456.8 232 338.4z"})),r||(r=s.createElement("path",{d:"M456.8 621.6c196.8 0 361.6 136 394.4 324h45.6C863.2 732 677.6 576.8 456 576.8 234.4 576.8 49.6 732 15.2 945.6h45.6c35.2-188.8 199.2-324 396-324z"})),a||(a=s.createElement("path",{d:"m770.4 578.4-24-8.8 20.8-14.4c65.6-46.4 104.8-122.4 103.2-202.4-1.6-128-102.4-232.8-228-241.6v47.2c100 8.8 180 92.8 180.8 194.4.8 52.8-19.2 102.4-56 140.8-36.8 37.6-86.4 59.2-139.2 60-24.8 0-50.4 0-75.2 1.6-15.2 1.6-41.6 0-54.4 9.6-1.6.8-3.2 0-4.8 0l-9.6 12c-.8 1.6-2.4 3.2-4 4.8.8 1.6-.8 16 0 17.6 12 4 71.2 0 156.8 2.4C816 603.2 963.2 762.4 977.6 940l47.2 3.2c-9.6-156-108-310.4-254.4-364.8z"})))}},87127:function(e,t,n){var i,r=n(2265);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -2.5 20 20"},e),i||(i=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 12.474 0 3.649V15h20V3.649l-10 8.825Zm.001-2.662L0 .981V0h20v.981l-9.999 8.831Z"})))}},12131:function(e,t,n){n.d(t,{c:function(){return l}});var i=n(57437),r=n(6882),a=n(49050),s=n(57042);let l=e=>{let{leftIcon:t,size:n="medium",mode:l="default",onClick:o,children:c,busy:u=!1,disabled:d=!1,className:h}=e,p=(0,i.jsx)(r.Z,{size:16});return(0,i.jsx)("div",{className:(0,s.Z)("flex",h),children:(0,i.jsx)(a.Z,{className:"flex-1",startIcon:u?p:t,disabled:u||d,size:n,color:"default"===l?"primary":"error",variant:"contained",onClick:o,children:c})})}},57135:function(e,t,n){n.d(t,{au:function(){return E},HL:function(){return O},lJ:function(){return j},NX:function(){return A}});var i,r,a=n(57437),s=n(451),l=n(66533),o=n(48023),c=n(10530),u=n(22079),d=n(43226),h=n(51385),p=n(21290),g=n(3883),v=n(52856),y=n(69990),f=n(2265),w=n(27524),m=n(50676),b=n(12131);let I=e=>{let{onConfirm:t,disabled:n}=e,[i]=(0,s.V)(y.jU),r=null==i?void 0:i.get("security"),l=async()=>{let e=await r.unlockPasskeyLocally();t(e)};return(0,a.jsxs)("div",{className:"flex flex-row gap-4 bg-gray-100 mt-4 p-4 items-center",children:[(0,a.jsxs)("p",{className:"uppercase text-xs",children:["Browser",(0,a.jsx)("br",{}),"authentication"]}),(0,a.jsx)(b.c,{onClick:l,disabled:n,children:"Unlock with passkey"})]})};var k=n(67212);let C=e=>{let{onConfirm:t,disabled:n}=e,[i,r]=(0,f.useState)("");return(0,a.jsxs)("div",{className:"flex flex-row gap-4 bg-gray-100 mt-4 p-4",children:[(0,a.jsxs)("p",{className:"uppercase text-xs",children:["master",(0,a.jsx)("br",{}),"password"]}),(0,a.jsx)(k.Z,{label:"Your password",autoFocus:!0,type:"password",name:"master-password",variant:"outlined",size:"small",onChange:e=>{r(e.currentTarget.value)},disabled:n}),(0,a.jsx)(b.c,{onClick:()=>{t(i)},disabled:n||!i,children:"Continue"})]})},D=(0,f.createContext)({actions:null,setActions:null}),S=new w.x;function E(e){let[t,n]=(0,f.useState)(null);return(0,a.jsxs)(D.Provider,{value:{actions:t,setActions:n},children:[e.children,(0,a.jsx)(x,{})]})}let x=()=>{let{actions:e,setActions:t}=(0,f.useContext)(D),[n]=(0,s.V)(y.jU),i=null==n?void 0:n.get("security"),[r]=(0,s.V)(null==i?void 0:i.passwordKeys$),[l]=(0,s.V)(null==i?void 0:i.passkeyKeys$),{promptMasterKeyUnlock:o}=j(),h=()=>{t(null)};return(0,f.useEffect)(()=>{let e=S.subscribe(e=>{$(e,o)});return()=>e.unsubscribe()},[o]),(0,a.jsx)(u.Z,{open:!!e,disablePortal:!0,onClose:()=>{var t;null===(t=e.onUnlockKey)||void 0===t||t.call(e,null),h()},children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(d.Z,{variant:"h4",children:"Content unlock needed!"}),(0,a.jsxs)(d.Z,{color:"#666",fontSize:14,children:["Your encrypted data needs to be unlocked so we can display it.",(0,a.jsx)("br",{}),"We can't do this without your interaction."]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(C,{onConfirm:t=>{var n;null===(n=e.onUnlockKey)||void 0===n||n.call(e,{type:c.J.PASSWORD,keyId:"unused-for-now-for-passwords",key:t}),h()},disabled:(null==r?void 0:r.length)==0})}),(0,a.jsx)("div",{className:"my-4 text-center text-xs",children:"or"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(I,{onConfirm:t=>{var n;null===(n=e.onUnlockKey)||void 0===n||n.call(e,t),h()},disabled:(null==l?void 0:l.length)==0})})]})})};(i=r||(r={}))[i.Idle=0]="Idle",i[i.UnlockCancelled=1]="UnlockCancelled";let P=new m.X(r.Idle);function A(){let[e]=(0,s.V)(P),[t,n]=(0,f.useState)(!0),[i,a]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{switch(e){case r.Idle:n(!0),a(!1);break;case r.UnlockCancelled:n(!1),a(!0)}},[e]),{unlockerIsIdle:t,unlockerIsCancelled:i}}let j=()=>{let{setActions:e}=(0,f.useContext)(D),[t]=(0,s.V)(y.jU);return{promptMasterKeyUnlock:()=>new Promise(t=>{e({onUnlockKey:t})}),retryUnlock:()=>O(()=>t.get("security").checkRemoteUnlockStatus())}};async function O(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=new Promise((t,n)=>{P.next(r.Idle),S.next({method:e,resolve:t,reject:n})}).catch(e=>{if(t&&(0,v.L)(e));else throw e});return await i||n}async function $(e,t){try{let t=await (0,h.Pt)(()=>e.method());e.resolve(t)}catch(n){if(n instanceof l._&&(0,v.z)(n)){g.k.warn("security","This method call requires unlock authorization from the user. Prompting");let n=await t();if(n){await (0,p.wo)(n);let t=await O(e.method);e.resolve(t)}else P.next(r.UnlockCancelled),g.k.warn("security","Unlock operation cancelled by user"),e.reject(l._.newClientError(o.XF.UnlockKeyCancelled,"CANCELLED"))}else g.k.error("security","Unhandler callWithUnlock() exception:",n)}}},451:function(e,t,n){n.d(t,{V:function(){return r}});var i=n(2265);let r=e=>{let[t,n]=(0,i.useState)(null==e?void 0:e.getValue()),[r,a]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!e){n(null);return}let t=e.subscribe({next:e=>{n(e)},error:a});return()=>t.unsubscribe()},[e]),[t]}},29281:function(e,t,n){var i,r;n.d(t,{T:function(){return i}}),(r=i||(i={})).USER_SIGN_IN="USER_SIGN_IN",r.IDENTITY_CREATED="IDENTITY_CREATED",r.IDENTITY_DELETED="IDENTITY_DELETED",r.CREDENTIALS_IMPORTED="CREDENTIALS_IMPORTED",r.CREDENTIALS_SHARED="CREDENTIALS_SHARED",r.BIND_EMAIL="BIND_EMAIL",r.BIND_BROWSER="BIND_BROWSER",r.PASSWORD_CHANGED="PASSWORD_CHANGED"},99617:function(e,t,n){n.d(t,{A:function(){return c}});var i=n(10530),r=n(20708),a=n(69990),s=n(1859),l=n(6598);let o=new l.R;class c{static async fromJson(e){return o.get(e.id,{create:async function(){return new c},fill:async function(t){Object.assign(t,e),t.createdAt=new Date(e.createdAt),t.lastUsedAt=new Date(e.lastUsedAt)}})}isCurrentBrowser(){return this.key===(0,r.Z$)()}equals(e){return this.id===(null==e?void 0:e.id)}constructor(){this.activeShadowKey$=new s.P(null,async()=>{a.jU.subscribe(e=>null==e?void 0:e.get("security").shadowKeys$.subscribe(e=>{this.activeShadowKey$.next(e.find(e=>{var t;return e.type===i.J.WEBAUTHN&&(null===(t=e.browser)||void 0===t?void 0:t.equals(this))}))}))})}}},69144:function(e,t,n){n.d(t,{C:function(){return o},q:function(){return l}});var i=n(59606),r=n(35324),a=n(66930),s=n(5676);async function l(e){let t;let{VerifiableCredential:n}=await (0,r.hS)(),l=n.parse(e.verifiableCredential),o=(0,i.m7)(l.type);return Object.assign(t=o?new s.E(o):new a.h,e),t.createdAt=new Date(e.createdAt),t.verifiableCredential=l,t.prepareForDisplay(),t}async function o(e){let t;let n=(0,i.m7)(e.type);return(t=n?new s.E(n):new a.h).verifiableCredential=e,t.prepareForDisplay(),t}},66930:function(e,t,n){n.d(t,{h:function(){return eJ}});var i,r,a,s,l,o,c,u,d,h,p,g,v,y,f,w,m,b,I,k,C,D,S,E,x,P,A,j,O,$,T,U,F,N,M,L,_,R,B,W,K,H,V,q,z,J,Z,G,X,Y,Q,ee,et,en=n(60230),ei=n(23965),er=n(7045),ea=n(98478),es=n(61960),el=n(90786),eo=n(51385),ec=n(76506),eu=n(17041),ed=n(59606),eh=n(53932),ep=n(77358),eg=n(8106),ev=n(3883),ey=n(1859);let ef=(e,t)=>{t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");let n=t.split(".");for(let t=0,i=n.length;t<i;++t){let i=n[t];if(!(i in e))return;e=e[i]}return e};var ew=n(9177),em=n(50676),eb=n(57437),eI=n(87127),ek=n(2265);function eC(){return(eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eD(){return(eD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eS(){return(eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eE(){return(eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ex(){return(ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eP(){return(eP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eA(){return(eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ej(){return(ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eO(){return(eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function e$(){return(e$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eT(){return(eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eU(){return(eU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eF(){return(eF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eN(){return(eN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eM(){return(eM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eL(){return(eL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function e_(){return(e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eR(){return(eR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eB(){return(eB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eW(){return(eW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eK(){return(eK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eH(){return(eH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eV(){return(eV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}let eq={name:(0,eb.jsx)(er.Z,{style:{width:40,height:40}}),email:(0,eb.jsx)(eI.Z,{style:{width:30,height:30,color:"white"}}),birthDate:(0,eb.jsx)(function(e){return ek.createElement("svg",eV({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),Z||(Z=ek.createElement("rect",{width:18,height:15,x:3,y:6,stroke:"currentColor",rx:2})),G||(G=ek.createElement("path",{fill:"currentColor",d:"M3 10c0-1.886 0-2.828.586-3.414C4.172 6 5.114 6 7 6h10c1.886 0 2.828 0 3.414.586C21 7.172 21 8.114 21 10H3Z"})),X||(X=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M7 3v3M17 3v3"})),Y||(Y=ek.createElement("rect",{width:4,height:2,x:7,y:12,fill:"currentColor",rx:.5})),Q||(Q=ek.createElement("rect",{width:4,height:2,x:7,y:16,fill:"currentColor",rx:.5})),ee||(ee=ek.createElement("rect",{width:4,height:2,x:13,y:12,fill:"currentColor",rx:.5})),et||(et=ek.createElement("rect",{width:4,height:2,x:13,y:16,fill:"currentColor",rx:.5})))},{style:{width:35,height:35}}),nationality:(0,eb.jsx)(function(e){return ek.createElement("svg",eS({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 20 20"},e),s||(s=ek.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m6.804 2.632-.637.264A3.507 3.507 0 0 0 4 6.137v4.386a1.46 1.46 0 0 0 2.167 1.276l.227-.126a4 4 0 0 1 3.88 0l.453.251a4 4 0 0 0 3.88 0l.734-.407A3.222 3.222 0 0 0 17 8.7V4.638a1.605 1.605 0 0 0-2.07-1.534l-.893.272a4 4 0 0 1-2.694-.131l-1.48-.613a4 4 0 0 0-3.059 0Zm4.893 7.543-.454-.251A6 6 0 0 0 6 9.644V6.136c0-.61.368-1.16.931-1.393l.638-.263a2 2 0 0 1 1.529 0l1.481.612a6 6 0 0 0 4.04.196L15 5.173V8.7c0 .444-.241.853-.63 1.068l-.733.407a2 2 0 0 1-1.94 0Z",clipRule:"evenodd"})),l||(l=ek.createElement("rect",{width:2,height:16,x:4,y:2,fill:"currentColor",rx:1})))},{style:{width:32,height:32}}),gender:(0,eb.jsx)(function(e){return ek.createElement("svg",eC({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,fill:"currentColor",viewBox:"0 0 412.138 412.138"},e),i||(i=ek.createElement("path",{d:"M110.827 22.911c-49.525 22.33-44.219 121.392 5.979 135.79 10.836 6.934 24.169 7.857 38.306-3.28 44.751-35.259 26.813-164.566-44.285-132.51zM374.03 139.987c-.359-1.709-1.303-3.341-3.155-4.544-38.531-25.098-2.726-114.251-71.628-110.262-58.842 3.406-39.708 81.01-68.053 112.918-.232.262-.144.536-.302.805-2.645 1.565-4.122 5.237-1.426 7.938 12.527 12.55 29.548 15.969 46.81 16.862 2.479 8.794 15.033 15.899 23.057 16.899 7.218.9 14.363-.878 20.261-5.16 3.698-2.682 8.077-7.355 9.093-12.26 17.57-1.209 35.928-4.4 45.584-13.237 3.474-3.181 2.435-7.263-.241-9.959zM407.587 246.585c-5.323-23.378-21.2-42.237-45.383-45.489-2.495-2.727-7.225-3.681-10.014-.572-15.091 16.813-30.111 28.221-54.003 26.515-20.979-1.496-32.944-13.685-48.667-24.593-.162-2.329-1.685-4.581-4.38-4.445-28.001 1.414-46.092 17.4-51.518 44.808-8.635 43.616-1.395 92.691-.264 136.863.055 2.126.917 3.714 2.155 4.82.341 1.859 1.337 3.58 3.059 4.419 20.716 10.099 58.374 2.819 81.257 3.081 39.885.455 79.996 2.386 119.849.508 3.426-.161 5.492-2.168 6.272-4.596.93-1.14 1.627-2.529 1.669-4.388.969-43.37 9.684-94.266-.032-136.931z"})),r||(r=ek.createElement("path",{d:"M203.222 193.375c-.237-.326-.195-.716-.538-1.01-7.01-5.987-17.351-9.745-26.59-12.372-3.07-2.685-8.546-2.388-10.313 2.787-5.456 15.985-9.596 32.423-14.3 48.645-1.949 6.726-3.947 15.761-7.443 23.501-1.33-18.873-4.341-38.496-9.027-55.846.525-.579 1.055-1.126 1.567-1.865 8.493-12.249-7.662-18.374-17.371-15.095-2.503.846-2.892 3.184-1.967 5.284-.059.186-.278.254-.278.471-.009 3.91 1.276 7.536 3.212 10.297-3.015 11.548-5.142 23.544-7.552 35.096-.022.102-.037.207-.057.309-.355.859-.91 1.554-.928 2.657-.013.732.037 1.454.031 2.185-1.264 6.296-2.53 12.609-3.52 18.978-5.222-11.945-7.507-28.843-9.489-35.916-3.816-13.606-7.362-27.144-13.964-39.697-.007-.012-.02-.012-.026-.023-1.501-2.676-4.866-4.563-8.469-2.994-13.573 5.912-27.002 12.316-40.326 18.774-7.453 3.612-17.891 7.143-22.954 14.314-2.225.612-4.222 2.32-4.574 5.17-6.689 53.836-11.205 110.868-6.238 164.999.131 1.446.766 2.487 1.619 3.189.564 1.236 1.488 2.323 3.157 2.541 53.853 7.072 110.84 5.224 165.04 2.861 3.522-.153 5.516-2.495 6.126-5.158.048-.181.225-.208.256-.405 8.627-55.02-20.668-142.787 25.114-185.404 2.201-2.051 1.523-4.65-.198-6.273z"})))},{style:{width:30,height:30}}),telephone:(0,eb.jsx)(function(e){return ek.createElement("svg",eA({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),f||(f=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5.5C3 14.06 9.94 21 18.5 21c.386 0 .77-.014 1.148-.042.435-.032.653-.048.851-.162a1.06 1.06 0 0 0 .402-.432c.099-.206.099-.446.099-.926v-2.817c0-.404 0-.606-.067-.779a.999.999 0 0 0-.277-.396c-.14-.122-.33-.191-.71-.329l-3.206-1.166c-.441-.16-.662-.24-.872-.227a1 1 0 0 0-.513.182c-.171.121-.292.322-.534.725L14 16a12.1 12.1 0 0 1-6-6l1.369-.821c.402-.242.604-.363.725-.534a1 1 0 0 0 .182-.513c.014-.21-.066-.43-.227-.872L8.883 4.053c-.138-.38-.207-.569-.329-.709a1 1 0 0 0-.396-.278C7.985 3 7.783 3 7.379 3H4.562c-.48 0-.72 0-.926.1a1.06 1.06 0 0 0-.432.401c-.114.198-.13.416-.162.85C3.014 4.732 3 5.115 3 5.5Z"})))},{style:{width:32,height:32}}),nickname:(0,eb.jsx)(function(e){return ek.createElement("svg",eD({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),a||(a=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 19c0-2.21-2.686-4-6-4s-6 1.79-6 4m6-7a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z"})))},{style:{width:40,height:40}}),birthPlace:(0,eb.jsx)(function(e){return ek.createElement("svg",eE({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 1024 1024"},e),o||(o=ek.createElement("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512z"})),c||(c=ek.createElement("path",{fill:"currentColor",d:"M512 512a32 32 0 0 1 32 32v256a32 32 0 1 1-64 0V544a32 32 0 0 1 32-32z"})),u||(u=ek.createElement("path",{fill:"currentColor",d:"M384 649.088v64.96C269.76 732.352 192 771.904 192 800c0 37.696 139.904 96 320 96s320-58.304 320-96c0-28.16-77.76-67.648-192-85.952v-64.96C789.12 671.04 896 730.368 896 800c0 88.32-171.904 160-384 160s-384-71.68-384-160c0-69.696 106.88-128.96 256-150.912z"})))},{style:{width:35,height:35}}),occupation:(0,eb.jsx)(function(e){return ek.createElement("svg",eP({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,fill:"currentColor",viewBox:"0 0 120.003 120.003"},e),h||(h=ek.createElement("path",{d:"M11.295 92.198v-.13a3.657 3.657 0 0 0 2.162-1.457c.545-.756.82-1.668.82-2.733 0-1.621-.627-2.815-1.883-3.584-1.252-.769-3.172-1.151-5.758-1.151H0v19.024h7.404c2.24 0 4.006-.496 5.303-1.49 1.297-.993 1.945-2.354 1.945-4.077 0-1.164-.264-2.109-.793-2.839-.529-.729-1.382-1.251-2.564-1.563zm-6.154-5.166h1.443c1.615 0 2.422.532 2.422 1.6 0 .601-.201 1.052-.605 1.354-.404.305-.975.457-1.711.457H5.141v-3.411zm1.808 11.166H5.141v-3.996h1.705c.814 0 1.438.17 1.867.508.429.338.645.824.645 1.459-.001 1.352-.803 2.029-2.409 2.029zM27.928 94.282c0 1.368-.236 2.354-.711 2.959-.471.604-1.232.903-2.283.903-.979 0-1.721-.305-2.225-.91-.504-.606-.756-1.584-.756-2.928V83.142h-5.166v11.567c0 2.49.695 4.397 2.09 5.728 1.391 1.328 3.385 1.989 5.979 1.989 2.656 0 4.688-.682 6.098-2.049 1.41-1.367 2.115-3.295 2.115-5.785v-11.45h-5.141v11.14zM40.799 87.333c.305-.235.791-.353 1.459-.353 1.291 0 2.826.408 4.605 1.224l1.574-3.97c-2.047-.911-4.055-1.366-6.023-1.366-2.23 0-3.982.489-5.258 1.471-1.276.981-1.914 2.347-1.914 4.101 0 .936.15 1.748.449 2.434s.76 1.293 1.381 1.82c.619.531 1.549 1.076 2.791 1.641 1.369.617 2.215 1.023 2.529 1.223.318.199.547.396.691.594.143.193.215.423.215.683 0 .418-.18.758-.535 1.021-.354.267-.914.396-1.678.396-.885 0-1.857-.141-2.916-.422a15.38 15.38 0 0 1-3.059-1.178v4.58c.93.442 1.822.754 2.682.93.859.18 1.922.268 3.189.268 1.518 0 2.842-.254 3.967-.762 1.129-.506 1.992-1.219 2.592-2.133.598-.916.896-1.963.896-3.143 0-1.285-.318-2.351-.955-3.195-.639-.846-1.777-1.637-3.416-2.375-1.711-.779-2.758-1.318-3.143-1.613-.387-.295-.58-.629-.58-1.002.002-.352.154-.643.457-.874zM50.313 83.142h5.166v19.024h-5.166zM72.061 91.743c0 1.161.06 2.702.183 4.618h-.078L65.24 83.14h-6.714v19.025h4.555V93.59c0-1.108-.082-2.719-.246-4.828h.114l6.949 13.404h6.742V83.142h-4.58v8.601h.001zM79.686 102.167h11.296v-4.191h-6.156v-3.591h5.701V90.26h-5.701v-2.993h6.156v-4.125H79.686zM98.051 87.333c.303-.235.789-.353 1.457-.353 1.291 0 2.828.408 4.605 1.224l1.574-3.97c-2.047-.911-4.056-1.366-6.025-1.366-2.229 0-3.98.489-5.256 1.471-1.276.981-1.914 2.347-1.914 4.101 0 .936.15 1.748.449 2.434a5.02 5.02 0 0 0 1.381 1.82c.619.531 1.551 1.076 2.791 1.641 1.371.617 2.213 1.023 2.531 1.223.315.199.547.396.688.594.144.193.215.423.215.683 0 .418-.178.758-.532 1.021-.355.264-.915.394-1.68.394-.885 0-1.856-.141-2.916-.422a15.324 15.324 0 0 1-3.058-1.178v4.58c.929.442 1.822.754 2.683.93.856.18 1.92.268 3.188.268 1.518 0 2.84-.254 3.969-.762 1.127-.506 1.99-1.219 2.59-2.133.6-.916.896-1.963.896-3.143 0-1.285-.318-2.351-.955-3.195-.64-.846-1.775-1.637-3.416-2.375-1.709-.779-2.758-1.318-3.144-1.613-.387-.295-.58-.629-.58-1.002.002-.35.154-.641.459-.872zM115.631 90.818c-1.709-.778-2.756-1.317-3.143-1.612s-.578-.629-.578-1.002c0-.349.15-.64.455-.871.303-.235.789-.353 1.457-.353 1.293 0 2.828.408 4.606 1.224l1.574-3.97c-2.047-.911-4.058-1.366-6.024-1.366-2.23 0-3.982.489-5.259 1.471s-1.911 2.347-1.911 4.101c0 .936.147 1.748.448 2.434.297.686.759 1.293 1.379 1.82.619.531 1.55 1.076 2.791 1.641 1.371.617 2.216 1.023 2.531 1.223.315.2.547.396.688.594.144.193.215.423.215.683 0 .418-.178.758-.532 1.021-.356.267-.916.396-1.681.396-.885 0-1.854-.141-2.914-.422a15.333 15.333 0 0 1-3.059-1.178v4.58c.928.442 1.822.754 2.68.93.859.18 1.924.268 3.189.268 1.518 0 2.842-.254 3.969-.762 1.127-.506 1.992-1.219 2.59-2.133.599-.916.898-1.963.898-3.143 0-1.285-.32-2.351-.957-3.195-.635-.848-1.773-1.639-3.412-2.379z"})),p||(p=ek.createElement("circle",{cx:73.589,cy:24.447,r:6.871})),g||(g=ek.createElement("circle",{cx:96.3,cy:24.449,r:6.871})),v||(v=ek.createElement("path",{d:"M100.624 77.79a3.637 3.637 0 0 0 3.638 3.635h.004a3.637 3.637 0 0 0 3.635-3.64l-.004-4.959h-7.274l.001 4.964z"})),y||(y=ek.createElement("path",{d:"m62.003 54.896-.015 22.888a3.638 3.638 0 0 0 3.637 3.641h.002a3.64 3.64 0 0 0 3.639-3.636l.012-21.657c1.504-.598 2.774-1.758 3.162-3.569l1.203-5.614c1.914 2.234 5.075 3.516 10.711 4.287a2.655 2.655 0 0 0 2.864-1.736c4.412-.233 7.149-1.142 8.929-3.014l1.304 6.079c.338 1.573 1.343 2.654 2.587 3.305h1.73a4.388 4.388 0 0 1 2.116-2.429c-.901-4.306-2.155-8.538-3.231-11.11-.734-1.351.291-1.816.836-.415.548 1.402 2.591 7.79 3.427 11.967a3.533 3.533 0 0 0-2.45 2.778h-5.137v15.177h20.552V56.66h-5.136a3.54 3.54 0 0 0-2.482-2.787 2.57 2.57 0 0 0-.035-.67c-.34-1.738-4.513-18.112-4.513-18.112-.592-2.763-2.504-4.09-4.883-4.158l-.021.001s-.84.004-1.562.143c-.758.145-1.419.508-1.419.508-1.754.851-3.431 2.608-3.638 4.742-.026.103-.061.202-.076.311-.463 3.26-.928 5.326-1.926 6.235-1.028.938-3.344 1.355-7.502 1.355a2.66 2.66 0 0 0-2.268 1.279c-2.51-.512-3.99-1.162-4.771-2.067-1.016-1.173-1.387-3.354-1.877-6.804-.016-.108-.049-.209-.076-.312-.205-2.133-1.883-3.892-3.637-4.742 0 0-.662-.363-1.418-.508-.725-.139-1.562-.143-1.562-.143l-.021-.002c-2.38.069-5.181 1.396-5.772 4.158l-3.177 14.831c-.424 1.981.461 3.754 1.894 4.978zm45.599 1.489a2.647 2.647 0 0 0 1.957-.864 1.76 1.76 0 0 1 1.348 1.139h-6.605a1.757 1.757 0 0 1 1.346-1.137 2.664 2.664 0 0 0 1.954.862z"})))},{style:{width:35,height:35}}),education:(0,eb.jsx)(function(e){return ek.createElement("svg",ex({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",className:"educate_svg__icon",viewBox:"0 0 1024 1024"},e),d||(d=ek.createElement("path",{d:"M513.147 584.708c-15.947 0-39.468-1.747-61.04-10.031l-172.596-66.501h-84.542v103.565c0 31.84 23.684 67.975 52.884 80.663l208.987 90.967c29.2 12.688 76.605 12.743 105.841.127l211.263-91.222c29.218-12.615 52.921-48.697 52.921-80.537V508.174h-93.298l-152.954 64.48c-18.386 7.773-42.38 12.051-67.466 12.051zM46.313 372.991l416.19 160.363c29.728 11.433 77.605 10.686 106.951-1.693l397.458-167.536v247.18l-24.558 81.938h71.015l-25.413-82.794V354.13h-.71c17.167-11.833 13.162-26.596-12.252-35.681L570.637 174.561c-30.001-10.704-78.479-10.25-108.299.946L46.494 331.956c-29.819 11.214-29.891 29.6-.182 41.033z"})))},{style:{width:35,height:35}}),interests:(0,eb.jsx)(function(e){return ek.createElement("svg",eO({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"0 0 1024 1024"},e),k||(k=ek.createElement("path",{d:"M676.093 438.703c69.184 23.889 116.549 89.238 116.549 163.62 0 95.581-77.478 173.056-173.056 173.056-63.911 0-121.65-34.917-151.845-89.949-5.441-9.916-17.89-13.544-27.806-8.103s-13.544 17.89-8.103 27.806c37.318 68.013 108.74 111.206 187.755 111.206 118.199 0 214.016-95.813 214.016-214.016 0-91.985-58.568-172.788-144.14-202.337-10.691-3.692-22.351 1.983-26.043 12.674s1.983 22.351 12.674 26.043z"})),C||(C=ek.createElement("path",{d:"M580.773 423.947c0-95.574-77.482-173.056-173.056-173.056s-173.056 77.482-173.056 173.056c0 95.574 77.482 173.056 173.056 173.056s173.056-77.482 173.056-173.056zm40.96 0c0 118.196-95.82 214.016-214.016 214.016s-214.016-95.82-214.016-214.016 95.82-214.016 214.016-214.016 214.016 95.82 214.016 214.016z"})),D||(D=ek.createElement("path",{d:"M826.595 908.515c45.245 0 81.92-36.675 81.92-81.92V194.562c0-45.245-36.675-81.92-81.92-81.92H194.562c-45.245 0-81.92 36.675-81.92 81.92v632.033c0 45.245 36.675 81.92 81.92 81.92h632.033zm0 40.96H194.562c-67.866 0-122.88-55.014-122.88-122.88V194.562c0-67.866 55.014-122.88 122.88-122.88h632.033c67.866 0 122.88 55.014 122.88 122.88v632.033c0 67.866-55.014 122.88-122.88 122.88z"})),S||(S=ek.createElement("path",{d:"M317.631 441.872h180.91c11.311 0 20.48-9.169 20.48-20.48s-9.169-20.48-20.48-20.48h-180.91c-11.311 0-20.48 9.169-20.48 20.48s9.169 20.48 20.48 20.48z"})),E||(E=ek.createElement("path",{d:"M428.566 511.845v-180.91c0-11.311-9.169-20.48-20.48-20.48s-20.48 9.169-20.48 20.48v180.91c0 11.311 9.169 20.48 20.48 20.48s20.48-9.169 20.48-20.48z"})))},{style:{width:30,height:30}}),description:(0,eb.jsx)(function(e){return ek.createElement("svg",e$({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"0 0 24 24"},e),x||(x=ek.createElement("path",{d:"M21 7H3V4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1ZM3 20V9h18v11a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1Zm3-6h12v-2H6Zm0 4h6v-2H6Z"})))},{style:{width:30,height:30}}),url:(0,eb.jsx)(function(e){return ek.createElement("svg",eT({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),P||(P=ek.createElement("path",{fill:"currentColor",d:"M10.421 9a1 1 0 0 0-1-1h-3.21C3.885 8 2 9.79 2 12s1.885 4 4.21 4h3.211a1 1 0 1 0 0-2h-3.21c-1.163 0-2.106-.895-2.106-2s.943-2 2.106-2h3.21a1 1 0 0 0 1-1ZM13.579 15a1 1 0 0 1 1-1h3.21c1.163 0 2.106-.895 2.106-2s-.943-2-2.105-2h-3.211a1 1 0 0 1 0-2h3.21C20.116 8 22 9.79 22 12s-1.885 4-4.21 4h-3.211a1 1 0 0 1-1-1Z"})),A||(A=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M15 12H9"})))},{style:{width:37,height:37}}),discord:(0,eb.jsx)(function(e){return ek.createElement("svg",eU({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 192 192"},e),j||(j=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"m68 138-8 16c-10.19-4.246-20.742-8.492-31.96-15.8-3.912-2.549-6.284-6.88-6.378-11.548-.488-23.964 5.134-48.056 19.369-73.528 1.863-3.334 4.967-5.778 8.567-7.056C58.186 43.02 64.016 40.664 74 39l6 11s6-2 16-2 16 2 16 2l6-11c9.984 1.664 15.814 4.02 24.402 7.068 3.6 1.278 6.704 3.722 8.567 7.056 14.235 25.472 19.857 49.564 19.37 73.528-.095 4.668-2.467 8.999-6.379 11.548-11.218 7.308-21.769 11.554-31.96 15.8l-8-16m-68-8s20 10 40 10 40-10 40-10"})),O||(O=ek.createElement("ellipse",{cx:71,cy:101,fill:"currentColor",rx:13,ry:15})),$||($=ek.createElement("ellipse",{cx:121,cy:101,fill:"currentColor",rx:13,ry:15})))},{style:{width:35,height:35}}),linkedin:(0,eb.jsx)(function(e){return ek.createElement("svg",eF({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -0.5 25 25"},e),T||(T=ek.createElement("path",{fill:"currentColor",d:"M8.75 11a.75.75 0 0 0-1.5 0h1.5Zm-1.5 6a.75.75 0 0 0 1.5 0h-1.5Zm10 0a.75.75 0 0 0 1.5 0h-1.5ZM12 14h-.75.75Zm-.75 3a.75.75 0 0 0 1.5 0h-1.5Zm-2.5-9a.75.75 0 0 0-1.5 0h1.5Zm-1.5 1a.75.75 0 0 0 1.5 0h-1.5Zm0 2v6h1.5v-6h-1.5Zm11.5 6v-3h-1.5v3h1.5Zm0-3A3.75 3.75 0 0 0 15 10.25v1.5A2.25 2.25 0 0 1 17.25 14h1.5ZM15 10.25A3.75 3.75 0 0 0 11.25 14h1.5A2.25 2.25 0 0 1 15 11.75v-1.5ZM11.25 14v3h1.5v-3h-1.5Zm-4-6v1h1.5V8h-1.5Z"})))},{style:{width:45,height:45}}),facebook:(0,eb.jsx)(function(e){return ek.createElement("svg",eN({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -0.5 25 25"},e),U||(U=ek.createElement("path",{fill:"currentColor",d:"M11.75 19a.75.75 0 0 0 1.5 0h-1.5Zm1.5-8a.75.75 0 0 0-1.5 0h1.5Zm2.25-5.25a.75.75 0 0 0 0-1.5v1.5ZM12.5 8h-.75.75Zm-.75 3a.75.75 0 0 0 1.5 0h-1.5Zm.75-.75a.75.75 0 0 0 0 1.5v-1.5Zm2 1.5a.75.75 0 0 0 0-1.5v1.5Zm-2 0a.75.75 0 0 0 0-1.5v1.5Zm-2-1.5a.75.75 0 0 0 0 1.5v-1.5ZM13.25 19v-8h-1.5v8h1.5ZM15.5 4.25A3.75 3.75 0 0 0 11.75 8h1.5a2.25 2.25 0 0 1 2.25-2.25v-1.5ZM11.75 8v3h1.5V8h-1.5Zm.75 3.75h2v-1.5h-2v1.5Zm0-1.5h-2v1.5h2v-1.5Z"})))},{style:{width:45,height:45}}),instagram:(0,eb.jsx)(function(e){return ek.createElement("svg",ej({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -0.5 25 25"},e),w||(w=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.5 5h-6a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h6a4 4 0 0 0 4-4V9a4 4 0 0 0-4-4Z",clipRule:"evenodd"})),m||(m=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.5 15a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z",clipRule:"evenodd"})),b||(b=ek.createElement("rect",{width:2,height:2,x:15.5,y:9,fill:"currentColor",rx:1,transform:"rotate(-90 15.5 9)"})),I||(I=ek.createElement("rect",{width:1,height:1,x:16,y:8.5,stroke:"currentColor",strokeLinecap:"round",rx:.5,transform:"rotate(-90 16 8.5)"})))},{style:{width:45,height:45}}),twitter:(0,eb.jsx)(function(e){return ek.createElement("svg",eM({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),F||(F=ek.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.783 3.918c.348-.082.591-.164.79-.249.28-.12.51-.263.876-.504A1 1 0 0 1 23 4c0 1.08-.135 1.967-.447 2.746a5.47 5.47 0 0 1-1.071 1.674c-.187 3.363-1.16 6.004-2.648 8.005-1.543 2.074-3.595 3.402-5.759 4.146-2.157.741-4.436.907-6.478.656-2.029-.25-3.904-.921-5.211-1.938a1 1 0 0 1 .755-1.78c1.286.185 2.524-.108 3.542-.526-.2-.109-.39-.227-.565-.348-.927-.643-1.676-1.514-2.012-2.188A1 1 0 0 1 3.4 13.2C2.047 12.081 1.5 10.536 1.5 9.5a1 1 0 0 1 .723-.96 7.357 7.357 0 0 1-.24-.887c-.266-1.287-.242-2.74.047-3.895A1 1 0 0 1 3.866 3.5c1.078 1.868 3.065 3.01 4.915 3.686.87.318 1.675.52 2.279.645.13-1.22.47-2.227.994-3.027a4.586 4.586 0 0 1 2.686-1.957c1.783-.48 3.76.067 5.043 1.071Zm-9.035 5.89a18.334 18.334 0 0 1-2.654-.744c-1.357-.496-2.933-1.27-4.253-2.468.023.22.057.439.1.652.222 1.071.633 1.671 1.006 1.857a1 1 0 0 1 .49 1.242c-.239.648-.869.7-1.441.558.46.69 1.288 1.378 2.668 1.609a1 1 0 0 1 .032 1.966l-.87.175c.133.115.277.229.43.335.698.483 1.397.69 2.001.54a1 1 0 0 1 .883 1.738c-.644.536-1.396.966-2.15 1.323-.353.168-.749.333-1.178.479.33.07.674.128 1.029.172 1.77.217 3.741.07 5.584-.563 1.836-.631 3.534-1.74 4.804-3.448 1.268-1.705 2.153-4.064 2.272-7.268a1 1 0 0 1 .292-.67c.45-.45.821-.965 1.004-1.579-.32.1-.68.186-1.11.268a1 1 0 0 1-.894-.275c-.765-.764-2.277-1.267-3.533-.929A2.587 2.587 0 0 0 13.727 5.9C13.315 6.53 13 7.51 13 9a1 1 0 0 1-.33.743c-.498.45-1.336.184-1.922.066Z",clipRule:"evenodd"})))},{style:{width:32,height:32}}),snapchat:(0,eb.jsx)(function(e){return ek.createElement("svg",eL({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),N||(N=ek.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.248 4.07C8.43 2.666 10.104 2 12 2c1.94 0 3.604.784 4.764 2.213 1.03 1.27 1.613 2.984 1.719 4.977l.092.014.02.003c.17.024.373.054.584.095.781.151 2.114.533 2.573 1.964.23.719.115 1.385-.288 1.913-.347.455-.843.718-1.198.877-.176.08-.352.148-.5.205.346.936.948 1.899 1.614 2.771.627.822.461 1.863.137 2.542-.325.68-1.027 1.457-2.049 1.501-.578.025-1.185.085-1.789.195-.273.05-.595.159-.995.324-.239.098-.458.196-.694.301-.188.084-.386.172-.615.27-.94.404-2.095.835-3.375.835-1.28 0-2.435-.431-3.375-.835-.229-.098-.428-.186-.615-.27a26.933 26.933 0 0 0-.694-.301c-.4-.165-.722-.275-.995-.325-.604-.11-1.211-.169-1.79-.194-1.021-.044-1.724-.821-2.048-1.501-.324-.679-.49-1.72.137-2.542.67-.878 1.275-1.848 1.62-2.79a8.898 8.898 0 0 1-.449-.191c-.346-.162-.816-.421-1.163-.855-.387-.486-.558-1.113-.406-1.831.324-1.537 1.77-1.92 2.534-2.064.217-.04.428-.07.605-.095l.035-.005.12-.017c.099-2.125.678-3.863 1.732-5.114Zm1.53 1.288c-.763.905-1.278 2.36-1.278 4.5v.104l-.022.103c-.111.524-.514.769-.714.863-.21.099-.437.148-.597.178-.156.029-.33.053-.485.074l-.046.007a10.89 10.89 0 0 0-.511.08c-.765.143-.91.333-.947.51-.026.127-.003.153.01.167l.004.004c.053.067.181.167.447.291.124.058.255.111.4.17l.036.014c.127.05.278.111.411.174.131.06.35.17.536.348.216.207.477.611.35 1.144-.364 1.531-1.283 3.005-2.161 4.155a.237.237 0 0 0-.016.106c0 .095.027.225.092.362.066.137.15.242.228.305.064.052.1.06.104.06.651.028 1.35.096 2.06.225.483.088.96.262 1.4.444.243.1.522.224.793.344.189.084.374.166.54.237.899.385 1.738.673 2.588.673.85 0 1.69-.288 2.588-.673.166-.071.351-.154.54-.237.27-.12.55-.244.792-.344.44-.182.917-.356 1.4-.444.71-.13 1.41-.197 2.06-.225.006 0 .041-.008.105-.06a.908.908 0 0 0 .228-.305.884.884 0 0 0 .092-.362c0-.093-.023-.115-.015-.104-.878-1.15-1.798-2.625-2.163-4.157-.135-.57.174-.98.387-1.17.19-.168.412-.273.547-.332.135-.06.287-.117.417-.166l.048-.019c.153-.057.29-.11.419-.169.27-.121.385-.214.424-.261a.447.447 0 0 0-.021-.095c-.091-.284-.348-.476-1.05-.612-.159-.03-.32-.054-.49-.08l-.038-.005a9.836 9.836 0 0 1-.473-.076 2.339 2.339 0 0 1-.589-.186c-.21-.104-.58-.353-.686-.853l-.022-.103v-.105c0-1.95-.507-3.42-1.289-4.383C14.446 4.53 13.361 4 12 4c-1.405 0-2.48.476-3.223 1.358Z",clipRule:"evenodd"})))},{style:{width:35,height:35}}),telegram:(0,eb.jsx)(function(e){return ek.createElement("svg",e_({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 192 192"},e),M||(M=ek.createElement("path",{stroke:"currentColor",strokeWidth:12,d:"M23.073 88.132s65.458-26.782 88.16-36.212c8.702-3.772 38.215-15.843 38.215-15.843s13.621-5.28 12.486 7.544c-.379 5.281-3.406 23.764-6.433 43.756-4.54 28.291-9.459 59.221-9.459 59.221s-.756 8.676-7.188 10.185c-6.433 1.509-17.027-5.281-18.919-6.79-1.513-1.132-28.377-18.106-38.214-26.404-2.649-2.263-5.676-6.79.378-12.071 13.621-12.447 29.891-27.913 39.728-37.72 4.54-4.527 9.081-15.089-9.837-2.264-26.864 18.483-53.35 35.835-53.35 35.835s-6.053 3.772-17.404.377c-11.351-3.395-24.594-7.921-24.594-7.921s-9.08-5.659 6.433-11.693Z"})))},{style:{width:35,height:35}}),wechat:(0,eb.jsx)(function(e){return ek.createElement("svg",eR({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 192 192"},e),L||(L=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:8,d:"M56 68a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm34 0a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"})),_||(_=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M170 115.24c0-19.305-20.141-35.392-45.044-35.392-24.902 0-45.043 16.087-45.043 35.392 0 19.304 20.141 35.392 45.043 35.392a55.928 55.928 0 0 0 15.122-2.06l17.053 8.494-5.342-13.449A33.588 33.588 0 0 0 170 115.24Z"})),R||(R=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:8,d:"M109 107a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm32 0a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"})),B||(B=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M128.174 79.978c0-24.903-23.744-45.044-53.087-45.044C45.744 34.934 22 54.946 22 79.849a42.988 42.988 0 0 0 20.784 35.392l-7.915 16.087 18.339-10.489a60.859 60.859 0 0 0 21.878 4.055 62.617 62.617 0 0 0 6.435-.387"})))},{style:{width:40,height:40}}),weibo:(0,eb.jsx)(function(e){return ek.createElement("svg",eB({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 20 20"},e),W||(W=ek.createElement("path",{fill:"currentColor",d:"M14.812 9.801c-.778-.141-.4-.534-.4-.534s.761-1.178-.15-2.034c-1.13-1.061-3.877.135-3.877.135-1.05.306-.77-.14-.622-.897 0-.892-.326-2.402-3.12-1.51C3.853 5.858 1.455 9 1.455 9-.212 11.087.01 12.7.01 12.7c.416 3.562 4.448 4.54 7.584 4.771 3.299.243 7.752-1.067 9.102-3.76 1.35-2.696-1.104-3.763-1.884-3.91Zm-1.044 2.549c0 2.051-2.653 3.977-5.93 4.117-3.276.144-5.923-1.398-5.923-3.45 0-2.054 2.647-3.7 5.923-3.842 3.277-.142 5.93 1.126 5.93 3.175Zm-6.584-1.823c-3.293.362-2.913 3.259-2.913 3.259s-.034.917.883 1.384c1.927.98 3.912.387 4.915-.829 1.003-1.216.415-4.173-2.885-3.814Zm.281 3.075c0 .48-.498.925-1.112.99-.614.068-1.11-.265-1.11-.747s.44-.985 1.055-1.045c.707-.064 1.167.318 1.167.802Zm1.003-1.15c.11.174.031.437-.173.588-.208.146-.464.126-.574-.05-.115-.17-.072-.445.139-.588.244-.171.498-.122.608.05Zm4.86-9.806c.335-.06 1.532-.281 2.696-.025 2.083.456 4.941 2.346 3.655 6.368-.094.575-.398.62-.76.62-.432 0-.781-.255-.781-.662 0-.352.155-.71.155-.71.046-.148.411-1.07-.241-2.448-1.198-1.887-3.609-1.915-3.893-1.807-.192.07-.444.118-.591.141l-.106.016-.014.002c-.437 0-.786-.333-.786-.737a.75.75 0 0 1 .573-.715s.007-.011.018-.014c.024-.004.049-.027.075-.029Zm.66 2.611s3.367-.584 2.964 2.811a.21.21 0 0 1-.007.054c-.037.241-.264.426-.529.426-.3 0-.543-.225-.543-.507 0 0 .534-2.269-1.885-1.768-.299 0-.538-.227-.538-.505 0-.283.24-.51.538-.51Z"})))},{style:{width:33,height:33}}),twitch:(0,eb.jsx)(function(e){return ek.createElement("svg",eW({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"-7 0 32 32"},e),K||(K=ek.createElement("path",{d:"M5.4 25.6c-.12 0-.2-.04-.32-.08-.32-.12-.52-.44-.52-.8v-2.8H.84c-.48 0-.84-.4-.84-.84V7.24c0-.48.4-.84.84-.84h16.24c.48 0 .84.4.84.84v10.92c0 .24-.08.44-.24.6l-2.92 2.92c-.16.16-.36.24-.6.24H9.32L6 25.32c-.12.2-.36.28-.6.28zm-3.68-5.36h3.72c.48 0 .84.4.84.84v1.56l2.08-2.16c.16-.16.4-.24.6-.24h4.84l2.4-2.4V8.12H1.72v12.12zM8.68 16v-4.12c0-.48-.4-.84-.84-.84s-.84.4-.84.84V16c0 .48.4.84.84.84s.84-.36.84-.84zm4.4 0v-4.12c0-.48-.4-.84-.84-.84s-.84.4-.84.84V16c0 .48.4.84.84.84s.84-.36.84-.84z"})))},{style:{width:45,height:45}}),elaAddress:(0,eb.jsx)(function(e){return ek.createElement("svg",eK({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"0 0 1024 1024"},e),H||(H=ek.createElement("path",{d:"M680.629 626.078c0-94.274-76.427-170.701-170.701-170.701-94.265 0-170.691 76.428-170.691 170.701s76.426 170.701 170.691 170.701c94.274 0 170.701-76.427 170.701-170.701zm40.96 0c0 116.895-94.765 211.661-211.661 211.661-116.887 0-211.651-94.767-211.651-211.661s94.764-211.661 211.651-211.661c116.895 0 211.661 94.765 211.661 211.661z"})),V||(V=ek.createElement("path",{d:"M489.454 542.878v166.4c0 11.311 9.169 20.48 20.48 20.48s20.48-9.169 20.48-20.48v-166.4c0-11.311-9.169-20.48-20.48-20.48s-20.48 9.169-20.48 20.48z"})),q||(q=ek.createElement("path",{d:"M593.134 605.598h-166.4c-11.311 0-20.48 9.169-20.48 20.48s9.169 20.48 20.48 20.48h166.4c11.311 0 20.48-9.169 20.48-20.48s-9.169-20.48-20.48-20.48zM456.458 285.736l-80.404-158.218c-3.461-6.812 1.489-14.878 9.134-14.878h251.628c7.645 0 12.59 8.061 9.127 14.873l-80.397 158.224c-5.124 10.084-1.103 22.412 8.981 27.536s22.412 1.103 27.536-8.981l80.394-158.218c17.319-34.058-7.427-74.394-45.64-74.394H385.189c-38.208 0-62.956 40.328-45.651 74.392l80.406 158.221c5.124 10.083 17.453 14.104 27.536 8.979s14.104-17.453 8.979-27.536z"})),z||(z=ek.createElement("path",{d:"M725.04 909.844c101.8 0 184.32-82.52 184.32-184.32v-43.151c0-197.073-161.327-358.4-358.4-358.4h-79.923c-197.073 0-358.4 161.327-358.4 358.4v43.151c0 101.797 82.526 184.32 184.32 184.32H725.04zm0 40.96H296.957c-124.415 0-225.28-100.862-225.28-225.28v-43.151c0-219.695 179.665-399.36 399.36-399.36h79.923c219.695 0 399.36 179.665 399.36 399.36v43.151c0 124.422-100.858 225.28-225.28 225.28z"})))},{style:{width:35,height:35}}),wallet:(0,eb.jsx)(function(e){return ek.createElement("svg",eH({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),J||(J=ek.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 8v-.8c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C16.48 4 15.92 4 14.8 4H6.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C3 5.52 3 6.08 3 7.2V8m18 4h-2a2 2 0 1 0 0 4h2M3 8v8.8c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874C4.52 20 5.08 20 6.2 20h11.6c1.12 0 1.68 0 2.108-.218a2 2 0 0 0 .874-.874C21 18.48 21 17.92 21 16.8v-5.6c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C19.48 8 18.92 8 17.8 8H3Z"})))},{style:{width:33,height:33}}),default:(0,eb.jsx)(er.Z,{style:{width:35,height:35}})};function ez(){let e=(0,en._)(["\n          query interactingApplicationsForCredential($credentialId: String!) {\n            interactingApplicationsForCredential(credentialId: $credentialId) {\n              ","\n            }\n          }\n        "]);return ez=function(){return e},e}class eJ{prepareForDisplay(){this.prepareDisplayTitle(),this.prepareDisplayValue(),this.prepareIcon()}getDisplayableCredentialTitle(){let e=this.verifiableCredential.getSubject();if(!("displayable"in e))return null;this.displayTitle=e.displayable.title}prepareDisplayTitle(){let e=this.getDisplayableCredentialTitle();if(e)this.displayTitle=e;else{let e=this.verifiableCredential.getId().getFragment();this.displayTitle=(0,ew.fm)(e)}}getDisplayableCredentialDescription(){let e=this.verifiableCredential.getSubject().getProperties();if(!("displayable"in e))return null;{let t=e.displayable.description;if(t){let n=t.match(/\${([a-zA-Z0-9.]+)}/g),i=n?Array.from(n):[],r=t;for(let t of i){let n=t.match(/\${([a-zA-Z0-9.]+)}/);if(n&&n.length>1){let i=n[1],a=ef(e,i);r=r.replace(t,a)}}return r}}}prepareDisplayValue(){let e=this.getDisplayableCredentialDescription();if(e)this.displayValue=e;else{let e=this.getValueItems();if(e.length<=1){var t;this.displayValue=null===(t=e[0])||void 0===t?void 0:t.value}else this.displayValue=JSON.stringify(e)}}getDisplayValue(){return this.displayValue}async prepareIcon(){var e;eh.B.value;let t=this.verifiableCredential.getSubject().getProperties();if(this.hasRemotePictureToFetch()){if(t.avatar&&(null===(e=t.avatar)||void 0===e?void 0:e.data)){let e=t.avatar.data;if(e.startsWith("hive://")){let t=await (0,eu.L)(e);t?(ev.k.log("credential","Got picture data from hive"),this.representativeIcon$.next(t)):(ev.k.log("idencredentialtity","Got empty picture data from the hive cache service (real picture may come later)"),this.representativeIcon$.next(null)),this.loadIconWithFallback()}else console.warn("Unhandled avatar credentials format")}}else{if("displayable"in t)this.representativeIcon$.next(t.displayable.icon);else{let e=this.verifiableCredential.getType(),t=(0,ed.m7)(e),n=null==t?void 0:t.key,i=eq[n];this.representativeIcon$.next(i)}this.loadIconWithFallback()}}loadIconWithFallback(){if(null==this.representativeIcon$.value&&this.representativeIcon$.next(this.getFallbackIcon()),(0,ew.Y5)(this.representativeIcon$.value))return;let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{var t;this.representativeIcon$.next(e.src),null===(t=this.onIconReadyCallback)||void 0===t||t.call(this,this.representativeIcon$.value)},e.onerror=()=>{var e;this.representativeIcon$.next(this.getFallbackIcon()),null===(e=this.onIconReadyCallback)||void 0===e||e.call(this,this.representativeIcon$.value)},e.src=this.representativeIcon$.value}getFallbackIcon(){return this.isUserAvatar(),er.Z}hasRemotePictureToFetch(){let e=this.verifiableCredential.getId().getFragment();return"avatar"===e}isUserAvatar(){let e=this.verifiableCredential.getId().getFragment();return"avatar"===e}getDisplayableTitle(){return this.displayTitle}onIconReady(e){this.onIconReadyCallback=e}getSubject(){return this.verifiableCredential.getSubject()}getFragment(){return this.verifiableCredential.getId().getFragment()}getTypes(){return this.verifiableCredential.getType()}getId(){return this.verifiableCredential.getId()}isSensitiveCredential(){return this.verifiableCredential.getType().indexOf("SensitiveCredential")>=0}selfIssued(){return this.verifiableCredential.getIssuer().toString()===ep.D.getActiveIdentityId()}getIssuer(){return this.verifiableCredential.getIssuer().toString()}async fetchIssuerInfo(){let e=this.verifiableCredential.getIssuer().toString();ev.k.log("credential","fetchIssuerInfo:",e);let t=null,n=null,i=await eg.n.isPublished(e);i&&(t=await eg.n.getIssuerName(e),n=await eg.n.getIssuerAvatar(e));let r={avatarIcon:n,didString:e,name:t,isPublished:i};return ev.k.log("credential","got issuer info:",r),r}async verifyCredential(){return await el.N.verifyCredential(this.verifiableCredential)}async fetchRequestingApplications(){var e;let t=await (0,eo.Pt)(async()=>(await (0,ec.W)()).query({query:(0,ei.Ps)(ez(),ea.G),variables:{credentialId:this.id}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.interactingApplicationsForCredential){let e=await Promise.all(t.data.interactingApplicationsForCredential.map(e=>es.G.fromJson(e)));return ev.k.log("applications","Fetched credential interacting applications:",e),e}return null}equals(e){return this.id===e.id}constructor(){this.issuerInfo$=new ey.P(null,()=>this.fetchIssuerInfo()),this.isConform$=new ey.P(null,()=>this.verifyCredential()),this.requestingApplications$=new ey.P(null,()=>this.fetchRequestingApplications()),this.representativeIcon$=new em.X(null),this.id=null,this.createdAt=null,this.displayValue=null,this.onIconReadyCallback=null,this.getValueItems=()=>{let e=this.verifiableCredential.getId().getFragment();if("avatar"===e)return null;let t=this.verifiableCredential.getSubject().getProperties();return Object.keys(t).filter(e=>"id"!=e).filter(e=>"displayable"!=e).sort().map(e=>{let n="";return"wallet"==e?(n="wallet",t[e]):"gender"==e?"M"==t[e]||"male"==t[e]?n="male":("F"==t[e]||"female"==t[e])&&(n="female"):n=""!=t[e].toString()?t[e].toString():"not set",{name:e,value:n}})}}}},5676:function(e,t,n){n.d(t,{E:function(){return a}});var i=n(9177),r=n(66930);class a extends r.h{prepareDisplayTitle(){let e=this.getDisplayableCredentialTitle();e?this.displayTitle=e:this.displayTitle=(0,i.fm)(this.profileInfo.key)}prepareDisplayValue(){this.displayValue=this.profileInfo.options.converter.toDisplayableValue(this)}getProfileInfo(){return this.profileInfo}constructor(e){super(),this.profileInfo=e}}},66533:function(e,t,n){n.d(t,{_:function(){return i}});class i{static fromJson(e){if(!i.isCustomException(e))return null;let t=new i;return Object.assign(t,e),t.timestamp=new Date(e.timestamp),t}static isCustomException(e){return"object"==typeof e&&"source"in e&&"api"===e.source}static newClientError(e,t){let n=new i;return n.message=t,n.appExceptionCode=e,n.statusCode=-1,n.timestamp=new Date,n.source="client",n}}},48023:function(e,t,n){var i,r,a,s,l,o,c,u;n.d(t,{Wg:function(){return i},XF:function(){return s},gs:function(){return r}}),(l=i||(i={}))[l.SomethingTodo=10101]="SomethingTodo",l[l.AuthError=10102]="AuthError",l[l.EmailAlreadyExists=10103]="EmailAlreadyExists",l[l.EmailNotExists=10104]="EmailNotExists",l[l.AuthKeyNotExists=10105]="AuthKeyNotExists",l[l.Unspecific=10199]="Unspecific",(o=r||(r={}))[o.DatabaseError=10201]="DatabaseError",o[o.InvalidKeyRingConfig=10202]="InvalidKeyRingConfig",o[o.KeyRingNotExists=10203]="KeyRingNotExists",o[o.KeyNotExists=10204]="KeyNotExists",o[o.InvalidChallengeId=10205]="InvalidChallengeId",o[o.InvalidAuthKey=10206]="InvalidAuthKey",o[o.CanNotRemoveKey=10207]="CanNotRemoveKey",o[o.WebAuthnVerifyError=20208]="WebAuthnVerifyError",o[o.WrongPassword=10209]="WrongPassword",o[o.Unauthorized=10210]="Unauthorized",(c=a||(a={}))[c.DIDStorageError=10301]="DIDStorageError",c[c.MnemonicError=10302]="MnemonicError",c[c.DIDAlreadyExists=10303]="DIDAlreadyExists",c[c.DIDNotExists=10304]="DIDNotExists",c[c.CredentialAlreadyExists=10305]="CredentialAlreadyExists",c[c.CredentialNotExists=10306]="CredentialNotExists",c[c.InvalidCredential=10307]="InvalidCredential",c[c.DIDNotUpToDateError=10308]="DIDNotUpToDateError",c[c.DIDTransactionError=10309]="DIDTransactionError",c[c.NetworkError=10310]="NetworkError",(u=s||(s={}))[u.OtherApolloError=10901]="OtherApolloError",u[u.OtherAxiosError=10902]="OtherAxiosError",u[u.UnlockKeyCancelled=10903]="UnlockKeyCancelled"},1349:function(e,t,n){n.d(t,{E:function(){return i}});class i extends Error{}},10343:function(e,t,n){n.d(t,{h:function(){return i}});class i extends Error{}},18093:function(e,t,n){n.d(t,{t:function(){return i}});let i="\n  id\n  key\n  createdAt\n  lastUsedAt\n  userAgent\n  name\n"},11472:function(e,t,n){n.d(t,{E:function(){return i},k:function(){return r}});let i="\n  id\n  createdAt\n  verifiableCredential\n",r="\n  verifiableCredential\n"},98478:function(e,t,n){n.d(t,{G:function(){return i}});let i="\n  id\n  interactingApplication { ".concat("\n  id\n  did\n"," }\n")},5344:function(e,t,n){n.d(t,{j:function(){return r}});var i=n(18093);let r="\n  createdAt\n  updatedAt\n  keyId\n  key\n  type\n  browser { ".concat(i.t," }\n")},61960:function(e,t,n){n.d(t,{G:function(){return m}});var i=n(60230),r=n(23965),a=n(57135),s=n(11920),l=n(11472);let o="\n  id\n  credential { ".concat(l.E," }\n");var c=n(69144),u=n(70518),d=n(1859),h=n(50676);class p{static async fromJson(e){let t=new p;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}async fetchAppDocument(){let e=await u._.resolveDIDDocument(this.did);e&&(this.name$.next(await e.getRepresentativeOwnerName()),this.icon$.next(await e.getRepresentativeIcon()))}constructor(){this.name$=new d.P(null,()=>this.fetchAppDocument()),this.icon$=new h.X(null)}}class g{static async fromJson(e){let t=new g;return Object.assign(t,e),t.credential=await (0,c.q)(e.credential),t}}var v=n(51385),y=n(76506);function f(){let e=(0,i._)(["\n          query requestedCredentials($identityInteractingAppId: String!) {\n            requestedCredentials(identityInteractingAppId: $identityInteractingAppId) {\n              ","\n            }\n          }\n        "]);return f=function(){return e},e}function w(){let e=(0,i._)(["\n          query importedCredentials($identityInteractingAppId: String!) {\n            importedCredentials(identityInteractingAppId: $identityInteractingAppId) {\n              ","\n            }\n          }\n        "]);return w=function(){return e},e}class m{static async fromJson(e){let t=new m;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t.interactingApplication=await p.fromJson(e.interactingApplication),t}async fetchRequestedCredentials(){return(0,a.HL)(async()=>{var e;let t=await (0,v.Pt)(async()=>(await (0,y.W)()).query({query:(0,r.Ps)(f(),o),variables:{identityInteractingAppId:this.id}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.requestedCredentials){let e=await Promise.all(t.data.requestedCredentials.map(e=>g.fromJson(e)));return s.logger.log("applications","Fetched requested credentials:",e),e}return null})}async fetchImportedCredentials(){return(0,a.HL)(async()=>{var e;let t=await (0,v.Pt)(async()=>(await (0,y.W)()).query({query:(0,r.Ps)(w(),l.E),variables:{identityInteractingAppId:this.id}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.importedCredentials){let e=await Promise.all(t.data.importedCredentials.map(e=>(0,c.q)(e)));return s.logger.log("applications","Fetched imported credentials:",e),e}return null})}constructor(){this.requestedCredentials$=new d.P(null,()=>this.fetchRequestedCredentials()),this.importedCredentials$=new d.P(null,()=>this.fetchImportedCredentials())}}},10530:function(e,t,n){var i,r;n.d(t,{J:function(){return i}}),(r=i||(i={})).PASSWORD="PASSWORD",r.WEBAUTHN="WEBAUTHN"},95640:function(e,t,n){n.d(t,{M:function(){return s}});var i=n(99617),r=n(6598);let a=new r.R;class s{static async fromJson(e){return a.get(e.keyId,{create:async()=>new s,async fill(t){Object.assign(t,e),t.createdAt=new Date(e.createdAt),t.updatedAt=new Date(e.updatedAt),e.browser&&(t.browser=await i.A.fromJson(e.browser))}})}equals(e){return this.keyId===e.keyId}}},19162:function(e,t,n){var i,r;n.d(t,{M:function(){return i}}),(r=i||(i={})).RAW="RAW",r.MICROSOFT="MICROSOFT"},47101:function(e,t,n){n.d(t,{L:function(){return f}});var i=n(60230),r=n(23965);let a="id type userEmailProvider identityStr credentialsCount appDid browserName createdAt";var s=n(29281),l=n(62067),o=n.n(l),c=n(19162);class u{static fromJson(e){let t=new u;return Object.assign(t,e)}getCreatedAtStr(){return o()(this.createdAt).format("DD-MMM-YYYY HH:mm:ss")}getDescription(){switch(this.type){case s.T.USER_SIGN_IN:if(this.userEmailProvider==c.M.RAW)return"Signed in with raw email.";if(this.userEmailProvider===c.M.MICROSOFT)return"Signed in with Microsoft oauth email.";return"Signed in with unhandled type ".concat(this.userEmailProvider,".");case s.T.IDENTITY_CREATED:return"DID ".concat(this.identityStr," created");case s.T.IDENTITY_DELETED:return"DID ".concat(this.identityStr," deleted");case s.T.CREDENTIALS_SHARED:return"".concat(this.credentialsCount," verified credentials shared.");case s.T.CREDENTIALS_IMPORTED:return"".concat(this.credentialsCount," verified credential imported.");case s.T.BIND_EMAIL:if(this.userEmailProvider==c.M.RAW)return"Bound with raw email.";if(this.userEmailProvider===c.M.MICROSOFT)return"Bound with Microsoft oauth email.";return"Bound with unhandled type ".concat(this.userEmailProvider,".");case s.T.BIND_BROWSER:{var e;let t=(null===(e=this.browser)||void 0===e?void 0:e.name)||this.browserName;return"Bound browser ".concat(t,".")}case s.T.PASSWORD_CHANGED:return"Password changed."}return""}}var d=n(76506),h=n(3883),p=n(1859),g=n(51385);function v(){let e=(0,i._)(["\n            query Activities {\n                activities {\n                    ","\n                }\n            } "]);return v=function(){return e},e}function y(){let e=(0,i._)(["\n            mutation CreateActivity($input: CreateActivityInput!) {\n                createActivity(input: $input) {\n                    ","\n                }\n            } "]);return y=function(){return e},e}class f{async fetchActivities(){h.k.log("activity","Fetch activities");let{data:e}=await (0,g.Pt)(async()=>await (await (0,d.W)()).query({query:(0,r.Ps)(v(),a)}));if(e)return h.k.log("activity","Get activities",e.activities),e.activities.map(e=>u.fromJson(e));throw Error("Can not get activities.")}static async createActivity(e){var t;h.k.log("activity","Create activity");let n=await (0,g.Pt)(async()=>await (await (0,d.W)()).mutate({mutation:(0,r.Ps)(y(),a),variables:{input:e}}));return(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.createActivity)?(h.k.log("activity","Create activities with input ".concat(e),n.data.createActivity),u.fromJson(n.data.createActivity)):(h.k.error("activity","Failed to create activity."),null)}constructor(e){this.user=e,this.activities$=new p.P([],()=>this.fetchActivities())}}},63863:function(e,t,n){n.d(t,{lu:function(){return w},zl:function(){return y},qR:function(){return f}});var i=n(60230),r=n(23965),a=n(48023);class s{static fromJson(e,t){let n=Object.assign(new s,e);return n.user=t,n}}var l=n(51385),o=n(76506),c=n(3883),u=n(1859);function d(){let e=(0,i._)(["\n                query FetchUserEmails {\n                  fetchUserEmails {\n                    ","\n                  }\n                }\n                "]);return d=function(){return e},e}function h(){let e=(0,i._)(["\n                query RemoveUserEmail($id: String!) {\n                  removeUserEmail(id: $id)\n                }\n                "]);return h=function(){return e},e}function p(){let e=(0,i._)(["\n                mutation BindOauthEmail($email: String!) {\n                  bindOauthEmail(email: $email)\n                }\n                "]);return p=function(){return e},e}function g(){let e=(0,i._)(["\n                    mutation CheckEmailBind($authKey: String!) {\n                        checkEmailBind(authKey: $authKey) { accessToken refreshToken }\n                    }\n                "]);return g=function(){return e},e}function v(){let e=(0,i._)(["\n                    mutation BindWithEmailAddress($emailAddress: String!) {\n                        bindWithEmailAddress(emailAddress: $emailAddress) { success }\n                    }\n                "]);return v=function(){return e},e}function y(e){return e.appExceptionCode===a.Wg.EmailAlreadyExists}function f(e){return e.appExceptionCode===a.Wg.EmailNotExists}class w{async fetchUserEmails(){var e;c.k.log("user","Fetching user emails.");let t=await (0,l.Pt)(async()=>(await (0,o.W)()).query({query:(0,r.Ps)(d(),"id email createdAt")}));return(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.fetchUserEmails)?t.data.fetchUserEmails.map(e=>s.fromJson(e,this.user)):(console.error("user","can not fetch user emails."),null)}async removeUserEmail(e){var t,n;c.k.log("user","remove user email.");let i=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(h()),variables:{id:e}}));return(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.removeUserEmail)||console.error("user","can not remove user email."),null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.removeUserEmail}async bindOauthEmail(e){var t;c.k.log("user","Bind oauth email address");let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(p()),variables:{email:e}}));return(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.bindOauthEmail)||c.k.error("user","Failed from bindOauthEmail api."),null==n?void 0:n.data.bindOauthEmail}static async checkRawEmailBind(e){var t;c.k.log("user","Checking temporary authentication key for email bind.");let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(g()),variables:{authKey:e}}));return null!=n&&null!==(t=n.data)&&void 0!==t&&!!t.checkEmailBind||(c.k.error("Failed to check email bind"),!1)}async bindWithEmailAddress(e){c.k.log("user","Sending request to authentication by email"),await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(v()),variables:{emailAddress:e}}))}constructor(e){this.user=e,this.userEmails$=new u.P([],()=>this.fetchUserEmails())}}},81316:function(e,t,n){n.d(t,{n:function(){return F}});var i=n(60230),r=n(23965),a=n(47101),s=n(63863),l=n(51385),o=n(76506),c=n(3883),u=n(9177),d=n(50676),h=n(18093),p=n(99617),g=n(1859);function v(){let e=(0,i._)(["\n        query ListBrowsers {\n          browsers {\n            ","\n          }\n        }\n      "]);return v=function(){return e},e}function y(){let e=(0,i._)(["\n        mutation deleteBrowser($browserId: String!) {\n          deleteBrowser(browserId: $browserId)\n        }\n      "]);return y=function(){return e},e}class f{async fetchBrowsers(){var e;c.k.log("devices","Fetching user browsers");let t=await (0,l.Pt)(async()=>(await (0,o.W)()).query({query:(0,r.Ps)(v(),h.t)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.browsers){let e=await Promise.all(t.data.browsers.map(e=>p.A.fromJson(e)));return c.k.log("browsers","Fetched browsers:",e),e}return null}async getCurrentBrowser(){return this.browsers$.value.find(e=>e.isCurrentBrowser())}async deleteBrowser(e){var t;c.k.log("browsers","Deleting browser");let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(y()),variables:{browserId:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.deleteBrowser)return this.browsers$.next(this.browsers$.value.filter(t=>t.id!=e)),!0;throw Error("Failed to delete Browser")}constructor(e){this.user=e,this.browsers$=new g.P([],()=>this.fetchBrowsers())}}var w=n(12540),m=n(77358);class b{async createIdentity(e){c.k.log("identities","Creating a new identity",e);let t=(0,w.zV)(),n=await m.D.createIdentity(e,t);return this.identities$.next([n,...this.identities$.value]),n}async deleteIdentity(e){c.k.log("identities","Deleting identity");let t=await m.D.deleteIdentity(e);return this.identities$.next(this.identities$.value.filter(t=>t.did!=e)),t}async createDIDPublishTransaction(e){return c.k.log("identities","Creating identity publication transaction"),await m.D.createDIDPublishTransaction(e)}async publishIdentity(e,t){return c.k.log("identities","Publishing identity"),await m.D.publishIdentity(e,t)}async fetchIdentities(){return c.k.log("identities","Fetching identities"),m.D.listIdentities()}constructor(e){this.user=e,this.identities$=new g.P([],()=>this.fetchIdentities())}}var I=n(57135),k=n(5344),C=n(95640),D=n(10530),S=n(21290),E=n(2512),x=n(45685),P=n(67133).Buffer;function A(){let e=(0,i._)(["\n        query FetchShadowKeys {\n          userKeys {\n            ","\n          }\n        }\n      "]);return A=function(){return e},e}function j(){let e=(0,i._)(["\n          query CheckMasterKeyLock {\n            checkMasterKeyLock\n          }\n        "]);return j=function(){return e},e}class O{async fetchShadowKeys(){var e;c.k.log("devices","Fetching shadow keys");let t=await (0,l.Pt)(async()=>(await (0,o.W)()).query({query:(0,r.Ps)(A(),k.j)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.userKeys){let e=await Promise.all(t.data.userKeys.map(e=>C.M.fromJson(e)));return c.k.log("security","Fetched user shadow keys:",e),e}return null}async bindPassword(e){let t;if(c.k.log("keyring","Binding password"),this.isPasswordBound())t=await (0,S.Cp)(e);else{let n={type:D.J.PASSWORD,key:e,keyId:"unused-for-now-for-passwords"};t=[await (0,S.cI)(n)]}return!!t&&(this.deletePasswordShadowKey(),t.forEach(e=>this.upsertShadowKey(e)),!0)}async bindPasskey(){let e=await (0,S.Dk)(),t=await this.pkCredentialCreationOptions(e,this.user.name$.value),n=await (0,E.RQ)(t[1]),i={type:D.J.WEBAUTHN,keyId:n.id,key:JSON.stringify(n),challengeId:e.id},r=await (0,S.cI)(i);return!!r&&(this.upsertShadowKey(r),!0)}async unlockPasskeyLocally(){c.k.log("Keyring","start unlock passkey...");let e=await (0,S.Dk)(),t=await this.pkCredentialCreationOptions(e,null),n=await (0,E.oz)(t[0],!1),i={type:D.J.WEBAUTHN,keyId:n.id,key:JSON.stringify(n),challengeId:e.id};return c.k.log("Keyring","start unlock passkey, attResp: ",n),i}async pkCredentialCreationOptions(e,t){let n="didweb.trinity-tech.io",i=new TextEncoder,r=i.encode(e.content),a={challenge:P.from(r).toString(),allowCredentials:[],rpId:n,userVerification:"required",timeout:6e4},s={user:{id:t,name:t,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7}],rp:{id:n,name:"DID web app"},challenge:e.content};return[a,s]}upsertShadowKey(e){let t=this.shadowKeys$.value;this.shadowKeys$.next([...t.filter(t=>!t.equals(e)),e])}deletePasswordShadowKey(){let e=this.shadowKeys$.value;this.shadowKeys$.next([...e.filter(e=>e.type!==D.J.PASSWORD)])}isPasswordBound(){var e;return!!(null===(e=this.shadowKeys$.value)||void 0===e?void 0:e.find(e=>e.type===D.J.PASSWORD))}isThisBrowserBound(){var e;return!!(null===(e=this.passkeyKeys$.value)||void 0===e?void 0:e.find(e=>{var t;return null===(t=e.browser)||void 0===t?void 0:t.isCurrentBrowser()}))}async checkRemoteUnlockStatus(){return(0,l.Pt)(async()=>{await (await (0,o.W)()).query({query:(0,r.Ps)(j())})})}ensureMasterKeyUnlocked(){return(0,I.HL)(async()=>(await this.checkRemoteUnlockStatus(),!0),!0,!1)}constructor(e){this.user=e,this.shadowKeys$=new g.P(null,()=>this.fetchShadowKeys()),this.passwordKeys$=new g.P(null,async()=>{this.shadowKeys$.pipe((0,x.U)(e=>null==e?void 0:e.filter(e=>e.type===D.J.PASSWORD))).subscribe(this.passwordKeys$)}),this.passkeyKeys$=new g.P(null,async()=>{this.shadowKeys$.pipe((0,x.U)(e=>null==e?void 0:e.filter(e=>e.type===D.J.WEBAUTHN))).subscribe(this.passkeyKeys$)})}}var $=n(6598);let T=new $.R;function U(){let e=(0,i._)(["\n          mutation UpdateUserProperty($input: UserPropertyInput!) {\n            updateUserProperty(input: $input)\n          }\n        "]);return U=function(){return e},e}class F{static async fromJson(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return T.get(e.id,{create:async()=>new F,async fill(t){t.fillFromJson(e),t.createdAt=new Date(e.createdAt),t.nameInitials$.next((0,u.OX)(e.name)),t.name$.next(e.name)}},t)}toJson(){return{id:this.id,type:this.type,name:this.name$.value,nameInitials:(0,u.OX)(this.name$.value),createdAt:this.createdAt.toISOString()}}get(e){if(!this.features.has(e))throw Error("Unhandled user feature '".concat(e,"'"));return this.features.get(e)}addFeature(e,t){if(!this.features.has(e))return this.features.set(e,t),t}fillFromJson(e){Object.assign(this,e)}equals(e){return!!e&&this.id===e.id}async updateUserName(e){var t;c.k.log("user","Updating user name.");let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(U()),variables:{input:{name:e}}})),i=null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.updateUserProperty;return i&&(this.name$.next(e),c.k.log("user","User name updated successfully.")),i}constructor(){this.name$=new d.X(null),this.nameInitials$=new d.X(null),this.features=new Map,this.addFeature("email",new s.lu(this)),this.addFeature("identity",new b(this)),this.addFeature("browser",new f(this)),this.addFeature("security",new O(this)),this.addFeature("activity",new a.L(this))}}},20708:function(e,t,n){n.d(t,{Pd:function(){return l},Z$:function(){return o}});var i=n(175),r=n(3883),a=n(16421);let s="browser-client-key";function l(e){var t;let n;try{n=(0,i.Z)(e)}catch(e){r.k.error("browser","Access token received from the backend cannot be decoded!");return}if(!n.browserKey)throw Error("Abnormal state: no browser key found in the access token!");let l=o();if(l&&l!==n.browserKey)throw localStorage.removeItem(s),(0,a.w7)(),Error("State error! Browser key ".concat(l," is different from access token browser key ").concat(n.browserKey," !"));t=n.browserKey,localStorage.setItem(s,t)}function o(){return localStorage.getItem(s)}},21417:function(e,t,n){n.d(t,{l:function(){return i}});let i=new class{init(e){this.config=e}get(e){if(!this.config)throw Error("The config service has not been initialized yet. Make sure to call configService.init() first");return this.config[e]}}},90786:function(e,t,n){n.d(t,{N:function(){return p}});class i{static async loadOrCreate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=new i(e,n,t);return await r.load(),r}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.items.findIndex(t=>t.key==e),r={key:e,timeValue:n,data:t};-1===i?this.items.push(r):this.items[i]=r,this.items.sort((e,t)=>0===e.timeValue?-1:0===t.timeValue?1:e.timeValue>t.timeValue?-1:e.timeValue<t.timeValue?1:0)}remove(e){let t=this.items.findIndex(t=>t.key==e);t>=0&&this.items.splice(t,1)}get(e){return this.items.find(t=>t.key==e)}values(){return this.items}size(){return this.items.length}async save(){let e=this.items.slice(0,Math.min(this.items.length,this.maxItemsOnDisk)),t="cache"+this.name;localStorage.setItem(t,JSON.stringify(e))}async load(){let e="cache"+this.name,t=localStorage.getItem(e);t&&(this.items=JSON.parse(t))}async delete(){let e="cache"+this.name;localStorage.removeItem(e)}constructor(e,t,n){this.name=e,this.maxItemsOnDisk=t,this.storeGlobally=n}}var r=n(70518),a=n(3883),s=n(35324),l=n(13952),o=n.n(l),c=n(62067),u=n.n(c),d=n(69810),h=n.n(d);let p=new class{async init(){this.contextsCache=await i.loadOrCreate("credentialcontextpayloads",!0)}async resolveExpandedCredentialTypeIdentifiers(e){let t=null;try{t=e.toJSON()}catch(e){return a.k.warn("credentialtypes","Credential could not be parsed, returning empty types"),[]}if(!("@context"in t)||0!==t["@context"].indexOf("https://www.w3.org/2018/credentials/v1"))return[];try{let e=await o().expand(t,{documentLoader:this.buildElastosJsonLdDocLoader()});if(e&&e.length>0){let t=e[0];return Array.isArray(t["@type"])?t["@type"]:[t["@type"]]}console.log("error")}catch(e){a.k.warn("credentialtypes","Credential could not be expanded, returning empty types.",e)}return[]}async resolveTypesWithContexts(e){let t=null;try{if(t=e.toJSON(),!("@context"in t)||0!==t["@context"].indexOf("https://www.w3.org/2018/credentials/v1"))return[];let n=t["@context"],i=[];for(let e of n){let t=await this.fetchContext(e);if(!t){a.k.warn("credentialtypes","Failed to fetch credential type context for",e);continue}"@context"in t&&i.push({url:e,payload:t})}let r=[];for(let t of e.getType()){let e=i.find(e=>Object.keys(e.payload["@context"]).indexOf(t)>=0);e&&r.push({context:e.url,shortType:t})}return r}catch(e){return a.k.warn("credentialtypes","Credential could not be parsed or , returning empty types.",e),[]}}async fetchContext(e){let t=this.contextsCache.get(e);return t?t.data:this.fetchContextQueue.add(async()=>{if(e.startsWith("http"))try{let t=await fetch(e),n=await t.json();return this.contextsCache.set(e,n,u()().unix()),n}catch(e){return a.k.warn("credentialtypes","Failed to get payload from context.",e),null}else{if(!e.startsWith("did:"))return a.k.log("credentialtypes","Unsupported credential context url",e),null;let{publisher:t,shortType:n}=this.extractEIDContext(e);if(!t)return a.k.warn("credentialtypes","Failed to extract publisher from context",e),null;let i=await r._.resolveDIDDocument(t);if(!i)return null;{let r="".concat(t,"#").concat(n),a=await this.getContextPayloadFromDIDDocument(i.getDIDDocument(),r);return this.contextsCache.set(e,a,u()().unix()),a}}})}extractEIDContext(e){let t=new RegExp(/^did:\/\/elastos\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)/),n=t.exec(e);return!n||n.length<3?(a.k.warn("credentialtypes","Invalid url format, cannot find credential publisher and ID"),null):{publisher:"did:elastos:".concat(n[1]),shortType:n[2]}}async getContextPayloadFromDIDDocument(e,t){let n=e.getService(t);if(!n)return a.k.warn("credentialtypes","The DID document has no service with ID: "+t),null;let i=n.getServiceEndpoint(),{DIDURL:r}=await (0,s.hS)(),l=this.getCredentialById(e,new r(i));if(!l)return a.k.warn("credentialtypes","The DID document has no credential context credential that matches (service id, credential id): ",t,i),null;let o=l.getSubject().getProperties();return"definition"in o&&"@context"in o.definition?o.definition:(a.k.warn("credentialtypes","Credential ".concat(i," found but no definition/@context in the subject. Invalid format."),o),null)}buildElastosJsonLdDocLoader(){return(e,t)=>new Promise(async(t,n)=>{try{if(e.startsWith("did")){let n=await this.fetchContext(e);t({contextUrl:null,documentUrl:e,document:n})}else{let n=o().documentLoaders.xhr(),i=await n(e);t(i)}}catch(e){n(e)}})}async verifyCredential(e){try{let t=e.toJSON();if("object"!=typeof t)return a.k.warn("credentialtypes","verifyCredential false 331"),!1;if(!("@context"in t)||0!==t["@context"].indexOf("https://www.w3.org/2018/credentials/v1")||!("credentialSubject"in t)||!("proof"in t))return!1;let n=await o().compact(t,t["@context"],{documentLoader:this.buildElastosJsonLdDocLoader()});if(n){"credentialSubject"in n&&"string"!=typeof n.credentialSubject||(n.credentialSubject={id:n.credentialSubject});let{modifiedDoc:e,warningsGenerated:i}=this.addMissingFieldsToCompactHtmlResult(t,n);if(!i)return!0}}catch(e){a.k.warn("credentialtypes","verifyCredential error",e)}return!1}addMissingFieldsToCompactHtmlResult(e,t){let n=!1,i=Object.assign({},t);for(let r of Object.keys(e.credentialSubject))r in t.credentialSubject||(i.credentialSubject["MISSING_KEY_"+r]="This field is missing in credential types",n=!0);for(let r of Object.keys(e.proof))r in t.proof||(i.proof["MISSING_KEY_"+r]="This field is missing in credential types",n=!0);return{modifiedDoc:i,warningsGenerated:n}}getCredentialById(e,t){let n=e.getCredentials();return n.find(e=>t.getFragment()==e.getId().getFragment())}constructor(){this.fetchContextQueue=new(h())(1)}}},51385:function(e,t,n){n.d(t,{Pt:function(){return w},rs:function(){return g}});var i=n(17205),r=n(66533),a=n(48023),s=n(1349),l=n(10343),o=n(63863),c=n(81630),u=n(21704),d=n(27524),h=n(3883),p=n(52856);let g=new d.x;function v(e){return h.k.error("apollo","Client error",e),r._.newClientError(a.XF.OtherApolloError,e.message)}function y(e){return h.k.error("apollo","Protocol error",e),r._.newClientError(a.XF.OtherApolloError,e.message)}function f(e){var t;let n=e.path,i=e.originalError||(null===(t=e.extensions)||void 0===t?void 0:t.originalError),s=r._.fromJson(i);return s?((0,p.z)(s)?h.k.warn("graphql","Master key needs to be unlocked"):h.k.error("graphql","Custom API exception when calling GraphQL method:",n,i),s):(h.k.error("graphql","GraphQL error when calling GraphQL method:",n,e),r._.newClientError(a.XF.OtherApolloError,e.message))}async function w(e,t){try{let t=await e();return t}catch(k){let e;if(k instanceof r._&&(e=[k]),k instanceof i.cA){var n,d,w;let t;t=(t=(t=(t=[]).concat(null===(n=k.clientErrors)||void 0===n?void 0:n.map(v))).concat(null===(d=k.graphQLErrors)||void 0===d?void 0:d.map(f))).concat(null===(w=k.protocolErrors)||void 0===w?void 0:w.map(y)),k.networkError&&(t=t.concat(function(e){let t=[];return"ServerError"===e.name?"object"==typeof e.result&&e.result.forEach(e=>{var n;null===(n=e.errors)||void 0===n||n.forEach(e=>{h.k.error("graphql","GraphQL server network error:",e.message),t.push(r._.newClientError(a.XF.OtherApolloError,e.message))})}):(h.k.error("graphql","GraphQL network error:",e),t.push(r._.newClientError(a.XF.OtherApolloError,e.message))),t}(k.networkError))),e=t}else k instanceof u.__?e=[f(k)]:k instanceof c.AxiosError?e=[function(e){let t=r._.fromJson(e.response.data);return t?(h.k.error("axios","Axios app exception",t),t):(h.k.error("Unhandled axios error:",e),r._.newClientError(a.XF.OtherAxiosError,e.message))}(k)]:h.k.error("Unhandled error:",k);e.map(e=>{g.next(e)});let m=e.find(e=>(0,p.z)(e));if(m)throw m;let b=e.find(e=>(0,o.zl)(e));if(b)throw new s.E;let I=e.find(e=>(0,o.qR)(e));if(I)throw new l.h;return t||null}}},76506:function(e,t,n){n.d(t,{W:function(){return y}});var i=n(14456),r=n(23139),a=n(79977),s=n(29526),l=n(15740),o=n(2594),c=n(85932),u=n(16421),d=n(69810),h=n.n(d),p=n(20708),g=n(21417);let v=new class{async init(){return this.queue.add(()=>{if(this.initialized)return;let e=new l.A({uri:"".concat(g.l.get("backendUrl"),"/graphql"),batchMax:30,batchInterval:50}),t=(0,c.q)(e=>{let{graphQLErrors:t,networkError:n,operation:r,forward:a}=e;if(t){if(!localStorage.getItem("access_token"))return;for(let e of t)switch(e.extensions.code){case"UNAUTHENTICATED":return(0,i.p)((0,u.g$)().catch(e=>{})).filter(e=>!!e).flatMap(e=>{let t=r.getContext().headers;return r.setContext({headers:{...t,authorization:"Bearer ".concat(e)}}),a(r)});case"INVALID_REFRESH_TOKEN":(0,u.JA)()}}}),n=(0,o.v)((e,t)=>{let{headers:n}=t,i=localStorage.getItem("access_token"),r=(0,p.Z$)();return{headers:{...n,authorization:i?"Bearer ".concat(i):"",...r&&{"x-browser-key":r}}}});this.apolloClient=new r.f({link:(0,a.D)([t,n,e]),cache:new s.h}),this.initialized=!0})}constructor(){this.initialized=!1,this.queue=new(h())(1)}},y=async()=>(await v.init(),v.apolloClient)},17041:function(e,t,n){n.d(t,{L:function(){return c}});var i=n(53932),r=n(3883),a=n(78330),s=n(78212),l=n(54860);let o=(0,s.S)()&&new a.J("hive-pictures",async(e,t)=>(r.k.log("hive","Cache miss for hive url picture, fetching"),u(t.hiveScriptUrl,t.identity)));function c(e){let t=i.B.value;return t?o.get(e+t.did,{hiveScriptUrl:e,identity:t}):null}async function u(e,t){if(!e)return null;let n=await d(e,t);return n?(0,l.Ik)(n):""}async function d(e,t){e=e.replace("params={empty:0}",'params={"empty":0}');try{r.k.log("hive","Calling script url to download file",e);let n=await t.get("hive").getVaultService(),i=await n.getScriptingService().downloadFileByHiveUrl(e);if(!i||0===i.length)return r.k.warn("hive","Got empty data while fetching hive script picture",e),null;return r.k.log("hive","Got data after fetching hive script picture",e,"data length:",i.length),i}catch(t){return r.k.warn("hive","Failed to download hive asset at ",e,t),null}}},12540:function(e,t,n){n.d(t,{zV:function(){return d},AX:function(){return u},gM:function(){return o}});var i=n(3883),r=n(78212),a=n(35324),s=n(69810),l=n.n(s);let o=new(l())(1),c=["https://hive1.trinity-tech.io","https://hive2.trinity-tech.io","https://hive3.trinity-tech.io"];function u(){(0,r.S)()&&(0,a.pH)().then(e=>{let{Logger:t,AppContext:n,DIDResolverAlreadySetupException:r}=e;try{t.setDefaultLevel(t.WARNING),n.setupResolver("mainnet","/anyfakedir/browserside/for/didstores")}catch(e){e instanceof r||i.k.error("hive","AppContext.setupResolver() exception:",e)}})}function d(){let e=Math.floor(Math.random()*c.length);return c[e]}},7845:function(e,t,n){var i,r;n.d(t,{V:function(){return i}}),(r=i||(i={}))[r.NotChecked=0]="NotChecked",r[r.Subscribing=1]="Subscribing",r[r.ReadyToUse=2]="ReadyToUse",r[r.UnknownError=3]="UnknownError"},59606:function(e,t,n){n.d(t,{Pr:function(){return d},m7:function(){return u},yd:function(){return c}});class i{setup(e){if(0>=e.indexOf("#"))this.shortType=e,this.context=null,this.longType=null;else{let t=e.split("#");this.context=t[0],this.shortType=t[1],this.longType=e}}getContext(){return this.context}getShortType(){return this.shortType}getLongType(){return this.longType}isLongType(){return!!this.longType}containedIn(e){return e.includes(this.getLongType())||e.includes(this.getShortType())}constructor(e){this.type=e,this.setup(e)}}var r=n(57969);class a{getInfo(e){return u(e.verifiableCredential.getType())}getEditionType(){return this.editionType}constructor(e){this.editionType=e}}var s=n(9177);class l extends a{toEditableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toDisplayableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toSubject(e){return{[this.subjectKey]:e}}constructor(e){super(r.E.SingleLineString),this.subjectKey=e}}let o=[new r.h("name",new i("https://ns.elastos.org/credentials/profile/name/v1#NameCredential"),{converter:new l("name")}),new r.h("avatar",new i("https://webservice.org#AvatarCredential"),{converter:new class extends a{toEditableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toDisplayableValue(e){return null}toSubject(e){return this.buildAvatar(e.mimeType,"elastoshive",e.hiveDownloadScriptUrl)}buildAvatar(e,t,n){return{avatar:{"content-type":e,type:t,data:n}}}constructor(e){super(r.E.Undefined),this.subjectKey=e}}("avatar")}),new r.h("email",new i("https://ns.elastos.org/credentials/profile/email/v1#EmailCredential"),{multipleInstancesAllowed:!0,converter:new l("email")}),new r.h("birthDate",new i("https://ns.elastos.org/credentials/profile/birthDate/v1#BirthDateCredential"),{converter:new class extends a{toEditableValue(e){let t=e.verifiableCredential.getSubject().getProperty(this.subjectKey);return new Date(t)}toDisplayableValue(e){return(0,s.r2)(e.verifiableCredential.getSubject().getProperty(this.subjectKey))}toSubject(e){return{[this.subjectKey]:e.toISOString()}}constructor(e){super(r.E.Date),this.subjectKey=e}}("birthDate")}),new r.h("nationality",new i("did://elastos/iUq76mi2inkZfqqbHkovbcDkzEkAh2dKrb/ISONationalityCredential#ISONationalityCredential"),{multipleInstancesAllowed:!0,converter:new class extends a{toEditableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toDisplayableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey).label}toSubject(e){return{[this.subjectKey]:e}}constructor(e){super(r.E.Country),this.subjectKey=e}}("nationality")}),new r.h("gender",new i("https://ns.elastos.org/credentials/profile/nationality/v1#GenderCredential"),{converter:new class extends a{toEditableValue(e){return(0,s.aD)(e.verifiableCredential.getSubject().getProperty(this.subjectKey))}toDisplayableValue(e){return(0,s.aD)(e.verifiableCredential.getSubject().getProperty(this.subjectKey))}toSubject(e){return{[this.subjectKey]:(0,s.OX)(e)}}constructor(e){super(r.E.Gender),this.subjectKey=e}}("gender")}),new r.h("telephone",new i("https://ns.elastos.org/credentials/profile/telephone/v1#TelephoneCredential"),{multipleInstancesAllowed:!0,converter:new l("telephone")}),new r.h("nickname",new i("https://ns.elastos.org/credentials/profile/nickname/v1#NicknameCredential"),{converter:new l("nickname")}),new r.h("birthPlace",new i("https://ns.elastos.org/credentials/profile/birthPlace/v1#BirthPlaceCredential"),{converter:new l("birthPlace")}),new r.h("occupation",new i("https://ns.elastos.org/credentials/profile/occupation/v1#OccupationCredential"),{converter:new l("occupation")}),new r.h("education",new i("https://ns.elastos.org/credentials/profile/education/v1#EducationCredential"),{converter:new l("education")}),new r.h("interests",new i("https://ns.elastos.org/credentials/profile/interests/v1#InterestsCredential"),{converter:new l("interests")}),new r.h("description",new i("https://ns.elastos.org/credentials/profile/description/v1#DescriptionCredential"),{converter:new l("description")}),new r.h("url",new i("https://ns.elastos.org/credentials/profile/url/v1#URLCredential"),{multipleInstancesAllowed:!0,converter:new l("url")}),new r.h("discord",new i("https://ns.elastos.org/credentials/social/discord/v1#DiscordCredential"),{converter:new l("discord")}),new r.h("linkedin",new i("https://ns.elastos.org/credentials/social/linkedin/v1#LinkedinCredential"),{converter:new l("linkedin")}),new r.h("facebook",new i("https://ns.elastos.org/credentials/social/facebook/v1#FacebookCredential"),{converter:new l("facebook")}),new r.h("instagram",new i("https://ns.elastos.org/credentials/social/instagram/v1#InstagramCredential"),{converter:new l("instagram")}),new r.h("twitter",new i("https://ns.elastos.org/credentials/social/twitter/v1#TwitterCredential"),{converter:new l("twitter")}),new r.h("snapchat",new i("https://ns.elastos.org/credentials/social/snapchat/v1#SnapchatCredential"),{converter:new l("snapchat")}),new r.h("telegram",new i("https://ns.elastos.org/credentials/social/telegram/v1#TelegramCredential"),{converter:new l("telegram")}),new r.h("wechat",new i("https://ns.elastos.org/credentials/social/wechat/v1#WechatCredential"),{converter:new l("wechat")}),new r.h("weibo",new i("https://ns.elastos.org/credentials/social/weibo/v1#WeiboCredential"),{converter:new l("weibo")}),new r.h("twitch",new i("https://ns.elastos.org/credentials/social/twitch/v1#TwitchCredential"),{converter:new l("twitch")}),new r.h("elaAddress",new i("https://ns.elastos.org/credentials/elaAddress/v1#ElaAddressCredential"),{multipleInstancesAllowed:!0,converter:new l("elaAddress")}),new r.h("wallet",new i("https://ns.elastos.org/credentials/wallet/v1#WalletCredential"),{isSensitive:!0,multipleInstancesAllowed:!0,converter:new l("wallet")})];function c(){return o}function u(e){return o.find(t=>{var n;return null===(n=t.type)||void 0===n?void 0:n.containedIn(e)})}function d(e){return o.find(t=>t.key===e)}},57969:function(e,t,n){n.d(t,{E:function(){return r},h:function(){return o}});var i,r,a=n(40218),s=n.n(a);(i=r||(r={}))[i.SingleLineString=0]="SingleLineString",i[i.MultiLineText=1]="MultiLineText",i[i.Date=2]="Date",i[i.Country=3]="Country",i[i.Gender=4]="Gender",i[i.Undefined=5]="Undefined";let l={defaultSubject:"",isSensitive:!1,multipleInstancesAllowed:!1,converter:null};class o{getConverter(){return this.options.converter}typesForCreation(){return[this.type.getLongType()]}constructor(e,t,n={converter:null}){this.key=e,this.type=t,this.options=n,n=s()({},l,n)}}},70518:function(e,t,n){n.d(t,{_:function(){return u}});var i=n(17041),r=n(35324);class a{getDIDDocument(){return this.didDocument}async getRepresentativeIcon(){let{DIDURL:e}=await (0,r.hS)();if(!this)return null;let t=null,n=this.didDocument.getCredentials(),a=this.getCredentialsByType(n,"ApplicationCredential");if(a&&a.length>0){let e=a[0].getSubject().getProperties();"iconUrl"in e&&(t=e.iconUrl)}if(!t){let i=this.getCredentialsByType(n,"AvatarCredential");if(!i||0===i.length){let t=this.getCredentialById(n,new e("#avatar"));t&&i.push(t)}if(i&&i.length>0){let e=i[0].getSubject().getProperties();if("avatar"in e&&"object"==typeof e.avatar){let n=e.avatar;"type"in n&&"elastoshive"===n.type&&(t=n.data)}}}return t?(0,i.L)(t):null}async getRepresentativeOwnerName(){let{DIDURL:e}=await (0,r.hS)(),t=null,n=this.didDocument.getCredentials(),i=this.getCredentialsByType(n,"ApplicationCredential");if(i&&i.length>0){let e=i[0].getSubject().getProperties();"name"in e&&(t=e.name)}if(!t){let e=this.getCredentialsByType(n,"NameCredential");if(e&&e.length>0){let n=e[0].getSubject().getProperties();"name"in n&&(t=n.name)}}if(!t){let i=this.getCredentialById(n,new e("#name"));if(i){let e=i.getSubject().getProperties();"name"in e&&(t=e.name)}}return t}getCredentialsByType(e,t){return null==e?void 0:e.filter(e=>e.getType().indexOf(t)>=0)}getCredentialById(e,t){return e.find(e=>t.getFragment()==e.getId().getFragment())}constructor(e){this.didDocument=e}}var s=n(3883),l=n(6598),o=n(69810),c=n.n(o);let u=new class{resolveDIDDocument(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.documentsCache.get(e,{create:async()=>{let n=await this.fetchDIDDocumentWithoutDIDStore(e,t);return s.k.log("identity","Resolved on chain document: ",n),new a(n)}},t)}fetchDIDDocumentWithoutDIDStore(e,t){return this.resolveDIDQueue.add(async()=>{try{let{DIDBackend:n,DID:i}=await (0,r.hS)();s.k.log("identity","Resolving DID without DID store",e,t);let a=new i(e);return n.getInstance().resolveDid(a,t)}catch(e){return s.k.error("identity",e),null}})}constructor(){this.documentsCache=new l.R,this.resolveDIDQueue=new(c())(1)}}},53932:function(e,t,n){n.d(t,{B:function(){return r}});var i=n(50676);let r=new i.X(null)},77358:function(e,t,n){n.d(t,{D:function(){return em}});var i,r,a=n(60230),s=n(23965),l=n(11472);let o="\n  did\n  createdAt\n  lastUsedAt\n";var c=n(69144),u=n(57135),d=n(51385),h=n(76506),p=n(62067),g=n.n(p),v=n(50676),y=n(98478),f=n(61960),w=n(3883),m=n(1859);function b(){let e=(0,a._)(["\n          query interactingApplications($identityDid: String!) {\n            interactingApplications(identityDid: $identityDid) {\n              ","\n            }\n          }\n        "]);return b=function(){return e},e}function I(){let e=(0,a._)(["\n          mutation recordRequestedCredentials($input: RecordRequestedCredentialsInput!) {\n            recordRequestedCredentials(input: $input)\n          }\n        "]);return I=function(){return e},e}class k{async fetchInteractingApplications(){var e;let t=await (0,d.Pt)(async()=>(await (0,h.W)()).query({query:(0,s.Ps)(b(),y.G),variables:{identityDid:this.identity.did}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.interactingApplications){let e=await Promise.all(t.data.interactingApplications.map(e=>f.G.fromJson(e)));return w.k.log("applications","Fetched identity interacting applications:",e),e}return null}async recordRequestedCredentials(e,t){var n;let i={applicationDid:e,credentialIds:t.map(e=>e.id)},r=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(I()),variables:{input:i}}));null!=r&&null!==(n=r.data)&&void 0!==n&&n.recordRequestedCredentials||w.k.error("identity","Failed to record requested credentials")}constructor(e){this.identity=e,this.applications$=new m.P(null,()=>this.fetchInteractingApplications())}}class C{async createCredential(e,t,n,i){this.ensureCredentialsFetched(),w.k.log("credentials","Creating credential",e,t,n,i);let r=await (0,u.HL)(()=>this.identity.provider.createCredential(this.identity.did,e,t,n,i));return this.credentials$.next([r,...this.credentials$.value]),r}async issueCredential(e,t,n,i,r){return this.ensureCredentialsFetched(),w.k.log("credentials","Issuing credential",e,t,n,i,r),(0,u.HL)(()=>this.identity.provider.issueCredential(this.identity.did,e,t,n,i,r))}async importCredential(e,t){this.ensureCredentialsFetched(),w.k.log("credentials","Importing credential",e);let n=await (0,u.HL)(()=>this.identity.provider.importCredential(this.identity.did,e,t),!0,null);return this.credentials$.next([n,...this.credentials$.value]),n}async fetchCredentials(){return w.k.log("credentials","Fetching credentials",this.identity.did),(0,u.HL)(()=>this.identity.provider.listCredentials(this.identity.did))}async deleteCredential(e){var t;this.ensureCredentialsFetched(),w.k.log("credentials","Deleting credential");let n=await (0,u.HL)(()=>this.identity.provider.deleteCredential(e.id));return this.credentials$.next(null===(t=this.credentials$.value)||void 0===t?void 0:t.filter(t=>t.id!=e.id)),n}ensureCredentialsFetched(){if(!this.credentials$.value)throw Error("Don't try to add/delete/edit credentials before the credentials list is fetched!")}constructor(e){this.identity=e,this.credentials$=new m.P(null,()=>this.fetchCredentials())}}var D=n(35324),S=n(69810),E=n.n(S);let x=new(E())(1),P=new(E())(1);class A{async getExistingAppIdentityCredential(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return x.add(async()=>{w.k.log("did","Trying to get an existing app ID credential from storage");let t=await this.getOrCreateAppInstanceDID(e);if(!t)return null;let n=t.did,i=n.toString()+"#app-id-credential",r=await t.didStore.loadCredential(i);if(r){let e=g()(await r.getExpirationDate());if(e.isBefore(g()().subtract(1,"hours")))return w.k.log("did","Existing credential is expired or almost expired - renewing it"),null;w.k.log("did","Returning existing app id credential found in app's local storage",r)}else w.k.log("did","No app id credential found for id",i,"in store",t.didStore);return r})}async getOrCreateAppInstanceDID(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null,n=null,i=null;return P.add(async()=>{w.k.log("did","Getting or creating app instance DID");try{let r=await this.getExistingAppInstanceDIDInfo(e);if(r&&(t=await this.openDidStore(r.storeId)))try{n=await this.loadDID(t,r.didString),i=r.storePassword}catch(e){w.k.error("did",e)}if(!t||!n){w.k.log("did","No app instance DID found. Creating a new one");let r=await this.createNewAppInstanceDID(e);t=r.didStore,n=r.did,i=r.storePassword}return await this.loadDIDCredentials(t,n),{did:n,didStore:t,storePassword:i}}catch(e){w.k.error("did",e)}})}async getExistingAppInstanceDIDInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?"_".concat(e):"",n=this.identity.get("storage"),i=await n.get("appinstancedidstoreid"+t,null),r=await n.get("appinstancedidstring"+t,null),a=await n.get("appinstancedidstorepassword"+t,null);return i&&r?{storeId:i,didString:r,storePassword:a}:null}fastCreateDID(e){return w.k.log("did","Fast DID creation with language "+e),new Promise(async(t,n)=>{try{let{Mnemonic:n,DIDStore:i,RootIdentity:r}=await (0,D.hS)(),a=await n.getInstance(e).generate(),s=this.generateRandomDIDStoreId(),l=await i.open(s),o=this.generateRandomPassword(),c=await r.createFromMnemonic(a,null,l,o),u=await c.newDid(o);t({didStoreId:s,didStore:l,did:u.getSubject(),storePassword:o})}catch(e){n(e)}})}generateRandomPassword(){return this.generateRandomDIDStoreId()}generateRandomDIDStoreId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=16,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(let r=0;r<e;r++)i[r]=n[0|Math.random()*t];else{let e;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(let t=0;t<36;t++)i[t]||(e=0|16*Math.random(),i[t]=n[19==t?3&e|8:e])}return i.join("")}async createNewAppInstanceDID(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{Mnemonic:t}=await (0,D.hS)(),n=await this.fastCreateDID(t.ENGLISH);return await this.saveAppInstanceDIDInfo(e,n.didStoreId,n.did.toString(),n.storePassword),{didStore:n.didStore,didStoreId:n.didStoreId,did:n.did,storePassword:n.storePassword}}async saveAppInstanceDIDInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;w.k.log("did","Saving app instance DID info for store "+t+" and did "+n+" and app did "+e);let r=e?"_".concat(e):"",a=this.identity.get("storage");await a.set("appinstancedidstoreid"+r,t),await a.set("appinstancedidstring"+r,n),await a.set("appinstancedidstorepassword"+r,i)}openDidStore(e){return new Promise(async t=>{try{let{DIDStore:n}=await (0,D.hS)(),i=await n.open(e);t(i)}catch(e){t(null)}})}loadDID(e,t){return new Promise(async(n,i)=>{try{let r=await e.loadDid(t);r?n(r.getSubject()):i("Null DIDDocument loaded for did string "+e)}catch(e){i(e)}})}loadDIDCredentials(e,t){return new Promise(async(n,i)=>{try{let i=await e.listCredentials(t.toString()),r=[];for(let t of i)r.push(await e.loadCredential(t));n(r)}catch(e){i(e)}})}constructor(e){this.identity=e}}var j=n(12540),O=n(7845),$=n(6598),T=n(70163);function U(e,t){return new Promise(n=>{let i=e.pipe((0,T.h)(e=>e===t)).subscribe(e=>{setTimeout(()=>i.unsubscribe(),0),n()})})}var F=n(74548),N=n.n(F);class M{async getVaultService(){await this.awaitHiveVaultReady();let e=await this.getHiveAppContext(),{Vault:t}=await (0,D.pH)();return new t(e,null)}awaitHiveVaultReady(){return U(this.vaultStatus$,O.V.ReadyToUse)}getActiveUserSubscriptionServices(){return w.k.log("hive","Getting subscription services for",this.identity.did),this.getSubscriptionService()}async addRandomHiveVaultServiceToDIDDocument(){let e=(0,j.zV)();if(e)return await this.removeHiveVaultServiceFromDIDDocument(),await em.addDIDDocumentService(this.identity.did,"#hivevault","HiveVault",e),!0;throw Error("Hive node address cannot be null")}async removeHiveVaultServiceFromDIDDocument(){return em.removeDIDDocumentService(this.identity.did,"#hivevault")}documentHasVault(e){let t=e.getService("vault");return null!=t}getDocumentVaultProviderUrl(e){let t=e.getService("#hivevault");return t.serviceEndpoint}async getVaultInfo(){let e=await this.getSubscriptionService();return e.checkSubscription()}async subscribeToHiveProvider(e){w.k.log("hive","Subscribing to hive provider",e);let t=null;try{t=await this.getVaultInfo()}catch(e){}if(t)return!0;{w.k.log("hive","subscribeToHiveProvider(): no vault info, subscribing");let e=await this.getSubscriptionService();if(!(t=await e.subscribe()))return w.k.error("hive","Failed to create vault on the hive node"),!1;await this.retrieveVaultStatus()}let n=await this.getVaultService();if(n)try{w.k.log("hive","Calling an api on the hive vault to make sure everything is fine"),n=await this.getVaultService();let e=await n.getAppStats();if(e)return w.k.log("hive","Vault API could be called, all good!"),this.retrieveVaultStatus(),!0;w.k.error("hive","Error while calling a test hive vault API. No data returned")}catch(e){w.k.error("hive","Exception while calling a test vault API:",e)}else w.k.error("hive","NULL vault returned, unable to get the vault for this DID.");return!1}async retrieveVaultStatus(){let{VaultNotFoundException:e}=await (0,D.pH)();await this.identity.get("publication").awaitIdentityPublished(),w.k.log("hive","Looking for vault status"),this.vaultStatus$.next(O.V.NotChecked);let{ServiceEndpoint:t}=await (0,D.pH)();w.k.log("hive","Retrieving vault of current user's DID "+this.identity.did);let n=await this.getHiveAppContext(),i=new t(n),r=null;try{r=await i.getProviderAddress(),this.vaultAddress$.next(r);let e=await this.getSubscriptionService(),t=await e.checkSubscription();this.vaultInfo$.next(t),w.k.log("hive","Vault info retrieval completed",t),this.vaultStatus$.next(O.V.ReadyToUse),w.k.log("hive","Vault status retrieval completed")}catch(t){if(!(t instanceof e)||!r)return w.k.error("hive","Unknown exception while retrieving vault status:",t),this.emitUnknownErrorStatus(),null;await this.subscribeToHiveProvider(r)}}emitUnknownErrorStatus(){w.k.log("hive","Emiting unknown error status"),this.vaultStatus$.next(O.V.UnknownError),this.vaultInfo$.next(null)}async getSubscriptionService(){let{VaultSubscription:e}=await (0,D.pH)(),t=await this.getHiveAppContext();return new e(t)}async getScriptingService(){let{ScriptingService:e,ServiceEndpoint:t}=await (0,D.pH)(),n=await this.getHiveAppContext(),i=new t(n);return new e(i)}handleVaultAuthenticationChallenge(e){return this.generateAuthPresentationJWT(e)}getThisAppDID(){return"did:elastos:iddh53iyg3Eyrq4AFiA8tCULpEqUyu49td"}async getHiveAppContextProvider(){return j.gM.add(async()=>{let e=this.getThisAppDID(),t=await this.identity.get("did").getOrCreateAppInstanceDID(e),n=await t.didStore.loadDid(t.did.toString());return{getLocalDataDir:()=>"/",getAppInstanceDocument:()=>n,getAuthorization:e=>{w.k.log("hive","Receiving hive client authentication challenge");try{return this.handleVaultAuthenticationChallenge(e)}catch(e){return w.k.error("hive","Exception in authentication handler:",e),null}}}})}async getHiveAppContext(){return this.appContextCache.get(this.identity.did,{create:async()=>{let{AppContext:e}=await (0,D.pH)();w.k.log("hive","Getting app context for",this.identity.did);let t=await this.getHiveAppContextProvider();return e.build(t,this.identity.did,"did:elastos:iddh53iyg3Eyrq4AFiA8tCULpEqUyu49td")}})}async generateAuthPresentationJWT(e){let t=this.getThisAppDID();w.k.log("hive","Starting process to generate hive auth presentation JWT");try{let{JWTParserBuilder:i,VerifiablePresentation:r,JWTHeader:a}=await (0,D.hS)(),s=(await new i().setAllowedClockSkewSeconds(300).build().parse(e)).getBody();if(null==s)throw Error("Invalid jwt token as authorization.");if(!s.getIssuer()||!s.get("nonce"))throw Error("The received authentication JWT token does not contain iss or nonce");let l=s.get("nonce"),o=s.getIssuer();w.k.log("hive","Getting app instance DID");let c=await this.identity.get("did").getOrCreateAppInstanceDID(t),u=c.did;w.k.log("hive","App instance DID:",u);let d=await this.identity.get("did").getExistingAppInstanceDIDInfo(t);w.k.log("hive","Getting app identity credential");let h=await this.identity.get("did").getExistingAppIdentityCredential(t);if(!h&&(w.k.log("hive","Empty app id credential. Trying to generate a new one"),!(h=await this.generateAppIdCredential())))return w.k.warn("hive","Failed to generate a new App ID credential"),null;w.k.log("hive","Creating DID presentation response for Hive authentication challenge");let p=await r.createFor(u.toString(),null,c.didStore),g=await p.credentials(h).realm(o).nonce(l).seal(d.storePassword);if(g){w.k.log("hive","Opening DID store to create a JWT for presentation:",g.toJSON());let e=(await Promise.resolve().then(n.bind(n,11920))).DID,t=await e.DIDHelper.openDidStore(d.storeId);w.k.log("hive","Loading DID document",d.didString);let i=await t.loadDid(d.didString);w.k.log("hive","App instance DID document",i.toJSON()),w.k.log("hive","Creating JWT");let r=await i.jwtBuilder().addHeader(a.TYPE,a.JWT_TYPE).addHeader("version","1.0").setSubject("DIDAuthResponse").setAudience(s.getIssuer()).setIssuedAt(N()().unix()).setExpiration(N()().add(3,"month").unix()).setNotBefore(N()().subtract(3,"minutes").unix()).claimsWithJson("presentation",g.toString(!0)).sign(d.storePassword);return w.k.log("hive","JWT created for presentation:",r),r}throw Error("No presentation generated")}catch(e){throw Error("The received authentication JWT token signature cannot be verified or failed to verify: ".concat(e,". Is the hive back-end DID published? Are you on the right network?"))}}async generateAppIdCredential(){let e=this.getThisAppDID(),t=await this.identity.get("did").getOrCreateAppInstanceDID(e);if(!t)return null;let n=t.did;w.k.log("hive","Starting to generate a new App ID credential.");try{let i=await this.generateApplicationIDCredential(n.toString(),e);if(i)return w.k.log("hive","App ID credential generated:",i),await t.didStore.storeCredential(i),w.k.log("hive","Storing app ID credential into DID store:",t.didStore,i),i;return null}catch(e){return null}}async generateApplicationIDCredential(e,t){return j.gM.add(async()=>{let n={appInstanceDid:e,appDid:t};w.k.log("hive","Asking the identity provider to generate app ID credential for appInstanceDid:",e,"appDid:",t);try{return(0,u.HL)(async()=>{let t=await this.identity.provider.issueCredential(this.identity.did,e,"#app-id-credential",["https://elastos.org/fakecontext#AppIdCredential"],g()().add(30,"days").toDate(),n);return t},!0,null)}catch(e){return w.k.error("identity","Failed to issue the app id credential...",e),null}})}constructor(e){this.identity=e,this.vaultStatus$=new m.P(null,async()=>{this.retrieveVaultStatus()}),this.vaultInfo$=new v.X(null),this.vaultAddress$=new v.X(null),this.appContextCache=new $.R}}var L=n(5676),_=n(59606),R=n(78330),B=n(78212),W=n(44853),K=n.n(W),H=n(72440),V=n.n(H),q=n(45685),z=n(21417),J=n(54860),Z=n(67133).Buffer;async function G(e,t){let{FileDownloadExecutable:n}=await (0,D.pH)(),i=new Date().getTime(),r=t.type,a="identity/avatar/"+i,s=await (0,J.EX)(t),l=await (0,J.hv)(s,300),o=await e.get("hive").getVaultService(),c=await o.getFilesService().upload(a,Z.from(l),{onProgress:()=>{}},!1);w.k.log("profile","Completed avatar upload to hive",c);let u="getMainIdentityAvatar"+i,d=await e.get("hive").getScriptingService();await d.registerScript(u,new n(u,a).setOutput(!0),void 0,!0,!0);let h=z.l.get("appDid"),p="hive://"+e.did+"@"+h+"/"+u+"?params={}";return w.k.log("identity","Generated avatar url:",p),{mimeType:r,avatarHiveURL:p}}let X=(0,B.S)()&&new R.J("identity-info-names"),Y=(0,B.S)()&&new R.J("identity-info-icons");class Q{get name$(){return X.listen(this.identity.did)}get icon$(){return Y.listen(this.identity.did)}setActiveCredential(e){this.activeCredential$.next(e)}refreshIdentityName(){let e=this.getName();this.name$.next(e),X.put(this.identity.did,e)}refreshIdentityIcon(){var e;let t=null===(e=this.avatarCredential$.value)||void 0===e?void 0:e.representativeIcon$.value;"string"==typeof t?(this.icon$.next(t),Y.put(this.identity.did,t)):(this.icon$.next(null),Y.put(this.identity.did,null))}async createInitialNameCredential(e){let t=(0,_.Pr)("name");return(0,u.HL)(async()=>!!await this.createProfileCredential(null,t.typesForCreation(),t.key,e))}async createProfileCredential(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=[];return(0,d.Pt)(async()=>{let a;a=e||this.identity.did+"#"+n+function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return K()(Array(e),()=>"".concat(V()(1,10))).join("")}();let s=(0,_.m7)(t);r.push(s.type.getLongType());let l=g()().add(5,"years").toDate(),o=s.options.converter.toSubject(i);return this.identity.get("credentials").createCredential(a,r,l,o)},null)}async updateProfileCredential(e,t){let n=e.verifiableCredential.getId().toString(),i=(0,_.m7)(e.verifiableCredential.getType()),r=await this.identity.get("credentials").deleteCredential(e);if(!r)return null;let a=await this.createProfileCredential(n,i.typesForCreation(),i.key,t);return a}getName(){var e;let t=null===(e=this.profileCredentials$.value)||void 0===e?void 0:e.find(e=>"name"===e.getProfileInfo().key);return t?t.getDisplayValue():null}async upsertIdentityAvatar(e){let t=await G(this.identity,e);if(t){let e=(0,_.Pr)("avatar"),n={mimeType:t.mimeType,hiveDownloadScriptUrl:t.avatarHiveURL};await this.deleteAvatarCredential(),await this.createProfileCredential("#avatar",e.typesForCreation(),e.key,n)}else console.log("Failed to upload avatar to hive")}async deleteAvatarCredential(){let e=this.avatarCredential$.value;e&&await this.identity.get("credentials").deleteCredential(e)}constructor(e){this.identity=e,this.activeCredential$=new v.X(null),this.profileCredentials$=new m.P(null,async()=>{this.identity.get("credentials").credentials$.pipe((0,q.U)(e=>null==e?void 0:e.filter(e=>e instanceof L.E))).subscribe(e=>{this.profileCredentials$.next(e),this.refreshIdentityName()})}),this.avatarCredential$=new m.P(null,async()=>{this.profileCredentials$.subscribe(e=>{let t=null==e?void 0:e.find(e=>"avatar"===e.verifiableCredential.getId().getFragment());null==t||t.representativeIcon$.subscribe(e=>{this.refreshIdentityIcon()}),this.avatarCredential$.next(t),this.refreshIdentityIcon()})})}}(i=r||(r={})).UNPUBLISHED="UNPUBLISHED",i.PUBLISHING="PUBLISHING",i.PUBLISHED="PUBLISHED",i.FAILED_TO_PUBLISH="FAILED_TO_PUBLISH";class ee{async startCheckingPublicationStatus(){try{for(;this.shouldContinueCheckingStatus();)await this.fetchPublicationStatus(this.identity.did),await new Promise(e=>{setTimeout(()=>{e()},2e3)})}catch(e){w.k.error("Exception while fetching identity publication status",e)}}shouldContinueCheckingStatus(){let e=this.publicationStatus$.value;return!e||e===r.UNPUBLISHED||e===r.PUBLISHING}async fetchPublicationStatus(e){let t=await em.getPublicationStatus(e);w.k.log("publication","Got publication status",null==t?void 0:t.state),this.publicationStatus$.next(null==t?void 0:t.state)}awaitIdentityPublished(){return U(this.publicationStatus$,r.PUBLISHED)}constructor(e){this.identity=e,this.publicationStatus$=new m.P(null,async()=>{this.startCheckingPublicationStatus()})}}let et="identity_storage_index";class en{async lazyLoadIndex(){if(this.index)return;let e=await localStorage.getItem(et)||null;this.index=e?JSON.parse(e):[]}async saveIndex(){await localStorage.setItem(et,JSON.stringify(this.index))}async set(e,t){await this.lazyLoadIndex();let n=this.getFullKey(e);return this.index.includes(n)||(this.index.push(n),await this.saveIndex()),localStorage.setItem(n,t)}async get(e,t){await this.lazyLoadIndex();let n=this.getFullKey(e);return localStorage.getItem(n)||t}async unset(e){let t=this.getFullKey(e);return localStorage.removeItem(t)}async clean(){for(let e of(await this.lazyLoadIndex(),this.index))await localStorage.removeItem(e);this.index=[],await this.saveIndex()}getFullKey(e){return this.identity.did+"_"+e}setJSON(e,t){return this.set(e,JSON.stringify(t))}async getJSON(e,t){return JSON.parse(await this.get(e,JSON.stringify(t)))}constructor(e){this.identity=e,this.index=null}}function ei(){let e=(0,a._)(["\n        mutation markIdentityInUse($identityDid: String!) {\n          markIdentityInUse(identityDid: $identityDid)\n        }\n      "]);return ei=function(){return e},e}class er{static async fromJson(e,t){let n=new er;return Object.assign(n,e),n.createdAt=new Date(e.createdAt),n.lastUsedAt$.next(new Date(e.lastUsedAt)),n.provider=t,n}get(e){if(!this.features.has(e))throw Error("Unhandled user feature '".concat(e,"'"));return this.features.get(e)}addFeature(e,t){if(!this.features.has(e))return this.features.set(e,t),t}createVerifiablePresentation(e,t,n){return(0,u.HL)(()=>this.provider.createVerifiablePresentation(this.did,e,t,n),!0)}equals(e){return this.did===e.did}async markIdentityInUse(e){var t;let n=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ei()),variables:{identityDid:e}}));return this.lastUsedAt$.next(g()().toDate()),null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.markIdentityInUse}constructor(){this.lastUsedAt$=new v.X(null),this.features=new Map,this.addFeature("credentials",new C(this)),this.addFeature("profile",new Q(this)),this.addFeature("did",new A(this)),this.addFeature("hive",new M(this)),this.addFeature("storage",new en(this)),this.addFeature("publication",new ee(this)),this.addFeature("applications",new k(this))}}function ea(){let e=(0,a._)(["\n          mutation createIdentity($input: CreateIdentityInput!) {\n            createIdentity(input: $input) {\n              ","\n            }\n          }\n        "]);return ea=function(){return e},e}function es(){let e=(0,a._)(["\n        mutation deleteIdentity($identityDid: String!) {\n          deleteIdentity(identityDid: $identityDid)\n        }\n      "]);return es=function(){return e},e}function el(){let e=(0,a._)(["\n        query ListIdentities {\n          identities {\n            ","\n          }\n        }\n      "]);return el=function(){return e},e}function eo(){let e=(0,a._)(["\n        mutation createDIDPublishTransaction($identityDid: String!) {\n          createDIDPublishTransaction(identityDid: $identityDid) {\n            ","\n          }\n        }\n      "]);return eo=function(){return e},e}function ec(){let e=(0,a._)(["\n        mutation publishIdentity($identityDid: String!, $payload: String!) {\n          publishIdentity(input: { identityDid: $identityDid, payload: $payload}) {\n            ","\n          }\n        }\n      "]);return ec=function(){return e},e}function eu(){let e=(0,a._)(["\n        mutation getPublicationStatus($identityDid: String!) {\n          getPublicationStatus(input: { identityDid: $identityDid}) {\n            state\n          }\n        }\n      "]);return eu=function(){return e},e}function ed(){let e=(0,a._)(["\n        mutation createCredential($identityDid: String!, $credentialId: String!, $types: Json!, $expirationDate: String!, $properties: Json!) {\n          createCredential(input: { identityDid: $identityDid, credentialId: $credentialId, types: $types, expirationDate: $expirationDate, properties: $properties}) {\n            ","\n          }\n        }\n      "]);return ed=function(){return e},e}function eh(){let e=(0,a._)(["\n        mutation issueCredential($identityDid: String!, $subjectDid: String!, $credentialId: String!, $types: Json!, $expirationDate: String!, $properties: Json!) {\n          issueCredential(input: { identityDid: $identityDid, subjectDid: $subjectDid, credentialId: $credentialId, types: $types, expirationDate: $expirationDate, properties: $properties}) {\n            ","\n          }\n        }\n      "]);return eh=function(){return e},e}function ep(){let e=(0,a._)(["\n          mutation importCredential($input: ImportCredentialInput!) {\n            importCredential(input: $input) {\n              ","\n            }\n          }\n        "]);return ep=function(){return e},e}function eg(){let e=(0,a._)(["\n        query ListCredentials($identityDid: String!) {\n          credentials(identityDid: $identityDid) {\n            ","\n          }\n        }\n      "]);return eg=function(){return e},e}function ev(){let e=(0,a._)(["\n        mutation deleteCredential($id: String!) {\n          deleteCredential(id: $id)\n        }\n      "]);return ev=function(){return e},e}function ey(){let e=(0,a._)(["\n        mutation createVerifiablePresentation($identityDid: String!, $credentials: Json!, $realm: String!, $nonce: String!) {\n          createVerifiablePresentation(input: { identityDid: $identityDid, credentials: $credentials, realm: $realm, nonce: $nonce}) {\n            ","\n          }\n        }\n      "]);return ey=function(){return e},e}class ef{async createIdentity(e,t){var n;let i={name:e,hiveVaultProvider:t},r=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ea(),o),variables:{input:i}}));if(null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.createIdentity)return er.fromJson(r.data.createIdentity,this);throw Error("Failed to create DID")}async deleteIdentity(e){var t;let n=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(es()),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.deleteIdentity)return!0;throw Error("Failed to delete DID")}async listIdentities(){var e;let t=await (0,d.Pt)(async()=>(await (0,h.W)()).query({query:(0,s.Ps)(el(),o)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.identities){let e=await Promise.all(t.data.identities.map(e=>er.fromJson(e,this)));return w.k.log("custodial-provider","Fetched identities:",e),e}return null}async createDIDPublishTransaction(e){var t;let n=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(eo(),"\n  payload\n"),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.createDIDPublishTransaction.payload)return null==n?void 0:n.data.createDIDPublishTransaction.payload;throw Error("Failed to create transaction")}async publishIdentity(e,t){var n;let i=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ec(),"\n  publicationId\n"),variables:{identityDid:e,payload:t}}));if(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.publishIdentity.publicationId)return null==i?void 0:i.data.publishIdentity.publicationId;throw Error("Failed to publish DID")}async getPublicationStatus(e){var t;let n=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(eu()),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.getPublicationStatus)return n.data.getPublicationStatus;throw Error("Failed to get publication status")}async createCredential(e,t,n,i,r){var a;let o=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ed(),l.E),variables:{identityDid:e,credentialId:t,types:n,expirationDate:i,properties:r}}));return(null==o?void 0:null===(a=o.data)||void 0===a?void 0:a.createCredential)?(0,c.q)(o.data.createCredential):null}async issueCredential(e,t,n,i,r,a){var o;let{VerifiableCredential:c}=await (0,D.hS)(),u=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(eh(),l.k),variables:{identityDid:e,subjectDid:t,credentialId:n,types:i,expirationDate:r,properties:a}}));return(null==u?void 0:null===(o=u.data)||void 0===o?void 0:o.issueCredential)?c.parse(u.data.issueCredential.verifiableCredential):null}async importCredential(e,t,n){var i;let r={identityDid:e,credentialString:t.toString(),importingApplicationDid:n},a=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ep(),l.E),variables:{input:r}}));return(null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.importCredential)?(0,c.q)(a.data.importCredential):null}async listCredentials(e){var t;let n=await (0,d.Pt)(async()=>(await (0,h.W)()).query({query:(0,s.Ps)(eg(),l.E),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.credentials){let e=await Promise.all(n.data.credentials.map(e=>(0,c.q)(e)));return w.k.log("custodial-provider","Fetched credentials:",e),e}return null}async deleteCredential(e){var t;let n=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ev()),variables:{id:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.deleteCredential)return!0;throw Error("Failed to delete Credential")}async createVerifiablePresentation(e,t,n,i){var r;let{VerifiablePresentation:a}=await (0,D.hS)(),l=[];t.forEach(e=>{l.push(e.toJSON())});let o=await (0,d.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,s.Ps)(ey(),"\n  verifiablePresentation\n"),variables:{identityDid:e,credentials:l,realm:n,nonce:i}}));return(null==o?void 0:null===(r=o.data)||void 0===r?void 0:r.createVerifiablePresentation)?a.parse(o.data.createVerifiablePresentation.verifiablePresentation):null}addDIDDocumentService(e,t,n,i,r){throw Error("Method not implemented.")}removeDIDDocumentService(e,t){throw Error("Method not implemented.")}}var ew=n(53932);let em=new class{createIdentity(e,t){return this.provider.createIdentity(e,t)}deleteIdentity(e){return this.provider.deleteIdentity(e)}createDIDPublishTransaction(e){return this.provider.createDIDPublishTransaction(e)}publishIdentity(e,t){return this.provider.publishIdentity(e,t)}getPublicationStatus(e){return this.provider.getPublicationStatus(e)}async setActiveIdentity(e){if(!e){ew.B.next(null),this.activeIdentityId="",localStorage.setItem("activeIdentityId","");return}try{await e.markIdentityInUse(e.did)}catch(e){}ew.B.next(e),this.activeIdentityId=e.did,localStorage.setItem("activeIdentityId",this.activeIdentityId)}getActiveIdentityId(){return this.activeIdentityId||(this.activeIdentityId=this.loadActiveIdentityId()),this.activeIdentityId}loadActiveIdentityId(){return localStorage.getItem("activeIdentityId")}restoreActiveIdentity(e){if(!ew.B.value){if(this.getActiveIdentityId()){let t=this.findIdentityByDID(this.activeIdentityId,e);this.setActiveIdentity(t);return}e.length>0&&em.setActiveIdentity(e[0])}}findIdentityByDID(e,t){let n=null==t?void 0:t.find(t=>t.did===e);return n}async listIdentities(){let e=await this.provider.listIdentities();return this.restoreActiveIdentity(e),e}addDIDDocumentService(e,t,n,i,r){return this.provider.addDIDDocumentService(e,t,n,i,r)}removeDIDDocumentService(e,t){return this.provider.removeDIDDocumentService(e,t)}constructor(){this.provider=new ef,this.activeIdentityId=""}}},8106:function(e,t,n){n.d(t,{n:function(){return r}});var i=n(70518);let r=new class{async getIssuerName(e){let t=await this.fetchDocument(e);return t.getRepresentativeOwnerName()}async getIssuerAvatar(e){let t=await this.fetchDocument(e);return t.getRepresentativeIcon()}async isPublished(e){let t=await this.fetchDocument(e);return!!t}async fetchDocument(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e="did:elastos:iqjN3CLRjd7a4jGCZe6B3isXyeLy7KKDuK",i._.resolveDIDDocument(e,t)}}},9581:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(27524);let r=new i.x},21290:function(e,t,n){n.d(t,{Cp:function(){return y},Dk:function(){return w},cI:function(){return v},wo:function(){return f}});var i=n(60230),r=n(23965),a=n(5344),s=n(95640),l=n(51385),o=n(76506),c=n(3883),u=n(9581);function d(){let e=(0,i._)(["\n        mutation bindKey($newKey: AuthKeyInput!) {\n          bindKey(newKey: $newKey) {\n            ","\n          }\n        }\n      "]);return d=function(){return e},e}function h(){let e=(0,i._)(["\n        mutation ChangePassword($newPassword: String!) {\n          changePassword(newPassword: $newPassword) {\n            ","\n          }\n        }\n      "]);return h=function(){return e},e}function p(){let e=(0,i._)(["\n          mutation unlockMasterKey($authKey: AuthKeyInput!) {\n            unlockMasterKey(authKey: $authKey)\n          }\n        "]);return p=function(){return e},e}function g(){let e=(0,i._)(["\n      query GenerateChallenge {\n        generateChallenge{\n          id,\n          content\n        }\n    }\n    "]);return g=function(){return e},e}async function v(e){var t,n;c.k.log("keyring","Binding key");let i=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(d(),a.j),variables:{newKey:e}}),null);if(null==i||null===(t=i.data)||void 0===t||!t.bindKey)return c.k.error("keyring","Failed to bind key"),null;{let e=await s.M.fromJson(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.bindKey);return c.k.log("keyring","Key bound successfully"),e}}async function y(e){var t,n;c.k.log("keyring","Changing password");let i=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(h(),a.j),variables:{newPassword:e}}),null);if(null==i||null===(t=i.data)||void 0===t||!t.changePassword)return null;{let e=await Promise.all(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.changePassword.map(e=>s.M.fromJson(e)));return c.k.log("keyring","Password changed successfully",e),e}}async function f(e){var t;c.k.log("security","Trying to unlock master key");let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(p()),variables:{authKey:e}}),null);return null!=n&&null!==(t=n.data)&&void 0!==t&&!!t.unlockMasterKey&&(c.k.log("security","Master key unlocked successfully"),u.Z.next(!0),!0)}async function w(){c.k.log("passkey","get challenge to generate passkey");let e=await (0,l.Pt)(async()=>(await (0,o.W)()).query({query:(0,r.Ps)(g()),fetchPolicy:"network-only",variables:{}}));if(e){var t,n;let i=null===(t=e.data)||void 0===t?void 0:t.generateChallenge.id,r=null===(n=e.data)||void 0===n?void 0:n.generateChallenge.content;return{id:i,content:r}}throw Error("Can not get challenge by generateChallenge api.")}},3883:function(e,t,n){n.d(t,{k:function(){return l},m:function(){return o}});var i=n(62067),r=n.n(i);let a={default:"#008730",hive:"#5226af",did:"#06c4ce",connectivity:"#d17506"};function s(e){return a[e]||a.default}let l=new class{init(e){this.originalConsole=e,this.originalDebugLog=this.originalConsole.log,this.originalDebugWarn=this.originalConsole.warn,this.originalDebugErr=this.originalConsole.error}log(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugLog)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"*","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}warn(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugWarn)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"*","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}error(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugErr)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"*","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}test(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugLog)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"* TEST","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}constructor(){this.originalConsole=null}};class o{log(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.log.apply(l,["connectivity",...t])}warn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.warn.apply(l,["connectivity",...t])}error(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.error.apply(l,["connectivity",...t])}}},52856:function(e,t,n){n.d(t,{L:function(){return a},z:function(){return r}});var i=n(48023);function r(e){return e.appExceptionCode===i.gs.Unauthorized}function a(e){return e.appExceptionCode===i.XF.UnlockKeyCancelled}},69990:function(e,t,n){n.d(t,{M6:function(){return s},jU:function(){return a}});var i=n(81316),r=n(1859);let a=new r.P(null,async()=>{{let e=localStorage.getItem("authenticated_user");return e?i.n.fromJson(JSON.parse(e)):null}});function s(){return a.value}},16421:function(e,t,n){n.d(t,{X:function(){return j},bB:function(){return M},kv:function(){return T},jF:function(){return N},h3:function(){return _},U:function(){return L},JA:function(){return F},g$:function(){return U},HA:function(){return P},w7:function(){return $},y1:function(){return E}});var i=n(60230),r=n(23965),a=n(10530),s=n(81316),l=n(20708),o=n(51385),c=n(76506),u=n(21290),d=n(3883),h=n(2512),p=n(69810),g=n.n(p),v=n(69990),y=n(67133).Buffer;function f(){let e=(0,i._)(["\n        mutation SignUp($input: SignUpInput!) {\n          signUp(input: $input) { accessToken refreshToken }\n        }\n      "]);return f=function(){return e},e}function w(){let e=(0,i._)(["\n        query GetSelfUser {\n          getSelfUser { "," }\n        }\n      "]);return w=function(){return e},e}function m(){let e=(0,i._)(["\n      mutation RequestEmailAuthentication($emailAddress: String!) {\n        requestEmailAuthentication(emailAddress: $emailAddress) { success }\n      }\n    "]);return m=function(){return e},e}function b(){let e=(0,i._)(["\n        mutation CheckEmailAuthentication($authKey: String!) {\n          checkEmailAuthentication(authKey: $authKey) { accessToken refreshToken }\n        }\n      "]);return b=function(){return e},e}function I(){let e=(0,i._)(["\n        mutation RefreshToken($token: String!) {\n          refreshToken(refreshTokenInput: { refreshToken: $token }) { accessToken }\n        }\n      "]);return I=function(){return e},e}function k(){let e=(0,i._)(["\n        query signInWithPasskey ($authKey: AuthKeyInput!) {\n          signInWithPasskey (authKey: $authKey) {\n            accessToken,\n            refreshToken\n          }\n        }\n      "]);return k=function(){return e},e}function C(){let e=(0,i._)(["\n        mutation OauthMSSignIn($input: MsSignInInput!) {\n          oauthMSSignIn(input: $input) { accessToken refreshToken }\n        }\n      "]);return C=function(){return e},e}function D(){let e=(0,i._)(["\n        mutation OauthMSBindEmail($input: MsBindEmailInput!) {\n          oauthMSBindEmail(input: $input)\n        }\n      "]);return D=function(){return e},e}let S=new(g())(1);async function E(e){d.k.log("user","Sign up user, creating new user entry");let t={name:e},n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(f()),variables:{input:t}}));if(null==n||!n.data||!n.data.signUp)return d.k.error("user","failed to sign up."),null;{let{accessToken:e,refreshToken:t}=n.data.signUp;return O(e,t)}}async function x(e){localStorage.setItem("authenticated_user",JSON.stringify(e)),v.jU.next(await s.n.fromJson(e))}async function P(e){return x(e.toJson())}async function A(e,t){return S.add(async()=>{var n,i;d.k.log("users","Fetching self user profile"),e&&localStorage.setItem("access_token",e),t&&localStorage.setItem("refresh_token",t);let a=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(w(),"id name createdAt")}));if(null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.getSelfUser){let e=null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.getSelfUser,t=await s.n.fromJson(e);return await x(e),d.k.log("users","user from fetchSelfUser():",t),t}throw Error("no data got from fetchSelfUser()")})}async function j(e){d.k.log("user","Sending request to authentication by email"),await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(m()),variables:{emailAddress:e}}))}async function O(e,t){let n=localStorage.getItem("access_token"),i=localStorage.getItem("refresh_token");localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t);try{let t=await A(e);return await (0,l.Pd)(e),t}catch(e){return d.k.error("userService","failed to fetch user info.: ",e),localStorage.setItem("access_token",n),localStorage.setItem("refresh_token",i),null}}function $(){localStorage.removeItem("authenticated_user"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),v.jU.next(null)}async function T(e){d.k.log("user","Checking temporary authentication key");try{var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(b()),variables:{authKey:e}}));if(null==n||null===(t=n.data)||void 0===t||!t.checkEmailAuthentication)return!1;{let{accessToken:e,refreshToken:t}=n.data.checkEmailAuthentication;return await O(e,t),!0}}catch(e){return d.k.warn("user","Exception while checking temporary auth key. Key expired?"),null}}async function U(){var e;let t=localStorage.getItem("refresh_token");if(!t){F();return}let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(I()),variables:{token:t}}));if(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.refreshToken){d.k.log("user","Got refreshed access token");let{accessToken:e}=n.data.refreshToken;return localStorage.setItem("access_token",e),await (0,l.Pd)(e),v.jU.next((0,v.M6)()),e}throw Error("Can not get access token by refresh token.")}function F(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authenticated_user"),window.location.href="/dashboard"}function N(){let e=localStorage.getItem("access_token");return e&&""!==e}async function M(){var e,t,n,i,s,l;d.k.log("user","Authenticating with passkey");let p=await (0,u.Dk)(),g=function(e){let t=new TextEncoder,n=t.encode(e.content),i={challenge:y.from(n).toString(),allowCredentials:[],rpId:"didweb.trinity-tech.io",userVerification:"required",timeout:6e4};return i}(p),v=await (0,h.oz)(g,!1),f={type:a.J.WEBAUTHN,keyId:v.id,key:JSON.stringify(v),challengeId:p.id},w=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(k()),variables:{authKey:f},fetchPolicy:"network-only"}));if(null==w||null===(t=w.data)||void 0===t||null===(e=t.signInWithPasskey)||void 0===e||!e.accessToken)return d.k.error("Failed to sign in with passkey."),!1;{let e=null==w?void 0:null===(i=w.data)||void 0===i?void 0:null===(n=i.signInWithPasskey)||void 0===n?void 0:n.accessToken,t=null==w?void 0:null===(l=w.data)||void 0===l?void 0:null===(s=l.signInWithPasskey)||void 0===s?void 0:s.refreshToken;return await O(e,t),!0}}async function L(e){d.k.log("user","oauth MS sign in.");let t={code:e},n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(C()),variables:{input:t}}));if(null==n||!n.data||!n.data.oauthMSSignIn)return d.k.error("user","failed to oauth MS sign in."),null;{let{accessToken:e,refreshToken:t}=n.data.oauthMSSignIn;return O(e,t)}}async function _(e){d.k.log("user","oauth MS bind email.");let t={code:e},n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(D()),variables:{input:t}}));return(null==n?void 0:n.data)&&n.data.oauthMSBindEmail?(d.k.log("user","oauth email bound"),!0):(d.k.error("user","failed to oauth MS bind email."),!1)}},1859:function(e,t,n){n.d(t,{P:function(){return c}});var i,r,a=n(9581),s=n(3883),l=n(52856),o=n(50676);(i=r||(r={}))[i.NotCalled=0]="NotCalled",i[i.Called=1]="Called",i[i.FailedUnlock=2]="FailedUnlock",i[i.Failed=3]="Failed";class c extends o.X{hasInitializer(){return!!this.initializer}subscribe(e,t,n){return this.fetchedOrFetching||(this.fetchedOrFetching=!0,this.callInitializer()),super.subscribe(...arguments)}callInitializer(){this.initializer&&this.initializer().then(e=>{e&&(this.next(e),this.initializerState.next(r.Called))}).catch(e=>{(0,l.L)(e)?(this.masterKeyUnlockSub||(console.log("SUB"),this.masterKeyUnlockSub=a.Z.subscribe(()=>{console.log("CB",this.initializerState.value.toString()),(this.initializerState.value===r.NotCalled||this.initializerState.value===r.FailedUnlock)&&this.callInitializer()})),this.initializerState.next(r.FailedUnlock)):(s.k.error("AdvancedBehaviorSubject",e),this.initializerState.next(r.Failed))})}constructor(e,t){super(e),this.initializer=t,this.fetchedOrFetching=!1,this.initializerState=new o.X(r.NotCalled)}}},6598:function(e,t,n){n.d(t,{R:function(){return s}});var i=n(3883),r=n(69810),a=n.n(r);class s{async get(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return n&&this.has(e)?this.cache[e]:(n||null===e||i.k.warn("cache","Forcing to not use cache for key:",e,". This could create duplicate objects that don't update well everywhere"),t)?this.loadQueue.add(async()=>{var i,r;if(n&&this.has(e)){let n=this.cache[e];return await (null==t?void 0:null===(r=t.fill)||void 0===r?void 0:r.call(t,n)),n}{if(!t)return null;let n=await t.create();return await (null===(i=t.fill)||void 0===i?void 0:i.call(t,n)),this.cache[e]=n,n}}):null}has(e){return e in this.cache}constructor(){this.cache={},this.loadQueue=new(a())(1)}}},78330:function(e,t,n){n.d(t,{J:function(){return l}});class i{getObjectStore(e){return this.db.then(t=>{let n=t.transaction(this.storeName,e);return n.objectStore(this.storeName)})}get(e){return this.getObjectStore("readonly").then(t=>new Promise((n,i)=>{let r=t.get(e);r.onerror=()=>i(r.error),r.onsuccess=()=>n(r.result)}))}put(e,t){return this.getObjectStore("readwrite").then(n=>new Promise((i,r)=>{let a=n.put(t,e);a.onerror=()=>r(a.error),a.onsuccess=()=>i()}))}constructor(e){this.storeName=e,this.db=new Promise((t,n)=>{let i=indexedDB.open(e);i.onerror=()=>n(i.error),i.onsuccess=()=>{i.result.objectStoreNames.contains(e)&&t(i.result)},i.onupgradeneeded=()=>{i.result.objectStoreNames.contains(e)||i.result.createObjectStore(e),t(i.result)}})}}var r=n(69810),a=n.n(r),s=n(50676);class l{async get(e,t){return this.queue.add(async()=>{let n=await this.db.get(e);return!n&&this.cacheMissCallback&&(n=await this.cacheMissCallback(e,t))&&await this.db.put(e,n),n})}async put(e,t){await this.db.put(e,t),this.getListener(e).next(t)}listen(e,t){return this.getListener(e,t)}getListener(e,t){return e in this.listeners||(this.listeners[e]=new s.X(null),this.get(e,t).then(t=>this.listeners[e].next(t))),this.listeners[e]}constructor(e,t){this.cacheMissCallback=t,this.queue=new(a())(1),this.listeners={},this.db=new i(e)}}},78212:function(e,t,n){n.d(t,{S:function(){return i}});function i(){return!0}},35324:function(e,t,n){n.d(t,{hS:function(){return r},pH:function(){return a}});let i={},r=async()=>(i["@elastosfoundation/did-js-sdk"]||(i["@elastosfoundation/did-js-sdk"]=await Promise.all([n.e(9787),n.e(9443),n.e(8218),n.e(3874),n.e(1368)]).then(n.bind(n,26588))),i["@elastosfoundation/did-js-sdk"]),a=async()=>(i["@elastosfoundation/hive-js-sdk"]||(i["@elastosfoundation/hive-js-sdk"]=await Promise.all([n.e(9787),n.e(9443),n.e(8218),n.e(3874),n.e(475),n.e(2420)]).then(n.bind(n,20475))),i["@elastosfoundation/hive-js-sdk"])},54860:function(e,t,n){n.d(t,{EX:function(){return c},Ik:function(){return l},hv:function(){return o}});var i=n(3883),r=n(35698),a=n(67133).Buffer;let s=[{mime:"image/png",pattern:[137,80,78,71]},{mime:"image/jpeg",pattern:[255,216,255]},{mime:"image/gif",pattern:[71,73,70,56]},{mime:"image/webp",pattern:[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80,86,80]}],l=async e=>{if(!e)return"";let t=await function(e){if("string"==typeof e){var t;t=e,e=a.from(t,"base64")}let n=Math.max(...s.map(e=>e.pattern.length)),i=new Blob([e.slice(0,n)]),r=new FileReader,l=new Promise(e=>{r.onloadend=t=>{if("loadend"==t.type){if(!t||!r.result){e(null);return}let n=new Uint8Array(r.result),i=s.find(e=>e.pattern.every((e,t)=>!e||n[t]===e));i?e(i.mime):e(null)}}});return r.readAsArrayBuffer(i),l}(e);if(!t)return i.k.warn("pictures","Unable to extract picture mime type. If the picture invalid?"),null;let n=a.from(e).toString("base64");return"data:".concat(t,";base64,").concat(n)},o=(e,t)=>new Promise((n,i)=>{let a=new Image;a.src=e,a.onload=()=>{let e=document.createElement("canvas"),i=a.width,s=a.height;i>=s&&i>t?(s*=t/i,i=t):s>t&&(i*=t/s,s=t),e.width=i,e.height=s;let l=e.getContext("2d");l.drawImage(a,0,0,i,s);let o=l.canvas.toDataURL();n((0,r.u0)(o))},a.onerror=e=>i(e)}),c=e=>new Promise((t,n)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e=>{n(e)},i.readAsDataURL(e)})},9177:function(e,t,n){function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t){return(null==e?void 0:e.length)>t?e.substring(0,t/2-1)+"..."+e.substring(e.length-(t/2-1),e.length):e}function a(e){return null==e?null:i(e.split(" ").map(e=>e[0]).join(""))}function s(e){if(!/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?Z)$/.test(e))return e;let t=new Date(e),n=navigator.language,i=new Intl.DateTimeFormat(n),r=i.format(t);return r}function l(e){return null==e?null:"M"===e?"male":"F"===e?"female":e}function o(e){return"string"!=typeof e}n.d(t,{OX:function(){return a},Sy:function(){return r},Y5:function(){return o},aD:function(){return l},fm:function(){return i},r2:function(){return s}})}}]);