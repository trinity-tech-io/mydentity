(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9590],{48727:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),o=(0,i.default)((0,a.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.Z=o},81344:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),o=(0,i.default)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=o},14819:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),o=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=o},15133:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(13428),i=r(20791),a=r(2265),o=r(57042),s=r(95600),l=r(35843),u=r(87927),d=r(29872),c=r(26520),f=r(25702);function m(e){return(0,f.Z)("MuiCard",e)}(0,c.Z)("MuiCard",["root"]);var h=r(57437);let v=["className","raised"],b=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},m,t)},p=(0,l.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),x=a.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiCard"}),{className:a,raised:s=!1}=r,l=(0,i.Z)(r,v),d=(0,n.Z)({},r,{raised:s}),c=b(d);return(0,h.jsx)(p,(0,n.Z)({className:(0,o.Z)(c.root,a),elevation:s?8:void 0,ref:t,ownerState:d},l))});var g=x},40471:function(e,t,r){"use strict";r.d(t,{Z:function(){return R}});var n=r(20791),i=r(13428),a=r(2265),o=r(57042),s=r(95600),l=r(99538),u=r(89975),d=r(28702),c=r(41101),f=r(35843),m=r(87927),h=r(26520),v=r(25702);function b(e){return(0,v.Z)("MuiLinearProgress",e)}(0,h.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var p=r(57437);let x=["className","color","value","valueBuffer","variant"],g=e=>e,Z,j,y,w,S,C,I=(0,l.F4)(Z||(Z=g`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),P=(0,l.F4)(j||(j=g`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),k=(0,l.F4)(y||(y=g`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),$=e=>{let{classes:t,variant:r,color:n}=e,i={root:["root",`color${(0,d.Z)(n)}`,r],dashed:["dashed",`dashedColor${(0,d.Z)(n)}`],bar1:["bar",`barColor${(0,d.Z)(n)}`,("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","buffer"!==r&&`barColor${(0,d.Z)(n)}`,"buffer"===r&&`color${(0,d.Z)(n)}`,("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,s.Z)(i,b,t)},z=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,u.$n)(e.palette[t].main,.62):(0,u._j)(e.palette[t].main,.5),q=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`color${(0,d.Z)(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>(0,i.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:z(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"})),B=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.dashed,t[`dashedColor${(0,d.Z)(r.color)}`]]}})(({ownerState:e,theme:t})=>{let r=z(t,e.color);return(0,i.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},(0,l.iv)(w||(w=g`
    animation: ${0} 3s infinite linear;
  `),k)),N=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t[`barColor${(0,d.Z)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,l.iv)(S||(S=g`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),I)),M=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t[`barColor${(0,d.Z)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:z(t,e.color),transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,l.iv)(C||(C=g`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),P)),L=a.forwardRef(function(e,t){let r=(0,m.Z)({props:e,name:"MuiLinearProgress"}),{className:a,color:s="primary",value:l,valueBuffer:u,variant:d="indeterminate"}=r,f=(0,n.Z)(r,x),h=(0,i.Z)({},r,{color:s,variant:d}),v=$(h),b=(0,c.Z)(),g={},Z={bar1:{},bar2:{}};if(("determinate"===d||"buffer"===d)&&void 0!==l){g["aria-valuenow"]=Math.round(l),g["aria-valuemin"]=0,g["aria-valuemax"]=100;let e=l-100;"rtl"===b.direction&&(e=-e),Z.bar1.transform=`translateX(${e}%)`}if("buffer"===d&&void 0!==u){let e=(u||0)-100;"rtl"===b.direction&&(e=-e),Z.bar2.transform=`translateX(${e}%)`}return(0,p.jsxs)(q,(0,i.Z)({className:(0,o.Z)(v.root,a),ownerState:h,role:"progressbar"},g,{ref:t},f,{children:["buffer"===d?(0,p.jsx)(B,{className:v.dashed,ownerState:h}):null,(0,p.jsx)(N,{className:v.bar1,ownerState:h,style:Z.bar1}),"determinate"===d?null:(0,p.jsx)(M,{className:v.bar2,ownerState:h,style:Z.bar2})]}))});var R=L},9762:function(e,t,r){Promise.resolve().then(r.bind(r,57142))},48750:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var n=r(57437),i=r(40471),a=r(57042);let o=e=>{let{className:t}=e;return(0,n.jsxs)("div",{className:(0,a.Z)("flex flex-col w-full",t),children:[(0,n.jsx)("div",{className:"italic",children:"Preparing request, hold on..."}),(0,n.jsx)(i.Z,{})]})}},57142:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var n=r(57437),i=r(85688),a=r(2265),o=r(48750),s=r(12131),l=r(26588),u=r(451),d=r(69144),c=r(13457),f=r(43226),m=r(3283),h=r(96556),v=r(53932),b=r(3883),p=r(53445),x=r(48727),g=r(81344),Z=r(35551),j=r(15133),y=r(14819),w=r(29872),S=r(35843),C=r(9177);let I=(0,S.ZP)(w.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#eeeeee",textAlign:"left",maxWidth:400}}),P=e=>{let{credential:t}=e,r=t.getValueItems(),i=t.isSensitiveCredential(),[a]=(0,u.V)(null==t?void 0:t.issuerInfo$);return(0,n.jsx)(c.Z,{alignItems:"center",children:(0,n.jsx)(j.Z,{sx:{mx:10,mt:4,mb:1,boxShadow:0,textAlign:"left",bgcolor:"#ffffff"},children:(0,n.jsxs)(c.Z,{spacing:2,direction:"row",px:2,py:2,minWidth:400,maxWidth:400,children:[(0,n.jsx)(y.Z,{sx:{fontSize:40}}),(0,n.jsxs)(c.Z,{alignItems:"left",children:[(0,n.jsx)(f.Z,{fontSize:18,gutterBottom:!0,children:(0,n.jsx)("b",{children:t.getDisplayableTitle()})}),null==r?void 0:r.map(e=>(0,n.jsx)(f.Z,{fontSize:16,gutterBottom:!0,children:null==e?void 0:e.value},e.name+"credentialcomponentitem")),i&&(0,n.jsx)(f.Z,{fontSize:14,color:"#FF6347",gutterBottom:!0,children:"Sensitive"}),(0,n.jsx)(I,{sx:{my:1,mx:"auto",p:2},children:(0,n.jsxs)(c.Z,{spacing:2,direction:"row",alignItems:"center",children:[(0,n.jsx)(c.Z,{children:(0,n.jsx)(m.Z,{children:"T"})}),(0,n.jsx)(c.Z,{sx:{maxWidth:400},children:(0,n.jsx)(f.Z,{fontSize:13,noWrap:!0,children:a&&(0,C.Sy)(null==a?void 0:a.name,30)})})]})})]})]})})})},k=e=>{let{importedCredential:t}=e,[r,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!1),[l,u]=(0,a.useState)(!1),d=()=>{s(!1)},m=()=>{s(!0)};return(0,n.jsxs)(c.Z,{alignItems:"center",children:[(0,n.jsx)(P,{credential:t.credential}),r&&(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(Z.Z,{variant:"text",onClick:()=>{i(!1)},children:"hide details"}),t.values.map(e=>(0,n.jsxs)(j.Z,{sx:{mx:10,my:1,boxShadow:0,textAlign:"left",bgcolor:"#ffffff"},children:[!o&&(0,n.jsx)(c.Z,{px:2,py:2,minWidth:400,alignItems:"left",children:(0,n.jsx)("div",{onClick:m,children:(0,n.jsxs)(c.Z,{direction:"row",alignItems:"right",children:[(0,n.jsx)(f.Z,{fontSize:16,minWidth:350,gutterBottom:!0,children:(0,n.jsx)("b",{children:e.name})}),(0,n.jsx)(g.Z,{})]})})}),o&&(0,n.jsxs)(c.Z,{px:2,py:2,minWidth:400,alignItems:"left",children:[(0,n.jsx)("div",{onClick:d,children:(0,n.jsxs)(c.Z,{direction:"row",alignItems:"right",children:[(0,n.jsx)(f.Z,{fontSize:16,minWidth:350,gutterBottom:!0,children:(0,n.jsx)("b",{children:e.name})}),(0,n.jsx)(x.Z,{})]})}),(0,n.jsx)(f.Z,{fontSize:14,gutterBottom:!0,children:e.value})]})]},t.name+"-credentialcomponennt"))]}),!r&&(0,n.jsx)(c.Z,{direction:"row",children:(0,n.jsx)(Z.Z,{variant:"text",onClick:()=>{i(!0)},children:"Show details"})})]})},$=e=>{let{intent:t}=e,[r]=(0,u.V)(v.B),o=null==r?void 0:r.get("profile"),[x,g]=(0,a.useState)(!1),[Z,j]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)(""),[I,P]=(0,a.useState)(""),{showErrorToast:$}=(0,h.p)(),z=t.requestPayload;(0,a.useEffect)(()=>{q(),B(),N(),z&&M(z.credentials).then(e=>{j(e)})},[z]);let q=()=>{w(!1)},B=()=>{C("")},N=()=>{P("Demo app")},M=async e=>{if(!e)return[];let t=[];for(let r of e){let e=l.O7.parse(r.toString()),n=e.getSubject().getProperties(),i=[];for(let e of Object.keys(n)){let t=n[e];if("id"==e||"displayable"==e)continue;let r={name:e,value:t.toString()};i.push(r)}let a={name:e.getId().getFragment(),values:i,credential:await (0,d.C)(e)};t.push(a)}return t},L=async()=>{g(!0);let e=[];Z.map(t=>{e.push(t.credential.getId().toString())});let r=!1;try{for(let e of Z)await o.addProfileCredential(e);r=await (0,i.h)(t.id,e)}catch(e){b.k.error("ImportCredential","Import credential error",e)}if(!r){$("Import credential error, Please retry after a while.");return}let n=(0,p.Q)(t.redirectUrl,"rid",t.id);window.location.href=n};return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsxs)("div",{className:" text-center",children:[(0,n.jsxs)(c.Z,{direction:"row",justifyContent:"center",children:[(0,n.jsx)(f.Z,{}),(0,n.jsx)(m.Z,{sx:{ml:2,width:120,height:120}})]}),(0,n.jsx)(f.Z,{mt:4,children:I}),(0,n.jsx)(f.Z,{mt:4,children:"You are going to attach some infomation provided by a third party to your identity."}),(0,n.jsx)(f.Z,{mt:1,children:"Please review the following data:"}),null==Z?void 0:Z.map((e,t)=>(0,n.jsx)(k,{importedCredential:e},t)),(0,n.jsx)(s.c,{onClick:L,busy:x,children:"Import this to my profile"})]}),!r&&"Make an identity active to continue"]})};var z=r(24033),q=()=>{let e=(0,z.useSearchParams)(),t=e.get("rid"),[r,s]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t&&(0,i.S)(t).then(e=>{s(!1),u(e)})},[]),(0,n.jsxs)("div",{className:"col-span-full",children:[r&&(0,n.jsx)(o.O,{className:"mb-6"}),!r&&l&&(0,n.jsx)($,{intent:l}),!r&&!l&&(0,n.jsx)("div",{children:"No matching request"})]})}},96556:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});var n=r(36953);function i(){let{enqueueSnackbar:e}=(0,n.Ds)();return{showSuccessToast:t=>{e(t,{variant:"success"})},showErrorToast:t=>{e(t,{variant:"error"})}}}},85688:function(e,t,r){"use strict";r.d(t,{S:function(){return c},h:function(){return f}});var n=r(60230),i=r(23965);class a{static async fromJson(e){let t=new a;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}}var o=r(51385),s=r(76506),l=r(3883);function u(){let e=(0,n._)(["\n      query GetIntentRequest($intentId: String!) {\n        intent (id: $intentId) {\n          ","\n        }\n      }\n    "]);return u=function(){return e},e}function d(){let e=(0,n._)(["\n      mutation FulfilIntentRequest($input: FulfilIntentInput!) {\n        fulfilIntent (input: $input)\n      }\n    "]);return d=function(){return e},e}async function c(e){let{data:t}=await (0,o.Pt)(()=>(0,s.W)().query({query:(0,i.Ps)(u(),"\n  id\n  createdAt\n  type\n  redirectUrl\n  requestPayload\n  responsePayload\n"),variables:{intentId:e}}));if(t&&t.intent){let e=await a.fromJson(t.intent);return l.k.log("intents","Fetched intent:",e),e}return l.k.warn("intents","No intent found for id ".concat(e)),null}async function f(e,t){let{data:r}=await (0,o.Pt)(()=>(0,s.W)().mutate({mutation:(0,i.Ps)(d()),variables:{input:{intentId:e,payload:t}}}));return r&&r.fulfilIntent?(l.k.log("intents","Successfully fulfilled intent id ".concat(e)),!0):(l.k.warn("intents","Failed to fulfil intent id ".concat(e)),!1)}},53445:function(e,t,r){"use strict";function n(e,t,r){let n=new URL(e),i=new URLSearchParams(n.search);return i.set(t,r),n.search=i.toString(),n.toString()}r.d(t,{Q:function(){return n}})},24033:function(e,t,r){e.exports=r(68165)}},function(e){e.O(0,[6990,9787,9443,8218,1004,2361,3509,8077,9954,6953,438,1375,2971,596,1744],function(){return e(e.s=9762)}),_N_E=e.O()}]);