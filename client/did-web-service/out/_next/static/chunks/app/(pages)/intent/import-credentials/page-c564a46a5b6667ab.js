(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9530],{14819:function(e,t,n){"use strict";var r=n(26314);t.Z=void 0;var i=r(n(80984)),a=n(57437),o=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=o},40471:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(20791),i=n(13428),a=n(2265),o=n(57042),l=n(95600),s=n(99538),c=n(89975),d=n(28702),u=n(41101),f=n(35843),m=n(87927),g=n(26520),h=n(25702);function getLinearProgressUtilityClass(e){return(0,h.Z)("MuiLinearProgress",e)}(0,g.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var p=n(57437);let v=["className","color","value","valueBuffer","variant"],_=e=>e,x,b,y,j,S,I,w=(0,s.F4)(x||(x=_`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Z=(0,s.F4)(b||(b=_`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),C=(0,s.F4)(y||(y=_`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),useUtilityClasses=e=>{let{classes:t,variant:n,color:r}=e,i={root:["root",`color${(0,d.Z)(r)}`,n],dashed:["dashed",`dashedColor${(0,d.Z)(r)}`],bar1:["bar",`barColor${(0,d.Z)(r)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,d.Z)(r)}`,"buffer"===n&&`color${(0,d.Z)(r)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,l.Z)(i,getLinearProgressUtilityClass,t)},getColorShade=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,c.$n)(e.palette[t].main,.62):(0,c._j)(e.palette[t].main,.5),P=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`color${(0,d.Z)(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>(0,i.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:getColorShade(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"})),N=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,d.Z)(n.color)}`]]}})(({ownerState:e,theme:t})=>{let n=getColorShade(t,e.color);return(0,i.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},(0,s.iv)(j||(j=_`
    animation: ${0} 3s infinite linear;
  `),C)),D=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.bar,t[`barColor${(0,d.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(S||(S=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),w)),k=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.bar,t[`barColor${(0,d.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:getColorShade(t,e.color),transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(I||(I=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Z)),R=a.forwardRef(function(e,t){let n=(0,m.Z)({props:e,name:"MuiLinearProgress"}),{className:a,color:l="primary",value:s,valueBuffer:c,variant:d="indeterminate"}=n,f=(0,r.Z)(n,v),g=(0,i.Z)({},n,{color:l,variant:d}),h=useUtilityClasses(g),x=(0,u.Z)(),b={},y={bar1:{},bar2:{}};if(("determinate"===d||"buffer"===d)&&void 0!==s){b["aria-valuenow"]=Math.round(s),b["aria-valuemin"]=0,b["aria-valuemax"]=100;let e=s-100;"rtl"===x.direction&&(e=-e),y.bar1.transform=`translateX(${e}%)`}if("buffer"===d&&void 0!==c){let e=(c||0)-100;"rtl"===x.direction&&(e=-e),y.bar2.transform=`translateX(${e}%)`}return(0,p.jsxs)(P,(0,i.Z)({className:(0,o.Z)(h.root,a),ownerState:g,role:"progressbar"},b,{ref:t},f,{children:["buffer"===d?(0,p.jsx)(N,{className:h.dashed,ownerState:g}):null,(0,p.jsx)(D,{className:h.bar1,ownerState:g,style:y.bar1}),"determinate"===d?null:(0,p.jsx)(k,{className:h.bar2,ownerState:g,style:y.bar2})]}))});var E=R},13457:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(20791),i=n(13428),a=n(2265),o=n(57042),l=n(15959),s=n(95600),c=n(25702),d=n(39190),u=n(48153),f=n(43381),m=n(84775),g=n(65425),h=n(47508),p=n(57437);let v=["component","direction","spacing","divider","children","className","useFlexGap"],x=(0,m.Z)(),b=(0,d.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function useThemePropsDefault(e){return(0,u.Z)({props:e,name:"MuiStack",defaultTheme:x})}let getSideFromDirection=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],style=({ownerState:e,theme:t})=>{let n=(0,i.Z)({display:"flex",flexDirection:"column"},(0,g.k9)({theme:t},(0,g.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let r=(0,h.hB)(t),i=Object.keys(t.breakpoints.values).reduce((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t),{}),a=(0,g.P$)({values:e.direction,base:i}),o=(0,g.P$)({values:e.spacing,base:i});"object"==typeof a&&Object.keys(a).forEach((e,t,n)=>{let r=a[e];if(!r){let r=t>0?a[n[t-1]]:"column";a[e]=r}}),n=(0,l.Z)(n,(0,g.k9)({theme:t},o,(t,n)=>e.useFlexGap?{gap:(0,h.NA)(r,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(n?a[n]:e.direction)}`]:(0,h.NA)(r,t)}}))}return(0,g.dt)(t.breakpoints,n)};var y=n(35843),j=n(87927);let S=function(e={}){let{createStyledComponent:t=b,useThemeProps:n=useThemePropsDefault,componentName:l="MuiStack"}=e,useUtilityClasses=()=>(0,s.Z)({root:["root"]},e=>(0,c.Z)(l,e),{}),d=t(style),u=a.forwardRef(function(e,t){let l=n(e),s=(0,f.Z)(l),{component:c="div",direction:u="column",spacing:m=0,divider:g,children:h,className:x,useFlexGap:b=!1}=s,y=(0,r.Z)(s,v),j=useUtilityClasses();return(0,p.jsx)(d,(0,i.Z)({as:c,ownerState:{direction:u,spacing:m,useFlexGap:b},ref:t,className:(0,o.Z)(j.root,x)},y,{children:g?function(e,t){let n=a.Children.toArray(e).filter(Boolean);return n.reduce((e,r,i)=>(e.push(r),i<n.length-1&&e.push(a.cloneElement(t,{key:`separator-${i}`})),e),[])}(h,g):h}))});return u}({createStyledComponent:(0,y.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,j.Z)({props:e,name:"MuiStack"})});var I=S},39190:function(e,t,n){"use strict";var r=n(61047);let i=(0,r.ZP)();t.Z=i},82876:function(e,t,n){Promise.resolve().then(n.bind(n,55496))},77814:function(e,t,n){"use strict";n.d(t,{O:function(){return PreparingRequest}});var r=n(57437),i=n(40471),a=n(57042);let PreparingRequest=e=>{let{className:t}=e;return(0,r.jsxs)("div",{className:(0,a.Z)("flex flex-col w-full",t),children:[(0,r.jsx)("div",{className:"italic",children:"Preparing request, hold on..."}),(0,r.jsx)(i.Z,{})]})}},26188:function(e,t,n){"use strict";n.d(t,{O:function(){return RequestingApp}});var r=n(57437),i=n(46028),a=n(13457),o=n(3283),l=n(43226),s=n(78596),c=n(57042),d=n(16691),u=n.n(d),f=n(2265);let RequestingApp=e=>{let{applicationDID:t,className:n}=e,[d,m]=(0,f.useState)(null),[g,h]=(0,f.useState)(null),[p,v]=(0,f.useState)(!1),updateApplicationData=async()=>{if(t){let e=await s._.resolveDIDDocument(t);v(!0),e?(m(await e.getRepresentativeIcon()),h(await e.getRepresentativeOwnerName())):(m(null),h(null))}};return((0,f.useEffect)(()=>{updateApplicationData()},[t]),p&&t)?(0,r.jsxs)("div",{className:(0,c.Z)("flex flex-col items-center",n),children:[(0,r.jsx)(a.Z,{direction:"row",justifyContent:"center",children:(0,r.jsx)(o.Z,{sx:{width:120,height:120},children:d&&(0,r.jsx)(u(),{src:d,alt:"",width:120,height:120})})}),(0,r.jsx)(l.Z,{mt:1,fontWeight:600,children:g})]}):(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(i.a,{width:120,height:120})})}},55496:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return page}});var r=n(57437),i=n(40542),a=n(63491),o=n(57958),l=n(61568),s=n(14776),c=n(24033),d=n(2265),u=n(77814),f=n(9254),m=n(29439),g=n(70906),h=n(26588),p=n(69147),v=n(90726),x=n(43226),b=n(19739),y=n(36079),j=n(43639),S=n(26188),I=n(48727),w=n(81344),Z=n(13457),C=n(49050),P=n(15133),N=n(14819),D=n(29872),k=n(35843),R=n(53386),E=n(16691),O=n.n(E);(0,k.ZP)(D.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#eeeeee",textAlign:"left",maxWidth:400}});let CredentialPreview=e=>{let{credential:t}=e,n=t.getValueItems(),a=t.isSensitiveCredential(),[o]=(0,i.V)(null==t?void 0:t.issuerInfo$);return(0,r.jsx)(Z.Z,{alignItems:"center",children:(0,r.jsx)("div",{className:"mx-4 mb-1 mt-2 shadow text-left",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2 p-2",style:{width:400},children:[(0,r.jsx)(N.Z,{sx:{fontSize:40}}),(0,r.jsxs)(Z.Z,{alignItems:"left",children:[(0,r.jsx)(x.Z,{fontSize:18,gutterBottom:!0,children:(0,r.jsx)("b",{children:t.getDisplayableTitle()})}),null==n?void 0:n.map(e=>(0,r.jsx)(x.Z,{fontSize:16,gutterBottom:!0,children:null==e?void 0:e.value},e.name+"credentialcomponentitem")),a&&(0,r.jsx)(x.Z,{fontSize:14,color:"#FF6347",gutterBottom:!0,children:"Sensitive"}),(0,r.jsxs)("div",{className:"flex flex-row gap-4 items-center w-full mt-4",children:[(0,r.jsx)(Z.Z,{children:(0,r.jsx)(O(),{unoptimized:!0,src:null==o?void 0:o.avatarIcon,width:30,height:30,style:{borderRadius:"50%"},alt:""})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(x.Z,{fontSize:10,fontWeight:300,noWrap:!0,children:"Issued by:"}),(0,r.jsx)(x.Z,{fontSize:13,noWrap:!0,children:o&&(0,R.Sy)(null==o?void 0:o.name,30)})]})]})]})]})})})},CredentialPreviewWithDetails=e=>{let{importedCredential:t}=e,[n,i]=(0,d.useState)(!1),[a,o]=(0,d.useState)(!1),[l,s]=(0,d.useState)(!1),handleHideDisplayable=()=>{o(!1)},handleShowDisplayable=()=>{o(!0)};return(0,r.jsxs)(Z.Z,{alignItems:"center",children:[(0,r.jsx)(CredentialPreview,{credential:t.credential}),n&&(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(C.Z,{variant:"text",onClick:()=>{i(!1)},children:"hide details"}),t.values.map(e=>(0,r.jsxs)(P.Z,{sx:{mx:10,my:1,boxShadow:0,textAlign:"left"},children:[!a&&(0,r.jsx)(Z.Z,{px:2,py:2,minWidth:400,alignItems:"left",children:(0,r.jsx)("div",{onClick:handleShowDisplayable,children:(0,r.jsxs)(Z.Z,{direction:"row",alignItems:"right",children:[(0,r.jsx)(x.Z,{fontSize:16,minWidth:350,gutterBottom:!0,children:(0,r.jsx)("b",{children:e.name})}),(0,r.jsx)(w.Z,{})]})})}),a&&(0,r.jsxs)(Z.Z,{px:2,py:2,minWidth:400,alignItems:"left",children:[(0,r.jsx)("div",{onClick:handleHideDisplayable,children:(0,r.jsxs)(Z.Z,{direction:"row",alignItems:"right",children:[(0,r.jsx)(x.Z,{fontSize:16,minWidth:350,gutterBottom:!0,children:(0,r.jsx)("b",{children:e.name})}),(0,r.jsx)(I.Z,{})]})}),(0,r.jsx)(x.Z,{fontSize:14,gutterBottom:!0,children:e.value})]})]},t.name+"-credentialcomponennt"))]}),!n&&(0,r.jsx)(Z.Z,{direction:"row",children:(0,r.jsx)(C.Z,{variant:"text",onClick:()=>{i(!0)},children:"Show details"})})]})},RequestDetails=e=>{let{intent:t}=e,[n]=(0,i.V)(o.Bx);null==n||n.profile();let a=null==n?void 0:n.credentials(),[c,u]=(0,d.useState)(!1),[I]=(0,i.V)(null==a?void 0:a.credentials$),[w,Z]=(0,d.useState)(null),[C,P]=(0,d.useState)(!1),[N,D]=(0,d.useState)(""),[k,R]=(0,d.useState)(!1),[E,O]=(0,d.useState)(!1),{showErrorToast:B}=(0,b.p)(),{unlockerIsCancelled:q}=(0,g.NX)(),[A]=(0,i.V)(s.jU),[T]=(0,i.V)(null==A?void 0:A.get("identity").regularIdentities$),$=t.requestPayload,L=t.requestPayload.caller;(0,d.useEffect)(()=>{$&&T&&n&&organizeImportedCredentials($.credentials).then(e=>{Z(e)})},[$,T,n]);let organizeImportedCredentials=async e=>{if(!e)return[];let t=null,r=[];for(let i of e){let e=h.VerifiableCredential.parse(i.toString()),a=e.getSubject().getProperties(),o=e.id.getDid().toString(),l=T.findIndex(e=>e.did==o);-1==l&&P(!0),t?t!=o&&R(!0):t=o,t!=n.did&&O(!0);let s=[];for(let e of Object.keys(a)){let t=a[e];if("id"==e||"displayable"==e)continue;let n={name:e,value:t.toString()};s.push(n)}let c={name:e.getId().getFragment(),values:s,credential:await (0,v.C)(e)};r.push(c)}return D(t),r},approveRequest=async()=>{u(!0);let e=[];w.map(t=>{e.push(t.credential.getId().toString())});let n=!1;try{for(let e of w)await a.importCredential(e.credential.verifiableCredential,$.caller);n=await (0,l.h)(t.id,e)}catch(e){y.k.error("ImportCredential","Import credential error",e)}if(!n){B("Import credential error, Please retry after a while.");return}await (null==A?void 0:A.get("activity").createActivity({type:p.T.CREDENTIALS_IMPORTED,credentialsCount:w.length,appDid:L}));let r=(0,j.Q)(t.redirectUrl,"rid",t.id);window.location.href=r},rejectRequest=()=>{let e=(0,j.Q)(t.redirectUrl,"rid",t.id);window.location.href=e};return(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(S.O,{applicationDID:L}),(0,r.jsx)(x.Z,{mt:4,children:"You are going to attach some infomation provided by a third party to your identity."}),(0,r.jsx)(x.Z,{mt:1,children:"Please review the following data:"}),null==w?void 0:w.map((e,t)=>(0,r.jsx)(CredentialPreviewWithDetails,{importedCredential:e},t)),k&&(0,r.jsx)(x.Z,{my:4,children:"Import is only supported for one identity at a time for now."}),C&&(0,r.jsx)(x.Z,{my:4,children:"Is this credential really for you? It's not targeted at any of your existing identities..."}),(k||C)&&(0,r.jsx)(f.c,{onClick:rejectRequest,children:"Cancel"}),!C&&!k&&E&&(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{my:4,children:"The identity that will contain the imported information is:"}),(0,r.jsx)(x.Z,{fontSize:14,children:N})]}),!C&&!k&&!E&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(f.c,{className:"w-1/2",onClick:rejectRequest,children:"Cancel"}),(0,r.jsx)(f.c,{className:"w-1/2",onClick:approveRequest,busy:c,disabled:!I,children:"Import this to my profile"})]}),q&&(0,r.jsx)(m.d,{className:"mt-2"})]}),!A&&"Please sign in or sign up to continue",A&&!n&&"Please make an identity active to continue"]})};var page=()=>{let e=(0,c.useSearchParams)(),t=e.get("rid"),[n,f]=(0,d.useState)(!0),[m,g]=(0,d.useState)(null),[h]=(0,i.V)(s.jU),[p]=(0,i.V)(o.Bx);return(0,d.useEffect)(()=>{t&&(0,l.S)(t).then(e=>{f(!1),g(e)})},[t]),(0,d.useEffect)(()=>{h&&p?(0,a.Ad)():(0,a.qC)(window.location.href)},[h,p]),(0,r.jsxs)("div",{className:"col-span-full",children:[n&&(0,r.jsx)(u.O,{className:"mb-6"}),!n&&m&&(0,r.jsx)(RequestDetails,{intent:m}),!n&&!m&&(0,r.jsx)("div",{children:"No matching request"})]})}},46028:function(e,t,n){"use strict";n.d(t,{a:function(){return LoadingCircle}});var r=n(57437),i=n(57042);n(87661);let LoadingCircle=e=>{let{className:t,width:n,height:a}=e;return(0,r.jsx)("div",{className:(0,i.Z)("loading-circle",t),style:{...n&&{width:n},...a&&{height:a}},children:(0,r.jsx)("div",{className:"content",children:(0,r.jsx)("div",{className:"animated"})})})}},29439:function(e,t,n){"use strict";n.d(t,{d:function(){return UnlockRetrier}});var r=n(57437),i=n(9254),a=n(57042),o=n(70906);let UnlockRetrier=e=>{let{className:t}=e,{retryUnlock:n}=(0,o.lJ)();return(0,r.jsxs)("div",{className:(0,a.Z)("flex flex-row items-center gap-2",t),children:[(0,r.jsx)("div",{children:"This content could not be unlocked, please retry"}),(0,r.jsx)(i.c,{onClick:()=>{n()},children:"Unlock personal data"})]})}},69147:function(e,t,n){"use strict";var r,i;n.d(t,{T:function(){return r}}),(i=r||(r={})).NEW_ACCOUNT="NEW_ACCOUNT",i.USER_SIGN_IN="USER_SIGN_IN",i.IDENTITY_CREATED="IDENTITY_CREATED",i.IDENTITY_DELETED="IDENTITY_DELETED",i.CREDENTIALS_IMPORTED="CREDENTIALS_IMPORTED",i.CREDENTIALS_SHARED="CREDENTIALS_SHARED",i.BIND_EMAIL="BIND_EMAIL",i.BIND_BROWSER="BIND_BROWSER",i.PASSWORD_CHANGED="PASSWORD_CHANGED"},63491:function(e,t,n){"use strict";n.d(t,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return i},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var r,i,a=n(92e3),o=n(36079);(r=i||(i={}))[r.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",r[r.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",r[r.EmailSignIn=2]="EmailSignIn";let l="ongoingflowoperation",s="postsigninurl";function getOnGoingFlowOperation(){return i[localStorage.getItem(l)]}function setOnGoingFlowOperation(e){localStorage.setItem(l,i[e])}function clearOnGoingFlowOperation(){localStorage.removeItem(l)}function setPostSignInUrl(e){o.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(s,e)}function clearPostSignInUrl(){o.k.log("flow","Clearing post sign in url"),localStorage.removeItem(s)}function usePostSignInFlow(){let e=(0,a.useRouter)();return{navigateToPostSignInLandingPage(t){let n=localStorage.getItem(s);if(n)o.k.log("flow","Navigating to post sign in landing page:",n),e.replace(n),clearPostSignInUrl();else{let n=t||"/dashboard";o.k.log("flow","Navigating to post sign in landing page ".concat(n)),e.push(n)}}}}},61568:function(e,t,n){"use strict";n.d(t,{S:function(){return fetchIntent},h:function(){return fulfilIntentRequest}});var r=n(60230),i=n(23965);let Intent=class Intent{static async fromJson(e){let t=new Intent;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}};var a=n(29748),o=n(91395),l=n(36079);function _templateObject(){let e=(0,r._)(["\n      query GetIntentRequest($intentId: String!) {\n        intent (id: $intentId) {\n          ","\n        }\n      }\n    "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n      mutation FulfilIntentRequest($input: FulfilIntentInput!) {\n        fulfilIntent (input: $input)\n      }\n    "]);return _templateObject1=function(){return e},e}async function fetchIntent(e){var t;let n=await (0,a.Pt)(async()=>(await (0,o.W)()).query({query:(0,i.Ps)(_templateObject(),"\n  id\n  createdAt\n  type\n  redirectUrl\n  requestPayload\n  responsePayload\n"),variables:{intentId:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.intent){let e=await Intent.fromJson(n.data.intent);return l.k.log("intents","Fetched intent:",e),e}return l.k.warn("intents","No intent found for id ".concat(e)),null}async function fulfilIntentRequest(e,t){var n;let r=await (0,a.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,i.Ps)(_templateObject1()),variables:{input:{intentId:e,payload:t}}}));return(null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.fulfilIntent)?(l.k.log("intents","Successfully fulfilled intent id ".concat(e)),!0):(l.k.warn("intents","Failed to fulfil intent id ".concat(e)),!1)}},43639:function(e,t,n){"use strict";function setQueryParameter(e,t,n){let r=new URL(e),i=new URLSearchParams(r.search);return i.set(t,n),r.search=i.toString(),r.toString()}n.d(t,{Q:function(){return setQueryParameter}})},87661:function(){}},function(e){e.O(0,[6990,9787,9443,8218,3988,395,8321,9152,5295,1510,1396,6953,2e3,182,2884,2699,1869,7998,8326,9047,3262,9513,1939,2971,7864,1744],function(){return e(e.s=82876)}),_N_E=e.O()}]);