(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8541],{60289:function(e,t,n){"use strict";var i=n(26314);t.Z=void 0;var r=i(n(80984)),a=n(57437),o=(0,r.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");t.Z=o},14819:function(e,t,n){"use strict";var i=n(26314);t.Z=void 0;var r=i(n(80984)),a=n(57437),o=(0,r.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=o},80984:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(43135)},80494:function(e,t,n){"use strict";var i=n(78078);t.Z=i.Z},43135:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return o.Z},debounce:function(){return u.Z},deprecatedPropType:function(){return utils_deprecatedPropType},isMuiElement:function(){return l.Z},ownerDocument:function(){return s.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return utils_requirePropFactory},setRef:function(){return d},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return f.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return utils_unsupportedProp},useControlled:function(){return m.Z},useEventCallback:function(){return g.Z},useForkRef:function(){return h.Z},useIsFocusVisible:function(){return v.Z}});var i=n(25097),r=n(28702),a=n(62940).Z,o=n(59782),u=n(80494),utils_deprecatedPropType=function(e,t){return()=>null},l=n(10673),s=n(53931),c=n(26649);n(13428);var utils_requirePropFactory=function(e,t){return()=>null},d=n(13840).Z,f=n(88519),p=n(62916),utils_unsupportedProp=function(e,t,n,i,r){return null},m=n(73292),g=n(96),h=n(37663),v=n(53308);let y={configure:e=>{i.Z.configure(e)}}},10673:function(e,t,n){"use strict";n.d(t,{Z:function(){return utils_isMuiElement}});var i=n(2265),utils_isMuiElement=function(e,t){var n,r;return i.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},53931:function(e,t,n){"use strict";var i=n(96278);t.Z=i.Z},26649:function(e,t,n){"use strict";var i=n(88221);t.Z=i.Z},73292:function(e,t,n){"use strict";var i=n(34625);t.Z=i.Z},88519:function(e,t,n){"use strict";var i=n(1091);t.Z=i.Z},62940:function(e,t,n){"use strict";function createChainedFunction(...e){return e.reduce((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})}n.d(t,{Z:function(){return createChainedFunction}})},78078:function(e,t,n){"use strict";function debounce(e,t=166){let n;function debounced(...i){clearTimeout(n),n=setTimeout(()=>{e.apply(this,i)},t)}return debounced.clear=()=>{clearTimeout(n)},debounced}n.d(t,{Z:function(){return debounce}})},96278:function(e,t,n){"use strict";function ownerDocument(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return ownerDocument}})},88221:function(e,t,n){"use strict";n.d(t,{Z:function(){return ownerWindow}});var i=n(96278);function ownerWindow(e){let t=(0,i.Z)(e);return t.defaultView||window}},34625:function(e,t,n){"use strict";n.d(t,{Z:function(){return useControlled}});var i=n(2265);function useControlled({controlled:e,default:t,name:n,state:r="value"}){let{current:a}=i.useRef(void 0!==e),[o,u]=i.useState(t),l=a?e:o,s=i.useCallback(e=>{a||u(e)},[]);return[l,s]}},2236:function(e,t,n){"use strict";var i,r=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},e),i||(i=r.createElement("path",{fill:"currentColor",d:"M2 16c-.55 0-1.021-.196-1.413-.588A1.922 1.922 0 0 1 0 14V2C0 1.45.196.979.588.587A1.922 1.922 0 0 1 2 0h16c.55 0 1.021.196 1.413.588.392.392.588.863.587 1.412v12c0 .55-.196 1.021-.588 1.413A1.922 1.922 0 0 1 18 16H2Zm0-8h16V4H2v4Z"})))}},79608:function(e,t,n){Promise.resolve().then(n.bind(n,37208))},37208:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return page}});var i=n(57437),r=n(2265),a=n(24033),o=n(43226),u=n(96507),l=n(13457),s=n(66267),c=n(15707),d=n(40542),f=n(97716),p=n(90726),m=n(95815),g=n(94025),h=n(19739);n(63491);var v=n(60230),y=n(23965),x=n(51894);let w="\n  id\n  identityInfo { ".concat("\n  did\n  createdAt\n  credentialsCount\n  creatingAppDid\n"," }\n  claimUrl\n  expiresAt\n  claimCompletedAt\n");let ClaimableIdentity=class ClaimableIdentity{static async fromJson(e){let t=new ClaimableIdentity;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}};let IdentityClaimRequest=class IdentityClaimRequest{static async fromJson(e){let t=new IdentityClaimRequest;return Object.assign(t,e),t.identityInfo=await ClaimableIdentity.fromJson(e.identityInfo),e.expiresAt&&(t.expiresAt=new Date(e.expiresAt)),e.claimCompletedAt&&(t.claimCompletedAt=new Date(e.claimCompletedAt)),t}};var b=n(29748),I=n(91395);function _templateObject(){let e=(0,v._)(["\n            query IdentityClaimRequest($claimRequestId: String!, $nonce: String!) {\n              identityClaimRequest(id: $claimRequestId, nonce: $nonce) {\n                ","\n              }\n            }\n          "]);return _templateObject=function(){return e},e}async function fetchIdentityClaimRequest(e,t){return(0,x.H)(async()=>{var n,i;let r=await (0,b.Pt)(async()=>(await (0,I.W)()).query({query:(0,y.Ps)(_templateObject(),w),variables:{claimRequestId:e,nonce:t}}),null,[g._s.RequestExpired,g._s.AlreadyClaimed,g._s.InvalidNonce,g._s.RequestNotExists]);return(null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.identityClaimRequest)?IdentityClaimRequest.fromJson(null==r?void 0:null===(i=r.data)||void 0===i?void 0:i.identityClaimRequest):null})}var Z=n(78596),j=n(36079),C=n(14776),S=n(2236),_=n(99267),k=n(98006),F=n(5796),O=n(23785),A=n(29166);let E="claim-identity";var page=()=>{let{mounted:e}=(0,f.s)(),t=(0,a.useSearchParams)(),n=t.get("request"),v=t.get("nonce"),[y,x]=(0,r.useState)(!0),[w,b]=(0,r.useState)(!1),[I,N]=(0,r.useState)(null),[q,P]=(0,r.useState)(null),[D,R]=(0,r.useState)(null),[B,T]=(0,r.useState)(null),[z]=(0,d.V)(null==B?void 0:B.name$),[G,M]=(0,r.useState)(null),V=(0,a.useRouter)(),[U]=(0,d.V)(C.DR),[W]=(0,d.V)(C.jU),J=!y&&U,{showSuccessToast:$,showErrorToast:H}=(0,h.p)();(0,r.useEffect)(()=>{n&&!I&&(j.k.log(E,"Fetching claim request details"),fetchIdentityClaimRequest(n,v).then(e=>{if(j.k.log(E,"Got claim request",e),e){var t;N(e),P(null===(t=e.identityInfo)||void 0===t?void 0:t.creatingAppDid)}else x(!1)}).catch(e=>{if(x(!1),e instanceof m._)switch(e.appExceptionCode){case g._s.AlreadyClaimed:M("This identity is already claimed");break;case g._s.InvalidNonce:M("Security code is invalie");break;case g._s.RequestExpired:M("Request expired, please try again from your original application");break;case g._s.RequestNotExists:M("This identity transfer request doesn't exist")}}))},[n,v,I]),(0,r.useEffect)(()=>{q&&!D&&(j.k.log(E,"Fetching creating app's DID document on chain"),Z._.resolveDIDDocument(q).then(async e=>{if(x(!1),R(e),j.k.log(E,"Got creating app's DID document:",e),e){let t=e.getCredentialByType("ApplicationCredential");t?T(await (0,p.C)(t)):j.k.error(E,"The on chain DID document supposed to contain an app info credential doesn't have such credential")}else j.k.warn(E,"Unable to resolve DID Document of the app that created the managed identity")}))},[q,D]);let claimIdentity=async()=>{b(!0);let e=await W.get("identity").claimManagedIdentity(I,v);e?($("Identity claimed successfully"),V.replace("/dashboard")):(H("Sorry, the identity failed to be claimed for some reason"),b(!1))};return(0,i.jsxs)("div",{children:[(0,i.jsx)(c.Z,{title:"Claim Identity",description:(0,i.jsxs)(i.Fragment,{children:[z?(0,i.jsx)("b",{children:z}):"Third party application"," ","has set up a new Web3 identity for you. It's now ready for you to claim. This means that the identity, initially created and managed by"," ",z?(0,i.jsx)("b",{children:z}):"Third party application",", will become entirely yours, alongside your other identities."]}),showBg:!0}),(0,i.jsxs)("div",{className:"inline-flex items-center",children:[(0,i.jsx)(s.C,{children:(0,i.jsx)("div",{className:"w-4 h-4 flex justify-center",children:(0,i.jsx)(S.Z,{})})}),(0,i.jsx)(o.Z,{variant:"subtitle1",className:"pl-2",children:"New Identity"})]}),(!I||!J)&&(0,i.jsx)("div",{className:"max-w-md w-full m-auto pt-4",children:(0,i.jsx)(A.GE,{})}),J&&!y&&(0,i.jsx)(i.Fragment,{children:!I&&(0,i.jsx)(u.Z,{className:"mt-4 text-center",children:(0,i.jsxs)(o.Z,{variant:"h6",children:["Sorry, we could not find information about this identity at the moment.",G&&(0,i.jsx)("p",{children:G})]})})}),J&&I&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"max-w-md w-full m-auto pt-4",children:[(0,i.jsx)(_.Gt,{className:"w-full h-auto bg-neutral-950",waveIconVisible:!1,footer:(0,i.jsx)(o.Z,{variant:"caption",children:q}),children:(0,i.jsxs)(l.Z,{sx:{mb:"5%"},spacing:3,children:[(0,i.jsx)(F.S,{state:F.X.Average,advice:"Once claimed, this identity will be transferred over to your account."}),(0,i.jsx)(k.Z,{variant:"h4",fontWeight:600,children:z||"Unnamed application"})]})}),W&&(0,i.jsx)("div",{className:"mt-4 px-4",children:(0,i.jsx)(O.Kz,{className:"w-full",loading:w,onClick:claimIdentity,children:"CLAIM THIS IDENTITY"})})]})})]})}},5796:function(e,t,n){"use strict";n.d(t,{S:function(){return SecurityStatus},X:function(){return r}});var i,r,a=n(57437),o=n(60289),u=n(14819),l=n(39830);(i=r||(r={}))[i.Unknown=0]="Unknown",i[i.Good=1]="Good",i[i.Average=2]="Average",i[i.Bad=3]="Bad";let s={0:"#3A3A3A",1:"#34A853",2:"#ED6C02",3:"#EA4335"},c={0:(0,a.jsx)(l.JO,{icon:"fluent-mdl2:unknown-solid",fontSize:24}),1:(0,a.jsx)(l.JO,{icon:"carbon:checkmark-filled",fontSize:24}),2:(0,a.jsx)(u.Z,{}),3:(0,a.jsx)(o.Z,{})},SecurityStatus=e=>{let{state:t,advice:n}=e;return(0,a.jsxs)("div",{className:"flex rounded-lg px-2 py-2 sm:py-4 flex gap-2",style:{background:s[t]},children:[(0,a.jsx)("span",{className:"text-white",children:c[t]}),(0,a.jsx)("span",{className:"text-white text-[10.5px] sm:text-[12px] leading-[1.4] font-semibold",children:n})]})}},15707:function(e,t,n){"use strict";var i=n(57437),r=n(35843),a=n(43226);let o=(0,r.ZP)("div")(e=>{let{showBg:t}=e;return{marginBottom:"1.5rem",background:t?"url('/headline-banner.png') no-repeat center center / cover":"none"}});t.Z=e=>{let{title:t,description:n,showBg:r=!1}=e;return(0,i.jsxs)(o,{showBg:r,className:r?"p-4 sm:p-6 rounded-lg":"",children:[(0,i.jsx)(a.Z,{className:"w-full pb-3 sm:pb-4 sm:pb-8",variant:"h3",color:"text.primary",children:t}),(0,i.jsx)(a.Z,{className:"mt-4",variant:"body1",color:"text.primary",children:n})]})}},98006:function(e,t,n){"use strict";var i=n(43226),r=n(35843);let a=(0,r.ZP)(i.Z)({backgroundImage:"linear-gradient(180deg, #FFFFFFAE, #FFFFFF)",backgroundSize:"100%",backgroundRepeat:"repeat",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",MozBackgroundClip:"text",MozTextFillColor:"transparent",display:"inline"});t.Z=a},40542:function(e,t,n){"use strict";n.d(t,{V:function(){return useBehaviorSubject}});var i=n(2265);let useBehaviorSubject=e=>{let[t,n]=(0,i.useState)(null==e?void 0:e.getValue()),[r,a]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!e){n(null);return}let t=e.subscribe({next:e=>{n(e)},error:a});return()=>t.unsubscribe()},[e]),[t]}},63491:function(e,t,n){"use strict";n.d(t,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return r},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var i,r,a=n(92e3),o=n(36079);(i=r||(r={}))[i.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",i[i.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",i[i.EmailSignIn=2]="EmailSignIn";let u="ongoingflowoperation",l="postsigninurl";function getOnGoingFlowOperation(){return r[localStorage.getItem(u)]}function setOnGoingFlowOperation(e){localStorage.setItem(u,r[e])}function clearOnGoingFlowOperation(){localStorage.removeItem(u)}function setPostSignInUrl(e){o.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(l,e)}function clearPostSignInUrl(){o.k.log("flow","Clearing post sign in url"),localStorage.removeItem(l)}function usePostSignInFlow(){let e=(0,a.useRouter)();return{navigateToPostSignInLandingPage(t){let n=localStorage.getItem(l);if(n)o.k.log("flow","Navigating to post sign in landing page:",n),e.replace(n),clearPostSignInUrl();else{let n=t||"/dashboard";o.k.log("flow","Navigating to post sign in landing page ".concat(n)),e.push(n)}}}}},26314:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[6990,9787,9443,8218,3988,3861,6506,8644,9490,9830,1711,1510,6953,378,5951,1396,2e3,3474,7056,9267,567,2971,7864,1744],function(){return e(e.s=79608)}),_N_E=e.O()}]);