(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1456],{2899:function(e,t,n){"use strict";var i=n(26314);t.Z=void 0;var r=i(n(80984)),a=n(57437),l=(0,r.default)((0,a.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.Z=l},32596:function(e,t,n){"use strict";var i=n(26314);t.Z=void 0;var r=i(n(80984)),a=n(57437),l=(0,r.default)((0,a.jsx)("path",{d:"M19.02 10v9H5V5h9V3H5.02c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2zM17 10l.94-2.06L20 7l-2.06-.94L17 4l-.94 2.06L14 7l2.06.94zm-3.75.75L12 8l-1.25 2.75L8 12l2.75 1.25L12 16l1.25-2.75L16 12z"}),"PhotoFilter");t.Z=l},80984:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(43135)},2592:function(e,t,n){"use strict";var i=n(2265);let r=i.createContext(void 0);t.Z=r},59592:function(e,t,n){"use strict";n.d(t,{Z:function(){return useFormControl}});var i=n(2265),r=n(2592);function useFormControl(){return i.useContext(r.Z)}},73701:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(20791),r=n(13428),a=n(2265),l=n(57042),s=n(95600),o=n(65969),c=n(87927),d=n(35843),u=n(26520),p=n(25702);function getTableUtilityClass(e){return(0,p.Z)("MuiTable",e)}(0,u.Z)("MuiTable",["root","stickyHeader"]);var h=n(57437);let f=["className","component","padding","size","stickyHeader"],useUtilityClasses=e=>{let{classes:t,stickyHeader:n}=e;return(0,s.Z)({root:["root",n&&"stickyHeader"]},getTableUtilityClass,t)},m=(0,d.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,r.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,r.Z)({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),g="table",x=a.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiTable"}),{className:s,component:d=g,padding:u="normal",size:p="medium",stickyHeader:x=!1}=n,v=(0,i.Z)(n,f),y=(0,r.Z)({},n,{component:d,padding:u,size:p,stickyHeader:x}),b=useUtilityClasses(y),Z=a.useMemo(()=>({padding:u,size:p,stickyHeader:x}),[u,p,x]);return(0,h.jsx)(o.Z.Provider,{value:Z,children:(0,h.jsx)(m,(0,r.Z)({as:d,role:d===g?null:"table",ref:t,className:(0,l.Z)(b.root,s),ownerState:y},v))})});var v=x},39279:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(13428),r=n(20791),a=n(2265),l=n(57042),s=n(95600),o=n(28232),c=n(87927),d=n(35843),u=n(26520),p=n(25702);function getTableBodyUtilityClass(e){return(0,p.Z)("MuiTableBody",e)}(0,u.Z)("MuiTableBody",["root"]);var h=n(57437);let f=["className","component"],useUtilityClasses=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},getTableBodyUtilityClass,t)},m=(0,d.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),g={variant:"body"},x="tbody",v=a.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiTableBody"}),{className:a,component:s=x}=n,d=(0,r.Z)(n,f),u=(0,i.Z)({},n,{component:s}),p=useUtilityClasses(u);return(0,h.jsx)(o.Z.Provider,{value:g,children:(0,h.jsx)(m,(0,i.Z)({className:(0,l.Z)(p.root,a),as:s,ref:t,role:s===x?null:"rowgroup",ownerState:u},d))})});var y=v},66988:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(13428),r=n(20791),a=n(2265),l=n(57042),s=n(95600),o=n(28232),c=n(87927),d=n(35843),u=n(26520),p=n(25702);function getTableHeadUtilityClass(e){return(0,p.Z)("MuiTableHead",e)}(0,u.Z)("MuiTableHead",["root"]);var h=n(57437);let f=["className","component"],useUtilityClasses=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},getTableHeadUtilityClass,t)},m=(0,d.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),g={variant:"head"},x="thead",v=a.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiTableHead"}),{className:a,component:s=x}=n,d=(0,r.Z)(n,f),u=(0,i.Z)({},n,{component:s}),p=useUtilityClasses(u);return(0,h.jsx)(o.Z.Provider,{value:g,children:(0,h.jsx)(m,(0,i.Z)({as:s,className:(0,l.Z)(p.root,a),ref:t,role:s===x?null:"rowgroup",ownerState:u},d))})});var y=v},78682:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(20791),r=n(13428),a=n(2265),l=n(57042),s=n(95600),o=n(28702),c=n(35843),d=n(73292),u=n(59592),p=n(45295),h=n(26520),f=n(25702);function getSwitchBaseUtilityClass(e){return(0,f.Z)("PrivateSwitchBase",e)}(0,h.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var m=n(57437);let g=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses=e=>{let{classes:t,checked:n,disabled:i,edge:r}=e,a={root:["root",n&&"checked",i&&"disabled",r&&`edge${(0,o.Z)(r)}`],input:["input"]};return(0,s.Z)(a,getSwitchBaseUtilityClass,t)},x=(0,c.ZP)(p.Z)(({ownerState:e})=>(0,r.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})),v=(0,c.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=a.forwardRef(function(e,t){let{autoFocus:n,checked:a,checkedIcon:s,className:o,defaultChecked:c,disabled:p,disableFocusRipple:h=!1,edge:f=!1,icon:y,id:b,inputProps:Z,inputRef:j,name:w,onBlur:C,onChange:S,onFocus:I,readOnly:k,required:N=!1,tabIndex:D,type:E,value:R}=e,P=(0,i.Z)(e,g),[T,O]=(0,d.Z)({controlled:a,default:!!c,name:"SwitchBase",state:"checked"}),A=(0,u.Z)(),_=p;A&&void 0===_&&(_=A.disabled);let M="checkbox"===E||"radio"===E,F=(0,r.Z)({},e,{checked:T,disabled:_,disableFocusRipple:h,edge:f}),B=useUtilityClasses(F);return(0,m.jsxs)(x,(0,r.Z)({component:"span",className:(0,l.Z)(B.root,o),centerRipple:!0,focusRipple:!h,disabled:_,tabIndex:null,role:void 0,onFocus:e=>{I&&I(e),A&&A.onFocus&&A.onFocus(e)},onBlur:e=>{C&&C(e),A&&A.onBlur&&A.onBlur(e)},ownerState:F,ref:t},P,{children:[(0,m.jsx)(v,(0,r.Z)({autoFocus:n,checked:a,defaultChecked:c,className:B.input,disabled:_,id:M?b:void 0,name:w,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;O(t),S&&S(e,t)},readOnly:k,ref:j,required:N,ownerState:F,tabIndex:D,type:E},"checkbox"===E&&void 0===R?{}:{value:R},Z)),T?s:y]}))});var b=y},41101:function(e,t,n){"use strict";n.d(t,{Z:function(){return useTheme}}),n(2265);var i=n(95270),r=n(53794),a=n(53469);function useTheme(){let e=(0,i.Z)(r.Z);return e[a.Z]||e}},22135:function(e,t,n){"use strict";n.d(t,{Z:function(){return useMediaQuery}});var i,r=n(2265),a=n(44809),l=n(51529),s=n(88519);let o=(i||(i=n.t(r,2))).useSyncExternalStore;function useMediaQuery(e,t={}){let n=(0,a.Z)(),i="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:c=!1,matchMedia:d=i?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:p=!1}=(0,l.Z)({name:"MuiUseMediaQuery",props:t,theme:n}),h="function"==typeof e?e(n):e;h=h.replace(/^@media( ?)/m,"");let f=(void 0!==o?function(e,t,n,i,a){let l=r.useCallback(()=>t,[t]),s=r.useMemo(()=>{if(a&&n)return()=>n(e).matches;if(null!==i){let{matches:t}=i(e);return()=>t}return l},[l,e,i,a,n]),[c,d]=r.useMemo(()=>{if(null===n)return[l,()=>()=>{}];let t=n(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]},[l,n,e]),u=o(d,c,s);return u}:function(e,t,n,i,a){let[l,o]=r.useState(()=>a&&n?n(e).matches:i?i(e).matches:t);return(0,s.Z)(()=>{let t=!0;if(!n)return;let i=n(e),updateMatch=()=>{t&&o(i.matches)};return updateMatch(),i.addListener(updateMatch),()=>{t=!1,i.removeListener(updateMatch)}},[e,n]),l})(h,c,d,u,p);return f}},43135:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return l.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return utils_deprecatedPropType},isMuiElement:function(){return o.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return utils_requirePropFactory},setRef:function(){return u},unstable_ClassNameGenerator:function(){return v},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return h.Z},unsupportedProp:function(){return utils_unsupportedProp},useControlled:function(){return f.Z},useEventCallback:function(){return m.Z},useForkRef:function(){return g.Z},useIsFocusVisible:function(){return x.Z}});var i=n(25097),r=n(28702),a=n(62940).Z,l=n(59782),s=n(80494),utils_deprecatedPropType=function(e,t){return()=>null},o=n(10673),c=n(53931),d=n(26649);n(13428);var utils_requirePropFactory=function(e,t){return()=>null},u=n(13840).Z,p=n(88519),h=n(62916),utils_unsupportedProp=function(e,t,n,i,r){return null},f=n(73292),m=n(96),g=n(37663),x=n(53308);let v={configure:e=>{i.Z.configure(e)}}},26371:function(e,t,n){"use strict";var i,r=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},e),i||(i=r.createElement("path",{fill:"currentColor",d:"M8 0h10c1.11 0 2 .89 2 2v2h-3.41L14 6.59v4l-2 2V16H8v-3.41l-2-2V5.41l2-2V0Zm8 7.41V10h4V6h-2.59L16 7.41ZM4.59 4 6 2.59V0H2C.89 0 0 .89 0 2v2h4.59ZM4 10V6H0v4h4Zm2 3.41L4.59 12H0v2c0 1.11.89 2 2 2h4v-2.59ZM15.41 12 14 13.41V16h4c1.11 0 2-.89 2-2v-2h-4.59Z"})))}},22017:function(e,t,n){Promise.resolve().then(n.bind(n,81731))},77814:function(e,t,n){"use strict";n.d(t,{O:function(){return PreparingRequest}});var i=n(57437),r=n(16290),a=n(74966);let PreparingRequest=()=>(0,i.jsx)(a.v,{icon:(0,i.jsx)(r.Z,{className:"main-icon",width:"90%",height:"100%",viewBox:"0 0 50 38"}),preparingText:"Preparing your request. Please wait for a moment..."})},26188:function(e,t,n){"use strict";n.d(t,{O:function(){return RequestingApp}});var i=n(57437),r=n(2265),a=n(50724),l=n(16691),s=n.n(l),o=n(13457),c=n(3283),d=n(96507),u=n(43226),p=n(32596),h=n(29166),f=n(23446),m=n(78596);let RequestingApp=e=>{let{applicationDID:t,className:n}=e,[l,g]=(0,r.useState)(null),[x,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),updateApplicationData=async()=>{if(t)try{let e=await m._.resolveDIDDocument(t);b(!0),e?(e.getRepresentativeIcon().then(g).catch(e=>{g("")}),e.getRepresentativeOwnerName().then(v).catch(e=>{v("")})):(g(null),v(null))}catch(e){b(!0)}else b(!0)};return(0,r.useEffect)(()=>{updateApplicationData()},[t]),y?(0,i.jsx)(i.Fragment,{children:t?(0,i.jsxs)(o.Z,{className:n,justifyContent:"center",alignItems:"center",spacing:1.5,children:[(0,i.jsxs)(o.Z,{justifyContent:"center",alignItems:"center",spacing:.5,children:[null!=l?(0,i.jsx)(c.Z,{sx:{width:88,height:88},children:l?(0,i.jsx)(s(),{src:l,alt:"",width:120,height:120}):(0,i.jsx)(p.Z,{fontSize:"large"})}):(0,i.jsx)(f.Z,{children:(0,i.jsx)(a.Z,{width:88,height:88,circle:!0,containerClassName:"leading-none"})}),(0,i.jsx)("div",{children:(0,i.jsx)(d.Z,{className:"rounded-[4px] text-[8px] px-2.5 py-1 inline-block text-white whitespace-nowrap bg-[#9291A5]",children:"APPLICATION"})})]}),x?(0,i.jsx)(u.Z,{variant:"h4",children:x}):(0,i.jsx)(u.Z,{variant:"h4",color:"text.secondary",children:"Unknown application"})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.Z,{className:n,justifyContent:"center",alignItems:"center",spacing:1.5,children:[(0,i.jsxs)(o.Z,{justifyContent:"center",alignItems:"center",spacing:.5,children:[(0,i.jsx)(c.Z,{sx:{width:88,height:88},children:(0,i.jsx)(p.Z,{fontSize:"large"})}),(0,i.jsx)("div",{children:(0,i.jsx)(d.Z,{className:"rounded-[4px] text-[8px] px-2.5 py-1 inline-block text-white whitespace-nowrap bg-[#9291A5]",children:"APPLICATION"})})]}),(0,i.jsx)(u.Z,{variant:"h4",color:"text.secondary",children:"Unknown application"})]})})}):(0,i.jsx)(h.xG,{})}},81731:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return page}});var i=n(57437),r=n(2265),a=n(43226),l=n(24033),s=n(61568),o=n(77814),c=n(11920),d=n(40542),u=n(69147),p=n(61459),h=n(57958),f=n(57389),m=n(36079),g=n(14776),x=n(43639),v=n(26188),y=n(30666),b=n(20791),Z=n(13428),j=n(57042),w=n(95600),C=n(89975),S=n(78682),I=n(59782),k=(0,I.Z)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),N=(0,I.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),D=(0,I.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),E=n(28702),R=n(87927),P=n(35843),T=n(26520),O=n(25702);function getCheckboxUtilityClass(e){return(0,O.Z)("MuiCheckbox",e)}let A=(0,T.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),_=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses=e=>{let{classes:t,indeterminate:n,color:i,size:r}=e,a={root:["root",n&&"indeterminate",`color${(0,E.Z)(i)}`,`size${(0,E.Z)(r)}`]},l=(0,w.Z)(a,getCheckboxUtilityClass,t);return(0,Z.Z)({},t,l)},M=(0,P.ZP)(S.Z,{shouldForwardProp:e=>(0,P.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t[`color${(0,E.Z)(n.color)}`]]}})(({theme:e,ownerState:t})=>(0,Z.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,C.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${A.checked}, &.${A.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${A.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),F=(0,i.jsx)(N,{}),B=(0,i.jsx)(k,{}),q=(0,i.jsx)(D,{}),L=r.forwardRef(function(e,t){var n,a;let l=(0,R.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:s=F,color:o="primary",icon:c=B,indeterminate:d=!1,indeterminateIcon:u=q,inputProps:p,size:h="medium",className:f}=l,m=(0,b.Z)(l,_),g=d?u:c,x=d?u:s,v=(0,Z.Z)({},l,{color:o,indeterminate:d,size:h}),y=useUtilityClasses(v);return(0,i.jsx)(M,(0,Z.Z)({type:"checkbox",inputProps:(0,Z.Z)({"data-indeterminate":d},p),icon:r.cloneElement(g,{fontSize:null!=(n=g.props.fontSize)?n:h}),checkedIcon:r.cloneElement(x,{fontSize:null!=(a=x.props.fontSize)?a:h}),ownerState:v,ref:t,className:(0,j.Z)(y.root,f)},m,{classes:y}))});var U=n(96283),z=n(96507),H=n(42464),credential_CredentialBasicInfo=function(e){let{credential:t}=e;return(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(a.Z,{variant:"body1",fontWeight:600,lineHeight:1.2,children:t.getDisplayableTitle()}),(0,i.jsx)(a.Z,{component:"span",variant:"body2",color:"text.secondary",lineHeight:1.2,children:t.getDisplayValue()&&(0,i.jsx)(H.h,{data:t.getDisplayValue()})})]})},V=n(19959);let CredentialDisplayEntryWidget=e=>{let{claimDisplayEntry:t,credentialDisplayEntry:n,updateSummary:a}=e,[l,s]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n&&s(n.selected)},[n]);let onCredentialSelection=(e,t)=>{let n=t.selected;if(m.k.log("RequestCredentialsIntent","onCredentialSelection",e,t),n)1===e.claimDescription.min&&1===e.claimDescription.max||(t.selected=!1);else{if(1===e.claimDescription.min&&1===e.claimDescription.max){let t=getFirstSelectedCredentialInClaim(e);t&&(t.selected=!1)}t.selected=!0}s(t.selected),a()},getFirstSelectedCredentialInClaim=e=>e.matchingCredentials.find(e=>e.selected);return(0,i.jsx)(V.m,{props:{hover:!0},onClick:()=>onCredentialSelection(t,n),className:"h-[3rem] cursor-pointer",avatar:(0,i.jsx)(U.J,{credential:n.credential,width:36,height:36}),rowCells:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Z,{children:(0,i.jsx)(credential_CredentialBasicInfo,{credential:n.credential})}),(0,i.jsx)(y.Z,{align:"center",children:(0,i.jsx)(L,{checked:l,sx:{"&.Mui-checked":{color:"#9D3E3E"}}})})]})})};var W=n(98489);let ClaimDisplayEntryWidget=e=>{let{claimDisplayEntry:t}=e,[n,l]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&updateSummary()},[t]);let claimSelectionSummary=e=>{let t=numberOfSelectedCredentialsInClaim(e);return e.claimDescription.min===e.claimDescription.max?"".concat(t," / ").concat(e.claimDescription.min):0===e.claimDescription.min?"".concat(t," / max ").concat(e.claimDescription.max):"".concat(t," / min ").concat(e.claimDescription.min,", max ").concat(e.claimDescription.max)},numberOfSelectedCredentialsInClaim=e=>e.matchingCredentials.reduce((e,t)=>t.selected?e+1:e,0),updateSummary=()=>{let e=claimSelectionSummary(t);l(e)};return(0,i.jsx)(V.J,{headCells:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Z,{children:"CREDENTIALS"}),(0,i.jsxs)(y.Z,{children:["SELECTED ",n]})]}),bodyRows:t&&t.matchingCredentials&&t.matchingCredentials.length>0?t.matchingCredentials.map(e=>(0,i.jsx)(CredentialDisplayEntryWidget,{credentialDisplayEntry:e,claimDisplayEntry:t,updateSummary:updateSummary},e.credential.id)):(0,i.jsx)(W.Z,{children:(0,i.jsx)(y.Z,{component:"th",colSpan:6,align:"center",children:(0,i.jsx)(a.Z,{variant:"body1",color:"text.primary",children:"No credential found"})})})})};var J=n(26371),$=n(83129),G=n(66267),Q=n(29166);let ClaimDisplayEntryListWidget=e=>{let{claimDisplayEntryList:t}=e;return(0,i.jsx)($.Z,{className:"w-full",title:(0,i.jsxs)("div",{className:"inline-flex items-center",children:[(0,i.jsx)(G.C,{children:(0,i.jsx)("div",{className:"w-4 h-4 flex justify-center",children:(0,i.jsx)(J.Z,{})})}),(0,i.jsx)("span",{className:"pl-2",children:"Credentials Request"})]}),able2ShowAll:!1,children:(0,i.jsx)("div",{className:"mb-1",children:t&&t.length>0?t.map((e,t)=>(0,i.jsx)(ClaimDisplayEntryWidget,{claimDisplayEntry:e},t)):(0,i.jsx)(V.J,{headCells:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Z,{children:"CREDENTIALS"}),(0,i.jsx)(y.Z,{children:"SELECT"})]}),bodyRows:t?(0,i.jsx)(W.Z,{children:(0,i.jsx)(y.Z,{component:"th",colSpan:6,align:"center",children:(0,i.jsx)(a.Z,{variant:"body1",color:"text.primary",children:"No credential found"})})}):[,,,].fill(0).map((e,t)=>(0,i.jsx)(Q.IT,{},t))})})})};var Y=n(13457),K=n(49050),X=n(23785);let RequestDetails=e=>{let{intent:t}=e,l="RequestCredentialsIntent",[o]=(0,d.V)(g.jU),[y]=(0,d.V)(h.Bx),[b]=(0,d.V)(null==y?void 0:y.credentials().credentials$),[Z,j]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),[S,I]=(0,r.useState)(""),[k,N]=(0,r.useState)("Demo App"),[D,E]=(0,r.useState)(!1),[R,P]=(0,r.useState)(null),T=t.requestPayload,O=t.requestPayload.caller;m.k.log(l,"payload",T),(0,r.useEffect)(()=>{runPreliminaryChecks(),b&&T&&(fetchApplicationDidInfo(T),organizeRequestedClaims(T).then(e=>{P(e)}))},[b,T]);let runPreliminaryChecks=()=>{C(!1)},fetchApplicationDidInfo=async e=>{let t=e.caller;if(t){let e=await f.n.isPublished(t);if(e){let e=await f.n.getIssuerName(t);m.k.log(l,"Requesting App name:",e),N(e);let n=await f.n.getIssuerAvatar(t);I(n)}else m.k.warn(l,"Requesting App is not published.")}},prepareRawClaims=e=>{let t=JSON.parse(JSON.stringify(e.claims)),n=convertRawClaimsIfNeeded(e);return n&&(t=n),t.forEach(e=>(void 0===e.min&&(e.min=1),void 0===e.max&&(e.max=1),e)),t},convertRawClaimsIfNeeded=e=>{if("_version"in e)return null;{let t=[],n=e.claims;for(let e of n){let n=c.DID.claimDescription(e.reason).withMin(e.min).withMax(e.max).withNoMatchRecommendations(e.noMatchRecommendations).withClaim(new c.DID.Claim().withQuery(e.query).withIssuers(e.issuers));t.push(n)}return t}},organizeRequestedClaims=async e=>{let t=[],i=prepareRawClaims(e);for(let e of i){m.k.log(l,"Organizing claim",e);let i=[];for(let e of b){let t=JSON.parse(await e.verifiableCredential.toString());await appendTypesWithContextsToJsonCredential(e.verifiableCredential,t),i.push(t)}let r=[],a=[];for(let t of e.claims){try{let e=await n.e(9733).then(n.t.bind(n,73820,23));r=r.concat(e.query(i,t.query)),m.k.log(l,"Matching credentials (json)",r)}catch(e){m.k.warn(l,"JSON Path exception",e)}a=a.concat(r.map(e=>{let n=b.find(t=>t.verifiableCredential.getId().toString()===e.id);if(t.issuers){let e=t.issuers.find(e=>e===n.verifiableCredential.getIssuer().toString());if(!e)return null}return{credential:n,selected:!1,expired:!1}}).filter(e=>null!==e))}1==e.min&&e.max===e.min&&1===a.length&&(a[0].selected=!0);let s={claimDescription:e,matchingCredentials:a};t.push(s)}return E(!0),m.k.log(l,"Organized claims",t),t},appendTypesWithContextsToJsonCredential=async(e,t)=>{let n=await p.N.resolveTypesWithContexts(e);for(let e of n){let n="".concat(e.context,"#").concat(e.shortType),i=t.type;0>i.indexOf(n)&&i.push(n)}},buildDeliverableCredentialsList=()=>{let e=[];for(let t of R)for(let n of t.matchingCredentials)n.selected&&e.push(n.credential);return m.k.log(l,"Deliverable credentials:",e),e},approveRequest=async()=>{j(!0);let e=buildDeliverableCredentialsList(),n=await y.createVerifiablePresentation(e.map(e=>e.verifiableCredential),T.realm,T.nonce);if(!n){j(!1);return}let i=n.toString(!0),r=await (0,s.h)(t.id,i);if(r){await (null==o?void 0:o.get("activity").createActivity({type:u.T.CREDENTIALS_SHARED,credentialsCount:e.length,appDid:O})),T.caller&&await y.applications().recordRequestedCredentials(T.caller,e);let n=(0,x.Q)(t.redirectUrl,"rid",t.id);window.location.href=n}},rejectRequest=async()=>{await (0,s.h)(t.id,null);let e=(0,x.Q)(t.redirectUrl,"rid",t.id);window.location.href=e};return(0,i.jsxs)(i.Fragment,{children:[y&&(0,i.jsxs)(Y.Z,{spacing:2,alignItems:"center",children:[(0,i.jsx)(v.O,{applicationDID:O}),(0,i.jsx)(a.Z,{variant:"body2",color:"text.primary",textAlign:"center",className:"max-w-lg",children:"This application is requesting access to some of your information. Please review and select the profile items (credentials) you wish to share."}),(0,i.jsx)(ClaimDisplayEntryListWidget,{claimDisplayEntryList:R}),R&&R.length>0&&(0,i.jsxs)("div",{className:"flex w-full items-center gap-4 sm:px-4 sm: gap-8",children:[(0,i.jsx)(K.Z,{variant:"contained",className:"flex-1",onClick:rejectRequest,color:"error",children:"CANCEL"}),(0,i.jsx)(X.Kz,{className:"flex-1",onClick:approveRequest,loading:Z,children:"APPROVE"})]})]}),!o&&(0,i.jsx)(a.Z,{variant:"h6",children:"Please sign in or sign up to continue"}),o&&!y&&(0,i.jsx)(a.Z,{variant:"h6",children:"Please make an identity active to continue"})]})};var ee=n(63491),page=()=>{let e=(0,l.useSearchParams)(),t=e.get("rid"),[n,c]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null),[f]=(0,d.V)(g.jU),[m]=(0,d.V)(h.Bx);return(0,r.useEffect)(()=>{t&&(0,s.S)(t).then(e=>{c(!1),p(e)})},[t]),(0,r.useEffect)(()=>{f&&m?(0,ee.Ad)():(0,ee.qC)(window.location.href)},[f,m]),(0,i.jsxs)("div",{className:"col-span-full",children:[n&&(0,i.jsx)(o.O,{}),!n&&u&&(0,i.jsx)(RequestDetails,{intent:u}),!n&&!u&&(0,i.jsx)(a.Z,{variant:"h6",textAlign:"center",children:"No matching request"})]})}},96283:function(e,t,n){"use strict";n.d(t,{J:function(){return CredentialAvatar}});var i=n(57437),r=n(57042),a=n(16691),l=n.n(a),s=n(22135),o=n(3283),c=n(41101),d=n(40542);let CredentialAvatar=e=>{let{credential:t,width:n=60,height:a=60,className:u}=e,[p]=(0,d.V)(null==t?void 0:t.representativeIcon$),h=(0,c.Z)(),f=(0,s.Z)(h.breakpoints.between("sm","md")),m=(0,s.Z)(h.breakpoints.down("sm")),g=m&&.75||f&&.9||1;return(0,i.jsx)(o.Z,{sx:{width:n*g,height:a*g,padding:"string"==typeof p?0:"".concat(.125*Math.floor(n*g/8),"rem"),backgroundColor:"#7575754d"},className:(0,r.Z)(u),children:"string"==typeof p?(0,i.jsx)(l(),{src:p,alt:"",width:n*g,height:a*g}):p})}},42464:function(e,t,n){"use strict";n.d(t,{h:function(){return JsonViewer}});var i=n(57437);function JsonViewer(e){let{data:t}=e,renderJson=e=>{if("object"!=typeof e||null===e)return(0,i.jsx)("span",{className:"json-value",children:String(e)});if(Array.isArray(e))return(0,i.jsx)("div",{className:"json-array",children:e.map((e,t)=>(0,i.jsx)("div",{children:renderJson(e)},t))});{let t=Object.keys(e);return(0,i.jsx)("div",{className:"json-object",children:t.map(t=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{className:"json-key",children:[t,"："]})," ",renderJson(e[t])]},t))})}};return(0,i.jsxs)("div",{className:"json-viewer truncate",style:{textAlign:"left"},children:[renderJson(t),(0,i.jsx)("style",{children:"\n          .json-viewer {\n            font-family: Arial, sans-serif;\n          }\n          .json-object, .json-array {\n            list-style: none;\n            padding-left: 20px;\n          }\n          .json-key {\n            font-weight: bold;\n          }\n        "})]})}n(2265)},83129:function(e,t,n){"use strict";var i=n(57437),r=n(2899),a=n(15133),l=n(96507),s=n(43226),o=n(35843),c=n(23785);let d=(0,o.ZP)(a.Z)(e=>{let{theme:t}=e;return{border:"1px solid #FFFFFF55",borderRadius:"0.5rem",background:"#1D1D1D",position:"relative","&:before":{opacity:.1,content:"''",position:"absolute",width:"100%",height:"200%",background:"linear-gradient(to bottom, rgba(163, 163, 163, 60%), rgba(255, 255, 255, 15%), transparent)",transform:"rotate(-30deg)",transformOrigin:"top left",top:0,right:"-40%"}}});t.Z=e=>{let{title:t,children:n,className:a="",able2ShowAll:o=!0,topRightSection:u=null,sx:p={},showAllAction:h=()=>{}}=e;return(0,i.jsxs)(d,{className:a,elevation:0,sx:p,children:[(0,i.jsxs)(l.Z,{className:"flex card-header",sx:{px:{xs:1.5,sm:3},py:{xs:1.5,sm:2}},children:[(0,i.jsx)(s.Z,{className:"flex-1",variant:"h6",fontWeight:600,children:t}),o?(0,i.jsx)(c.UO,{size:"small",endIcon:(0,i.jsx)(r.Z,{}),onClick:h,children:"Show all"}):u]}),(0,i.jsx)(l.Z,{className:"relative z-10",sx:{px:{xs:1.5,sm:3},pt:{xs:.5,sm:1},pb:{xs:1.5,sm:2}},children:n})]})}},19959:function(e,t,n){"use strict";n.d(t,{J:function(){return DetailTable},m:function(){return DetailTableRow}});var i=n(57437),r=n(98489),a=n(30666),l=n(73701),s=n(66988),o=n(39279);let DetailTableRow=e=>{let{avatar:t,rowCells:n,className:l="",props:s={},onClick:o=()=>{}}=e;return(0,i.jsxs)(r.Z,{...s,className:l,onClick:o,children:[(0,i.jsx)(a.Z,{padding:"none",sx:{width:0},children:t}),n]})},DetailTable=e=>{let{headCells:t,bodyRows:n}=e;return(0,i.jsxs)(l.Z,{size:"small",sx:{th:{border:0},thead:{background:"linear-gradient(to right, transparent, #4e4e4eb3 25%, #555555b3 50%, #4e4e4eb3 75%, transparent)",th:{px:1,fontSize:{xs:12,sm:15},lineHeight:{xs:"1.2rem",sm:"1.5rem"},fontWeight:"600"},"th:last-child":{textAlign:"right"}},tbody:{td:{px:1,py:0,wordBreak:"break-all"},"td:first-child":{border:0,pl:0,pr:1},"td:last-child":{textAlign:"right",pr:0},"tr:last-child":{td:{border:0}}}},children:[(0,i.jsx)(s.Z,{children:(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(a.Z,{sx:{width:0}}),t]})}),(0,i.jsx)(o.Z,{children:n})]})}},74966:function(e,t,n){"use strict";n.d(t,{v:function(){return PreparingContainer}});var i=n(57437),r=n(96507),a=n(13457),l=n(43226),s=n(35843);let o=(0,s.ZP)(r.Z)(e=>{let{theme:t}=e;return{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:28,width:150,height:150,background:"transparent",border:"3px solid #3c3c3c",borderRadius:"50%",textAlign:"center",lineHeight:150,boxShadow:"0 0 20px rgba(0,0,0,.5)","&:before":{content:"''",position:"absolute",top:-3,left:-3,width:"calc(100% + 6px)",height:"calc(100% + 6px)",borderTop:"3px solid #f3f",borderRight:"3px solid #f3f",borderBottom:"3px solid transparent",borderRadius:"50%",animation:"rotate 3s linear infinite",transition:"all 1s ease-in"},".main-icon":{animation:"beating 1s linear infinite"},"span.bubble":{display:"block",position:"absolute",top:"calc(50% - 2px)",left:"50%",width:"50%",height:4,background:"transparent",transformOrigin:"left",animation:"rotate 3s linear infinite",rotate:"45deg","&:before":{content:"''",position:"absolute",width:16,height:16,borderRadius:"50%",background:"#f3f",top:-6,right:-8,boxShadow:"0 0 20px #f3f"}},"@keyframes rotate":{"0%":{filter:"hue-rotate(0deg)",transform:"rotate(0deg)"},"100%":{filter:"hue-rotate(360deg)",transform:"rotate(360deg)"}},"@keyframes beating":{"0%":{width:"90%"},"25%":{width:"85%"},"50%":{width:"90%"},"75%":{width:"95%"},"100%":{width:"90%"}}}}),PreparingContainer=e=>{let{icon:t,preparingText:n}=e;return(0,i.jsxs)(a.Z,{spacing:2,alignItems:"center",sx:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,i.jsxs)(o,{children:[t,(0,i.jsx)("span",{className:"bubble"})]}),(0,i.jsx)(l.Z,{variant:"body1",textAlign:"center",children:n})]})}},69147:function(e,t,n){"use strict";var i,r;n.d(t,{T:function(){return i}}),(r=i||(i={})).NEW_ACCOUNT="NEW_ACCOUNT",r.USER_SIGN_IN="USER_SIGN_IN",r.IDENTITY_CREATED="IDENTITY_CREATED",r.IDENTITY_DELETED="IDENTITY_DELETED",r.CREDENTIALS_IMPORTED="CREDENTIALS_IMPORTED",r.CREDENTIALS_SHARED="CREDENTIALS_SHARED",r.BIND_EMAIL="BIND_EMAIL",r.BIND_BROWSER="BIND_BROWSER",r.PASSWORD_CHANGED="PASSWORD_CHANGED"},63491:function(e,t,n){"use strict";n.d(t,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return r},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var i,r,a=n(92e3),l=n(36079);(i=r||(r={}))[i.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",i[i.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",i[i.EmailSignIn=2]="EmailSignIn";let s="ongoingflowoperation",o="postsigninurl";function getOnGoingFlowOperation(){return r[localStorage.getItem(s)]}function setOnGoingFlowOperation(e){localStorage.setItem(s,r[e])}function clearOnGoingFlowOperation(){localStorage.removeItem(s)}function setPostSignInUrl(e){l.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(o,e)}function clearPostSignInUrl(){l.k.log("flow","Clearing post sign in url"),localStorage.removeItem(o)}function usePostSignInFlow(){let e=(0,a.useRouter)();return{navigateToPostSignInLandingPage(t){let n=localStorage.getItem(o);if(n)l.k.log("flow","Navigating to post sign in landing page:",n),e.replace(n),clearPostSignInUrl();else{let n=t||"/dashboard";l.k.log("flow","Navigating to post sign in landing page ".concat(n)),e.push(n)}}}}},61568:function(e,t,n){"use strict";n.d(t,{S:function(){return fetchIntent},h:function(){return fulfilIntentRequest}});var i=n(60230),r=n(23965);let Intent=class Intent{static async fromJson(e){let t=new Intent;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}};var a=n(29748),l=n(91395),s=n(36079);function _templateObject(){let e=(0,i._)(["\n      query GetIntentRequest($intentId: String!) {\n        intent (id: $intentId) {\n          ","\n        }\n      }\n    "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,i._)(["\n      mutation FulfilIntentRequest($input: FulfilIntentInput!) {\n        fulfilIntent (input: $input)\n      }\n    "]);return _templateObject1=function(){return e},e}async function fetchIntent(e){var t;let n=await (0,a.Pt)(async()=>(await (0,l.W)()).query({query:(0,r.Ps)(_templateObject(),"\n  id\n  createdAt\n  type\n  redirectUrl\n  requestPayload\n  responsePayload\n"),variables:{intentId:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.intent){let e=await Intent.fromJson(n.data.intent);return s.k.log("intents","Fetched intent:",e),e}return s.k.warn("intents","No intent found for id ".concat(e)),null}async function fulfilIntentRequest(e,t){var n;let i=await (0,a.Pt)(async()=>(await (0,l.W)()).mutate({mutation:(0,r.Ps)(_templateObject1()),variables:{input:{intentId:e,payload:t}}}));return(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.fulfilIntent)?(s.k.log("intents","Successfully fulfilled intent id ".concat(e)),!0):(s.k.warn("intents","Failed to fulfil intent id ".concat(e)),!1)}},43639:function(e,t,n){"use strict";function setQueryParameter(e,t,n){let i=new URL(e),r=new URLSearchParams(i.search);return r.set(t,n),i.search=r.toString(),i.toString()}n.d(t,{Q:function(){return setQueryParameter}})},26314:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[6990,9787,9443,8218,3988,395,5295,6506,8644,1510,1711,5146,9830,378,1396,5054,2e3,3691,2917,6691,7056,9267,925,2971,7864,1744],function(){return e(e.s=22017)}),_N_E=e.O()}]);