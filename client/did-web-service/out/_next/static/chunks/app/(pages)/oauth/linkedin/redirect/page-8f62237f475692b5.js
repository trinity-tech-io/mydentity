(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4638],{79085:function(n,t,e){Promise.resolve().then(e.bind(e,10917))},31514:function(n,t,e){"use strict";var i=e(57437),a=e(74966),o=e(39830);t.Z=()=>(0,i.jsx)(a.v,{icon:(0,i.jsx)(o.JO,{className:"main-icon",icon:"simple-icons:authelia",width:"90%",height:"100%"}),preparingText:"Checking authentication, Please wait for a moment..."})},10917:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return page}});var i=e(57437),a=e(2265),o=e(24033),r=e(92e3),l=e(4778),s=e(73052),u=e(63491),c=e(60230),d=e(36079),g=e(29748),f=e(91395),p=e(23965),h=e(11059);function _templateObject(){let n=(0,c._)(["\n        mutation OauthLinkedinSignIn($input: LinkedinSignInInput!) {\n          oauthLinkedinSignIn(input: $input) { accessToken refreshToken }\n        }\n      "]);return _templateObject=function(){return n},n}function _templateObject1(){let n=(0,c._)(["\n        mutation OauthLinkedBindEmail($input: LinkedinBindEmailInput!) {\n          oauthLinkedBindEmail(input: $input)\n        }\n      "]);return _templateObject1=function(){return n},n}async function oauthLinkedinSignIn(n){d.k.log("user","oauth Linkedin sign in.");let t={code:n},e=await (0,g.Pt)(async()=>(await (0,f.W)()).mutate({mutation:(0,p.Ps)(_templateObject()),variables:{input:t}}));if(null==e||!e.data||!e.data.oauthLinkedinSignIn)return d.k.error("user","failed to oauth Linkedin sign in."),null;{let{accessToken:n,refreshToken:t}=e.data.oauthLinkedinSignIn;return(0,h.vz)(n,t)}}async function oauthLinkedinBindEmail(n){d.k.log("user","oauth Linkedin bind email.");let t={code:n},e=await (0,g.Pt)(async()=>(await (0,f.W)()).mutate({mutation:(0,p.Ps)(_templateObject1()),variables:{input:t}}));return(null==e?void 0:e.data)&&e.data.oauthLinkedBindEmail?(d.k.log("user","Oauth Linkedin email bound successfully"),!0):(d.k.error("user","failed to oauth Linkedin bind email."),!1)}var m=e(31514),page=()=>{let n=(0,r.useRouter)(),t=(0,o.useSearchParams)(),e=t.get("code"),{navigateToPostSignInLandingPage:c}=(0,u.vX)();return(0,a.useEffect)(()=>{if(e){let t=(0,u.Kt)();switch(t){case u.cX.OnBoardingEmailBinding:oauthLinkedinBindEmail(e).then(t=>{t?n.push("/account/security"):((0,u.fK)(),n.push("/account/security?error=unknown"))}).catch(t=>{t&&t instanceof l.E?((0,u.fK)(),n.push("/account/security?error=emailExists")):((0,u.fK)(),n.push("/account/security?error=unknown"))});break;case u.cX.EmailSignIn:oauthLinkedinSignIn(e).then(t=>{t?((0,u.fK)(),c()):((0,u.fK)(),n.push("/signin?error=unknownLinkedin"))}).catch(t=>{t instanceof s.h&&((0,u.fK)(),n.push("/signin?error=oauthLinkedinEmailNotExists"))});break;default:alert("Invalid operation, please try again.");return}}else alert("LinkedinRedirect: No code from Linked authentication callback.")},[]),(0,i.jsx)("div",{children:(0,i.jsx)(m.Z,{})})}},74966:function(n,t,e){"use strict";e.d(t,{v:function(){return PreparingContainer}});var i=e(57437),a=e(96507),o=e(13457),r=e(43226),l=e(35843);let s=(0,l.ZP)(a.Z)(n=>{let{theme:t}=n;return{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:28,width:150,height:150,background:"transparent",border:"3px solid #3c3c3c",borderRadius:"50%",textAlign:"center",lineHeight:150,boxShadow:"0 0 20px rgba(0,0,0,.5)","&:before":{content:"''",position:"absolute",top:-3,left:-3,width:"calc(100% + 6px)",height:"calc(100% + 6px)",borderTop:"3px solid #f3f",borderRight:"3px solid #f3f",borderBottom:"3px solid transparent",borderRadius:"50%",animation:"rotate 3s linear infinite",transition:"all 1s ease-in"},".main-icon":{animation:"beating 1s linear infinite"},"span.bubble":{display:"block",position:"absolute",top:"calc(50% - 2px)",left:"50%",width:"50%",height:4,background:"transparent",transformOrigin:"left",animation:"rotate 3s linear infinite",rotate:"45deg","&:before":{content:"''",position:"absolute",width:16,height:16,borderRadius:"50%",background:"#f3f",top:-6,right:-8,boxShadow:"0 0 20px #f3f"}},"@keyframes rotate":{"0%":{filter:"hue-rotate(0deg)",transform:"rotate(0deg)"},"100%":{filter:"hue-rotate(360deg)",transform:"rotate(360deg)"}},"@keyframes beating":{"0%":{width:"90%"},"25%":{width:"85%"},"50%":{width:"90%"},"75%":{width:"95%"},"100%":{width:"90%"}}}}),PreparingContainer=n=>{let{icon:t,preparingText:e}=n;return(0,i.jsxs)(o.Z,{spacing:2,alignItems:"center",sx:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,i.jsxs)(s,{children:[t,(0,i.jsx)("span",{className:"bubble"})]}),(0,i.jsx)(r.Z,{variant:"body1",textAlign:"center",children:e})]})}},63491:function(n,t,e){"use strict";e.d(t,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return a},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var i,a,o=e(92e3),r=e(36079);(i=a||(a={}))[i.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",i[i.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",i[i.EmailSignIn=2]="EmailSignIn";let l="ongoingflowoperation",s="postsigninurl";function getOnGoingFlowOperation(){return a[localStorage.getItem(l)]}function setOnGoingFlowOperation(n){localStorage.setItem(l,a[n])}function clearOnGoingFlowOperation(){localStorage.removeItem(l)}function setPostSignInUrl(n){r.k.log("flow","Setting post sign in url to:",n),localStorage.setItem(s,n)}function clearPostSignInUrl(){r.k.log("flow","Clearing post sign in url"),localStorage.removeItem(s)}function usePostSignInFlow(){let n=(0,o.useRouter)();return{navigateToPostSignInLandingPage(t){let e=localStorage.getItem(s);if(e)r.k.log("flow","Navigating to post sign in landing page:",e),n.replace(e),clearPostSignInUrl();else{let e=t||"/dashboard";r.k.log("flow","Navigating to post sign in landing page ".concat(e)),n.push(e)}}}}}},function(n){n.O(0,[6990,9787,9443,8218,3988,395,6506,8644,1711,9830,1396,2e3,8995,7056,2971,7864,1744],function(){return n(n.s=79085)}),_N_E=n.O()}]);