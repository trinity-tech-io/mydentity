(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1456],{40471:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var n=r(20791),i=r(13428),a=r(2265),l=r(57042),o=r(95600),s=r(99538),c=r(89975),d=r(28702),u=r(41101),f=r(35843),m=r(87927),h=r(26520),p=r(25702);function v(e){return(0,p.Z)("MuiLinearProgress",e)}(0,h.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var x=r(57437);let b=["className","color","value","valueBuffer","variant"],g=e=>e,y,Z,w,j,k,C,S=(0,s.F4)(y||(y=g`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),I=(0,s.F4)(Z||(Z=g`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),N=(0,s.F4)(w||(w=g`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),P=e=>{let{classes:t,variant:r,color:n}=e,i={root:["root",`color${(0,d.Z)(n)}`,r],dashed:["dashed",`dashedColor${(0,d.Z)(n)}`],bar1:["bar",`barColor${(0,d.Z)(n)}`,("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","buffer"!==r&&`barColor${(0,d.Z)(n)}`,"buffer"===r&&`color${(0,d.Z)(n)}`,("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,o.Z)(i,v,t)},D=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,c.$n)(e.palette[t].main,.62):(0,c._j)(e.palette[t].main,.5),R=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`color${(0,d.Z)(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>(0,i.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:D(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"})),$=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.dashed,t[`dashedColor${(0,d.Z)(r.color)}`]]}})(({ownerState:e,theme:t})=>{let r=D(t,e.color);return(0,i.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},(0,s.iv)(j||(j=g`
    animation: ${0} 3s infinite linear;
  `),N)),q=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t[`barColor${(0,d.Z)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(k||(k=g`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),S)),z=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t[`barColor${(0,d.Z)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:D(t,e.color),transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(C||(C=g`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),I)),M=a.forwardRef(function(e,t){let r=(0,m.Z)({props:e,name:"MuiLinearProgress"}),{className:a,color:o="primary",value:s,valueBuffer:c,variant:d="indeterminate"}=r,f=(0,n.Z)(r,b),h=(0,i.Z)({},r,{color:o,variant:d}),p=P(h),v=(0,u.Z)(),g={},y={bar1:{},bar2:{}};if(("determinate"===d||"buffer"===d)&&void 0!==s){g["aria-valuenow"]=Math.round(s),g["aria-valuemin"]=0,g["aria-valuemax"]=100;let e=s-100;"rtl"===v.direction&&(e=-e),y.bar1.transform=`translateX(${e}%)`}if("buffer"===d&&void 0!==c){let e=(c||0)-100;"rtl"===v.direction&&(e=-e),y.bar2.transform=`translateX(${e}%)`}return(0,x.jsxs)(R,(0,i.Z)({className:(0,l.Z)(p.root,a),ownerState:h,role:"progressbar"},g,{ref:t},f,{children:["buffer"===d?(0,x.jsx)($,{className:p.dashed,ownerState:h}):null,(0,x.jsx)(q,{className:p.bar1,ownerState:h,style:y.bar1}),"determinate"===d?null:(0,x.jsx)(z,{className:p.bar2,ownerState:h,style:y.bar2})]}))});var O=M},8864:function(e,t,r){"use strict";var n=r(20791),i=r(13428),a=r(2265),l=r(57042),o=r(95600),s=r(35843),c=r(87927),d=r(78342),u=r(77820),f=r(57437);let m=["className"],h=e=>{let{alignItems:t,classes:r}=e;return(0,o.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},d.f,r)},p=(0,s.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>(0,i.Z)({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===t.alignItems&&{marginTop:8})),v=a.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiListItemIcon"}),{className:o}=r,s=(0,n.Z)(r,m),d=a.useContext(u.Z),v=(0,i.Z)({},r,{alignItems:d.alignItems}),x=h(v);return(0,f.jsx)(p,(0,i.Z)({className:(0,l.Z)(x.root,o),ownerState:v,ref:t},s))});t.Z=v},66798:function(e,t,r){Promise.resolve().then(r.bind(r,67338))},22706:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let n=r(21024),i=n._(r(2265)),a=i.default.createContext(null)},25007:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var n=r(57437),i=r(40471),a=r(57042);let l=e=>{let{className:t}=e;return(0,n.jsxs)("div",{className:(0,a.Z)("flex flex-col w-full",t),children:[(0,n.jsx)("div",{className:"italic",children:"Preparing request, hold on..."}),(0,n.jsx)(i.Z,{})]})}},13376:function(e,t,r){"use strict";r.d(t,{O:function(){return m}});var n=r(57437),i=r(711),a=r(13457),l=r(3283),o=r(43226),s=r(70518),c=r(57042),d=r(16691),u=r.n(d),f=r(2265);let m=e=>{let{applicationDID:t,className:r}=e,[d,m]=(0,f.useState)(null),[h,p]=(0,f.useState)(null),[v,x]=(0,f.useState)(!1);console.log(r);let b=async()=>{if(t){let e=await s._.resolveDIDDocument(t);x(!0),e?(m(await e.getRepresentativeIcon()),p(await e.getRepresentativeOwnerName())):(m(null),p(null))}};return((0,f.useEffect)(()=>{b()},[t]),v&&t)?(0,n.jsxs)("div",{className:(0,c.Z)("flex flex-col items-center",r),children:[(0,n.jsx)(a.Z,{direction:"row",justifyContent:"center",children:(0,n.jsx)(l.Z,{sx:{width:120,height:120},children:d&&(0,n.jsx)(u(),{src:d,alt:"",width:120,height:120})})}),(0,n.jsx)(o.Z,{mt:1,fontWeight:600,children:h})]}):(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(i.a,{width:120,height:120})})}},67338:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return es}});var n=r(57437),i=r(85688),a=r(24033),l=r(2265),o=r(25007),s=r(12131),c=r(11920),d=r(451),u=r(29281),f=r(47101),m=r(90786),h=r(53932),p=r(8106),v=r(3883),x=r(69990),b=r(53445),g=r(13376),y=r(96507),Z=r(54986),w=r(35266),j=r(77795),k=r(70555),C=r(72502),S=r(20791),I=r(13428),N=r(57042),P=r(95600),D=r(89975),R=r(28702),$=r(35843),q=r(73292),z=r(59592),M=r(45295),O=r(26520),B=r(25702);function F(e){return(0,B.Z)("PrivateSwitchBase",e)}(0,O.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);let E=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],L=e=>{let{classes:t,checked:r,disabled:n,edge:i}=e,a={root:["root",r&&"checked",n&&"disabled",i&&`edge${(0,R.Z)(i)}`],input:["input"]};return(0,P.Z)(a,F,t)},_=(0,$.ZP)(M.Z)(({ownerState:e})=>(0,I.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})),A=(0,$.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),V=l.forwardRef(function(e,t){let{autoFocus:r,checked:i,checkedIcon:a,className:l,defaultChecked:o,disabled:s,disableFocusRipple:c=!1,edge:d=!1,icon:u,id:f,inputProps:m,inputRef:h,name:p,onBlur:v,onChange:x,onFocus:b,readOnly:g,required:y=!1,tabIndex:Z,type:w,value:j}=e,k=(0,S.Z)(e,E),[C,P]=(0,q.Z)({controlled:i,default:!!o,name:"SwitchBase",state:"checked"}),D=(0,z.Z)(),R=s;D&&void 0===R&&(R=D.disabled);let $="checkbox"===w||"radio"===w,M=(0,I.Z)({},e,{checked:C,disabled:R,disableFocusRipple:c,edge:d}),O=L(M);return(0,n.jsxs)(_,(0,I.Z)({component:"span",className:(0,N.Z)(O.root,l),centerRipple:!0,focusRipple:!c,disabled:R,tabIndex:null,role:void 0,onFocus:e=>{b&&b(e),D&&D.onFocus&&D.onFocus(e)},onBlur:e=>{v&&v(e),D&&D.onBlur&&D.onBlur(e)},ownerState:M,ref:t},k,{children:[(0,n.jsx)(A,(0,I.Z)({autoFocus:r,checked:i,defaultChecked:o,className:O.input,disabled:R,id:$?f:void 0,name:p,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;P(t),x&&x(e,t)},readOnly:g,ref:h,required:y,ownerState:M,tabIndex:Z,type:w},"checkbox"===w&&void 0===j?{}:{value:j},m)),C?a:u]}))});var J=r(59782),T=(0,J.Z)((0,n.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),H=(0,J.Z)((0,n.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),U=(0,J.Z)((0,n.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),W=r(87927);function Q(e){return(0,B.Z)("MuiCheckbox",e)}let X=(0,O.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),G=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],K=e=>{let{classes:t,indeterminate:r,color:n,size:i}=e,a={root:["root",r&&"indeterminate",`color${(0,R.Z)(n)}`,`size${(0,R.Z)(i)}`]},l=(0,P.Z)(a,Q,t);return(0,I.Z)({},t,l)},Y=(0,$.ZP)(V,{shouldForwardProp:e=>(0,$.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,"default"!==r.color&&t[`color${(0,R.Z)(r.color)}`]]}})(({theme:e,ownerState:t})=>(0,I.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,D.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${X.checked}, &.${X.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${X.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),ee=(0,n.jsx)(H,{}),et=(0,n.jsx)(T,{}),er=(0,n.jsx)(U,{}),en=l.forwardRef(function(e,t){var r,i;let a=(0,W.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:o=ee,color:s="primary",icon:c=et,indeterminate:d=!1,indeterminateIcon:u=er,inputProps:f,size:m="medium",className:h}=a,p=(0,S.Z)(a,G),v=d?u:c,x=d?u:o,b=(0,I.Z)({},a,{color:s,indeterminate:d,size:m}),g=K(b);return(0,n.jsx)(Y,(0,I.Z)({type:"checkbox",inputProps:(0,I.Z)({"data-indeterminate":d},f),icon:l.cloneElement(v,{fontSize:null!=(r=v.props.fontSize)?r:m}),checkedIcon:l.cloneElement(x,{fontSize:null!=(i=x.props.fontSize)?i:m}),ownerState:b,ref:t,className:(0,N.Z)(g.root,h)},p,{classes:g}))}),ei=e=>{let{claimDisplayEntry:t,credentialDisplayEntry:r,updateSummary:i}=e,[a,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{r&&o(r.selected)},[r]);let s=(e,t)=>{let r=t.selected;if(v.k.log("RequestCredentialsIntent","onCredentialSelection",e,t),r)1===e.claimDescription.min&&1===e.claimDescription.max||(t.selected=!1);else{if(1===e.claimDescription.min&&1===e.claimDescription.max){let t=c(e);t&&(t.selected=!1)}t.selected=!0}o(t.selected),i()},c=e=>e.matchingCredentials.find(e=>e.selected);return(0,n.jsx)("div",{className:"flex flex-row mt-4 gap-6",children:(0,n.jsxs)(C.Z,{onClick:()=>s(t,r),style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("div",{style:{marginRight:10},children:(0,n.jsx)(j.J,{credential:r.credential,width:60,height:60})}),(0,n.jsx)(k.Z,{credential:r.credential}),(0,n.jsx)(en,{checked:a})]})})},ea=e=>{let{claimDisplayEntry:t}=e,[r,i]=(0,l.useState)("");(0,l.useEffect)(()=>{t&&s()},[t]);let a=e=>{let t=o(e);return e.claimDescription.min===e.claimDescription.max?"".concat(t," / ").concat(e.claimDescription.min):0===e.claimDescription.min?"".concat(t," / max ").concat(e.claimDescription.max):"".concat(t," / min ").concat(e.claimDescription.min,", max ").concat(e.claimDescription.max)},o=e=>e.matchingCredentials.reduce((e,t)=>t.selected?e+1:e,0),s=()=>{let e=a(t);i(e)};return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row p-4",children:[(0,n.jsxs)("div",{className:"flex flex-row p-1",children:[" ",t.claimDescription.reason," "]}),(0,n.jsx)("div",{className:"absolute right-1 p-1",children:r})]}),t.matchingCredentials&&(0,n.jsx)(w.Z,{component:"nav","aria-label":"main mailbox folders",children:t.matchingCredentials.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)(ei,{credentialDisplayEntry:e,claimDisplayEntry:t,updateSummary:s}),(0,n.jsx)(Z.Z,{})]},e.credential.id))})]},t.claimDescription.reason)})},el=e=>{let{claimDisplayEntryList:t}=e;return(0,n.jsxs)("div",{className:"col-span-full p-2 xl:col-span-5 bg-white dark:bg-slate-800 shadow-lg rounded-sm border border-slate-200 dark:border-slate-700",children:["List of credentials",(0,n.jsx)(Z.Z,{}),(0,n.jsx)(y.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:t&&(0,n.jsx)(w.Z,{component:"nav","aria-label":"main mailbox folders",children:t.map(e=>(0,n.jsx)("div",{className:"flex flex-col flex-1",children:(0,n.jsx)(ea,{claimDisplayEntry:e})},e.claimDescription.reason))})})]})},eo=e=>{let{intent:t}=e,a="RequestCredentialsIntent",[o]=(0,d.V)(h.B),[y]=(0,d.V)(null==o?void 0:o.get("credentials").credentials$),[Z,w]=(0,l.useState)(!1),[j,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)(""),[I,N]=(0,l.useState)("Demo App"),[P,D]=(0,l.useState)(!1),[R,$]=(0,l.useState)(null),[q]=(0,d.V)(x.jU),z=t.requestPayload,M=t.requestPayload.caller;v.k.log(a,"payload",z),(0,l.useEffect)(()=>{O(),y&&z&&(B(z),L(z).then(e=>{$(e)}))},[y,z]);let O=()=>{k(!1)},B=async e=>{let t=e.caller;if(t){let e=await p.n.isPublished(t);if(e){let e=await p.n.getIssuerName(t);v.k.log(a,"Requesting App name:",e),N(e);let r=await p.n.getIssuerAvatar(t);S(r)}else v.k.warn(a,"Requesting App is not published.")}},F=e=>{let t=JSON.parse(JSON.stringify(e.claims)),r=E(e);return r&&(t=r),t.forEach(e=>(void 0===e.min&&(e.min=1),void 0===e.max&&(e.max=1),e)),t},E=e=>{if("_version"in e)return null;{let t=[],r=e.claims;for(let e of r){let r=c.DID.claimDescription(e.reason).withMin(e.min).withMax(e.max).withNoMatchRecommendations(e.noMatchRecommendations).withClaim(new c.DID.Claim().withQuery(e.query).withIssuers(e.issuers));t.push(r)}return t}},L=async e=>{let t=[],n=F(e);for(let e of n){v.k.log(a,"Organizing claim",e);let n=[];for(let e of y){let t=JSON.parse(await e.verifiableCredential.toString());await _(e.verifiableCredential,t),n.push(t)}let i=[],l=[];for(let t of e.claims){try{let e=await r.e(9733).then(r.t.bind(r,73820,23));i=i.concat(e.query(n,t.query)),v.k.log(a,"Matching credentials (json)",i)}catch(e){v.k.warn(a,"JSON Path exception",e)}l=l.concat(i.map(e=>{let r=y.find(t=>t.verifiableCredential.getId().toString()===e.id);if(t.issuers){let e=t.issuers.find(e=>e===r.verifiableCredential.getIssuer().toString());if(!e)return null}return{credential:r,selected:!1,expired:!1}}).filter(e=>null!==e))}1==e.min&&e.max===e.min&&1===l.length&&(l[0].selected=!0);let o={claimDescription:e,matchingCredentials:l};t.push(o)}return D(!0),v.k.log(a,"Organized claims",t),t},_=async(e,t)=>{let r=await m.N.resolveTypesWithContexts(e);for(let e of r){let r="".concat(e.context,"#").concat(e.shortType),n=t.type;0>n.indexOf(r)&&n.push(r)}},A=()=>{let e=[];for(let t of R)for(let r of t.matchingCredentials)r.selected&&e.push(r.credential);return v.k.log(a,"Deliverable credentials:",e),e},V=async()=>{w(!0);let e=A(),r=await o.createVerifiablePresentation(e.map(e=>e.verifiableCredential),z.realm,z.nonce);if(!r){w(!1);return}let n=r.toString(!0),a=await (0,i.h)(t.id,n);if(a){await f.L.createActivity({type:u.T.CREDENTIALS_SHARED,credentialsCount:e.length,appDid:M}),z.caller&&await o.get("applications").recordRequestedCredentials(z.caller,e);let r=(0,b.Q)(t.redirectUrl,"rid",t.id);window.location.href=r}};return(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsxs)("div",{children:[(0,n.jsx)(g.O,{applicationDID:M,className:"mb-4"}),(0,n.jsxs)("div",{className:"text-center mb-4",children:["This application is requesting to access some of your information.",(0,n.jsx)("tr",{}),"Please review profile entries you want to share:"]}),(0,n.jsx)(el,{claimDisplayEntryList:R}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(s.c,{className:"w-1/2",onClick:()=>{let e=(0,b.Q)(t.redirectUrl,"rid",t.id);window.location.href=e},children:"Cancel"}),(0,n.jsx)(s.c,{className:"w-1/2",onClick:V,busy:Z,children:"Approve"})]})]}),!o&&"Make an identity active to continue"]})};var es=()=>{let e=(0,a.useSearchParams)(),t=e.get("rid"),[r,s]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{t&&(0,i.S)(t).then(e=>{s(!1),d(e),console.log("intent result",e)})},[t]),(0,n.jsxs)("div",{className:"col-span-full",children:[r&&(0,n.jsx)(o.O,{className:"mb-6"}),!r&&c&&(0,n.jsx)(eo,{intent:c}),!r&&!c&&(0,n.jsx)("div",{children:"No matching request"})]})}},77795:function(e,t,r){"use strict";r.d(t,{J:function(){return c}});var n=r(57437),i=r(451),a=r(3283),l=r(57042),o=r(16691),s=r.n(o);let c=e=>{let{credential:t,width:r=60,height:o=60,className:c}=e,[d]=(0,i.V)(null==t?void 0:t.representativeIcon$);return(0,n.jsx)(a.Z,{sx:{width:r,height:o},className:(0,l.Z)(c),children:"string"==typeof d?(0,n.jsx)(s(),{src:d,alt:"",width:r,height:o}):d})}},70555:function(e,t,r){"use strict";var n=r(57437),i=r(451),a=r(96507),l=r(43226),o=r(28874),s=r(72502),c=r(8864),d=r(16691),u=r.n(d);t.Z=function(e){let{credential:t}=e,[r]=(0,i.V)(null==t?void 0:t.issuerInfo$);return(0,n.jsxs)(a.Z,{sx:{textAlign:"left",width:"100%"},children:[(0,n.jsx)(l.Z,{gutterBottom:!0,variant:"h6",children:t.getDisplayableTitle()}),(0,n.jsx)(l.Z,{variant:"body1",sx:{color:"text.secondary"},children:t.getDisplayValue()}),(0,n.jsxs)(o.ZP,{container:!0,spacing:2,sx:{mt:1},children:[t.isSensitiveCredential()&&(0,n.jsx)(l.Z,{fontSize:14,color:"#FF6347",children:"Sensitive"}),!t.selfIssued()&&(null==r?void 0:r.isPublished)&&(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(c.Z,{children:(0,n.jsx)(u(),{unoptimized:!0,src:null==r?void 0:r.avatarIcon,width:30,height:30,style:{borderRadius:"50%"},alt:""})}),(0,n.jsxs)(l.Z,{variant:"body1",sx:{color:"text.secondary"},children:["Created by ",null==r?void 0:r.name]})]})]})]})}},711:function(e,t,r){"use strict";r.d(t,{a:function(){return a}});var n=r(57437),i=r(57042);r(70874);let a=e=>{let{className:t,width:r,height:a}=e;return(0,n.jsx)("div",{className:(0,i.Z)("loading-circle",t),style:{...r&&{width:r},...a&&{height:a}},children:(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("div",{className:"animated"})})})}},85688:function(e,t,r){"use strict";r.d(t,{S:function(){return u},h:function(){return f}});var n=r(60230),i=r(23965);class a{static async fromJson(e){let t=new a;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}}var l=r(51385),o=r(76506),s=r(3883);function c(){let e=(0,n._)(["\n      query GetIntentRequest($intentId: String!) {\n        intent (id: $intentId) {\n          ","\n        }\n      }\n    "]);return c=function(){return e},e}function d(){let e=(0,n._)(["\n      mutation FulfilIntentRequest($input: FulfilIntentInput!) {\n        fulfilIntent (input: $input)\n      }\n    "]);return d=function(){return e},e}async function u(e){var t;let r=await (0,l.Pt)(async()=>(await (0,o.W)()).query({query:(0,i.Ps)(c(),"\n  id\n  createdAt\n  type\n  redirectUrl\n  requestPayload\n  responsePayload\n"),variables:{intentId:e}}));if(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.intent){let e=await a.fromJson(r.data.intent);return s.k.log("intents","Fetched intent:",e),e}return s.k.warn("intents","No intent found for id ".concat(e)),null}async function f(e,t){var r;let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,i.Ps)(d()),variables:{input:{intentId:e,payload:t}}}));return(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.fulfilIntent)?(s.k.log("intents","Successfully fulfilled intent id ".concat(e)),!0):(s.k.warn("intents","Failed to fulfil intent id ".concat(e)),!1)}},53445:function(e,t,r){"use strict";function n(e,t,r){let n=new URL(e),i=new URLSearchParams(n.search);return i.set(t,r),n.search=i.toString(),n.toString()}r.d(t,{Q:function(){return n}})},70874:function(){},24033:function(e,t,r){e.exports=r(68165)}},function(e){e.O(0,[6990,3988,395,5295,1510,4440,6171,8098,7998,8262,8874,1385,2971,596,1744],function(){return e(e.s=66798)}),_N_E=e.O()}]);