(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4638],{57139:function(n,i,t){Promise.resolve().then(t.bind(t,10917))},10917:function(n,i,t){"use strict";t.r(i),t.d(i,{default:function(){return E}});var e=t(57437),a=t(4778),o=t(73052),r=t(40471),u=t(63491),l=t(60230),c=t(36079),s=t(29748),d=t(91395),g=t(23965),f=t(11059);function h(){let n=(0,l._)(["\n        mutation OauthLinkedinSignIn($input: LinkedinSignInInput!) {\n          oauthLinkedinSignIn(input: $input) { accessToken refreshToken }\n        }\n      "]);return h=function(){return n},n}function k(){let n=(0,l._)(["\n        mutation OauthLinkedBindEmail($input: LinkedinBindEmailInput!) {\n          oauthLinkedBindEmail(input: $input)\n        }\n      "]);return k=function(){return n},n}async function m(n){c.k.log("user","oauth Linkedin sign in.");let i={code:n},t=await (0,s.Pt)(async()=>(await (0,d.W)()).mutate({mutation:(0,g.Ps)(h()),variables:{input:i}}));if(null==t||!t.data||!t.data.oauthLinkedinSignIn)return c.k.error("user","failed to oauth Linkedin sign in."),null;{let{accessToken:n,refreshToken:i}=t.data.oauthLinkedinSignIn;return(0,f.vz)(n,i)}}async function p(n){c.k.log("user","oauth Linkedin bind email.");let i={code:n},t=await (0,s.Pt)(async()=>(await (0,d.W)()).mutate({mutation:(0,g.Ps)(k()),variables:{input:i}}));return(null==t?void 0:t.data)&&t.data.oauthLinkedBindEmail?(c.k.log("user","Oauth Linkedin email bound successfully"),!0):(c.k.error("user","failed to oauth Linkedin bind email."),!1)}var v=t(24033),w=t(2265),E=()=>{let n=(0,v.useRouter)(),i=(0,v.useSearchParams)(),t=i.get("code"),{navigateToPostSignInLandingPage:l}=(0,u.vX)();return(0,w.useEffect)(()=>{if(!t){alert("GoogleRedirect: No code from Linked authentication callback.");return}let i=(0,u.Kt)();switch(i){case u.cX.OnBoardingEmailBinding:p(t).then(i=>{i?n.push("/account/security"):((0,u.fK)(),n.push("/account/security?error=unknown"))}).catch(i=>{i&&i instanceof a.E?((0,u.fK)(),n.push("/account/security?error=emailExists")):((0,u.fK)(),n.push("/account/security?error=unknown"))});break;case u.cX.EmailSignIn:m(t).then(i=>{i?((0,u.fK)(),l()):((0,u.fK)(),n.push("/signin?error=unknownLinkedin"))}).catch(i=>{i instanceof o.h&&((0,u.fK)(),n.push("/signin?error=oauthLinkedinEmailNotExists"))});break;default:alert("Invalid operation, please try again.");return}},[t,n]),(0,e.jsx)("div",{className:"col-span-full",children:(0,e.jsxs)("div",{className:"flex flex-col w-full",children:[(0,e.jsx)("div",{className:"italic",children:"Checking authentication, hold on..."}),(0,e.jsx)(r.Z,{})]})})}},63491:function(n,i,t){"use strict";t.d(i,{$Y:function(){return s},Ad:function(){return f},Kt:function(){return c},cX:function(){return a},fK:function(){return d},qC:function(){return g},vX:function(){return h}});var e,a,o=t(92e3),r=t(36079);(e=a||(a={}))[e.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",e[e.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",e[e.EmailSignIn=2]="EmailSignIn";let u="ongoingflowoperation",l="postsigninurl";function c(){return a[localStorage.getItem(u)]}function s(n){localStorage.setItem(u,a[n])}function d(){localStorage.removeItem(u)}function g(n){r.k.log("flow","Setting post sign in url to:",n),localStorage.setItem(l,n)}function f(){r.k.log("flow","Clearing post sign in url"),localStorage.removeItem(l)}function h(){let n=(0,o.useRouter)();return{navigateToPostSignInLandingPage(i){let t=localStorage.getItem(l);if(t)r.k.log("flow","Navigating to post sign in landing page:",t),n.replace(t),f();else{let t=i||"/dashboard";r.k.log("flow","Navigating to post sign in landing page ".concat(t)),n.replace(t)}}}}}},function(n){n.O(0,[6990,9787,9443,8218,3988,395,8321,9152,1396,2e3,2643,3262,2971,7864,1744],function(){return n(n.s=57139)}),_N_E=n.O()}]);