(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2788],{40643:function(e,t,n){Promise.resolve().then(n.bind(n,39065))},39065:function(e,t,n){"use strict";n.r(t);var i=n(57437),r=n(69071),a=n(42937),s=n(24033),u=n(29281),c=n(3883),l=n(451),o=n(69990);t.default=()=>{let{mounted:e}=(0,a.s)(),t=(0,s.useRouter)(),[n]=(0,l.V)(o.jU),d=()=>{t.replace("/profile")},f=async e=>{let t=await (null==n?void 0:n.get("activity").createActivity(u.T.DID_CREATED,{did:e.did}));t||c.k.warn("failed to create activity for did ".concat(e.did," created.")),d()};return e?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.K,{onIdentityCreated:f})}):null}},69071:function(e,t,n){"use strict";n.d(t,{K:function(){return m}});var i=n(57437),r=n(12131),a=n(57135),s=n(451),u=n(42937),c=n(67212),l=n(96556),o=n(87401),d=n(69990),f=n(2265),p=(0,n(29761).d)(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),v=n(70163),y=(new(n(425)).y(function(e){return e.complete()}),n(72849)),b=n(46567),h=n(77088);let m=e=>{let{suggestedName:t="",onIdentityCreating:n,onIdentityCreated:m}=e,w=(0,f.useRef)(null),[x]=(0,s.V)(d.jU),{mounted:g}=(0,u.s)(),{showSuccessToast:j}=(0,l.p)(),[C,E]=(0,f.useState)(!1),[N,k]=(0,f.useState)(!1),[I,S]=(0,f.useState)(!1),[_,D]=(0,f.useState)(!1),R=async e=>{null==e||e.preventDefault();let t=w.current.value;E(!0),null==n||n(),k(!0);let i=await (0,a.HL)(async()=>await x.get("identity").createIdentity(t));k(!1),i&&(o.D.setActiveIdentity(i),i.get("profile").profileCredentials$.pipe(function(e,t){var n=arguments.length>=2;return function(t){var i;return t.pipe(e?(0,v.h)(function(n,i){return e(n,i,t)}):h.y,(0,y.e)(function(e,t){var n=0;e.subscribe((0,b.x)(t,function(e){++n<=1&&(t.next(e),1<=n&&t.complete())}))}),n?(i=void 0,(0,y.e)(function(e,t){var n=!1;e.subscribe((0,b.x)(t,function(e){n=!0,t.next(e)},function(){n||t.next(i),t.complete()}))})):(0,y.e)(function(e,t){var n=!1;e.subscribe((0,b.x)(t,function(e){n=!0,t.next(e)},function(){return n?t.complete():t.error(new p)}))}))}}(e=>!!e)).subscribe(async()=>{await i.get("profile").createInitialNameCredential(t),S(!0),await i.get("publication").awaitIdentityPublished(),S(!1),D(!0),await i.get("hive").awaitHiveVaultReady(),D(!1),j("Your new identity was created!"),m(i)}))};return g?(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("form",{className:"border-b border-slate-200 dark:border-slate-700",onSubmit:R,children:(0,i.jsx)("div",{className:"pt-2 pb-2",children:(0,i.jsx)(c.Z,{className:"w-full",label:"Identity name",inputRef:w,autoFocus:!0,defaultValue:t,variant:"outlined",size:"small"})})}),(0,i.jsx)(r.c,{onClick:R,busy:C,children:"Create this identity"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[N&&"Creating the secure identity",I&&"Registering identity",_&&"Creating storage"]})]}):null}},42937:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(2265);let r=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),{mounted:e}}},96556:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var i=n(36953);function r(){let{enqueueSnackbar:e}=(0,i.Ds)();return{showSuccessToast:t=>{e(t,{variant:"success"})},showErrorToast:t=>{e(t,{variant:"error"})}}}},24033:function(e,t,n){e.exports=n(68165)}},function(e){e.O(0,[6990,6110,1510,8920,4057,6953,1385,2971,596,1744],function(){return e(e.s=40643)}),_N_E=e.O()}]);