(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2788],{40643:function(e,t,n){Promise.resolve().then(n.bind(n,39065))},39065:function(e,t,n){"use strict";n.r(t);var i=n(57437),r=n(69071),s=n(42937),a=n(24033),u=n(29281),c=n(451),l=n(69990),o=n(47101);t.default=()=>{let{mounted:e}=(0,s.s)(),t=(0,a.useRouter)(),[n]=(0,c.V)(l.jU),f=()=>{t.replace("/profile")},d=async e=>{await o.L.createActivity({type:u.T.IDENTITY_CREATED,identityStr:e.did}),f()};return e?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.K,{onIdentityCreated:d})}):null}},69071:function(e,t,n){"use strict";n.d(t,{K:function(){return m}});var i=n(57437),r=n(12131),s=n(57135),a=n(451),u=n(42937),c=n(67212),l=n(96556),o=n(77358),f=n(69990),d=n(2265),p=(0,n(29761).d)(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),v=n(70163),y=(new(n(425)).y(function(e){return e.complete()}),n(72849)),b=n(46567),h=n(77088);let m=e=>{let{suggestedName:t="",onIdentityCreating:n,onIdentityCreated:m}=e,x=(0,d.useRef)(null),[w]=(0,a.V)(f.jU),{mounted:g}=(0,u.s)(),{showSuccessToast:C}=(0,l.p)(),[j,E]=(0,d.useState)(!1),[N,I]=(0,d.useState)(!1),[S,_]=(0,d.useState)(!1),[k,R]=(0,d.useState)(!1),T=async e=>{null==e||e.preventDefault();let t=x.current.value;E(!0),null==n||n(),I(!0);let i=await (0,s.HL)(async()=>await w.get("identity").createIdentity(t));I(!1),i&&(o.D.setActiveIdentity(i),i.get("profile").profileCredentials$.pipe(function(e,t){var n=arguments.length>=2;return function(t){var i;return t.pipe(e?(0,v.h)(function(n,i){return e(n,i,t)}):h.y,(0,y.e)(function(e,t){var n=0;e.subscribe((0,b.x)(t,function(e){++n<=1&&(t.next(e),1<=n&&t.complete())}))}),n?(i=void 0,(0,y.e)(function(e,t){var n=!1;e.subscribe((0,b.x)(t,function(e){n=!0,t.next(e)},function(){n||t.next(i),t.complete()}))})):(0,y.e)(function(e,t){var n=!1;e.subscribe((0,b.x)(t,function(e){n=!0,t.next(e)},function(){return n?t.complete():t.error(new p)}))}))}}(e=>!!e)).subscribe(async()=>{await i.get("profile").createInitialNameCredential(t),_(!0),await i.get("publication").awaitIdentityPublished(),_(!1),R(!0),await i.get("hive").awaitHiveVaultReady(),R(!1),C("Your new identity was created!"),m(i)}))};return g?(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("form",{className:"border-b border-slate-200 dark:border-slate-700",onSubmit:T,children:(0,i.jsx)("div",{className:"pt-2 pb-2",children:(0,i.jsx)(c.Z,{className:"w-full",label:"Identity name",inputRef:x,autoFocus:!0,defaultValue:t,variant:"outlined",size:"small",autoComplete:"off"})})}),(0,i.jsx)(r.c,{onClick:T,busy:j,children:"Create this identity"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[N&&"Creating the secure identity",S&&"Registering identity",k&&"Creating storage"]})]}):null}},42937:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(2265);let r=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),{mounted:e}}},96556:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var i=n(36953);function r(){let{enqueueSnackbar:e}=(0,i.Ds)();return{showSuccessToast:t=>{e(t,{variant:"success"})},showErrorToast:t=>{e(t,{variant:"error"})}}}},24033:function(e,t,n){e.exports=n(68165)}},function(e){e.O(0,[6990,3988,395,5295,1510,4440,6171,8098,6953,1385,2971,596,1744],function(){return e(e.s=40643)}),_N_E=e.O()}]);