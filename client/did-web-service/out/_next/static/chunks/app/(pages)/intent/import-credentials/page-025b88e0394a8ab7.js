(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9530,9513],{48727:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),l=(0,i.default)((0,a.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.Z=l},81344:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),l=(0,i.default)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=l},14819:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),l=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=l},64101:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),l=(0,i.default)((0,a.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"}),"Security");t.Z=l},49605:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),l=(0,i.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=l},4193:function(e,t,r){"use strict";var n=r(26314);t.Z=void 0;var i=n(r(80984)),a=r(57437),l=(0,i.default)((0,a.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.Z=l},22079:function(e,t,r){"use strict";var n=r(20791),i=r(13428),a=r(2265),l=r(57042),o=r(95600),s=r(33449),c=r(28702),d=r(26931),u=r(72261),p=r(29872),f=r(87927),m=r(35843),h=r(45525),x=r(57245),g=r(39350),v=r(41101),b=r(57437);let w=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],y=(0,m.ZP)(g.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),useUtilityClasses=e=>{let{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:a}=e,l={root:["root"],container:["container",`scroll${(0,c.Z)(r)}`],paper:["paper",`paperScroll${(0,c.Z)(r)}`,`paperWidth${(0,c.Z)(String(n))}`,i&&"paperFullWidth",a&&"paperFullScreen"]};return(0,o.Z)(l,h.D,t)},j=(0,m.ZP)(d.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Z=(0,m.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.container,t[`scroll${(0,c.Z)(r.scroll)}`]]}})(({ownerState:e})=>(0,i.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),k=(0,m.ZP)(p.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.paper,t[`scrollPaper${(0,c.Z)(r.scroll)}`],t[`paperWidth${(0,c.Z)(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>(0,i.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${h.Z.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${h.Z.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${h.Z.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),S=a.forwardRef(function(e,t){let r=(0,f.Z)({props:e,name:"MuiDialog"}),o=(0,v.Z)(),c={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":d,"aria-labelledby":m,BackdropComponent:h,BackdropProps:g,children:S,className:C,disableEscapeKeyDown:I=!1,fullScreen:P=!1,fullWidth:N=!1,maxWidth:E="sm",onBackdropClick:O,onClose:_,open:D,PaperComponent:R=p.Z,PaperProps:W={},scroll:M="paper",TransitionComponent:U=u.Z,transitionDuration:z=c,TransitionProps:T}=r,A=(0,n.Z)(r,w),B=(0,i.Z)({},r,{disableEscapeKeyDown:I,fullScreen:P,fullWidth:N,maxWidth:E,scroll:M}),L=useUtilityClasses(B),F=a.useRef(),q=(0,s.Z)(m),$=a.useMemo(()=>({titleId:q}),[q]);return(0,b.jsx)(j,(0,i.Z)({className:(0,l.Z)(L.root,C),closeAfterTransition:!0,components:{Backdrop:y},componentsProps:{backdrop:(0,i.Z)({transitionDuration:z,as:h},g)},disableEscapeKeyDown:I,onClose:_,open:D,ref:t,onClick:e=>{F.current&&(F.current=null,O&&O(e),_&&_(e,"backdropClick"))},ownerState:B},A,{children:(0,b.jsx)(U,(0,i.Z)({appear:!0,in:D,timeout:z,role:"presentation"},T,{children:(0,b.jsx)(Z,{className:(0,l.Z)(L.container),onMouseDown:e=>{F.current=e.target===e.currentTarget},ownerState:B,children:(0,b.jsx)(k,(0,i.Z)({as:R,elevation:24,role:"dialog","aria-describedby":d,"aria-labelledby":q},W,{className:(0,l.Z)(L.paper,W.className),ownerState:B,children:(0,b.jsx)(x.Z.Provider,{value:$,children:S})}))})}))}))});t.Z=S},57245:function(e,t,r){"use strict";var n=r(2265);let i=n.createContext({});t.Z=i},45525:function(e,t,r){"use strict";r.d(t,{D:function(){return getDialogUtilityClass}});var n=r(26520),i=r(25702);function getDialogUtilityClass(e){return(0,i.Z)("MuiDialog",e)}let a=(0,n.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);t.Z=a},50819:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var n=r(20791),i=r(13428),a=r(2265),l=r(95600),o=r(57042),s=r(54379),c=r(59592),d=r(28702),u=r(87927),p=r(35843),f=r(26520),m=r(25702);function getFormLabelUtilityClasses(e){return(0,m.Z)("MuiFormLabel",e)}let h=(0,f.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);var x=r(57437);let g=["children","className","color","component","disabled","error","filled","focused","required"],useUtilityClasses=e=>{let{classes:t,color:r,focused:n,disabled:i,error:a,filled:o,required:s}=e,c={root:["root",`color${(0,d.Z)(r)}`,i&&"disabled",a&&"error",o&&"filled",n&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return(0,l.Z)(c,getFormLabelUtilityClasses,t)},v=(0,p.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>(0,i.Z)({},t.root,"secondary"===e.color&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>(0,i.Z)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${h.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${h.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${h.error}`]:{color:(e.vars||e).palette.error.main}})),b=(0,p.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${h.error}`]:{color:(e.vars||e).palette.error.main}})),w=a.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiFormLabel"}),{children:a,className:l,component:d="label"}=r,p=(0,n.Z)(r,g),f=(0,c.Z)(),m=(0,s.Z)({props:r,muiFormControl:f,states:["color","required","focused","disabled","error","filled"]}),h=(0,i.Z)({},r,{color:m.color||"primary",component:d,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required}),w=useUtilityClasses(h);return(0,x.jsxs)(v,(0,i.Z)({as:d,ownerState:h,className:(0,o.Z)(w.root,l),ref:t},p,{children:[a,m.required&&(0,x.jsxs)(b,{ownerState:h,"aria-hidden":!0,className:w.asterisk,children:["â€‰","*"]})]}))});function getInputLabelUtilityClasses(e){return(0,m.Z)("MuiInputLabel",e)}(0,f.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);let y=["disableAnimation","margin","shrink","variant","className"],InputLabel_useUtilityClasses=e=>{let{classes:t,formControl:r,size:n,shrink:a,disableAnimation:o,variant:s,required:c}=e,u={root:["root",r&&"formControl",!o&&"animated",a&&"shrink",n&&"normal"!==n&&`size${(0,d.Z)(n)}`,s],asterisk:[c&&"asterisk"]},p=(0,l.Z)(u,getInputLabelUtilityClasses,t);return(0,i.Z)({},t,p)},j=(0,p.ZP)(w,{shouldForwardProp:e=>(0,p.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${h.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,"small"===r.size&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,t[r.variant]]}})(({theme:e,ownerState:t})=>(0,i.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===t.size&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===t.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&(0,i.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===t.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===t.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Z=a.forwardRef(function(e,t){let r=(0,u.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:a=!1,shrink:l,className:d}=r,p=(0,n.Z)(r,y),f=(0,c.Z)(),m=l;void 0===m&&f&&(m=f.filled||f.focused||f.adornedStart);let h=(0,s.Z)({props:r,muiFormControl:f,states:["size","variant","required"]}),g=(0,i.Z)({},r,{disableAnimation:a,formControl:f,shrink:m,size:h.size,variant:h.variant,required:h.required}),v=InputLabel_useUtilityClasses(g);return(0,x.jsx)(j,(0,i.Z)({"data-shrink":m,ownerState:g,ref:t,className:(0,o.Z)(v.root,d)},p,{classes:v}))});var k=Z},82876:function(e,t,r){Promise.resolve().then(r.bind(r,55496))},77814:function(e,t,r){"use strict";r.d(t,{O:function(){return PreparingRequest}});var n=r(57437),i=r(40471),a=r(57042);let PreparingRequest=e=>{let{className:t}=e;return(0,n.jsxs)("div",{className:(0,a.Z)("flex flex-col w-full",t),children:[(0,n.jsx)("div",{className:"italic",children:"Preparing request, hold on..."}),(0,n.jsx)(i.Z,{})]})}},26188:function(e,t,r){"use strict";r.d(t,{O:function(){return RequestingApp}});var n=r(57437),i=r(4528),a=r(13457),l=r(3283),o=r(43226),s=r(78596),c=r(57042),d=r(16691),u=r.n(d),p=r(2265);let RequestingApp=e=>{let{applicationDID:t,className:r}=e,[d,f]=(0,p.useState)(null),[m,h]=(0,p.useState)(null),[x,g]=(0,p.useState)(!1),updateApplicationData=async()=>{if(t){let e=await s._.resolveDIDDocument(t);g(!0),e?(f(await e.getRepresentativeIcon()),h(await e.getRepresentativeOwnerName())):(f(null),h(null))}};return((0,p.useEffect)(()=>{updateApplicationData()},[t]),x&&t)?(0,n.jsxs)("div",{className:(0,c.Z)("flex flex-col items-center",r),children:[(0,n.jsx)(a.Z,{direction:"row",justifyContent:"center",children:(0,n.jsx)(l.Z,{sx:{width:120,height:120},children:d&&(0,n.jsx)(u(),{src:d,alt:"",width:120,height:120})})}),(0,n.jsx)(o.Z,{mt:1,fontWeight:600,children:m})]}):(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(i.a,{width:120,height:120})})}},55496:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return page}});var n=r(57437),i=r(40542),a=r(63491),l=r(57958),o=r(61568),s=r(14776),c=r(24033),d=r(2265),u=r(77814),p=r(9254),f=r(29439),m=r(70906),h=r(26588),x=r(69147),g=r(90726),v=r(43226),b=r(19739),w=r(36079),y=r(43639),j=r(26188),Z=r(48727),k=r(81344),S=r(13457),C=r(49050),I=r(15133),P=r(14819),N=r(29872),E=r(35843),O=r(53386),_=r(16691),D=r.n(_);(0,E.ZP)(N.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#eeeeee",textAlign:"left",maxWidth:400}});let CredentialPreview=e=>{let{credential:t}=e,r=t.getValueItems(),a=t.isSensitiveCredential(),[l]=(0,i.V)(null==t?void 0:t.issuerInfo$);return(0,n.jsx)(S.Z,{alignItems:"center",children:(0,n.jsx)("div",{className:"mx-4 mb-1 mt-2 shadow text-left",children:(0,n.jsxs)("div",{className:"flex flex-row gap-2 p-2",style:{width:400},children:[(0,n.jsx)(P.Z,{sx:{fontSize:40}}),(0,n.jsxs)(S.Z,{alignItems:"left",children:[(0,n.jsx)(v.Z,{fontSize:18,gutterBottom:!0,children:(0,n.jsx)("b",{children:t.getDisplayableTitle()})}),null==r?void 0:r.map(e=>(0,n.jsx)(v.Z,{fontSize:16,gutterBottom:!0,children:null==e?void 0:e.value},e.name+"credentialcomponentitem")),a&&(0,n.jsx)(v.Z,{fontSize:14,color:"#FF6347",gutterBottom:!0,children:"Sensitive"}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center w-full mt-4",children:[(0,n.jsx)(S.Z,{children:(0,n.jsx)(D(),{unoptimized:!0,src:null==l?void 0:l.avatarIcon,width:30,height:30,style:{borderRadius:"50%"},alt:""})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(v.Z,{fontSize:10,fontWeight:300,noWrap:!0,children:"Issued by:"}),(0,n.jsx)(v.Z,{fontSize:13,noWrap:!0,children:l&&(0,O.Sy)(null==l?void 0:l.name,30)})]})]})]})]})})})},CredentialPreviewWithDetails=e=>{let{importedCredential:t}=e,[r,i]=(0,d.useState)(!1),[a,l]=(0,d.useState)(!1),[o,s]=(0,d.useState)(!1),handleHideDisplayable=()=>{l(!1)},handleShowDisplayable=()=>{l(!0)};return(0,n.jsxs)(S.Z,{alignItems:"center",children:[(0,n.jsx)(CredentialPreview,{credential:t.credential}),r&&(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(C.Z,{variant:"text",onClick:()=>{i(!1)},children:"hide details"}),t.values.map(e=>(0,n.jsxs)(I.Z,{sx:{mx:10,my:1,boxShadow:0,textAlign:"left"},children:[!a&&(0,n.jsx)(S.Z,{px:2,py:2,minWidth:400,alignItems:"left",children:(0,n.jsx)("div",{onClick:handleShowDisplayable,children:(0,n.jsxs)(S.Z,{direction:"row",alignItems:"right",children:[(0,n.jsx)(v.Z,{fontSize:16,minWidth:350,gutterBottom:!0,children:(0,n.jsx)("b",{children:e.name})}),(0,n.jsx)(k.Z,{})]})})}),a&&(0,n.jsxs)(S.Z,{px:2,py:2,minWidth:400,alignItems:"left",children:[(0,n.jsx)("div",{onClick:handleHideDisplayable,children:(0,n.jsxs)(S.Z,{direction:"row",alignItems:"right",children:[(0,n.jsx)(v.Z,{fontSize:16,minWidth:350,gutterBottom:!0,children:(0,n.jsx)("b",{children:e.name})}),(0,n.jsx)(Z.Z,{})]})}),(0,n.jsx)(v.Z,{fontSize:14,gutterBottom:!0,children:e.value})]})]},t.name+"-credentialcomponennt"))]}),!r&&(0,n.jsx)(S.Z,{direction:"row",children:(0,n.jsx)(C.Z,{variant:"text",onClick:()=>{i(!0)},children:"Show details"})})]})},RequestDetails=e=>{let{intent:t}=e,[r]=(0,i.V)(l.Bx);null==r||r.profile();let a=null==r?void 0:r.credentials(),[c,u]=(0,d.useState)(!1),[Z]=(0,i.V)(null==a?void 0:a.credentials$),[k,S]=(0,d.useState)(null),[C,I]=(0,d.useState)(!1),[P,N]=(0,d.useState)(""),[E,O]=(0,d.useState)(!1),[_,D]=(0,d.useState)(!1),{showErrorToast:R}=(0,b.p)(),{unlockerIsCancelled:W}=(0,m.NX)(),[M]=(0,i.V)(s.jU),[U]=(0,i.V)(null==M?void 0:M.get("identity").regularIdentities$),z=t.requestPayload,T=t.requestPayload.caller;(0,d.useEffect)(()=>{z&&U&&r&&organizeImportedCredentials(z.credentials).then(e=>{S(e)})},[z,U,r]);let organizeImportedCredentials=async e=>{if(!e)return[];let t=null,n=[];for(let i of e){let e=h.VerifiableCredential.parse(i.toString()),a=e.getSubject().getProperties(),l=e.id.getDid().toString(),o=U.findIndex(e=>e.did==l);-1==o&&I(!0),t?t!=l&&O(!0):t=l,t!=r.did&&D(!0);let s=[];for(let e of Object.keys(a)){let t=a[e];if("id"==e||"displayable"==e)continue;let r={name:e,value:t.toString()};s.push(r)}let c={name:e.getId().getFragment(),values:s,credential:await (0,g.C)(e)};n.push(c)}return N(t),n},approveRequest=async()=>{u(!0);let e=[];k.map(t=>{e.push(t.credential.getId().toString())});let r=!1;try{for(let e of k)await a.importCredential(e.credential.verifiableCredential,z.caller);r=await (0,o.h)(t.id,e)}catch(e){w.k.error("ImportCredential","Import credential error",e)}if(!r){R("Import credential error, Please retry after a while.");return}await (null==M?void 0:M.get("activity").createActivity({type:x.T.CREDENTIALS_IMPORTED,credentialsCount:k.length,appDid:T}));let n=(0,y.Q)(t.redirectUrl,"rid",t.id);window.location.href=n},rejectRequest=()=>{let e=(0,y.Q)(t.redirectUrl,"rid",t.id);window.location.href=e};return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(j.O,{applicationDID:T}),(0,n.jsx)(v.Z,{mt:4,children:"You are going to attach some infomation provided by a third party to your identity."}),(0,n.jsx)(v.Z,{mt:1,children:"Please review the following data:"}),null==k?void 0:k.map((e,t)=>(0,n.jsx)(CredentialPreviewWithDetails,{importedCredential:e},t)),E&&(0,n.jsx)(v.Z,{my:4,children:"Import is only supported for one identity at a time for now."}),C&&(0,n.jsx)(v.Z,{my:4,children:"Is this credential really for you? It's not targeted at any of your existing identities..."}),(E||C)&&(0,n.jsx)(p.c,{onClick:rejectRequest,children:"Cancel"}),!C&&!E&&_&&(0,n.jsxs)("div",{children:[(0,n.jsx)(v.Z,{my:4,children:"The identity that will contain the imported information is:"}),(0,n.jsx)(v.Z,{fontSize:14,children:P})]}),!C&&!E&&!_&&(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(p.c,{className:"w-1/2",onClick:rejectRequest,children:"Cancel"}),(0,n.jsx)(p.c,{className:"w-1/2",onClick:approveRequest,busy:c,disabled:!Z,children:"Import this to my profile"})]}),W&&(0,n.jsx)(f.d,{className:"mt-2"})]}),!M&&"Please sign in or sign up to continue",M&&!r&&"Please make an identity active to continue"]})};var page=()=>{let e=(0,c.useSearchParams)(),t=e.get("rid"),[r,p]=(0,d.useState)(!0),[f,m]=(0,d.useState)(null),[h]=(0,i.V)(s.jU),[x]=(0,i.V)(l.Bx);return(0,d.useEffect)(()=>{t&&(0,o.S)(t).then(e=>{p(!1),m(e)})},[t]),(0,d.useEffect)(()=>{h&&x?(0,a.Ad)():(0,a.qC)(window.location.href)},[h,x]),(0,n.jsxs)("div",{className:"col-span-full",children:[r&&(0,n.jsx)(u.O,{className:"mb-6"}),!r&&f&&(0,n.jsx)(RequestDetails,{intent:f}),!r&&!f&&(0,n.jsx)("div",{children:"No matching request"})]})}},80072:function(e,t,r){"use strict";var n=r(57437),i=r(2265),a=r(35843),l=r(71711),o=r(52653),s=r(81679),c=r(49605),d=r(4193),u=r(57042);let p=(0,a.ZP)(l.Z)(e=>{let{theme:t}=e;return{input:{color:"white",marginTop:20}}}),f=(0,a.ZP)(o.Z)(e=>{let{theme:t}=e;return{color:"white"}});t.Z=e=>{let{outerProps:t={},inputProps:r={}}=e,[a,l]=i.useState(!1);return(0,n.jsx)(p,{...t,type:a?"input":"password",className:(0,u.Z)("password-input",!a&&"redacted"),inputProps:{maxLength:100,...r},startAdornment:(0,n.jsx)(s.Z,{position:"start",className:"absolute"}),endAdornment:(0,n.jsx)(s.Z,{position:"end",children:(0,n.jsx)(f,{"aria-label":"toggle password visibility",onClick:()=>l(e=>!e),onMouseDown:e=>{e.preventDefault()},children:a?(0,n.jsx)(d.Z,{}):(0,n.jsx)(c.Z,{})})})})}},23785:function(e,t,r){"use strict";r.d(t,{Yd:function(){return b},hO:function(){return l},qi:function(){return button_CopyButton},Kz:function(){return s},UO:function(){return x}});var n=r(35843),i=r(44551);let a=(0,n.ZP)(i.Z)(e=>{let{theme:t}=e;return{background:"#000 !important",borderRadius:4,padding:"8px 18px",color:"white","&:disabled":{opacity:"0.7 !important",backgroundColor:"#343434 !important",color:"#fff !important"},"&:hover":{background:"#222 !important"},[t.breakpoints.down("md")]:{fontSize:12,padding:"6px 14px"},".MuiLoadingButton-loadingIndicator":{position:"unset",color:"white",visibility:"inherit"}}});var l=a;let o=(0,n.ZP)(i.Z)(e=>{let{theme:t,className:r}=e;return{background:"#323B45 !important",borderRadius:(null==r?void 0:r.includes("rounded"))?8:4,padding:"8px 18px",color:"white",textTransform:"capitalize","&:disabled":{opacity:"0.7 !important",backgroundColor:"#555 !important",color:"#fff !important"},"&:hover":{background:"#666e76 !important"},[t.breakpoints.down("md")]:{fontSize:12,padding:"6px 14px"},".MuiLoadingButton-loadingIndicator":{position:"unset",color:"white",visibility:"inherit"}}});var s=o,c=r(57437);r(2265);var d=r(86781),u=r(39830),p=r(52653),f=r(19739),button_CopyButton=e=>{let{text:t,iconWidth:r="17px"}=e,{showSuccessToast:n}=(0,f.p)();return(0,c.jsx)(d.CopyToClipboard,{text:t,onCopy:()=>{n("Copied to clipboard")},children:(0,c.jsx)(p.Z,{type:"button",sx:{p:"5px"},"aria-label":"link",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,c.jsx)(u.JO,{icon:"material-symbols:content-copy-rounded",width:r})})})},m=r(49050);let h=(0,n.ZP)(m.Z)(e=>{let{theme:t}=e;return{color:"dark"===t.palette.mode?"white":"black"}});var x=h,g=r(45295);let v=(0,n.ZP)(g.Z)(e=>{let{theme:t}=e;return{borderRadius:"6.5px",overflow:"hidden","&:after":{background:"#fff",content:"''",height:155,left:-75,opacity:.2,position:"absolute",top:-50,width:50,WebkitTransition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)",transition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)",WebkitTransform:"rotate(35deg)",MsTransform:"rotate(35deg)",transform:"rotate(35deg)",zIndex:-10},"&:hover":{boxShadow:"0px 0px 7px #999999","&:after":{left:"120%",WebkitTransition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)",transition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)"}}}});var b=v},39513:function(e,t,r){"use strict";r.d(t,{CA:function(){return b},SN:function(){return v},Gt:function(){return card_LandingCard},TJ:function(){return card_PortraitCard}});var n,i,a,l,o,s=r(57437),c=r(96507),d=r(54986),u=r(35843),p=r(57042),f=r(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var chip=function(e){return f.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:50,height:38,fill:"none"},e),n||(n=f.createElement("g",{stroke:"#fff",strokeWidth:1.4,opacity:.7},f.createElement("rect",{width:48.144,height:36.348,x:.7,y:.7,fill:"#fff",fillOpacity:.26,rx:6.55}),f.createElement("path",{d:"M.774 11.612h12.632a3.625 3.625 0 0 1 3.625 3.625v5.471m0 16.296v-7.2m0 0v-9.096m0 9.096H.774m16.257-9.096H.774M48.77 11.612H33.288m0 0v9.096m0-9.096V.774m0 36.23v-7.2m0 0v-9.096m0 9.096H48.77m-15.482-9.096H48.77"}))))};function wave_logo_extends(){return(wave_logo_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var wave_logo=function(e){return f.createElement("svg",wave_logo_extends({xmlns:"http://www.w3.org/2000/svg",width:32,height:40,fill:"none"},e),i||(i=f.createElement("path",{fill:"url(#wave-logo_svg__a)",fillRule:"evenodd",d:"m2.317 26.858-.007.009-.006.008c-.343.486-1.11.628-1.711.204-.481-.34-.626-1.096-.216-1.694.61-.778 1.054-1.689 1.346-2.579.303-.926.444-1.979.439-3.011-.006-1.033-.158-2.084-.471-3.007-.301-.887-.755-1.792-1.374-2.564-.415-.594-.279-1.352.198-1.697.596-.43 1.366-.296 1.714.186l.006.009.006.008c.771 1.016 1.403 2.145 1.78 3.253.398 1.303.651 2.563.658 3.798.007 1.3-.117 2.53-.594 3.742-.52 1.32-1.023 2.33-1.768 3.335Zm5.571 2.413.015-.021.014-.022a17.795 17.795 0 0 0-.1-18.925c-.376-.596-.207-1.302.427-1.76.426-.308 1.226-.199 1.7.437 1.96 3.11 3.144 6.87 3.165 10.756.021 4.02-1.122 7.658-3.05 10.79-.446.614-1.13.786-1.718.438-.639-.467-.756-1.264-.453-1.693Zm9.998-24.379.016.034.02.031c2.656 4.33 4.132 9.325 4.16 14.732.03 5.404-1.392 10.412-4 14.768-.4.643-1.074.824-1.758.506-.623-.406-.79-1.078-.465-1.758 2.217-3.938 3.596-8.578 3.57-13.502-.026-4.902-1.308-9.535-3.718-13.474-.327-.672-.165-1.342.45-1.752.743-.355 1.466-.095 1.724.415ZM25.75.772l.011.022.013.022c3.219 5.564 5.11 11.924 5.146 18.826.037 6.894-1.782 13.268-4.936 18.862-.4.635-1.072.813-1.753.496-.62-.405-.789-1.074-.467-1.751 3.037-5.185 4.673-11.19 4.639-17.594-.034-6.42-1.878-12.403-4.823-17.536-.369-.75-.109-1.483.406-1.744.756-.383 1.5-.123 1.764.397Z",clipRule:"evenodd"})),a||(a=f.createElement("defs",null,f.createElement("linearGradient",{id:"wave-logo_svg__a",x1:15.408,x2:15.616,y1:.242,y2:39.203,gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#fff",stopOpacity:.73}),f.createElement("stop",{offset:1,stopColor:"#fff"})))))};function circle_extends(){return(circle_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var circle=function(e){return f.createElement("svg",circle_extends({xmlns:"http://www.w3.org/2000/svg",width:349,height:354,fill:"none"},e),l||(l=f.createElement("path",{fill:"url(#circle_svg__a)",fillOpacity:.2,d:"M38.09 18.611C-74.07 67.46-125.398 197.992-76.55 310.152c48.848 112.159 179.382 163.487 291.541 114.639 112.159-48.848 163.488-179.381 114.64-291.54-48.848-112.16-179.382-163.488-291.54-114.64Zm144.437 331.64A140.216 140.216 0 0 1-2.009 277.687a140.212 140.212 0 1 1 184.536 72.564Z"})),o||(o=f.createElement("defs",null,f.createElement("linearGradient",{id:"circle_svg__a",x1:38.09,x2:214.991,y1:18.611,y2:424.791,gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#fff"}),f.createElement("stop",{offset:.421,stopColor:"#fff",stopOpacity:0}),f.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))},m=r(23785);let h=(0,u.ZP)(c.Z)(e=>{let{theme:t}=e;return{borderRadius:"6.329% / 10%",boxShadow:"inset 0 0 0 1.5px #FFFFFF4C",overflow:"hidden","&:after":{paddingTop:"63.29%",display:"block",content:"''"},".body":{position:"absolute",top:0,bottom:0,right:0,left:0},".noise-bg":{background:"url('/noise1.png') repeat center center"},".circle-bottom-box":{left:"37%",top:"62%",transform:"rotate(335deg)"},hr:{borderColor:"rgb(250 250 250 / 0.2)"}}});var card_LandingCard=e=>{let{className:t="",waveIconVisible:r=!0,position:n="relative",dividerVisible:i=!0,topRightSection:a=null,chipClickable:l=!1,handleClickChip:o=e=>{},children:c,footer:u}=e;return(0,s.jsx)(h,{className:(0,p.Z)("inline-block drop-shadow-[0_4px_4px_rgba(0,0,0,0.25)]",t,n),children:(0,s.jsxs)("div",{className:"body noise-bg px-[5%] py-[5%]",children:[(0,s.jsx)("div",{className:"absolute w-4/6 top-[1.5px] left-[1.5px]",children:(0,s.jsx)(circle,{width:"100%",height:"100%",viewBox:"0 0 349 354"})}),(0,s.jsx)("div",{className:"absolute w-full circle-bottom-box",children:(0,s.jsx)(circle,{width:"100%",height:"100%",viewBox:"0 0 349 354"})}),(0,s.jsxs)("div",{className:" flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex h-[14%] mb-7",children:[l?(0,s.jsx)(m.Yd,{onClick:o,children:(0,s.jsx)("div",{className:"h-full chip-item",children:(0,s.jsx)(chip,{width:"100%",height:"100%",viewBox:"0 0 50 38"})})}):(0,s.jsx)("div",{className:"h-full chip-item",children:(0,s.jsx)(chip,{width:"100%",height:"100%",viewBox:"0 0 50 38"})}),(0,s.jsx)("div",{className:"flex-1"}),r?(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)(wave_logo,{width:"100%",height:"100%",viewBox:"0 0 32 40"})}):a]}),(0,s.jsx)("div",{className:"flex flex-1 items-end",children:c}),i&&(0,s.jsx)(d.Z,{}),(0,s.jsx)("div",{className:"h-[15%] flex items-end",children:u})]})]})})},x=r(15133);let g=(0,u.ZP)(x.Z)(e=>{let{theme:t}=e;return{maxWidth:300,minWidth:180,backgroundColor:"black",borderRadius:"1.5rem","&:after":{paddingTop:"158%",display:"block",content:"''"},".noise-bg":{background:"url('./noise2.png') repeat center center"},".body":{position:"absolute",top:0,bottom:0,right:0,left:0,"&:before, &:after":{opacity:.2,content:"''",position:"absolute",width:"70%",height:"100%",background:"linear-gradient(to bottom, rgba(255, 255, 255, 100%), rgba(255, 255, 255, 25%), transparent)",transform:"rotate(-50deg)",zIndex:-1},"&:before":{top:"-40%",left:0},"&:after":{top:"-20%",left:"-10%",transform:"rotate(-47deg)"},".ellipse":{bottom:"20%",width:"100%",height:"42%",background:"linear-gradient(to bottom, rgba(255, 211, 187, 100%), rgba(255, 211, 187, 40%), transparent)",borderTopLeftRadius:"100%"}}}});var card_PortraitCard=e=>{let{content:t,footer:r,logo:n}=e;return(0,s.jsx)(g,{className:"inline-block w-[45%] xl:w-[40%] md:w-[25%] h-full border-white border-opacity-30 border-2 rounded-3xl relative drop-shadow-[0_4px_4px_rgba(0,0,0,0.25)]",children:(0,s.jsxs)("div",{className:"body noise-bg",children:[(0,s.jsx)("div",{className:"absolute opacity-20 ellipse"}),(0,s.jsxs)("div",{className:"px-4 py-6 md:px-6 md:py-8 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex pb-4 md:pb-7",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:n}),(0,s.jsx)("div",{className:"h-6 md:h-9",children:(0,s.jsx)(chip,{width:"100%",height:"100%",viewBox:"0 0 50 38"})})]}),(0,s.jsx)("div",{className:"flex flex-1",children:(0,s.jsx)("div",{className:"text-left",children:t})}),(0,s.jsx)("div",{className:"flex justify-center",children:r})]})]})})};let v=(0,u.ZP)(c.Z)(e=>{let{theme:t}=e;return{minWidth:180,perspective:600,borderRadius:"1.5rem","&:after":{paddingTop:"73%",display:"block",content:"''"},".card":{position:"relative",width:"100%",height:"100%",cursor:"pointer",transformStyle:"preserve-3d",transformOrigin:"center right",transition:"transform 0.5s",".card-face":{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden"},".back":{transform:"rotateY(180deg)"}},".card.is-flipped":{transform:"translateX(-100%) rotateY(-180deg)"}}}),b=(0,u.ZP)(x.Z)(e=>{let{theme:t}=e;return{minWidth:180,cursor:"initial",backgroundImage:"url('/dark-leather.png')",backgroundColor:"black",borderRadius:"1.5rem",overflow:"visible","&:after":{paddingTop:"73%",display:"block",content:"''"},".dashed-body":{border:"2px dashed rgb(50 38 38)"},".compartment, .compartment-top":{backgroundImage:"url('/dark-leather.png')",backgroundColor:"black",width:"100%"},".compartment-top":{height:"18%","--mask1":"radial-gradient(circle at 50% -20%, transparent 25%, black 25.5%)",WebkitMaskImage:"var(--mask1)",maskImage:"var(--mask1)"},"@keyframes fadeOut":{"0%":{visibility:"visible"},"55%":{visibility:"visible"},"56%, 100%":{visibility:"hidden"}},".fade-out":{animation:"fadeOut 1s ".concat(t.transitions.easing.easeInOut," forwards"),MsAnimation:"fadeOut 1s ".concat(t.transitions.easing.easeInOut," forwards"),WebkitAnimation:"fadeOut 1s ".concat(t.transitions.easing.easeInOut," forwards"),MozAnimation:"fadeOut 1s ".concat(t.transitions.easing.easeInOut," forwards")}}})},66267:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(57437),i=r(3283),a=r(43226),l=r(35843);let o=(0,l.ZP)(i.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#9D3E3E",color:"white",width:36,height:36,padding:8}});t.Z=e=>{let{icon:t,title:r,description:i,className:l=""}=e;return(0,n.jsxs)("div",{className:"text-[#DDD] ".concat(l),children:[(0,n.jsx)("div",{className:"inline-flex pb-1",children:(0,n.jsx)(o,{children:t})}),(0,n.jsx)(a.Z,{variant:"body1",className:"underline underline-offset-2",children:r}),(0,n.jsx)(a.Z,{variant:"body2",children:i})]})}},49017:function(e,t,r){"use strict";var n=r(35843),i=r(84081);let a=(0,n.ZP)(i.Z)(e=>{let{theme:t}=e;return{".MuiInput-root":{marginTop:0,"&:before, &:after":{opacity:.18,borderColor:"white"}},".MuiInputBase-root.MuiInput-root:hover:not(.Mui-disabled, .Mui-error)":{"&:before, &:after":{opacity:.18,borderColor:"white"}},".MuiInput-root.Mui-focused":{"&:before, &:after":{opacity:.3}},".MuiInputLabel-root, .MuiInputLabel-root.Mui-focused:not(.Mui-error)":{color:"white",fontSize:"10px",transform:"unset",WebkitTransform:"unset"},"#holder-name":{fontWeight:600,fontSize:"15pt",textAlign:"center",caretColor:"white",color:"rgb(255 255 255 / 65%)"},".password-input.redacted":{fontFamily:"Redacted Script"},".MuiFormHelperText-root":{marginLeft:0,display:"none"},".MuiFormHelperText-root.Mui-error, .MuiFormHelperText-root.visible":{display:"block"}}});t.Z=a},9254:function(e,t,r){"use strict";r.d(t,{c:function(){return MainButton}});var n=r(57437),i=r(6882),a=r(49050),l=r(57042);let MainButton=e=>{let{leftIcon:t,size:r="medium",mode:o="default",onClick:s,children:c,busy:d=!1,disabled:u=!1,className:p}=e,f=(0,n.jsx)(i.Z,{size:16});return(0,n.jsx)("div",{className:(0,l.Z)("flex",p),children:(0,n.jsx)(a.Z,{className:"flex-1",startIcon:d?f:t,disabled:d||u,size:r,color:"default"===o?"primary":"error",variant:"contained",onClick:s,children:c})})}},4528:function(e,t,r){"use strict";r.d(t,{a:function(){return LoadingCircle_LoadingCircle}});var n=r(57437),i=r(57042);let LoadingCircle_LoadingCircle=e=>{let{className:t,width:r,height:a}=e;return(0,n.jsx)("div",{className:(0,i.Z)("loading-circle",t),style:{...r&&{width:r},...a&&{height:a}},children:(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("div",{className:"animated"})})})}},29439:function(e,t,r){"use strict";r.d(t,{d:function(){return UnlockRetrier}});var n=r(57437),i=r(9254),a=r(57042),l=r(70906);let UnlockRetrier=e=>{let{className:t}=e,{retryUnlock:r}=(0,l.lJ)();return(0,n.jsxs)("div",{className:(0,a.Z)("flex flex-row items-center gap-2",t),children:[(0,n.jsx)("div",{children:"This content could not be unlocked, please retry"}),(0,n.jsx)(i.c,{onClick:()=>{r()},children:"Unlock personal data"})]})}},70906:function(e,t,r){"use strict";r.d(t,{au:function(){return UnlockKeyPromptContextProvider},lJ:function(){return useUnlockKeyPrompt},NX:function(){return useUnlockPromptState}});var n=r(57437),i=r(39513),a=r(66267),l=r(14504),o=r(40542),s=r(95815),c=r(94025),d=r(5253),u=r(64101),p=r(56176),f=r(22079),m=r(43226),h=r(35843),x=r(7482),g=r(36079),v=r(50707),b=r(14776),w=r(2265),y=r(39830),j=r(23785);let PasskeyPrompt=e=>{let{onConfirm:t,disabled:r}=e,[i]=(0,o.V)(b.jU),a=null==i?void 0:i.get("security"),onSubmit=async()=>{let e=await a.unlockPasskeyLocally();t(e)};return(0,n.jsx)(j.Kz,{id:"bind-ms",className:"w-4/5",startIcon:(0,n.jsx)(y.JO,{icon:"material-symbols:passkey"}),disabled:r,onClick:onSubmit,children:"Unlock with passkey"})};var Z=r(50819),k=r(49017),S=r(80072);let PasswordPrompt=e=>{let{onConfirm:t,disabled:r}=e,[i,a]=(0,w.useState)(""),l=(0,w.useRef)(null),submitPassword=e=>{if(e.preventDefault(),!l.current.value){l.current.focus();return}t(l.current.value)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{onSubmit:submitPassword,children:(0,n.jsxs)(k.Z,{fullWidth:!0,children:[(0,n.jsx)(Z.Z,{htmlFor:"pw",children:"PASSWORD"}),(0,n.jsx)(S.Z,{outerProps:{autoFocus:!0,disabled:r,onChange:e=>{a(e.target.value)}},inputProps:{ref:l}})]})}),(0,n.jsx)("div",{className:"p-2 pb-0 text-center",children:(0,n.jsx)(j.Kz,{id:"bind-ms",className:"w-4/5",disabled:r||!i.length,onClick:submitPassword,children:"Continue"})})]})};var C=r(51894),I=r(53946);let P=(0,w.createContext)({actions:null,setActions:null});function UnlockKeyPromptContextProvider(e){let[t,r]=(0,w.useState)(null);return(0,n.jsxs)(P.Provider,{value:{actions:t,setActions:r},children:[e.children,(0,n.jsx)(UnlockKeyPrompt,{})]})}let N=w.forwardRef(function(e,t){return(0,n.jsx)(p.Z,{ref:t,...e})}),E=(0,h.ZP)("div")(e=>{let{theme:t}=e;return{background:"linear-gradient(to right, #242424, #333 50%, transparent)"}}),UnlockKeyPrompt=()=>{let{actions:e,setActions:t}=(0,w.useContext)(P),[r]=(0,o.V)(b.jU),s=null==r?void 0:r.get("security"),[c]=(0,o.V)(null==s?void 0:s.passwordKeys$),[p]=(0,o.V)(null==s?void 0:s.passkeyKeys$),{promptMasterKeyUnlock:h}=useUnlockKeyPrompt(),hideDialog=()=>{t(null)};return(0,w.useEffect)(()=>{let e=I.lw.subscribe(e=>{e&&!e.handled&&(e.handled=!0,callWithUnlockHandler(e,h))});return()=>e.unsubscribe()},[h]),(0,n.jsx)(f.Z,{open:!!e,disablePortal:!0,onClose:()=>{var t;null===(t=e.onUnlockKey)||void 0===t||t.call(e,null),hideDialog()},TransitionComponent:N,PaperProps:{sx:{backgroundImage:"none"}},children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)(E,{className:"flex items-center gap-x-2 px-4 py-2",children:[(0,n.jsx)(a.C,{children:(0,n.jsx)(u.Z,{fontSize:"small"})}),(0,n.jsx)(m.Z,{variant:"h6",fontWeight:600,className:"ml-4",children:"Screen content is locked!"})]}),(0,n.jsx)(m.Z,{variant:"body1",className:"px-4 py-2",children:"Enter password or authenticate passkey to unlock the screen."}),(0,n.jsx)(i.CA,{className:"relative w-full mt-4 md:pb-2",children:(0,n.jsx)("div",{className:"absolute inset-0 p-2",children:(0,n.jsx)("div",{className:"dashed-body w-full h-full rounded-2xl p-1.5 flex items-center",children:(0,n.jsx)("div",{className:"px-6 py-8 w-full",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(PasswordPrompt,{onConfirm:t=>{var r;null===(r=e.onUnlockKey)||void 0===r||r.call(e,{type:d.J.PASSWORD,keyId:"unused-for-now-for-passwords",key:t}),hideDialog()},disabled:(null==c?void 0:c.length)==0}),(0,n.jsxs)("div",{className:"p-2 pt-0 text-center",children:[(0,n.jsx)("div",{className:"py-4",children:(0,n.jsx)(l.Z,{text:"or browser authentication"})}),(0,n.jsx)(PasskeyPrompt,{onConfirm:t=>{var r;null===(r=e.onUnlockKey)||void 0===r||r.call(e,t),hideDialog()},disabled:(null==p?void 0:p.length)==0})]})]})})})})})]})})};function useUnlockPromptState(){let[e]=(0,o.V)(I.Mn),[t,r]=(0,w.useState)(!0),[n,i]=(0,w.useState)(!1);return(0,w.useEffect)(()=>{switch(e){case I.xb.Idle:r(!0),i(!1);break;case I.xb.UnlockCancelled:r(!1),i(!0)}},[e]),{unlockerIsIdle:t,unlockerIsCancelled:n}}let useUnlockKeyPrompt=()=>{let{setActions:e}=(0,w.useContext)(P),[t]=(0,o.V)(b.jU);return{promptMasterKeyUnlock:()=>new Promise(t=>{e({onUnlockKey:t})}),retryUnlock:()=>(0,C.H)(()=>t.get("security").checkRemoteUnlockStatus())}};async function callWithUnlockHandler(e,t){try{let t=await e.method();e.resolve(t)}catch(r){if(r instanceof s._){if((0,v.z)(r)){g.k.warn("security","This method call requires unlock authorization from the user. Prompting");let r=await t();if(r){await (0,x.wo)(r);let t=await (0,C.H)(e.method,e.silentCancellation,e.defaultValue,!1);e.resolve(t)}else I.Mn.next(I.xb.UnlockCancelled),g.k.warn("security","Unlock operation cancelled by user"),e.reject(s._.newClientError(c.XF.UnlockKeyCancelled,"CANCELLED"))}else e.reject(r)}else g.k.error("security","Unhandled callWithUnlock() non app exception (will get stuck):",r)}}},14504:function(e,t,r){"use strict";var n=r(57437),i=r(57042),a=r(54986),l=r(43226),o=r(35843);let s=(0,o.ZP)(a.Z)(e=>{let{theme:t}=e;return{"&:before, &:after":{borderTopColor:"#C4C4C4"}}});t.Z=e=>{let{text:t,textClassName:r=""}=e;return(0,n.jsx)(s,{children:(0,n.jsx)(l.Z,{variant:"caption",className:(0,i.Z)("px-4 font-bold text-white",r),children:t})})}},40542:function(e,t,r){"use strict";r.d(t,{V:function(){return useBehaviorSubject}});var n=r(2265);let useBehaviorSubject=e=>{let[t,r]=(0,n.useState)(null==e?void 0:e.getValue()),[i,a]=(0,n.useState)();return(0,n.useEffect)(()=>{if(!e){r(null);return}let t=e.subscribe({next:e=>{r(e)},error:a});return()=>t.unsubscribe()},[e]),[t]}},69147:function(e,t,r){"use strict";var n,i;r.d(t,{T:function(){return n}}),(i=n||(n={})).NEW_ACCOUNT="NEW_ACCOUNT",i.USER_SIGN_IN="USER_SIGN_IN",i.IDENTITY_CREATED="IDENTITY_CREATED",i.IDENTITY_DELETED="IDENTITY_DELETED",i.CREDENTIALS_IMPORTED="CREDENTIALS_IMPORTED",i.CREDENTIALS_SHARED="CREDENTIALS_SHARED",i.BIND_EMAIL="BIND_EMAIL",i.BIND_BROWSER="BIND_BROWSER",i.PASSWORD_CHANGED="PASSWORD_CHANGED"},19739:function(e,t,r){"use strict";r.d(t,{p:function(){return useToast}});var n=r(36953);function useToast(){let{enqueueSnackbar:e}=(0,n.Ds)();return{showSuccessToast:t=>{e(t,{variant:"success"})},showErrorToast:t=>{e(t,{variant:"error"})}}}},63491:function(e,t,r){"use strict";r.d(t,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return i},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var n,i,a=r(92e3),l=r(36079);(n=i||(i={}))[n.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",n[n.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",n[n.EmailSignIn=2]="EmailSignIn";let o="ongoingflowoperation",s="postsigninurl";function getOnGoingFlowOperation(){return i[localStorage.getItem(o)]}function setOnGoingFlowOperation(e){localStorage.setItem(o,i[e])}function clearOnGoingFlowOperation(){localStorage.removeItem(o)}function setPostSignInUrl(e){l.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(s,e)}function clearPostSignInUrl(){l.k.log("flow","Clearing post sign in url"),localStorage.removeItem(s)}function usePostSignInFlow(){let e=(0,a.useRouter)();return{navigateToPostSignInLandingPage(t){let r=localStorage.getItem(s);if(r)l.k.log("flow","Navigating to post sign in landing page:",r),e.replace(r),clearPostSignInUrl();else{let r=t||"/dashboard";l.k.log("flow","Navigating to post sign in landing page ".concat(r)),e.push(r)}}}}},61568:function(e,t,r){"use strict";r.d(t,{S:function(){return fetchIntent},h:function(){return fulfilIntentRequest}});var n=r(60230),i=r(23965);let Intent=class Intent{static async fromJson(e){let t=new Intent;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}};var a=r(29748),l=r(91395),o=r(36079);function _templateObject(){let e=(0,n._)(["\n      query GetIntentRequest($intentId: String!) {\n        intent (id: $intentId) {\n          ","\n        }\n      }\n    "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,n._)(["\n      mutation FulfilIntentRequest($input: FulfilIntentInput!) {\n        fulfilIntent (input: $input)\n      }\n    "]);return _templateObject1=function(){return e},e}async function fetchIntent(e){var t;let r=await (0,a.Pt)(async()=>(await (0,l.W)()).query({query:(0,i.Ps)(_templateObject(),"\n  id\n  createdAt\n  type\n  redirectUrl\n  requestPayload\n  responsePayload\n"),variables:{intentId:e}}));if(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.intent){let e=await Intent.fromJson(r.data.intent);return o.k.log("intents","Fetched intent:",e),e}return o.k.warn("intents","No intent found for id ".concat(e)),null}async function fulfilIntentRequest(e,t){var r;let n=await (0,a.Pt)(async()=>(await (0,l.W)()).mutate({mutation:(0,i.Ps)(_templateObject1()),variables:{input:{intentId:e,payload:t}}}));return(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.fulfilIntent)?(o.k.log("intents","Successfully fulfilled intent id ".concat(e)),!0):(o.k.warn("intents","Failed to fulfil intent id ".concat(e)),!1)}},43639:function(e,t,r){"use strict";function setQueryParameter(e,t,r){let n=new URL(e),i=new URLSearchParams(n.search);return i.set(t,r),n.search=i.toString(),n.toString()}r.d(t,{Q:function(){return setQueryParameter}})}},function(e){e.O(0,[6990,9787,9443,8218,3988,395,8321,3824,6642,1228,5295,1510,1396,6953,2e3,182,2884,3691,922,1869,7998,2520,2597,3262,2971,7864,1744],function(){return e(e.s=82876)}),_N_E=e.O()}]);