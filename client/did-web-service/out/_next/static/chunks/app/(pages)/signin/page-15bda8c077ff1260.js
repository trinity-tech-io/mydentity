(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{97182:function(e,t,n){Promise.resolve().then(n.bind(n,31969))},31969:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return page}});var i=n(57437),o=n(2265),r=n(24033),a=n(23785),l=n(39830),s=n(63491),widgets_GoogleSignIn=()=>{let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),n=t.get("error"),[c,u]=(0,o.useState)(null);return(0,o.useEffect)(()=>{"oauthGoogleEmailNotExists"===n?u("This email address is unknown."):"unknownGoogle"===n&&u("Failed to sign in with Google account.")},[n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Kz,{id:"signin-ms",startIcon:(0,i.jsx)(l.JO,{icon:"logos:google-icon"}),onClick:()=>{(0,s.$Y)(s.cX.EmailSignIn),e.push("".concat("https://staging-api.ownmydentity.com","/google"))},className:"w-full",children:"Sign in with Google"}),c&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"text-red-600",children:c})})]})},widgets_LinkedinSignIn=()=>{let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),n=t.get("error"),[c,u]=(0,o.useState)(null);return(0,o.useEffect)(()=>{"oauthLinkedinEmailNotExists"===n?u("This email address is unknown."):"unknownLinkedin"===n&&u("Failed to sign in with Linkedin account.")},[n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Kz,{id:"signin-ms",startIcon:(0,i.jsx)(l.JO,{icon:"logos:linkedin-icon"}),onClick:()=>{(0,s.$Y)(s.cX.EmailSignIn),e.push("".concat("https://staging-api.ownmydentity.com","/linkedin"))},className:"w-full",children:"Sign in with Linkedin"}),c&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"text-red-600",children:c})})]})},c=n(14504),u=n(96507),d=n(88938),g=n(35843),m=n(11059),p=n(15907),f=n(43226);let SignInHeader=()=>(0,i.jsx)("div",{className:"w-full flex justify-center",children:(0,i.jsxs)("div",{className:"md:w-3/5 max-w-2xl",children:[(0,i.jsx)(f.Z,{variant:"h4",className:"w-full text-white text-center",children:"Hello, we've missed you! Welcome back."}),(0,i.jsx)(f.Z,{variant:"body1",className:"text-white text-left pt-6",children:"We're thrilled to have you return. To access your account, you have the convenience of choosing from a variety of sign-in methods available below. Your seamless experience is our priority."})]})});var widgets_MicrosoftSignIn=()=>{let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),n=t.get("error"),[c,u]=(0,o.useState)(null);return(0,o.useEffect)(()=>{"oauthEmailNotExists"===n?u("This email address is unknown."):"unknown"===n&&u("Failed to sign in with MS account.")},[n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Kz,{id:"signin-ms",startIcon:(0,i.jsx)(l.JO,{icon:"logos:microsoft-icon"}),onClick:()=>{(0,s.$Y)(s.cX.EmailSignIn),e.push("".concat("https://staging-api.ownmydentity.com","/microsoft"))},className:"w-full",children:"Sign in with Microsoft"}),c&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"text-red-600",children:c})})]})},h=n(51894),x=n(19739),w=n(43989),b=n(8424),S=n(56176),j=n(29872),k=n(61994),v=n(74309),y=n(8864);let I=(0,g.ZP)(w.Z)(e=>{let{theme:t}=e;return{zIndex:100,".paper":{"&:before":{content:'""',display:"block",position:"absolute",width:10,height:10,backgroundColor:"inherit",backgroundImage:"inherit",transform:"rotate(45deg)",transformOrigin:"left bottom",boxShadow:"2px 2px 3px 0px rgba(0,0,0,0.1)"}},"&[data-popper-placement*='top'] .paper":{"&:before":{bottom:0,left:10}},"&[data-popper-placement*='bottom'] .paper":{"&:before":{top:0,left:10,transformOrigin:"right top",boxShadow:"-2px -2px 3px 0px rgba(0,0,0,0.1)"}}}});var widgets_UserSelectionMenu=e=>{let{showSelection:t,buttonRef:n,onCloseSelection:o,handleUserSelection:r}=e,a=(0,m.QC)();return(0,i.jsx)(I,{open:t,anchorEl:null==n?void 0:n.current,transition:!0,placement:"top-start",children:e=>{let{TransitionProps:t,placement:n}=e;return(0,i.jsx)(b.d,{onClickAway:o,children:(0,i.jsx)(S.Z,{...t,style:{transformOrigin:"bottom-end"===n?"right top":"right bottom"},children:(0,i.jsx)(j.Z,{className:"paper",children:(0,i.jsx)(k.Z,{children:a.map((e,t)=>(0,i.jsxs)(v.Z,{onClick:()=>{r(e)},children:[(0,i.jsx)(y.Z,{children:(0,i.jsx)(l.JO,{icon:"simple-icons:authelia"})}),e.name]},t))})})})})}})},widgets_PasskeySignIn=()=>{let{showSuccessToast:e}=(0,x.p)(),{navigateToPostSignInLandingPage:t}=(0,s.vX)(),[n,r]=(0,o.useState)(!1),[c,u]=(0,o.useState)({credentialId:"",name:""}),[d,g]=(0,o.useState)(null),p=(0,o.useRef)(null);(0,o.useEffect)(()=>{!async function(){let e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();g(e)}()},[]);let signInWithPasskey=async()=>{let n=(0,m.QC)();if(n.length>1)r(!0);else if(1===n.length){let i=n[0],o=await (0,h.H)(()=>(0,m.bB)(i.credentialId));o&&(e("Successful sign in"),t())}},handleUserSelection=async n=>{u(n),r(!1);let i=await (0,h.H)(()=>(0,m.bB)(n.credentialId));i&&(e("Successful sign in"),t())};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Kz,{id:"signin-pk",disabled:!d,ref:p,className:"w-full",startIcon:(0,i.jsx)(l.JO,{icon:"material-symbols:passkey"}),onClick:signInWithPasskey,children:"Sign in with Passkey"}),(0,i.jsx)(widgets_UserSelectionMenu,{showSelection:n,buttonRef:p,onCloseSelection:()=>{r(!1)},handleUserSelection:handleUserSelection})]})};let C=(0,g.ZP)(u.Z)(e=>{let{theme:t}=e;return{borderRadius:"1rem",overflow:"hidden","&:before":{opacity:.1,content:"''",position:"absolute",width:"100%",height:"200%",background:"linear-gradient(to bottom, rgba(163, 163, 163, 100%), rgba(255, 255, 255, 25%), transparent)",transform:"rotate(-20deg)",transformOrigin:"top left",top:0,right:"-40%"}}}),ContainerBox=e=>{let{children:t}=e;return(0,i.jsx)(d.Z,{className:"relative w-full flex flex-col py-4",children:t})};var page=()=>((0,o.useEffect)(()=>{(0,m.w7)()},[]),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,i.jsx)(SignInHeader,{}),(0,i.jsx)("div",{className:"max-sm:pt-4 md:p-10 w-full flex justify-center",children:(0,i.jsx)(C,{className:"w-full md:w-1/2 max-w-xl border-2 border-white border-opacity-30 bg-[#1E1E1E] relative max-sm:p-5 md:p-10 flex flex-col justify-center items-center",children:(0,i.jsxs)("div",{className:"w-full md:w-3/4 z-10",children:[(0,i.jsx)(ContainerBox,{children:(0,i.jsx)(widgets_MicrosoftSignIn,{})}),(0,i.jsx)(ContainerBox,{children:(0,i.jsx)(widgets_GoogleSignIn,{})}),(0,i.jsx)(ContainerBox,{children:(0,i.jsx)(widgets_LinkedinSignIn,{})}),(0,i.jsx)("div",{className:"py-4",children:(0,i.jsx)(c.Z,{text:"or receive a magic link by email"})}),(0,i.jsx)(ContainerBox,{children:(0,i.jsx)(p.P5,{})}),(0,i.jsx)("div",{className:"py-4",children:(0,i.jsx)(c.Z,{text:"or sign in with your browser"})}),(0,i.jsx)(ContainerBox,{children:(0,i.jsx)(widgets_PasskeySignIn,{})})]})})})]})}))},15907:function(e,t,n){"use strict";n.d(t,{Mq:function(){return EmailFormBox},P5:function(){return EmailSignIn},bH:function(){return o}});var i,o,r=n(57437),a=n(23785),l=n(39830),s=n(73052),c=n(84081),u=n(50819),d=n(90923),g=n(35843),m=n(63491),p=n(36079),f=n(11059),h=n(2265);let x=(0,g.ZP)(c.Z)(e=>{let{theme:t}=e;return{paddingTop:"1.2rem",input:{color:"white",background:"black"},".MuiOutlinedInput-root":{fieldset:{opacity:.6,borderColor:"white"}},".MuiOutlinedInput-root.Mui-focused, .MuiOutlinedInput-root:hover:not(.Mui-disabled, .Mui-error)":{fieldset:{opacity:.8,borderColor:"white"}},".MuiOutlinedInput-root.Mui-disabled":{opacity:.5,input:{WebkitTextFillColor:"white",textFillColor:"white"},fieldset:{borderColor:"white"}},".MuiInputLabel-root, .MuiInputLabel-root.Mui-focused:not(.Mui-error)":{color:"white",fontSize:"10px",transform:"unset",WebkitTransform:"unset"},"#email-address":{fontSize:"13pt",caretColor:"white",color:"rgb(255 255 255 / 65%)"}}});(i=o||(o={}))[i.INIT=0]="INIT",i[i.SENDING=1]="SENDING",i[i.RESULT=2]="RESULT";let EmailFormBox=e=>{let{emailInputRef:t,reqState:n,doEmailAuth:i,actionName:o="Send magic link to email",errorMsg:s=null,pinCode:c}=e,g=(0,h.useRef)(null);async function onEmailSubmit(e){null==e||e.preventDefault(),t.current.blur(),await i()}return(0,r.jsxs)(r.Fragment,{children:[2!==n?(0,r.jsxs)("form",{onSubmit:onEmailSubmit,ref:g,className:"w-full my-2",children:[(0,r.jsxs)(x,{variant:"standard",className:"w-full",children:[(0,r.jsx)(u.Z,{shrink:!0,children:"Input email address"}),(0,r.jsx)(d.Z,{id:"email-address",size:"small",placeholder:"Your email address",className:"w-full",disabled:1===n,inputProps:{ref:t}})]}),(0,r.jsx)("div",{className:"py-4 mt-4 w-full",children:(0,r.jsx)(a.Kz,{id:"send-button",loading:1===n,startIcon:1!==n?(0,r.jsx)(l.JO,{icon:"material-symbols:key"}):null,onClick:i,className:"w-full mt-4",children:o})})]}):(0,r.jsxs)("div",{className:"text-sm text-center text-white",children:["Magic link sent, please check your mailbox and use the following PIN code when asked: ",c]}),s&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"text-red-600",children:s})})]})},EmailSignIn=()=>{let e=(0,h.useRef)(null),[t,n]=(0,h.useState)(0),[i,o]=(0,h.useState)(null),[a,l]=(0,h.useState)(null),doEmailAuth=async()=>{o(""),l(null),n(0);let t=e.current.value;if(""!==t){n(1),(0,m.$Y)(m.cX.EmailSignIn);try{let e=await (0,f.X)(t);l(e.pinCode),n(2)}catch(e){e instanceof s.h?o("This email address is unknown."):(p.k.error("Authentication request error:",e),o("Unknown error, please try again.")),n(0)}}};return(0,r.jsx)(EmailFormBox,{emailInputRef:e,reqState:t,doEmailAuth,errorMsg:i,pinCode:a})}},23785:function(e,t,n){"use strict";n.d(t,{Yd:function(){return b},hO:function(){return a},qi:function(){return button_CopyButton},Kz:function(){return s},UO:function(){return h}});var i=n(35843),o=n(44551);let r=(0,i.ZP)(o.Z)(e=>{let{theme:t}=e;return{background:"#000 !important",borderRadius:4,color:"white","&:disabled":{opacity:"0.7 !important",backgroundColor:"#343434 !important",color:"#fff !important"},"&:hover":{background:"#222 !important"},[t.breakpoints.down("md")]:{fontSize:12,padding:"6px 14px"},".MuiLoadingButton-loadingIndicator":{position:"unset",color:"white",visibility:"inherit"}}});var a=r;let l=(0,i.ZP)(o.Z)(e=>{let{theme:t,className:n}=e;return{background:"#323B45 !important",borderRadius:(null==n?void 0:n.includes("rounded"))?8:4,color:"white",textTransform:"uppercase",paddingLeft:12,paddingRight:12,"&:disabled":{opacity:"0.7 !important",backgroundColor:"#555 !important",color:"#fff !important"},"&:hover":{background:"#666e76 !important"},[t.breakpoints.down("md")]:{padding:"6px 14px"},".MuiLoadingButton-loadingIndicator":{position:"unset",color:"white",visibility:"inherit"}}});var s=l,c=n(57437);n(2265);var u=n(86781),d=n(39830),g=n(52653),m=n(19739),button_CopyButton=e=>{let{text:t,iconWidth:n="17px"}=e,{showSuccessToast:i}=(0,m.p)();return(0,c.jsx)(u.CopyToClipboard,{text:t,onCopy:()=>{i("Copied to clipboard")},children:(0,c.jsx)(g.Z,{type:"button",sx:{p:"5px"},"aria-label":"link",onClick:e=>{e.preventDefault(),e.stopPropagation()},color:"primary",children:(0,c.jsx)(d.JO,{icon:"material-symbols:content-copy-rounded",width:n})})})},p=n(49050);let f=(0,i.ZP)(p.Z)(e=>{let{theme:t}=e;return{color:"dark"===t.palette.mode?"white":"black"}});var h=f,x=n(45295);let w=(0,i.ZP)(x.Z)(e=>{let{theme:t}=e;return{borderRadius:"4px",overflow:"hidden","&:after":{background:"#fff",content:"''",height:155,left:-75,opacity:.2,position:"absolute",top:-50,width:50,WebkitTransition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)",transition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)",WebkitTransform:"rotate(35deg)",MsTransform:"rotate(35deg)",transform:"rotate(35deg)",zIndex:-10},"&:hover":{boxShadow:"0px 0px 7px #999999","&:after":{left:"120%",WebkitTransition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)",transition:"all 550ms cubic-bezier(0.19, 1, 0.22, 1)"}}}});var b=w},14504:function(e,t,n){"use strict";var i=n(57437),o=n(57042),r=n(54986),a=n(43226),l=n(35843);let s=(0,l.ZP)(r.Z)(e=>{let{theme:t}=e;return{"&:before, &:after":{borderTopColor:"#C4C4C4"}}});t.Z=e=>{let{text:t,textClassName:n=""}=e;return(0,i.jsx)(s,{children:(0,i.jsx)(a.Z,{variant:"caption",className:(0,o.Z)("px-4 font-bold text-white",n),children:t})})}},19739:function(e,t,n){"use strict";n.d(t,{p:function(){return useToast}});var i=n(36953);function useToast(){let{enqueueSnackbar:e}=(0,i.Ds)();return{showSuccessToast:t=>{e(t,{variant:"success"})},showErrorToast:t=>{e(t,{variant:"error"})}}}},63491:function(e,t,n){"use strict";n.d(t,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return o},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var i,o,r=n(92e3),a=n(36079);(i=o||(o={}))[i.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",i[i.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",i[i.EmailSignIn=2]="EmailSignIn";let l="ongoingflowoperation",s="postsigninurl";function getOnGoingFlowOperation(){return o[localStorage.getItem(l)]}function setOnGoingFlowOperation(e){localStorage.setItem(l,o[e])}function clearOnGoingFlowOperation(){localStorage.removeItem(l)}function setPostSignInUrl(e){a.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(s,e)}function clearPostSignInUrl(){a.k.log("flow","Clearing post sign in url"),localStorage.removeItem(s)}function usePostSignInFlow(){let e=(0,r.useRouter)();return{navigateToPostSignInLandingPage(t){let n=localStorage.getItem(s);if(n)a.k.log("flow","Navigating to post sign in landing page:",n),e.replace(n),clearPostSignInUrl();else{let n=t||"/dashboard";a.k.log("flow","Navigating to post sign in landing page ".concat(n)),e.push(n)}}}}}},function(e){e.O(0,[6990,9787,9443,8218,3988,3861,6506,8644,9490,9830,1711,1510,6953,378,1396,2e3,8599,3451,3989,9306,9265,7056,2971,7864,1744],function(){return e(e.s=97182)}),_N_E=e.O()}]);