(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3777],{86879:function(e,t,r){Promise.resolve().then(r.bind(r,77072))},77072:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ey}});var n,i,l=r(57437),a=r(23322),s=r(451),o=r(3283),d=r(16691),c=r.n(d);let h=e=>{let{credential:t,width:r=60,height:n=60}=e,[i]=(0,s.V)(null==t?void 0:t.representativeIcon$);return(0,l.jsx)(o.Z,{sx:{width:r,height:n},children:"string"==typeof i?(0,l.jsx)(c(),{src:i,alt:"",width:r-20,height:n-20}):i})};var u=r(46940),p=r(66988),x=r(98489),g=r(30666),j=r(95781),m=r(96507);let f={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};var y=e=>{let{order:t,orderBy:r,rowCount:n,headLabel:i,numSelected:a,onRequestSort:s,onSelectAllClick:o}=e,d=e=>t=>{s(t,e)};return(0,l.jsx)(p.Z,{children:(0,l.jsx)(x.Z,{children:i.map(e=>(0,l.jsx)(g.Z,{align:e.alignRight?"right":"left",sortDirection:r===e.id&&t,children:(0,l.jsxs)(j.Z,{hideSortIcon:!0,active:r===e.id,direction:r===e.id?t:"asc",onClick:d(e.id),children:[e.label,r===e.id?(0,l.jsx)(m.Z,{sx:{...f},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id))})})},v=r(46446),b=r(58991),w=r(34989),Z=r(90923),C=r(43226),k=r(81679),S=r(78276),E=r(52653),N=r(35843),P=r(89975);let D=(0,N.ZP)(w.Z)(e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}}),I=(0,N.ZP)(Z.Z)(e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:"0 8px 16px 0 ".concat((0,P.Fq)("#919EAB",.16))},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat((0,P.Fq)(t.palette.grey[500],.32)," !important")}}});var V=e=>{let{numSelected:t,filterName:r,onFilterName:n}=e;return(0,l.jsxs)(D,{sx:{...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?(0,l.jsxs)(C.Z,{component:"div",variant:"subtitle1",children:[t," selected"]}):(0,l.jsx)(I,{value:r,onChange:n,placeholder:"Search user...",startAdornment:(0,l.jsx)(k.Z,{position:"start",children:(0,l.jsx)(b.Z,{})})}),t>0?(0,l.jsx)(S.Z,{title:"Delete",onClick:()=>{},children:(0,l.jsx)(E.Z,{children:(0,l.jsx)(v.Z,{})})}):(0,l.jsx)(l.Fragment,{})]})},O=r(49599),A=r(54986),F=r(22079),M=r(91797),R=r(35266),T=r(69299),B=r(73393),W=r(72502),_=r(38212),L=r(35511),q=r(9177),z=e=>{let{onClose:t,open:r,availableItemsForAddition:n}=e,i=e=>{t(e)};return(0,l.jsxs)(F.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>{t(null)},open:r,children:[(0,l.jsx)(M.Z,{children:"Add profile information"}),(0,l.jsx)(A.Z,{}),(0,l.jsx)(R.Z,{sx:{pt:0},children:null==n?void 0:n.map((e,t)=>(0,l.jsx)(T.ZP,{disableGutters:!0,children:(0,l.jsxs)(W.Z,{onClick:()=>i(e),children:[(0,l.jsx)(B.Z,{children:(0,l.jsx)(o.Z,{sx:{bgcolor:L.Z[100],color:L.Z[600]},children:(0,l.jsx)(O.Z,{})})}),(0,l.jsx)(_.Z,{primary:(0,q.fm)(e.key)})]})},t))})]})},U=r(12854),$=r(20484),G=r(42937),H=r(89396),Q=r(4856),Y=r(13457),J=r(88938),K=r(35551),X=r(15133),ee=r(15795),et=r(73701),er=r(39279),en=r(19464),ei=r(59500),el=r(74309),ea=r(96556),es=r(59606),eo=r(53932),ed=r(3883),ec=r(77434),eh=r.n(ec),eu=r(61396),ep=r.n(eu),ex=r(24033),eg=r(2265),ej=r(22440);let em=e=>{let{credential:t,onFileUpload:r}=e,n=async e=>{if((null==e?void 0:e.length)>0){let t=e[0];r(t)}},{getRootProps:i,getInputProps:a,isDragActive:s,isDragReject:o,fileRejections:d}=(0,ej.uI)({multiple:!1,maxFiles:1,onDrop:n});return(0,l.jsxs)("div",{...i(),style:{...s&&{opacity:.72}},className:"cursor-pointer",children:[(0,l.jsx)("input",{...a()}),(0,l.jsx)(h,{credential:t})]})};(n=i||(i={})).NAME="name",n.VALUE="value";let ef=[{id:"name",label:"Name",alignRight:!1},{id:"value",label:"Value",alignRight:!1},{id:"",alignRight:!1}];var ey=()=>{let e="ProfilePage",[t]=(0,s.V)(eo.B),r=null==t?void 0:t.get("credentials"),n=null==t?void 0:t.get("profile"),[o]=(0,s.V)(null==n?void 0:n.profileCredentials$),{mounted:d}=(0,G.s)(),c=(0,ex.useRouter)(),[p]=(0,s.V)(null==n?void 0:n.avatarCredential$),[j,f]=(0,eg.useState)(null),[v,b]=(0,eg.useState)([]),[w,Z]=(0,eg.useState)(!1),[k,S]=(0,eg.useState)(!1),[N,P]=(0,eg.useState)(null),[D,I]=(0,eg.useState)(""),[O,A]=(0,eg.useState)(U.b1.NEW),{showSuccessToast:F,showErrorToast:M}=(0,ea.p)(),[R,T]=(0,eg.useState)(null),[B,W]=(0,eg.useState)(0),[_,L]=(0,eg.useState)("asc"),[q,ec]=(0,eg.useState)([]),[eu,ej]=(0,eg.useState)(i.NAME),[ey,ev]=(0,eg.useState)(""),[eb,ew]=(0,eg.useState)(5),[eZ,eC]=(0,eg.useState)(!1),ek=(0,es.yd)(),eS=t&&"https://eid.elastos.io/did?did=".concat(encodeURIComponent(t.did),"&is_did=true"),eE=()=>{let e=null==ek?void 0:ek.filter(e=>e.options.multipleInstancesAllowed||!(null==o?void 0:o.find(t=>{var r;return t.verifiableCredential.type.includes(null===(r=e.type)||void 0===r?void 0:r.getShortType())})));b(e)};(0,eg.useEffect)(()=>{eE()},[o]);let eN=(e,t,r)=>{e?F(t):M(r)},eP=async t=>{if(S(!1),t&&t.value){if(t.type==U.b1.EDIT&&t.originCredential){let r=!1;try{r=await n.updateProfileCredential(t.originCredential,t.value).catch()}catch(t){ed.k.error(e,"Update credential error",t)}eN(r,"Entry has been updated!","Failed to update the entry...")}if(t.type==U.b1.NEW&&!j){let r=!1;try{r=!!await n.createProfileCredential("",t.info.typesForCreation(),t.info.key,t.value)}catch(t){ed.k.error(e,"Create credential error",t)}eN(r,"Entry has been created!","Failed to create the entry...")}}},eD=(e,t)=>{e.stopPropagation(),e.preventDefault(),T(e.currentTarget),f(t)},eI=()=>{T(null)};function eV(e,t,r){switch(r){case"name":return e.getDisplayableTitle().localeCompare(t.getDisplayableTitle());case"value":{let r=e.getDisplayValue().label?e.getDisplayValue().label:e.getDisplayValue(),n=t.getDisplayValue().label?t.getDisplayValue().label:t.getDisplayValue();return r.localeCompare(n)}}}let eO=B>0?Math.max(0,(1+B)*eb-(null==o?void 0:o.length)):0,eA=function(e,t,r){let n=null==e?void 0:e.map((e,t)=>[e,t]);return(null==n||n.sort((e,r)=>{let n=t(e[0],r[0]);return 0!==n?n:e[1]-r[1]}),r)?eh()(e,e=>-1!==e.verifiableCredential.getId().getFragment().toLowerCase().indexOf(r.toLowerCase())):null==n?void 0:n.map(e=>e[0])}(o,"desc"===_?(e,t)=>eV(e,t,eu):(e,t)=>-eV(e,t,eu),ey),eF=!(null==eA?void 0:eA.length)&&!!ey,eM=async t=>{if(eC(!1),!t)return;let n=!1;try{n=await r.deleteCredential(j)}catch(t){ed.k.error(e,t)}eN(n,"Entry has been deleted","Failed to delete the entry...")},eR=e=>{let t="Your current credential is: "+e.getDisplayValue();F(t),n.setActiveCredential(e),c.replace("/credentials/list")};return(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsx)(a.O,{entries:["profile"]}),(0,l.jsx)(m.Z,{mt:2,component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,l.jsx)(Y.Z,{alignItems:"center",spacing:3,sx:{pt:5,borderRadius:2,position:"relative"},children:(0,l.jsx)(em,{credential:p,onFileUpload:e=>{n.upsertIdentityAvatar(e)}})})}),(0,l.jsxs)(J.Z,{children:[(0,l.jsxs)(Y.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(C.Z,{variant:"h4",gutterBottom:!0,children:"About me"}),(0,l.jsx)(K.Z,{variant:"contained",startIcon:(0,l.jsx)(H.Z,{}),onClick:()=>{Z(!0)},children:"New profile item"})]}),(0,l.jsxs)(C.Z,{gutterBottom:!0,children:[(0,l.jsx)("i",{children:"Good to know"}),": every item in the list below is stored in your identity as an individual ",(0,l.jsx)("b",{children:"credential"}),". Credentials can later be shared to apps that request them, with your consent. Credentials are always signed with your own signature so no matter where they are shared, one can always make sure that ",(0,l.jsx)("b",{children:"the information inside was created by you, and not modified"}),"."]}),(!o||!d)&&(0,l.jsx)($.q,{}),o&&d&&(0,l.jsxs)(X.Z,{children:[(0,l.jsx)(V,{numSelected:q.length,filterName:ey,onFilterName:e=>{W(0),ev(e.target.value)}}),(0,l.jsx)(ee.Z,{sx:{maxWidth:1200},children:(0,l.jsxs)(et.Z,{children:[(0,l.jsx)(y,{order:_,orderBy:eu,headLabel:ef,rowCount:o?o.length:0,numSelected:q?q.length:0,onRequestSort:(e,t)=>{let r=eu===t&&"asc"===_;L(r?"desc":"asc"),ej(t)},onSelectAllClick:()=>{}}),(0,l.jsxs)(er.Z,{children:[null==eA?void 0:eA.slice(B*eb,B*eb+eb).map(e=>{let t=e.id;return(0,l.jsxs)(x.Z,{hover:!0,tabIndex:-1,onClick:()=>eR(e),children:[(0,l.jsx)(g.Z,{component:"th",scope:"row",padding:"none",children:(0,l.jsxs)(Y.Z,{ml:1,direction:"row",alignItems:"center",spacing:2,children:[(0,l.jsx)(h,{credential:e,width:60,height:60}),(0,l.jsx)(C.Z,{variant:"subtitle2",noWrap:!0,children:e.getDisplayableTitle()})]})}),(0,l.jsx)(g.Z,{align:"left",children:e.getDisplayValue()}),(0,l.jsx)(g.Z,{align:"right",children:(0,l.jsx)(E.Z,{size:"large",color:"inherit",onClick:t=>{eD(t,e)},children:(0,l.jsx)(Q.Z,{})})})]},t)}),eO>0&&(0,l.jsx)(x.Z,{style:{height:53*eO},children:(0,l.jsx)(g.Z,{colSpan:6})})]}),eF&&(0,l.jsx)(er.Z,{children:(0,l.jsx)(x.Z,{children:(0,l.jsx)(g.Z,{align:"center",colSpan:6,sx:{py:3},children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(C.Z,{variant:"h6",paragraph:!0,children:"Not found"}),(0,l.jsxs)(C.Z,{variant:"body2",children:["No results found for \xa0",(0,l.jsxs)("strong",{children:['"',ey,'"']}),".",(0,l.jsx)("br",{})," Try checking for typos or using complete words."]})]})})})})]})}),(0,l.jsx)(en.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:o?o.length:0,rowsPerPage:eb,page:B,onPageChange:(e,t)=>{W(t)},onRowsPerPageChange:e=>{W(0),ew(parseInt(e.target.value,10))}})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(C.Z,{variant:"h4",gutterBottom:!0,children:"Advanced"})}),eS&&(0,l.jsx)(ep(),{target:"_blank",href:eS,children:"View identity's DID on blockchain explorer"})]}),(0,l.jsxs)(ei.ZP,{open:!!R,anchorEl:R,onClose:eI,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:1,width:140,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75}}},children:[(0,l.jsx)(el.Z,{onClick:()=>{eI(),S(!0);let e=(0,es.m7)(j.verifiableCredential.getType());P(e),I(j.verifiableCredential.getSubject().getProperty(e.key)),A(U.b1.EDIT)},children:"Edit"}),(0,l.jsx)(el.Z,{sx:{color:"error.main"},onClick:()=>{eI(),eC(!0)},children:"Delete"})]}),(0,l.jsx)(u.Z,{title:"Delete this Credential?",content:"Do you want to delete this Credential?",open:eZ,onClose:eM}),(0,l.jsx)(z,{open:w,onClose:e=>{Z(!1),console.log("selected item",e),e&&(S(!0),P(e),I(""),A(U.b1.NEW),f(null))},availableItemsForAddition:v}),(0,l.jsx)(U.ZP,{credentialInfo:N,defaultValue:D,type:O,open:k,originCredential:j,onClose:eP})]})}},23322:function(e,t,r){"use strict";r.d(t,{O:function(){return g}});var n,i,l=r(57437),a=r(61396),s=r.n(a),o=r(2265);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let h=[{key:"dashboard",icon:(0,l.jsx)(function(e){return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),n||(n=o.createElement("path",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6.5 20v-9H3l9-6 9 6h-3.5v9h-3v-3.5A1.5 1.5 0 0 0 13 15h-2a1.5 1.5 0 0 0-1.5 1.5V20h-3Z"})))},{}),title:"Dashboard",path:"/dashboard"},{key:"profile",title:"Profile",path:"/profile"},{key:"security-center",icon:(0,l.jsx)(function(e){return o.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},e),i||(i=o.createElement("g",{"data-name":"Layer 2"},o.createElement("path",{fill:"none",d:"M0 0h48v48H0z","data-name":"invisible box"}),o.createElement("path",{fill:"currentColor",d:"M24 2S6 7.1 6 8v18.2c0 9.2 13.3 17.3 17 19.5a1.8 1.8 0 0 0 2 0c3.8-2.1 17-10.3 17-19.5V8c0-.9-18-6-18-6Zm9.4 16.4-11 11a1.9 1.9 0 0 1-2.8 0l-4.9-4.9a2.2 2.2 0 0 1-.4-2.7 2 2 0 0 1 3.1-.2l3.6 3.6 9.6-9.6a2 2 0 0 1 2.8 2.8Z","data-name":"icons Q2"}))))},{}),title:"Security center",path:"/account/security"},{key:"bind-browser",title:"Bind browser",path:"/account/security/bind-passkey"}];function u(e){let t=h.find(t=>t.key===e);if(!t)throw Error("Unknown breadcrumbs item ".concat(e));return t}let p=e=>{let{item:t}=e,{icon:r,title:n,path:i}=t;return(0,l.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[r&&(0,l.jsx)("div",{className:"mr-1",style:{width:18,height:18,color:"var(--primary-color)"},children:r}),(0,l.jsx)(s(),{href:i,className:" bg-gray-200 px-3 py-1 rounded-lg",style:{fontSize:14},children:n})]})},x=()=>(0,l.jsx)("div",{className:"mx-2",children:"/"}),g=e=>{let{entries:t}=e,r=u("dashboard"),n=[r,...t.map(e=>u(e))];return(0,l.jsx)("div",{className:"flex flex-row items-center w-full justify-center",children:n.map((e,t)=>(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)(p,{item:e}),t<n.length-1&&(0,l.jsx)(x,{})]},t))})}}},function(e){e.O(0,[6990,6110,8920,7679,6953,6685,7695,6540,5513,6432,25,2971,596,1744],function(){return e(e.s=86879)}),_N_E=e.O()}]);