(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8541],{43226:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(20791),r=n(13428),o=n(2265),a=n(57042),l=n(43381),s=n(95600),c=n(35843),u=n(87927),d=n(28702),h=n(26520),m=n(25702);function g(e){return(0,m.Z)("MuiTypography",e)}(0,h.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var p=n(57437);let f=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],v=e=>{let{align:t,gutterBottom:n,noWrap:i,paragraph:r,variant:o,classes:a}=e,l={root:["root",o,"inherit"!==e.align&&`align${(0,d.Z)(t)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return(0,s.Z)(l,g,a)},y=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,d.Z)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>(0,r.Z)({margin:0},"inherit"===t.variant&&{font:"inherit"},"inherit"!==t.variant&&e.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),x={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},S={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=e=>S[e]||e,b=o.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiTypography"}),o=w(n.color),s=(0,l.Z)((0,r.Z)({},n,{color:o})),{align:c="inherit",className:d,component:h,gutterBottom:m=!1,noWrap:g=!1,paragraph:S=!1,variant:b="body1",variantMapping:Z=x}=s,j=(0,i.Z)(s,f),I=(0,r.Z)({},s,{align:c,color:o,className:d,component:h,gutterBottom:m,noWrap:g,paragraph:S,variant:b,variantMapping:Z}),C=h||(S?"p":Z[b]||x[b])||"span",B=v(I);return(0,p.jsx)(y,(0,r.Z)({as:C,ref:t,ownerState:I,className:(0,a.Z)(B.root,d)},j))});var Z=b},59782:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(13428),r=n(2265),o=n(20791),a=n(57042),l=n(95600),s=n(28702),c=n(87927),u=n(35843),d=n(26520),h=n(25702);function m(e){return(0,h.Z)("MuiSvgIcon",e)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var g=n(57437);let p=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],f=e=>{let{color:t,fontSize:n,classes:i}=e,r={root:["root","inherit"!==t&&`color${(0,s.Z)(t)}`,`fontSize${(0,s.Z)(n)}`]};return(0,l.Z)(r,m,i)},v=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,s.Z)(n.color)}`],t[`fontSize${(0,s.Z)(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,i,r,o,a,l,s,c,u,d,h,m,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(n=e.transitions)||null==(i=n.create)?void 0:i.call(n,"fill",{duration:null==(r=e.transitions)||null==(r=r.duration)?void 0:r.shorter}),fontSize:({inherit:"inherit",small:(null==(o=e.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(l=e.typography)||null==(s=l.pxToRem)?void 0:s.call(l,24))||"1.5rem",large:(null==(c=e.typography)||null==(u=c.pxToRem)?void 0:u.call(c,35))||"2.1875rem"})[t.fontSize],color:null!=(d=null==(h=(e.vars||e).palette)||null==(h=h[t.color])?void 0:h.main)?d:({action:null==(m=(e.vars||e).palette)||null==(m=m.action)?void 0:m.active,disabled:null==(g=(e.vars||e).palette)||null==(g=g.action)?void 0:g.disabled,inherit:void 0})[t.color]}}),y=r.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:l,className:s,color:u="inherit",component:d="svg",fontSize:h="medium",htmlColor:m,inheritViewBox:y=!1,titleAccess:x,viewBox:S="0 0 24 24"}=n,w=(0,o.Z)(n,p),b=r.isValidElement(l)&&"svg"===l.type,Z=(0,i.Z)({},n,{color:u,component:d,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:y,viewBox:S,hasSvgAsChild:b}),j={};y||(j.viewBox=S);let I=f(Z);return(0,g.jsxs)(v,(0,i.Z)({as:d,className:(0,a.Z)(I.root,s),focusable:"false",color:m,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},j,w,b&&l.props,{ownerState:Z,children:[b?l.props.children:l,x?(0,g.jsx)("title",{children:x}):null]}))});function x(e,t){function n(n,r){return(0,g.jsx)(y,(0,i.Z)({"data-testid":`${t}Icon`,ref:r},n,{children:e}))}return n.muiName=y.muiName,r.memo(r.forwardRef(n))}y.muiName="SvgIcon"},62784:function(e,t,n){Promise.resolve().then(n.bind(n,37208))},37208:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n(57437),r=n(96283),o=n(9254),a=n(58114),l=n(40542),s=n(97716),c=n(90726),u=n(43226),d=n(19739),h=n(63491),m=n(60230),g=n(23965),p=n(51894);let f="\n  id\n  identityInfo { ".concat("\n  did\n  createdAt\n  credentialsCount\n  creatingAppDid\n"," }\n  claimUrl\n  expiresAt\n  claimCompletedAt\n");class v{static async fromJson(e){let t=new v;return Object.assign(t,e),t.createdAt=new Date(e.createdAt),t}}class y{static async fromJson(e){let t=new y;return Object.assign(t,e),t.identityInfo=await v.fromJson(e.identityInfo),e.expiresAt&&(t.expiresAt=new Date(e.expiresAt)),e.claimCompletedAt&&(t.claimCompletedAt=new Date(e.claimCompletedAt)),t}}var x=n(29748),S=n(91395);function w(){let e=(0,m._)(["\n        query IdentityClaimRequest($claimRequestId: String!) {\n          identityClaimRequest(id: $claimRequestId) {\n            ","\n          }\n        }\n      "]);return w=function(){return e},e}async function b(e){var t,n;let i=await (0,p.H)(()=>(0,x.Pt)(async()=>(await (0,S.W)()).query({query:(0,g.Ps)(w(),f),variables:{claimRequestId:e}})));return(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.identityClaimRequest)?y.fromJson(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.identityClaimRequest):null}var Z=n(78596),j=n(36079),I=n(14776),C=n(24033),B=n(2265);let k="claim-identity";var A=()=>{let{mounted:e}=(0,s.s)(),t=(0,C.useSearchParams)(),n=t.get("request"),[m,g]=(0,B.useState)(!0),[p,f]=(0,B.useState)(!1),[v,y]=(0,B.useState)(null),[x,S]=(0,B.useState)(null),[w,A]=(0,B.useState)(null),[D,N]=(0,B.useState)(null),[R]=(0,l.V)(null==D?void 0:D.name$),q=(0,C.useRouter)(),[z]=(0,l.V)(I.DR),[E]=(0,l.V)(I.jU),T=!m&&z,{showSuccessToast:$,showErrorToast:F}=(0,d.p)();(0,B.useEffect)(()=>{n&&!v&&(j.k.log(k,"Fetching claim request details"),b(n).then(e=>{var t;j.k.log(k,"Got claim request",e),y(e),S(null===(t=e.identityInfo)||void 0===t?void 0:t.creatingAppDid)}))},[n,v]),(0,B.useEffect)(()=>{x&&!w&&(j.k.log(k,"Fetching creating app's DID document on chain"),Z._.resolveDIDDocument(x).then(async e=>{if(g(!1),A(e),j.k.log(k,"Got creating app's DID document:",e),e){let t=e.getCredentialByType("ApplicationCredential");t?N(await (0,c.C)(t)):j.k.error(k,"The on chain DID document supposed to contain an app info credential doesn't have such credential")}else j.k.warn(k,"Unable to resolve DID Document of the app that created the managed identity")}))},[x,w]);let M=async()=>{f(!0);let e=await E.get("identity").claimManagedIdentity(v);e?($("Identity claimed successfully"),q.replace("/dashboard")):(F("Sorry, the identity failed to be claimed for some reason"),f(!1))};return e?(0,i.jsxs)("div",{className:"flex flex-col col-span-full",children:[(0,i.jsx)(u.Z,{variant:"h5",children:"Identity claim"}),!T&&(0,i.jsx)(a.q,{}),T&&!m&&(0,i.jsx)(i.Fragment,{children:!v&&(0,i.jsx)(u.Z,{children:"Sorry, we could not find information about this identity at the moment."})}),v&&(0,i.jsxs)(i.Fragment,{children:[R&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Z,{children:["A new Web3 identity has been prepared for you by ",(0,i.jsx)("b",{children:R})," and is ready for you to claim."]}),(0,i.jsxs)(u.Z,{children:["Claiming means that this identity, initially created and controlled by ",R,", will now fully become yours, together with your other identities in your account."]})]}),!R&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{children:"A new Web3 identity has been prepared for you by a third party application."}),(0,i.jsx)(u.Z,{children:"Claiming means that this identity, initially created and controlled by another application, will now fully become yours, together with your other identities in your account."})]}),D&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.J,{credential:D})}),!E&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"flex items-center space-x-3 mt-8",children:e&&!E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.c,{onClick:()=>{(0,h.qC)(window.location.toString()),q.push("/signup")},children:"Sign up"}),(0,i.jsx)(o.c,{onClick:()=>{(0,h.qC)(window.location.toString()),q.push("/signin")},children:"Sign in"})]})})}),E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.c,{className:"mt-8",onClick:M,busy:p,children:"Claim this identity"}),(0,i.jsx)(u.Z,{children:"This new identity will be transfered to your account."})]})]})]}):null}},96283:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var i=n(57437),r=n(40542),o=n(3283),a=n(57042),l=n(16691),s=n.n(l);let c=e=>{let{credential:t,width:n=60,height:l=60,className:c}=e,[u]=(0,r.V)(null==t?void 0:t.representativeIcon$);return(0,i.jsx)(o.Z,{sx:{width:n,height:l},className:(0,a.Z)(c),children:"string"==typeof u?(0,i.jsx)(s(),{src:u,alt:"",width:n,height:l}):u})}},9254:function(e,t,n){"use strict";n.d(t,{c:function(){return l}});var i=n(57437),r=n(6882),o=n(49050),a=n(57042);let l=e=>{let{leftIcon:t,size:n="medium",mode:l="default",onClick:s,children:c,busy:u=!1,disabled:d=!1,className:h}=e,m=(0,i.jsx)(r.Z,{size:16});return(0,i.jsx)("div",{className:(0,a.Z)("flex",h),children:(0,i.jsx)(o.Z,{className:"flex-1",startIcon:u?m:t,disabled:u||d,size:n,color:"default"===l?"primary":"error",variant:"contained",onClick:s,children:c})})}},58114:function(e,t,n){"use strict";n.d(t,{q:function(){return o}});var i=n(57437),r=n(57042);n(69937);let o=e=>{let{className:t}=e;return(0,i.jsx)("div",{className:(0,r.Z)("vertical-stack-loading-card",t),children:(0,i.jsxs)("div",{className:"content",children:[(0,i.jsx)("p",{}),(0,i.jsx)("h2",{}),(0,i.jsx)("h2",{})]})})}},40542:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(2265);let r=e=>{let[t,n]=(0,i.useState)(null==e?void 0:e.getValue()),[r,o]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!e){n(null);return}let t=e.subscribe({next:e=>{n(e)},error:o});return()=>t.unsubscribe()},[e]),[t]}},97716:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(2265);let r=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),{mounted:e}}},19739:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var i=n(36953);function r(){let{enqueueSnackbar:e}=(0,i.Ds)();return{showSuccessToast:t=>{e(t,{variant:"success"})},showErrorToast:t=>{e(t,{variant:"error"})}}}},63491:function(e,t,n){"use strict";n.d(t,{$Y:function(){return u},Ad:function(){return m},Kt:function(){return c},cX:function(){return r},fK:function(){return d},qC:function(){return h},vX:function(){return g}});var i,r,o=n(92e3),a=n(36079);(i=r||(r={}))[i.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",i[i.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",i[i.EmailSignIn=2]="EmailSignIn";let l="ongoingflowoperation",s="postsigninurl";function c(){return r[localStorage.getItem(l)]}function u(e){localStorage.setItem(l,r[e])}function d(){localStorage.removeItem(l)}function h(e){a.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(s,e)}function m(){a.k.log("flow","Clearing post sign in url"),localStorage.removeItem(s)}function g(){let e=(0,o.useRouter)();return{navigateToPostSignInLandingPage(t){let n=localStorage.getItem(s);if(n)a.k.log("flow","Navigating to post sign in landing page:",n),e.replace(n),m();else{let n=t||"/dashboard";a.k.log("flow","Navigating to post sign in landing page ".concat(n)),e.replace(n)}}}}},69937:function(){}},function(e){e.O(0,[6990,9787,9443,8218,3988,395,8321,9152,5295,1396,1510,9930,2e3,7998,3262,2971,7864,1744],function(){return e(e.s=62784)}),_N_E=e.O()}]);