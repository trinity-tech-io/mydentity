(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4638],{79085:function(n,e,i){Promise.resolve().then(i.bind(i,10917))},10917:function(n,e,i){"use strict";i.r(e),i.d(e,{default:function(){return page}});var t=i(57437),a=i(2265),u=i(24033),r=i(92e3),o=i(4778),c=i(73052),s=i(63491),l=i(60230),d=i(36079),k=i(29748),h=i(91395),f=i(23965),m=i(11059);function _templateObject(){let n=(0,l._)(["\n        mutation OauthLinkedinSignIn($input: LinkedinSignInInput!) {\n          oauthLinkedinSignIn(input: $input) { accessToken refreshToken }\n        }\n      "]);return _templateObject=function(){return n},n}function _templateObject1(){let n=(0,l._)(["\n        mutation OauthLinkedBindEmail($input: LinkedinBindEmailInput!) {\n          oauthLinkedBindEmail(input: $input)\n        }\n      "]);return _templateObject1=function(){return n},n}async function oauthLinkedinSignIn(n){d.k.log("user","oauth Linkedin sign in.");let e={code:n},i=await (0,k.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,f.Ps)(_templateObject()),variables:{input:e}}));if(null==i||!i.data||!i.data.oauthLinkedinSignIn)return d.k.error("user","failed to oauth Linkedin sign in."),null;{let{accessToken:n,refreshToken:e}=i.data.oauthLinkedinSignIn;return(0,m.vz)(n,e)}}async function oauthLinkedinBindEmail(n){d.k.log("user","oauth Linkedin bind email.");let e={code:n},i=await (0,k.Pt)(async()=>(await (0,h.W)()).mutate({mutation:(0,f.Ps)(_templateObject1()),variables:{input:e}}));return(null==i?void 0:i.data)&&i.data.oauthLinkedBindEmail?(d.k.log("user","Oauth Linkedin email bound successfully"),!0):(d.k.error("user","failed to oauth Linkedin bind email."),!1)}var p=i(31514),page=()=>{let n=(0,r.useRouter)(),e=(0,u.useSearchParams)(),i=e.get("code"),{navigateToPostSignInLandingPage:l}=(0,s.vX)();return(0,a.useEffect)(()=>{if(i){let e=(0,s.Kt)();switch(e){case s.cX.OnBoardingEmailBinding:oauthLinkedinBindEmail(i).then(e=>{e?n.push("/account/security"):((0,s.fK)(),n.push("/account/security?error=unknown"))}).catch(e=>{e&&e instanceof o.E?((0,s.fK)(),n.push("/account/security?error=emailExists")):((0,s.fK)(),n.push("/account/security?error=unknown"))});break;case s.cX.EmailSignIn:oauthLinkedinSignIn(i).then(e=>{e?((0,s.fK)(),l()):((0,s.fK)(),n.push("/signin?error=unknownLinkedin"))}).catch(e=>{e instanceof c.h&&((0,s.fK)(),n.push("/signin?error=oauthLinkedinEmailNotExists"))});break;default:alert("Invalid operation, please try again.");return}}else alert("LinkedinRedirect: No code from Linked authentication callback.")},[]),(0,t.jsx)("div",{children:(0,t.jsx)(p.Z,{})})}}},function(n){n.O(0,[6990,9787,9443,8218,3988,3861,6506,8644,9830,1711,1396,2e3,7056,8815,2971,7864,1744],function(){return n(n.s=79085)}),_N_E=n.O()}]);