(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7083],{94802:function(e,n,t){Promise.resolve().then(t.bind(t,42581))},42581:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return page}});var i=t(57437),o=t(40542),r=t(95815),a=t(94025),l=t(43226),s=t(66563),c=t(6882),u=t(63491),g=t(14776),d=t(11059),f=t(55630),h=t(67133).Buffer,p=void 0!==h?e=>h.from(e,"base64"):e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0)),m=t(24033),v=t(2265),page=()=>{var e;let n=(0,m.useSearchParams)(),t=n.get("key"),h=t?(e=t.replace(/-/g,"+").replace(/_/g,"/")+"==",(0,f.Z)(p(e))):null,[S,I]=(0,v.useState)(!1),[w,x]=(0,v.useState)(null),[O,P]=(0,v.useState)(!1),k=(0,m.useRouter)(),[b]=(0,o.V)(g.jU),{navigateToPostSignInLandingPage:B}=(0,u.vX)(),handleCheckException=e=>{if(I(!1),e instanceof r._)switch(e.appExceptionCode){case a.Wg.InvalidPINCode:x("Invalid PIN code");return;case a.Wg.InexistingAuthKey:x("This link is inexisting or expired");return}x("Unexpected error")},checkPin=e=>{I(!0),b?(P(!0),b.get("email").checkRawEmailBind(h,e).then(e=>{e?k.push("/account/security"):(x("Unexpected error"),I(!1))}).catch(e=>{handleCheckException(e)})):(0,d.K4)(h,e).then(e=>{e?B():(x("Unexpected error"),I(!1))}).catch(e=>{handleCheckException(e)})};return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(l.Z,{variant:"h4",children:"Enter PIN code"}),(0,i.jsx)(l.Z,{children:"(This is the 6 digit PIN code provided earlier, not your account password)"}),(0,i.jsxs)("div",{className:"flex flex-row items-center mt-4",children:[(0,i.jsx)(s.Z,{autoFocus:!0,onChange:e=>{var n;x(null);let t=null===(n=e.currentTarget)||void 0===n?void 0:n.value;6==t.length&&checkPin(t)},margin:"dense",id:"pinCode",label:"PIN Code",variant:"outlined",autoComplete:"off",disabled:S}),S&&(0,i.jsx)("div",{className:"ml-4",children:(0,i.jsx)(c.Z,{size:20})})]}),w&&(0,i.jsx)(l.Z,{className:"w-full text-red-500 mt-4",children:w})]})}},40542:function(e,n,t){"use strict";t.d(n,{V:function(){return useBehaviorSubject}});var i=t(2265);let useBehaviorSubject=e=>{let[n,t]=(0,i.useState)(null==e?void 0:e.getValue()),[o,r]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!e){t(null);return}let n=e.subscribe({next:e=>{t(e)},error:r});return()=>n.unsubscribe()},[e]),[n]}},63491:function(e,n,t){"use strict";t.d(n,{$Y:function(){return setOnGoingFlowOperation},Ad:function(){return clearPostSignInUrl},Kt:function(){return getOnGoingFlowOperation},cX:function(){return o},fK:function(){return clearOnGoingFlowOperation},qC:function(){return setPostSignInUrl},vX:function(){return usePostSignInFlow}});var i,o,r=t(92e3),a=t(36079);(i=o||(o={}))[i.OnBoardingEmailBinding=0]="OnBoardingEmailBinding",i[i.OnBoardingBrowserBinding=1]="OnBoardingBrowserBinding",i[i.EmailSignIn=2]="EmailSignIn";let l="ongoingflowoperation",s="postsigninurl";function getOnGoingFlowOperation(){return o[localStorage.getItem(l)]}function setOnGoingFlowOperation(e){localStorage.setItem(l,o[e])}function clearOnGoingFlowOperation(){localStorage.removeItem(l)}function setPostSignInUrl(e){a.k.log("flow","Setting post sign in url to:",e),localStorage.setItem(s,e)}function clearPostSignInUrl(){a.k.log("flow","Clearing post sign in url"),localStorage.removeItem(s)}function usePostSignInFlow(){let e=(0,r.useRouter)();return{navigateToPostSignInLandingPage(n){let t=localStorage.getItem(s);if(t)a.k.log("flow","Navigating to post sign in landing page:",t),e.replace(t),clearPostSignInUrl();else{let t=n||"/dashboard";a.k.log("flow","Navigating to post sign in landing page ".concat(t)),e.push(t)}}}}}},function(e){e.O(0,[6990,9787,9443,8218,3988,395,8321,3824,6642,1228,1396,2e3,4558,7407,1869,9034,6563,6481,3262,2971,7864,1744],function(){return e(e.s=94802)}),_N_E=e.O()}]);