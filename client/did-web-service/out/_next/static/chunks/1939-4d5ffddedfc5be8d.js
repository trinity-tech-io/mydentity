"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1939],{80072:function(e,t,n){var r=n(57437),l=n(2265),o=n(35843),s=n(71711),i=n(52653),a=n(81679),c=n(49605),u=n(4193),d=n(57042);let p=(0,o.ZP)(s.Z)(e=>{let{theme:t}=e;return{input:{color:"white",marginTop:20}}}),h=(0,o.ZP)(i.Z)(e=>{let{theme:t}=e;return{color:"white"}});t.Z=e=>{let{outerProps:t={},inputProps:n={}}=e,[o,s]=l.useState(!1);return(0,r.jsx)(p,{...t,type:o?"input":"password",className:(0,d.Z)("password-input",!o&&"redacted"),inputProps:{maxLength:100,...n},startAdornment:(0,r.jsx)(a.Z,{position:"start",className:"absolute"}),endAdornment:(0,r.jsx)(a.Z,{position:"end",children:(0,r.jsx)(h,{"aria-label":"toggle password visibility",onClick:()=>s(e=>!e),onMouseDown:e=>{e.preventDefault()},children:o?(0,r.jsx)(u.Z,{}):(0,r.jsx)(c.Z,{})})})})}},66267:function(e,t,n){n.d(t,{C:function(){return i}});var r=n(57437),l=n(3283),o=n(43226),s=n(35843);let i=(0,s.ZP)(l.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#9D3E3E",color:"white",width:36,height:36,padding:8}});t.Z=e=>{let{icon:t,title:n,description:l,className:s=""}=e;return(0,r.jsxs)("div",{className:"text-[#DDD] ".concat(s),children:[(0,r.jsx)("div",{className:"inline-flex pb-1",children:(0,r.jsx)(i,{children:t})}),(0,r.jsx)(o.Z,{variant:"body1",className:"underline underline-offset-2",children:n}),(0,r.jsx)(o.Z,{variant:"body2",children:l})]})}},49017:function(e,t,n){var r=n(35843),l=n(84081);let o=(0,r.ZP)(l.Z)(e=>{let{theme:t}=e;return{".MuiInput-root":{marginTop:0,"&:before, &:after":{opacity:.18,borderColor:"white"}},".MuiInputBase-root.MuiInput-root:hover:not(.Mui-disabled, .Mui-error)":{"&:before, &:after":{opacity:.18,borderColor:"white"}},".MuiInput-root.Mui-focused":{"&:before, &:after":{opacity:.3}},".MuiInputLabel-root, .MuiInputLabel-root.Mui-focused:not(.Mui-error)":{color:"white",fontSize:"10px",transform:"unset",WebkitTransform:"unset"},"#holder-name":{fontWeight:600,fontSize:"15pt",textAlign:"center",caretColor:"white",color:"rgb(255 255 255 / 65%)"},".password-input.redacted":{fontFamily:"Redacted Script"},".MuiFormHelperText-root":{marginLeft:0,display:"none"},".MuiFormHelperText-root.Mui-error":{display:"block"}}});t.Z=o},9254:function(e,t,n){n.d(t,{c:function(){return MainButton}});var r=n(57437),l=n(6882),o=n(49050),s=n(57042);let MainButton=e=>{let{leftIcon:t,size:n="medium",mode:i="default",onClick:a,children:c,busy:u=!1,disabled:d=!1,className:p}=e,h=(0,r.jsx)(l.Z,{size:16});return(0,r.jsx)("div",{className:(0,s.Z)("flex",p),children:(0,r.jsx)(o.Z,{className:"flex-1",startIcon:u?h:t,disabled:u||d,size:n,color:"default"===i?"primary":"error",variant:"contained",onClick:a,children:c})})}},70906:function(e,t,n){n.d(t,{au:function(){return UnlockKeyPromptContextProvider},lJ:function(){return useUnlockKeyPrompt},NX:function(){return useUnlockPromptState}});var r=n(57437),l=n(39513),o=n(66267),s=n(14504),i=n(40542),a=n(95815),c=n(94025),u=n(5253),d=n(64101),p=n(56176),h=n(22079),f=n(43226),m=n(35843),x=n(7482),b=n(36079),k=n(50707),v=n(14776),y=n(2265),j=n(39830),w=n(23785);let PasskeyPrompt=e=>{let{onConfirm:t,disabled:n}=e,[l]=(0,i.V)(v.jU),o=null==l?void 0:l.get("security"),onSubmit=async()=>{let e=await o.unlockPasskeyLocally();t(e)};return(0,r.jsx)(w.Kz,{id:"bind-ms",className:"w-4/5",startIcon:(0,r.jsx)(j.JO,{icon:"material-symbols:passkey"}),disabled:n,onClick:onSubmit,children:"Unlock with passkey"})};var P=n(50819),g=n(49017),Z=n(80072);let PasswordPrompt=e=>{let{onConfirm:t,disabled:n}=e,[l,o]=(0,y.useState)(""),s=(0,y.useRef)(null),submitPassword=e=>{if(e.preventDefault(),!s.current.value){s.current.focus();return}t(s.current.value)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("form",{onSubmit:submitPassword,children:(0,r.jsxs)(g.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{htmlFor:"pw",children:"PASSWORD"}),(0,r.jsx)(Z.Z,{outerProps:{autoFocus:!0,disabled:n,onChange:e=>{o(e.target.value)}},inputProps:{ref:s}})]})}),(0,r.jsx)("div",{className:"p-2 pb-0 text-center",children:(0,r.jsx)(w.Kz,{id:"bind-ms",className:"w-4/5",disabled:n||!l.length,onClick:submitPassword,children:"Continue"})})]})};var C=n(51894),U=n(53946);let N=(0,y.createContext)({actions:null,setActions:null});function UnlockKeyPromptContextProvider(e){let[t,n]=(0,y.useState)(null);return(0,r.jsxs)(N.Provider,{value:{actions:t,setActions:n},children:[e.children,(0,r.jsx)(UnlockKeyPrompt,{})]})}let S=y.forwardRef(function(e,t){return(0,r.jsx)(p.Z,{ref:t,...e})}),M=(0,m.ZP)("div")(e=>{let{theme:t}=e;return{background:"linear-gradient(to right, #242424, #333 50%, transparent)"}}),UnlockKeyPrompt=()=>{let{actions:e,setActions:t}=(0,y.useContext)(N),[n]=(0,i.V)(v.jU),a=null==n?void 0:n.get("security"),[c]=(0,i.V)(null==a?void 0:a.passwordKeys$),[p]=(0,i.V)(null==a?void 0:a.passkeyKeys$),{promptMasterKeyUnlock:m}=useUnlockKeyPrompt(),hideDialog=()=>{t(null)};return(0,y.useEffect)(()=>{let e=U.lw.subscribe(e=>{e&&!e.handled&&(e.handled=!0,callWithUnlockHandler(e,m))});return()=>e.unsubscribe()},[m]),(0,r.jsx)(h.Z,{open:!!e,disablePortal:!0,onClose:()=>{var t;null===(t=e.onUnlockKey)||void 0===t||t.call(e,null),hideDialog()},TransitionComponent:S,PaperProps:{sx:{backgroundImage:"none"}},children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)(M,{className:"flex items-center gap-x-2 px-4 py-2",children:[(0,r.jsx)(o.C,{children:(0,r.jsx)(d.Z,{fontSize:"small"})}),(0,r.jsx)(f.Z,{variant:"h6",fontWeight:600,className:"ml-4",children:"Screen content is locked!"})]}),(0,r.jsx)(f.Z,{variant:"body1",className:"px-4 py-2",children:"Enter password or authenticate passkey to unlock the screen."}),(0,r.jsx)(l.CA,{className:"relative w-full mt-4 md:pb-2",children:(0,r.jsx)("div",{className:"absolute inset-0 p-2",children:(0,r.jsx)("div",{className:"dashed-body w-full h-full rounded-2xl p-1.5 flex items-center",children:(0,r.jsx)("div",{className:"px-6 py-8 w-full",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(PasswordPrompt,{onConfirm:t=>{var n;null===(n=e.onUnlockKey)||void 0===n||n.call(e,{type:u.J.PASSWORD,keyId:"unused-for-now-for-passwords",key:t}),hideDialog()},disabled:(null==c?void 0:c.length)==0}),(0,r.jsxs)("div",{className:"p-2 pt-0 text-center",children:[(0,r.jsx)("div",{className:"py-4",children:(0,r.jsx)(s.Z,{text:"or browser authentication"})}),(0,r.jsx)(PasskeyPrompt,{onConfirm:t=>{var n;null===(n=e.onUnlockKey)||void 0===n||n.call(e,t),hideDialog()},disabled:(null==p?void 0:p.length)==0})]})]})})})})})]})})};function useUnlockPromptState(){let[e]=(0,i.V)(U.Mn),[t,n]=(0,y.useState)(!0),[r,l]=(0,y.useState)(!1);return(0,y.useEffect)(()=>{switch(e){case U.xb.Idle:n(!0),l(!1);break;case U.xb.UnlockCancelled:n(!1),l(!0)}},[e]),{unlockerIsIdle:t,unlockerIsCancelled:r}}let useUnlockKeyPrompt=()=>{let{setActions:e}=(0,y.useContext)(N),[t]=(0,i.V)(v.jU);return{promptMasterKeyUnlock:()=>new Promise(t=>{e({onUnlockKey:t})}),retryUnlock:()=>(0,C.H)(()=>t.get("security").checkRemoteUnlockStatus())}};async function callWithUnlockHandler(e,t){try{let t=await e.method();e.resolve(t)}catch(n){if(n instanceof a._){if((0,k.z)(n)){b.k.warn("security","This method call requires unlock authorization from the user. Prompting");let n=await t();if(n){await (0,x.wo)(n);let t=await (0,C.H)(e.method,e.silentCancellation,e.defaultValue,!1);e.resolve(t)}else U.Mn.next(U.xb.UnlockCancelled),b.k.warn("security","Unlock operation cancelled by user"),e.reject(a._.newClientError(c.XF.UnlockKeyCancelled,"CANCELLED"))}else e.reject(n)}else b.k.error("security","Unhandled callWithUnlock() non app exception (will get stuck):",n)}}},14504:function(e,t,n){var r=n(57437),l=n(57042),o=n(54986),s=n(43226),i=n(35843);let a=(0,i.ZP)(o.Z)(e=>{let{theme:t}=e;return{"&:before, &:after":{borderTopColor:"#C4C4C4"}}});t.Z=e=>{let{text:t,textClassName:n=""}=e;return(0,r.jsx)(a,{children:(0,r.jsx)(s.Z,{variant:"caption",className:(0,l.Z)("px-4 font-bold text-white",n),children:t})})}},40542:function(e,t,n){n.d(t,{V:function(){return useBehaviorSubject}});var r=n(2265);let useBehaviorSubject=e=>{let[t,n]=(0,r.useState)(null==e?void 0:e.getValue()),[l,o]=(0,r.useState)();return(0,r.useEffect)(()=>{if(!e){n(null);return}let t=e.subscribe({next:e=>{n(e)},error:o});return()=>t.unsubscribe()},[e]),[t]}}}]);