(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3262],{80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},75992:function(){},78110:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){},7045:function(e,t,n){"use strict";var i,r,a,s=n(90952);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"account_svg__icon",viewBox:"0 0 1024 1024"},e),i||(i=s.createElement("path",{d:"M962.4 1012.8s0 .8 0 0H988h-25.6zM704 338.4c0-143.2-115.2-260-258.4-260s-258.4 116.8-258.4 260 116 260 258.4 260S704 481.6 704 338.4zm-472 0C232 220 328 124 445.6 124s213.6 96 213.6 214.4-96 214.4-213.6 214.4S232 456.8 232 338.4z"})),r||(r=s.createElement("path",{d:"M456.8 621.6c196.8 0 361.6 136 394.4 324h45.6C863.2 732 677.6 576.8 456 576.8 234.4 576.8 49.6 732 15.2 945.6h45.6c35.2-188.8 199.2-324 396-324z"})),a||(a=s.createElement("path",{d:"m770.4 578.4-24-8.8 20.8-14.4c65.6-46.4 104.8-122.4 103.2-202.4-1.6-128-102.4-232.8-228-241.6v47.2c100 8.8 180 92.8 180.8 194.4.8 52.8-19.2 102.4-56 140.8-36.8 37.6-86.4 59.2-139.2 60-24.8 0-50.4 0-75.2 1.6-15.2 1.6-41.6 0-54.4 9.6-1.6.8-3.2 0-4.8 0l-9.6 12c-.8 1.6-2.4 3.2-4 4.8.8 1.6-.8 16 0 17.6 12 4 71.2 0 156.8 2.4C816 603.2 963.2 762.4 977.6 940l47.2 3.2c-9.6-156-108-310.4-254.4-364.8z"})))}},51894:function(e,t,n){"use strict";n.d(t,{H:function(){return d}});var i=n(95815),r=n(94025),a=n(36079),s=n(50707),l=n(69810),o=n.n(l),c=n(53946);let u=new(o())(1);async function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(c.Mn.next(c.xb.Idle),i)?u.add(async()=>h(e,t,n)):h(e,t,n)}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(c.Mn.value===c.xb.UnlockCancelled){if(t)return n;throw i._.newClientError(r.XF.UnlockKeyCancelled,"CANCELLED (queued operation)")}let l=c.lw.value,o=setInterval(()=>{a.k.warn("security","callWithUnlock call still locked after a few seconds","method:",e,"previous event: ",l)},5e3),u=new Promise((i,r)=>{c.lw.next({method:e,resolve:i,reject:r,handled:!1,silentCancellation:t,defaultValue:n,deadlockCheckInterval:o})}).catch(e=>{if(clearInterval(o),t&&(0,s.L)(e));else throw e}),d=await u||n;return clearInterval(o),d}},53946:function(e,t,n){"use strict";n.d(t,{Mn:function(){return s},lw:function(){return l},xb:function(){return r}});var i,r,a=n(50676);(i=r||(r={}))[i.Idle=0]="Idle",i[i.UnlockCancelled=1]="UnlockCancelled";let s=new a.X(r.Idle),l=new a.X(null)},78123:function(e,t,n){"use strict";n.d(t,{Activity:function(){return s}});var i=n(36966),r=n(62067),a=n.n(r);class s{static async fromJson(e){let t=new s;Object.assign(t,e);let{Browser:r}=await Promise.resolve().then(n.bind(n,15824)),{UserEmail:a}=await Promise.resolve().then(n.bind(n,55204)),{identityFromJson:l}=await n.e(9510).then(n.bind(n,89510));return e.userEmail&&(t.userEmail=a.fromJson(e.userEmail)),e.identity&&(t.identity=await l(e.identity,i.n)),e.browser&&(t.browser=await r.fromJson(e.browser)),t.createdAt=new Date(e.createdAt),t}get createdAtStr(){return a()(this.createdAt).format("DD-MMM-YYYY HH:mm:ss")}get userEmailAddressStr(){return this.userEmail?this.userEmail.email:this.userEmailAddress}get browserNameStr(){return this.browser?this.browser.name:this.browserName}get identityDidStr(){return this.identity?this.identity.did:this.identityDid}}},15824:function(e,t,n){"use strict";n.d(t,{Browser:function(){return c}});var i=n(5253),r=n(39615),a=n(14776),s=n(70779),l=n(36418);let o=new l.R;class c{static async fromJson(e){return o.get(e.id,{create:async function(){return new c},fill:async function(t){Object.assign(t,e),t.createdAt=new Date(e.createdAt),t.lastUsedAt=new Date(e.lastUsedAt)}})}isCurrentBrowser(){return this.key===(0,r.Z$)()}equals(e){return this.id===(null==e?void 0:e.id)}constructor(){this.activeShadowKey$=new s.P(null,async()=>{a.jU.subscribe(e=>null==e?void 0:e.get("security").shadowKeys$.subscribe(e=>{this.activeShadowKey$.next(null==e?void 0:e.find(e=>{var t;return e.type===i.J.WEBAUTHN&&(null===(t=e.browser)||void 0===t?void 0:t.equals(this))}))}))})}}},90726:function(e,t,n){"use strict";n.d(t,{credentialFromJson:function(){return p},C:function(){return v}});var i=n(23284),r=n(66591),a=n(57320),s=n(50676),l=n(12378);class o extends l.h{prepareVerifiableCredential(){var e;this.name$.next(null===(e=this.verifiableCredential)||void 0===e?void 0:e.getSubject().getProperty("name"))}async prepareRepresentativeIcon(){let e=this.verifiableCredential.getSubject().getProperties(),t=e.iconUrl;t.startsWith("hive://")?(this.representativeIcon$.next(await (0,a.L)(t)),this.loadIconWithFallback()):console.warn("Unhandled app info icon format")}constructor(){super(),this.name$=new s.X(null)}}class c extends l.h{async prepareRepresentativeIcon(){let e=this.verifiableCredential.getSubject().getProperties();if("displayable"in e){let t=e.displayable.icon;this.representativeIcon$.next(t)}else this.representativeIcon$.next(this.getFallbackIcon());this.loadIconWithFallback()}}var u=n(37105);class d extends u.E{async prepareRepresentativeIcon(){let e=this.verifiableCredential.getSubject().getProperties(),t=e.avatar.data;t.startsWith("hive://")?(this.representativeIcon$.next(await (0,a.L)(t)),this.loadIconWithFallback()):console.warn("Unhandled avatar credentials format")}}function h(e){let t=(0,i.m7)(e.type);return t?"avatar"===t.key?new d(t):new u.E(t):e.getType().includes("ApplicationCredential")?new o:new c}async function p(e){let{VerifiableCredential:t}=await (0,r.hS)(),n=t.parse(e.verifiableCredential),i=h(n);return Object.assign(i,e),i.createdAt=new Date(e.createdAt),i.verifiableCredential=n,i.prepareForDisplay(),i}async function v(e){let t=h(e);return t.verifiableCredential=e,t.prepareForDisplay(),t}},12378:function(e,t,n){"use strict";n.d(t,{h:function(){return m}});var i=n(60230),r=n(23965),a=n(7045),s=n(26588),l=n(56094),o=n(12909),c=n(61459),u=n(29748),d=n(91395),h=n(36966),p=n(57389),v=n(36079),y=n(70779);let g=(e,t)=>{t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");let n=t.split(".");for(let t=0,i=n.length;t<i;++t){let i=n[t];if(!(i in e))return;e=e[i]}return e};var f=n(53386);function w(){let e=(0,i._)(["\n          query interactingApplicationsForCredential($credentialId: String!) {\n            interactingApplicationsForCredential(credentialId: $credentialId) {\n              ","\n            }\n          }\n        "]);return w=function(){return e},e}class m{get verifiableCredential(){return this._verifiableCredential}set verifiableCredential(e){e instanceof s.VerifiableCredential&&(this._verifiableCredential=e,this.prepareVerifiableCredential())}prepareForDisplay(){this.prepareDisplayTitle(),this.prepareDisplayValue()}prepareVerifiableCredential(){}getDisplayableCredentialTitle(){let e=this.verifiableCredential.getSubject().getProperties();return"displayable"in e?(this.displayTitle=e.displayable.title,this.displayTitle):null}prepareDisplayTitle(){let e=this.getDisplayableCredentialTitle();if(e)this.displayTitle=e;else{let e=this.verifiableCredential.getId().getFragment();this.displayTitle=(0,f.fm)(e)}}getDisplayableCredentialDescription(){let e=this.verifiableCredential.getSubject().getProperties();if("displayable"in e)return this.parseDisplayable(e).description;let t=this.getOtherDescription();return null!=t&&void 0!=t?t:null}parseDisplayable(e){let t=[];if("displayable"in e){let n=e.displayable.description,i=e.displayable.title,r=e.displayable.icon;if(n){let a=n.match(/\${([a-zA-Z0-9.]+)}/g),s=a?Array.from(a):[],l=n;for(let n of s){let i=n.match(/\${([a-zA-Z0-9.]+)}/);if(i&&i.length>1){let r=i[1];t.push(r);let a=g(e,r);l=l.replace(n,a)}}return{title:i,description:l,prepareRemoveKey:t,icon:r}}}}getOtherDescription(){let e=this.verifiableCredential.getSubject().getProperties(),t=[],n=!0;for(let i in e){let r=e[i],a=typeof r;"string"===a||"boolean"===a||"number"===a?t.push(r):n=!1}return n?t:e}prepareDisplayValue(){let e=this.getDisplayableCredentialDescription();if(e)this.displayValue=e;else{let e=this.getValueItems();if(e.length<=1){var t;this.displayValue=null===(t=e[0])||void 0===t?void 0:t.value}else this.displayValue=JSON.stringify(e)}}getDisplayValue(){return this.displayValue}removeKeysFromJSONObject(e,t){let n={...e};return t.forEach(e=>{e in n&&delete n[e]}),n}loadIconWithFallback(){if(null==this.representativeIcon$.value&&this.representativeIcon$.next(this.getFallbackIcon()),this.isDefaultLocalIcon(this.representativeIcon$.value))return;let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{this.representativeIcon$.next(e.src)},e.onerror=()=>{this.representativeIcon$.next(this.getFallbackIcon())},e.src=this.representativeIcon$.value}isDefaultLocalIcon(e){return"string"!=typeof e}getFallbackIcon(){return a.Z}getDisplayableTitle(){return this.displayTitle}getSubject(){return this.verifiableCredential.getSubject()}getFragment(){return this.verifiableCredential.getId().getFragment()}getTypes(){return this.verifiableCredential.getType()}getId(){return this.verifiableCredential.getId()}isSensitiveCredential(){return this.verifiableCredential.getType().indexOf("SensitiveCredential")>=0}isSelfIssued(){return this.verifiableCredential.getIssuer().toString()===h.D.getActiveIdentityId()}getIssuer(){return this.verifiableCredential.getIssuer().toString()}async fetchIssuerInfo(){let e=this.verifiableCredential.getIssuer().toString();v.k.log("credential","fetchIssuerInfo:",e);let t=null,n=null,i=await p.n.isPublished(e);i&&(t=await p.n.getIssuerName(e),n=await p.n.getIssuerAvatar(e));let r={avatarIcon:n,didString:e,name:t,isPublished:i};return v.k.log("credential","got issuer info:",r),r}async verifyCredential(){return await c.N.verifyCredential(this.verifiableCredential)}async fetchRequestingApplications(){var e;let t=await (0,u.Pt)(async()=>(await (0,d.W)()).query({query:(0,r.Ps)(w(),l.G),variables:{credentialId:this.id}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.interactingApplicationsForCredential){let e=await Promise.all(t.data.interactingApplicationsForCredential.map(e=>o.G.fromJson(e)));return v.k.log("applications","Fetched credential interacting applications:",e),e}return null}equals(e){return this.id===e.id}constructor(){this.issuerInfo$=new y.P(null,()=>this.fetchIssuerInfo()),this.isConform$=new y.P(null,()=>this.verifyCredential()),this.requestingApplications$=new y.P(null,()=>this.fetchRequestingApplications()),this.representativeIcon$=new y.P(null,async()=>{this.prepareRepresentativeIcon()}),this.id=null,this.createdAt=null,this.displayValue=null,this.getContentTree=()=>{let e=this.verifiableCredential.getSubject().getProperties(),t=this.parseDisplayable(e);if(!t)return null;let n=t.prepareRemoveKey;return e.displayable=t,delete t.prepareRemoveKey,e=this.removeKeysFromJSONObject(e,n)},this.getValueItems=()=>{let e=this.verifiableCredential.getId().getFragment();if("avatar"===e)return null;let t=this.verifiableCredential.getSubject().getProperties();return Object.keys(t).filter(e=>"id"!=e).filter(e=>"displayable"!=e).sort().map(e=>{let n="";return"wallet"==e?(n="wallet",t[e]):"gender"==e?"M"==t[e]||"male"==t[e]?n="male":("F"==t[e]||"female"==t[e])&&(n="female"):n=""!=t[e].toString()?t[e].toString():"not set",{name:e,value:n}})}}}},37105:function(e,t,n){"use strict";n.d(t,{E:function(){return eT}});var i,r,a,s,l,o,c,u,d,h,p,v,y,g,f,w,m,b,I,D,C,k,S,x,P,A,E,j,$,O,F,T,U,K,L,M,R,W,N,V,B,_,q,H,J,z,Z,G,X,Q,Y,ee,et,en,ei=n(53386),er=n(12378),ea=n(23284),es=n(57437),el=n(90952);function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ec=n(7045);function eu(){return(eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eh(){return(eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ev(){return(ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ey(){return(ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eg(){return(eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ef(){return(ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ew(){return(ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function em(){return(em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eb(){return(eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eI(){return(eI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eD(){return(eD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eC(){return(eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ek(){return(ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eS(){return(eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ex(){return(ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eP(){return(eP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eA(){return(eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eE(){return(eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ej(){return(ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function e$(){return(e$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function eO(){return(eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}let eF={name:(0,es.jsx)(ec.Z,{style:{width:40,height:40}}),email:(0,es.jsx)(function(e){return el.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -2.5 20 20"},e),i||(i=el.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 12.474 0 3.649V15h20V3.649l-10 8.825Zm.001-2.662L0 .981V0h20v.981l-9.999 8.831Z"})))},{style:{width:30,height:30,color:"white"}}),birthDate:(0,es.jsx)(function(e){return el.createElement("svg",eO({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),G||(G=el.createElement("rect",{width:18,height:15,x:3,y:6,stroke:"currentColor",rx:2})),X||(X=el.createElement("path",{fill:"currentColor",d:"M3 10c0-1.886 0-2.828.586-3.414C4.172 6 5.114 6 7 6h10c1.886 0 2.828 0 3.414.586C21 7.172 21 8.114 21 10H3Z"})),Q||(Q=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M7 3v3M17 3v3"})),Y||(Y=el.createElement("rect",{width:4,height:2,x:7,y:12,fill:"currentColor",rx:.5})),ee||(ee=el.createElement("rect",{width:4,height:2,x:7,y:16,fill:"currentColor",rx:.5})),et||(et=el.createElement("rect",{width:4,height:2,x:13,y:12,fill:"currentColor",rx:.5})),en||(en=el.createElement("rect",{width:4,height:2,x:13,y:16,fill:"currentColor",rx:.5})))},{style:{width:35,height:35}}),nationality:(0,es.jsx)(function(e){return el.createElement("svg",eh({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 20 20"},e),l||(l=el.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m6.804 2.632-.637.264A3.507 3.507 0 0 0 4 6.137v4.386a1.46 1.46 0 0 0 2.167 1.276l.227-.126a4 4 0 0 1 3.88 0l.453.251a4 4 0 0 0 3.88 0l.734-.407A3.222 3.222 0 0 0 17 8.7V4.638a1.605 1.605 0 0 0-2.07-1.534l-.893.272a4 4 0 0 1-2.694-.131l-1.48-.613a4 4 0 0 0-3.059 0Zm4.893 7.543-.454-.251A6 6 0 0 0 6 9.644V6.136c0-.61.368-1.16.931-1.393l.638-.263a2 2 0 0 1 1.529 0l1.481.612a6 6 0 0 0 4.04.196L15 5.173V8.7c0 .444-.241.853-.63 1.068l-.733.407a2 2 0 0 1-1.94 0Z",clipRule:"evenodd"})),o||(o=el.createElement("rect",{width:2,height:16,x:4,y:2,fill:"currentColor",rx:1})))},{style:{width:32,height:32}}),gender:(0,es.jsx)(function(e){return el.createElement("svg",eu({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,fill:"currentColor",viewBox:"0 0 412.138 412.138"},e),r||(r=el.createElement("path",{d:"M110.827 22.911c-49.525 22.33-44.219 121.392 5.979 135.79 10.836 6.934 24.169 7.857 38.306-3.28 44.751-35.259 26.813-164.566-44.285-132.51zM374.03 139.987c-.359-1.709-1.303-3.341-3.155-4.544-38.531-25.098-2.726-114.251-71.628-110.262-58.842 3.406-39.708 81.01-68.053 112.918-.232.262-.144.536-.302.805-2.645 1.565-4.122 5.237-1.426 7.938 12.527 12.55 29.548 15.969 46.81 16.862 2.479 8.794 15.033 15.899 23.057 16.899 7.218.9 14.363-.878 20.261-5.16 3.698-2.682 8.077-7.355 9.093-12.26 17.57-1.209 35.928-4.4 45.584-13.237 3.474-3.181 2.435-7.263-.241-9.959zM407.587 246.585c-5.323-23.378-21.2-42.237-45.383-45.489-2.495-2.727-7.225-3.681-10.014-.572-15.091 16.813-30.111 28.221-54.003 26.515-20.979-1.496-32.944-13.685-48.667-24.593-.162-2.329-1.685-4.581-4.38-4.445-28.001 1.414-46.092 17.4-51.518 44.808-8.635 43.616-1.395 92.691-.264 136.863.055 2.126.917 3.714 2.155 4.82.341 1.859 1.337 3.58 3.059 4.419 20.716 10.099 58.374 2.819 81.257 3.081 39.885.455 79.996 2.386 119.849.508 3.426-.161 5.492-2.168 6.272-4.596.93-1.14 1.627-2.529 1.669-4.388.969-43.37 9.684-94.266-.032-136.931z"})),a||(a=el.createElement("path",{d:"M203.222 193.375c-.237-.326-.195-.716-.538-1.01-7.01-5.987-17.351-9.745-26.59-12.372-3.07-2.685-8.546-2.388-10.313 2.787-5.456 15.985-9.596 32.423-14.3 48.645-1.949 6.726-3.947 15.761-7.443 23.501-1.33-18.873-4.341-38.496-9.027-55.846.525-.579 1.055-1.126 1.567-1.865 8.493-12.249-7.662-18.374-17.371-15.095-2.503.846-2.892 3.184-1.967 5.284-.059.186-.278.254-.278.471-.009 3.91 1.276 7.536 3.212 10.297-3.015 11.548-5.142 23.544-7.552 35.096-.022.102-.037.207-.057.309-.355.859-.91 1.554-.928 2.657-.013.732.037 1.454.031 2.185-1.264 6.296-2.53 12.609-3.52 18.978-5.222-11.945-7.507-28.843-9.489-35.916-3.816-13.606-7.362-27.144-13.964-39.697-.007-.012-.02-.012-.026-.023-1.501-2.676-4.866-4.563-8.469-2.994-13.573 5.912-27.002 12.316-40.326 18.774-7.453 3.612-17.891 7.143-22.954 14.314-2.225.612-4.222 2.32-4.574 5.17-6.689 53.836-11.205 110.868-6.238 164.999.131 1.446.766 2.487 1.619 3.189.564 1.236 1.488 2.323 3.157 2.541 53.853 7.072 110.84 5.224 165.04 2.861 3.522-.153 5.516-2.495 6.126-5.158.048-.181.225-.208.256-.405 8.627-55.02-20.668-142.787 25.114-185.404 2.201-2.051 1.523-4.65-.198-6.273z"})))},{style:{width:30,height:30}}),telephone:(0,es.jsx)(function(e){return el.createElement("svg",eg({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),w||(w=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5.5C3 14.06 9.94 21 18.5 21c.386 0 .77-.014 1.148-.042.435-.032.653-.048.851-.162a1.06 1.06 0 0 0 .402-.432c.099-.206.099-.446.099-.926v-2.817c0-.404 0-.606-.067-.779a.999.999 0 0 0-.277-.396c-.14-.122-.33-.191-.71-.329l-3.206-1.166c-.441-.16-.662-.24-.872-.227a1 1 0 0 0-.513.182c-.171.121-.292.322-.534.725L14 16a12.1 12.1 0 0 1-6-6l1.369-.821c.402-.242.604-.363.725-.534a1 1 0 0 0 .182-.513c.014-.21-.066-.43-.227-.872L8.883 4.053c-.138-.38-.207-.569-.329-.709a1 1 0 0 0-.396-.278C7.985 3 7.783 3 7.379 3H4.562c-.48 0-.72 0-.926.1a1.06 1.06 0 0 0-.432.401c-.114.198-.13.416-.162.85C3.014 4.732 3 5.115 3 5.5Z"})))},{style:{width:32,height:32}}),nickname:(0,es.jsx)(function(e){return el.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),s||(s=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 19c0-2.21-2.686-4-6-4s-6 1.79-6 4m6-7a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z"})))},{style:{width:40,height:40}}),birthPlace:(0,es.jsx)(function(e){return el.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 1024 1024"},e),c||(c=el.createElement("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512z"})),u||(u=el.createElement("path",{fill:"currentColor",d:"M512 512a32 32 0 0 1 32 32v256a32 32 0 1 1-64 0V544a32 32 0 0 1 32-32z"})),d||(d=el.createElement("path",{fill:"currentColor",d:"M384 649.088v64.96C269.76 732.352 192 771.904 192 800c0 37.696 139.904 96 320 96s320-58.304 320-96c0-28.16-77.76-67.648-192-85.952v-64.96C789.12 671.04 896 730.368 896 800c0 88.32-171.904 160-384 160s-384-71.68-384-160c0-69.696 106.88-128.96 256-150.912z"})))},{style:{width:35,height:35}}),occupation:(0,es.jsx)(function(e){return el.createElement("svg",ey({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,fill:"currentColor",viewBox:"0 0 120.003 120.003"},e),p||(p=el.createElement("path",{d:"M11.295 92.198v-.13a3.657 3.657 0 0 0 2.162-1.457c.545-.756.82-1.668.82-2.733 0-1.621-.627-2.815-1.883-3.584-1.252-.769-3.172-1.151-5.758-1.151H0v19.024h7.404c2.24 0 4.006-.496 5.303-1.49 1.297-.993 1.945-2.354 1.945-4.077 0-1.164-.264-2.109-.793-2.839-.529-.729-1.382-1.251-2.564-1.563zm-6.154-5.166h1.443c1.615 0 2.422.532 2.422 1.6 0 .601-.201 1.052-.605 1.354-.404.305-.975.457-1.711.457H5.141v-3.411zm1.808 11.166H5.141v-3.996h1.705c.814 0 1.438.17 1.867.508.429.338.645.824.645 1.459-.001 1.352-.803 2.029-2.409 2.029zM27.928 94.282c0 1.368-.236 2.354-.711 2.959-.471.604-1.232.903-2.283.903-.979 0-1.721-.305-2.225-.91-.504-.606-.756-1.584-.756-2.928V83.142h-5.166v11.567c0 2.49.695 4.397 2.09 5.728 1.391 1.328 3.385 1.989 5.979 1.989 2.656 0 4.688-.682 6.098-2.049 1.41-1.367 2.115-3.295 2.115-5.785v-11.45h-5.141v11.14zM40.799 87.333c.305-.235.791-.353 1.459-.353 1.291 0 2.826.408 4.605 1.224l1.574-3.97c-2.047-.911-4.055-1.366-6.023-1.366-2.23 0-3.982.489-5.258 1.471-1.276.981-1.914 2.347-1.914 4.101 0 .936.15 1.748.449 2.434s.76 1.293 1.381 1.82c.619.531 1.549 1.076 2.791 1.641 1.369.617 2.215 1.023 2.529 1.223.318.199.547.396.691.594.143.193.215.423.215.683 0 .418-.18.758-.535 1.021-.354.267-.914.396-1.678.396-.885 0-1.857-.141-2.916-.422a15.38 15.38 0 0 1-3.059-1.178v4.58c.93.442 1.822.754 2.682.93.859.18 1.922.268 3.189.268 1.518 0 2.842-.254 3.967-.762 1.129-.506 1.992-1.219 2.592-2.133.598-.916.896-1.963.896-3.143 0-1.285-.318-2.351-.955-3.195-.639-.846-1.777-1.637-3.416-2.375-1.711-.779-2.758-1.318-3.143-1.613-.387-.295-.58-.629-.58-1.002.002-.352.154-.643.457-.874zM50.313 83.142h5.166v19.024h-5.166zM72.061 91.743c0 1.161.06 2.702.183 4.618h-.078L65.24 83.14h-6.714v19.025h4.555V93.59c0-1.108-.082-2.719-.246-4.828h.114l6.949 13.404h6.742V83.142h-4.58v8.601h.001zM79.686 102.167h11.296v-4.191h-6.156v-3.591h5.701V90.26h-5.701v-2.993h6.156v-4.125H79.686zM98.051 87.333c.303-.235.789-.353 1.457-.353 1.291 0 2.828.408 4.605 1.224l1.574-3.97c-2.047-.911-4.056-1.366-6.025-1.366-2.229 0-3.98.489-5.256 1.471-1.276.981-1.914 2.347-1.914 4.101 0 .936.15 1.748.449 2.434a5.02 5.02 0 0 0 1.381 1.82c.619.531 1.551 1.076 2.791 1.641 1.371.617 2.213 1.023 2.531 1.223.315.199.547.396.688.594.144.193.215.423.215.683 0 .418-.178.758-.532 1.021-.355.264-.915.394-1.68.394-.885 0-1.856-.141-2.916-.422a15.324 15.324 0 0 1-3.058-1.178v4.58c.929.442 1.822.754 2.683.93.856.18 1.92.268 3.188.268 1.518 0 2.84-.254 3.969-.762 1.127-.506 1.99-1.219 2.59-2.133.6-.916.896-1.963.896-3.143 0-1.285-.318-2.351-.955-3.195-.64-.846-1.775-1.637-3.416-2.375-1.709-.779-2.758-1.318-3.144-1.613-.387-.295-.58-.629-.58-1.002.002-.35.154-.641.459-.872zM115.631 90.818c-1.709-.778-2.756-1.317-3.143-1.612s-.578-.629-.578-1.002c0-.349.15-.64.455-.871.303-.235.789-.353 1.457-.353 1.293 0 2.828.408 4.606 1.224l1.574-3.97c-2.047-.911-4.058-1.366-6.024-1.366-2.23 0-3.982.489-5.259 1.471s-1.911 2.347-1.911 4.101c0 .936.147 1.748.448 2.434.297.686.759 1.293 1.379 1.82.619.531 1.55 1.076 2.791 1.641 1.371.617 2.216 1.023 2.531 1.223.315.2.547.396.688.594.144.193.215.423.215.683 0 .418-.178.758-.532 1.021-.356.267-.916.396-1.681.396-.885 0-1.854-.141-2.914-.422a15.333 15.333 0 0 1-3.059-1.178v4.58c.928.442 1.822.754 2.68.93.859.18 1.924.268 3.189.268 1.518 0 2.842-.254 3.969-.762 1.127-.506 1.992-1.219 2.59-2.133.599-.916.898-1.963.898-3.143 0-1.285-.32-2.351-.957-3.195-.635-.848-1.773-1.639-3.412-2.379z"})),v||(v=el.createElement("circle",{cx:73.589,cy:24.447,r:6.871})),y||(y=el.createElement("circle",{cx:96.3,cy:24.449,r:6.871})),g||(g=el.createElement("path",{d:"M100.624 77.79a3.637 3.637 0 0 0 3.638 3.635h.004a3.637 3.637 0 0 0 3.635-3.64l-.004-4.959h-7.274l.001 4.964z"})),f||(f=el.createElement("path",{d:"m62.003 54.896-.015 22.888a3.638 3.638 0 0 0 3.637 3.641h.002a3.64 3.64 0 0 0 3.639-3.636l.012-21.657c1.504-.598 2.774-1.758 3.162-3.569l1.203-5.614c1.914 2.234 5.075 3.516 10.711 4.287a2.655 2.655 0 0 0 2.864-1.736c4.412-.233 7.149-1.142 8.929-3.014l1.304 6.079c.338 1.573 1.343 2.654 2.587 3.305h1.73a4.388 4.388 0 0 1 2.116-2.429c-.901-4.306-2.155-8.538-3.231-11.11-.734-1.351.291-1.816.836-.415.548 1.402 2.591 7.79 3.427 11.967a3.533 3.533 0 0 0-2.45 2.778h-5.137v15.177h20.552V56.66h-5.136a3.54 3.54 0 0 0-2.482-2.787 2.57 2.57 0 0 0-.035-.67c-.34-1.738-4.513-18.112-4.513-18.112-.592-2.763-2.504-4.09-4.883-4.158l-.021.001s-.84.004-1.562.143c-.758.145-1.419.508-1.419.508-1.754.851-3.431 2.608-3.638 4.742-.026.103-.061.202-.076.311-.463 3.26-.928 5.326-1.926 6.235-1.028.938-3.344 1.355-7.502 1.355a2.66 2.66 0 0 0-2.268 1.279c-2.51-.512-3.99-1.162-4.771-2.067-1.016-1.173-1.387-3.354-1.877-6.804-.016-.108-.049-.209-.076-.312-.205-2.133-1.883-3.892-3.637-4.742 0 0-.662-.363-1.418-.508-.725-.139-1.562-.143-1.562-.143l-.021-.002c-2.38.069-5.181 1.396-5.772 4.158l-3.177 14.831c-.424 1.981.461 3.754 1.894 4.978zm45.599 1.489a2.647 2.647 0 0 0 1.957-.864 1.76 1.76 0 0 1 1.348 1.139h-6.605a1.757 1.757 0 0 1 1.346-1.137 2.664 2.664 0 0 0 1.954.862z"})))},{style:{width:35,height:35}}),education:(0,es.jsx)(function(e){return el.createElement("svg",ev({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",className:"educate_svg__icon",viewBox:"0 0 1024 1024"},e),h||(h=el.createElement("path",{d:"M513.147 584.708c-15.947 0-39.468-1.747-61.04-10.031l-172.596-66.501h-84.542v103.565c0 31.84 23.684 67.975 52.884 80.663l208.987 90.967c29.2 12.688 76.605 12.743 105.841.127l211.263-91.222c29.218-12.615 52.921-48.697 52.921-80.537V508.174h-93.298l-152.954 64.48c-18.386 7.773-42.38 12.051-67.466 12.051zM46.313 372.991l416.19 160.363c29.728 11.433 77.605 10.686 106.951-1.693l397.458-167.536v247.18l-24.558 81.938h71.015l-25.413-82.794V354.13h-.71c17.167-11.833 13.162-26.596-12.252-35.681L570.637 174.561c-30.001-10.704-78.479-10.25-108.299.946L46.494 331.956c-29.819 11.214-29.891 29.6-.182 41.033z"})))},{style:{width:35,height:35}}),interests:(0,es.jsx)(function(e){return el.createElement("svg",ew({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"0 0 1024 1024"},e),C||(C=el.createElement("path",{d:"M676.093 438.703c69.184 23.889 116.549 89.238 116.549 163.62 0 95.581-77.478 173.056-173.056 173.056-63.911 0-121.65-34.917-151.845-89.949-5.441-9.916-17.89-13.544-27.806-8.103s-13.544 17.89-8.103 27.806c37.318 68.013 108.74 111.206 187.755 111.206 118.199 0 214.016-95.813 214.016-214.016 0-91.985-58.568-172.788-144.14-202.337-10.691-3.692-22.351 1.983-26.043 12.674s1.983 22.351 12.674 26.043z"})),k||(k=el.createElement("path",{d:"M580.773 423.947c0-95.574-77.482-173.056-173.056-173.056s-173.056 77.482-173.056 173.056c0 95.574 77.482 173.056 173.056 173.056s173.056-77.482 173.056-173.056zm40.96 0c0 118.196-95.82 214.016-214.016 214.016s-214.016-95.82-214.016-214.016 95.82-214.016 214.016-214.016 214.016 95.82 214.016 214.016z"})),S||(S=el.createElement("path",{d:"M826.595 908.515c45.245 0 81.92-36.675 81.92-81.92V194.562c0-45.245-36.675-81.92-81.92-81.92H194.562c-45.245 0-81.92 36.675-81.92 81.92v632.033c0 45.245 36.675 81.92 81.92 81.92h632.033zm0 40.96H194.562c-67.866 0-122.88-55.014-122.88-122.88V194.562c0-67.866 55.014-122.88 122.88-122.88h632.033c67.866 0 122.88 55.014 122.88 122.88v632.033c0 67.866-55.014 122.88-122.88 122.88z"})),x||(x=el.createElement("path",{d:"M317.631 441.872h180.91c11.311 0 20.48-9.169 20.48-20.48s-9.169-20.48-20.48-20.48h-180.91c-11.311 0-20.48 9.169-20.48 20.48s9.169 20.48 20.48 20.48z"})),P||(P=el.createElement("path",{d:"M428.566 511.845v-180.91c0-11.311-9.169-20.48-20.48-20.48s-20.48 9.169-20.48 20.48v180.91c0 11.311 9.169 20.48 20.48 20.48s20.48-9.169 20.48-20.48z"})))},{style:{width:30,height:30}}),description:(0,es.jsx)(function(e){return el.createElement("svg",em({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"0 0 24 24"},e),A||(A=el.createElement("path",{d:"M21 7H3V4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1ZM3 20V9h18v11a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1Zm3-6h12v-2H6Zm0 4h6v-2H6Z"})))},{style:{width:30,height:30}}),url:(0,es.jsx)(function(e){return el.createElement("svg",eb({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),E||(E=el.createElement("path",{fill:"currentColor",d:"M10.421 9a1 1 0 0 0-1-1h-3.21C3.885 8 2 9.79 2 12s1.885 4 4.21 4h3.211a1 1 0 1 0 0-2h-3.21c-1.163 0-2.106-.895-2.106-2s.943-2 2.106-2h3.21a1 1 0 0 0 1-1ZM13.579 15a1 1 0 0 1 1-1h3.21c1.163 0 2.106-.895 2.106-2s-.943-2-2.105-2h-3.211a1 1 0 0 1 0-2h3.21C20.116 8 22 9.79 22 12s-1.885 4-4.21 4h-3.211a1 1 0 0 1-1-1Z"})),j||(j=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M15 12H9"})))},{style:{width:37,height:37}}),discord:(0,es.jsx)(function(e){return el.createElement("svg",eI({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 192 192"},e),$||($=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"m68 138-8 16c-10.19-4.246-20.742-8.492-31.96-15.8-3.912-2.549-6.284-6.88-6.378-11.548-.488-23.964 5.134-48.056 19.369-73.528 1.863-3.334 4.967-5.778 8.567-7.056C58.186 43.02 64.016 40.664 74 39l6 11s6-2 16-2 16 2 16 2l6-11c9.984 1.664 15.814 4.02 24.402 7.068 3.6 1.278 6.704 3.722 8.567 7.056 14.235 25.472 19.857 49.564 19.37 73.528-.095 4.668-2.467 8.999-6.379 11.548-11.218 7.308-21.769 11.554-31.96 15.8l-8-16m-68-8s20 10 40 10 40-10 40-10"})),O||(O=el.createElement("ellipse",{cx:71,cy:101,fill:"currentColor",rx:13,ry:15})),F||(F=el.createElement("ellipse",{cx:121,cy:101,fill:"currentColor",rx:13,ry:15})))},{style:{width:35,height:35}}),linkedin:(0,es.jsx)(function(e){return el.createElement("svg",eD({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -0.5 25 25"},e),T||(T=el.createElement("path",{fill:"currentColor",d:"M8.75 11a.75.75 0 0 0-1.5 0h1.5Zm-1.5 6a.75.75 0 0 0 1.5 0h-1.5Zm10 0a.75.75 0 0 0 1.5 0h-1.5ZM12 14h-.75.75Zm-.75 3a.75.75 0 0 0 1.5 0h-1.5Zm-2.5-9a.75.75 0 0 0-1.5 0h1.5Zm-1.5 1a.75.75 0 0 0 1.5 0h-1.5Zm0 2v6h1.5v-6h-1.5Zm11.5 6v-3h-1.5v3h1.5Zm0-3A3.75 3.75 0 0 0 15 10.25v1.5A2.25 2.25 0 0 1 17.25 14h1.5ZM15 10.25A3.75 3.75 0 0 0 11.25 14h1.5A2.25 2.25 0 0 1 15 11.75v-1.5ZM11.25 14v3h1.5v-3h-1.5Zm-4-6v1h1.5V8h-1.5Z"})))},{style:{width:45,height:45}}),facebook:(0,es.jsx)(function(e){return el.createElement("svg",eC({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -0.5 25 25"},e),U||(U=el.createElement("path",{fill:"currentColor",d:"M11.75 19a.75.75 0 0 0 1.5 0h-1.5Zm1.5-8a.75.75 0 0 0-1.5 0h1.5Zm2.25-5.25a.75.75 0 0 0 0-1.5v1.5ZM12.5 8h-.75.75Zm-.75 3a.75.75 0 0 0 1.5 0h-1.5Zm.75-.75a.75.75 0 0 0 0 1.5v-1.5Zm2 1.5a.75.75 0 0 0 0-1.5v1.5Zm-2 0a.75.75 0 0 0 0-1.5v1.5Zm-2-1.5a.75.75 0 0 0 0 1.5v-1.5ZM13.25 19v-8h-1.5v8h1.5ZM15.5 4.25A3.75 3.75 0 0 0 11.75 8h1.5a2.25 2.25 0 0 1 2.25-2.25v-1.5ZM11.75 8v3h1.5V8h-1.5Zm.75 3.75h2v-1.5h-2v1.5Zm0-1.5h-2v1.5h2v-1.5Z"})))},{style:{width:45,height:45}}),instagram:(0,es.jsx)(function(e){return el.createElement("svg",ef({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -0.5 25 25"},e),m||(m=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.5 5h-6a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h6a4 4 0 0 0 4-4V9a4 4 0 0 0-4-4Z",clipRule:"evenodd"})),b||(b=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.5 15a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z",clipRule:"evenodd"})),I||(I=el.createElement("rect",{width:2,height:2,x:15.5,y:9,fill:"currentColor",rx:1,transform:"rotate(-90 15.5 9)"})),D||(D=el.createElement("rect",{width:1,height:1,x:16,y:8.5,stroke:"currentColor",strokeLinecap:"round",rx:.5,transform:"rotate(-90 16 8.5)"})))},{style:{width:45,height:45}}),twitter:(0,es.jsx)(function(e){return el.createElement("svg",ek({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),K||(K=el.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.783 3.918c.348-.082.591-.164.79-.249.28-.12.51-.263.876-.504A1 1 0 0 1 23 4c0 1.08-.135 1.967-.447 2.746a5.47 5.47 0 0 1-1.071 1.674c-.187 3.363-1.16 6.004-2.648 8.005-1.543 2.074-3.595 3.402-5.759 4.146-2.157.741-4.436.907-6.478.656-2.029-.25-3.904-.921-5.211-1.938a1 1 0 0 1 .755-1.78c1.286.185 2.524-.108 3.542-.526-.2-.109-.39-.227-.565-.348-.927-.643-1.676-1.514-2.012-2.188A1 1 0 0 1 3.4 13.2C2.047 12.081 1.5 10.536 1.5 9.5a1 1 0 0 1 .723-.96 7.357 7.357 0 0 1-.24-.887c-.266-1.287-.242-2.74.047-3.895A1 1 0 0 1 3.866 3.5c1.078 1.868 3.065 3.01 4.915 3.686.87.318 1.675.52 2.279.645.13-1.22.47-2.227.994-3.027a4.586 4.586 0 0 1 2.686-1.957c1.783-.48 3.76.067 5.043 1.071Zm-9.035 5.89a18.334 18.334 0 0 1-2.654-.744c-1.357-.496-2.933-1.27-4.253-2.468.023.22.057.439.1.652.222 1.071.633 1.671 1.006 1.857a1 1 0 0 1 .49 1.242c-.239.648-.869.7-1.441.558.46.69 1.288 1.378 2.668 1.609a1 1 0 0 1 .032 1.966l-.87.175c.133.115.277.229.43.335.698.483 1.397.69 2.001.54a1 1 0 0 1 .883 1.738c-.644.536-1.396.966-2.15 1.323-.353.168-.749.333-1.178.479.33.07.674.128 1.029.172 1.77.217 3.741.07 5.584-.563 1.836-.631 3.534-1.74 4.804-3.448 1.268-1.705 2.153-4.064 2.272-7.268a1 1 0 0 1 .292-.67c.45-.45.821-.965 1.004-1.579-.32.1-.68.186-1.11.268a1 1 0 0 1-.894-.275c-.765-.764-2.277-1.267-3.533-.929A2.587 2.587 0 0 0 13.727 5.9C13.315 6.53 13 7.51 13 9a1 1 0 0 1-.33.743c-.498.45-1.336.184-1.922.066Z",clipRule:"evenodd"})))},{style:{width:32,height:32}}),snapchat:(0,es.jsx)(function(e){return el.createElement("svg",eS({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),L||(L=el.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.248 4.07C8.43 2.666 10.104 2 12 2c1.94 0 3.604.784 4.764 2.213 1.03 1.27 1.613 2.984 1.719 4.977l.092.014.02.003c.17.024.373.054.584.095.781.151 2.114.533 2.573 1.964.23.719.115 1.385-.288 1.913-.347.455-.843.718-1.198.877-.176.08-.352.148-.5.205.346.936.948 1.899 1.614 2.771.627.822.461 1.863.137 2.542-.325.68-1.027 1.457-2.049 1.501-.578.025-1.185.085-1.789.195-.273.05-.595.159-.995.324-.239.098-.458.196-.694.301-.188.084-.386.172-.615.27-.94.404-2.095.835-3.375.835-1.28 0-2.435-.431-3.375-.835-.229-.098-.428-.186-.615-.27a26.933 26.933 0 0 0-.694-.301c-.4-.165-.722-.275-.995-.325-.604-.11-1.211-.169-1.79-.194-1.021-.044-1.724-.821-2.048-1.501-.324-.679-.49-1.72.137-2.542.67-.878 1.275-1.848 1.62-2.79a8.898 8.898 0 0 1-.449-.191c-.346-.162-.816-.421-1.163-.855-.387-.486-.558-1.113-.406-1.831.324-1.537 1.77-1.92 2.534-2.064.217-.04.428-.07.605-.095l.035-.005.12-.017c.099-2.125.678-3.863 1.732-5.114Zm1.53 1.288c-.763.905-1.278 2.36-1.278 4.5v.104l-.022.103c-.111.524-.514.769-.714.863-.21.099-.437.148-.597.178-.156.029-.33.053-.485.074l-.046.007a10.89 10.89 0 0 0-.511.08c-.765.143-.91.333-.947.51-.026.127-.003.153.01.167l.004.004c.053.067.181.167.447.291.124.058.255.111.4.17l.036.014c.127.05.278.111.411.174.131.06.35.17.536.348.216.207.477.611.35 1.144-.364 1.531-1.283 3.005-2.161 4.155a.237.237 0 0 0-.016.106c0 .095.027.225.092.362.066.137.15.242.228.305.064.052.1.06.104.06.651.028 1.35.096 2.06.225.483.088.96.262 1.4.444.243.1.522.224.793.344.189.084.374.166.54.237.899.385 1.738.673 2.588.673.85 0 1.69-.288 2.588-.673.166-.071.351-.154.54-.237.27-.12.55-.244.792-.344.44-.182.917-.356 1.4-.444.71-.13 1.41-.197 2.06-.225.006 0 .041-.008.105-.06a.908.908 0 0 0 .228-.305.884.884 0 0 0 .092-.362c0-.093-.023-.115-.015-.104-.878-1.15-1.798-2.625-2.163-4.157-.135-.57.174-.98.387-1.17.19-.168.412-.273.547-.332.135-.06.287-.117.417-.166l.048-.019c.153-.057.29-.11.419-.169.27-.121.385-.214.424-.261a.447.447 0 0 0-.021-.095c-.091-.284-.348-.476-1.05-.612-.159-.03-.32-.054-.49-.08l-.038-.005a9.836 9.836 0 0 1-.473-.076 2.339 2.339 0 0 1-.589-.186c-.21-.104-.58-.353-.686-.853l-.022-.103v-.105c0-1.95-.507-3.42-1.289-4.383C14.446 4.53 13.361 4 12 4c-1.405 0-2.48.476-3.223 1.358Z",clipRule:"evenodd"})))},{style:{width:35,height:35}}),telegram:(0,es.jsx)(function(e){return el.createElement("svg",ex({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 192 192"},e),M||(M=el.createElement("path",{stroke:"currentColor",strokeWidth:12,d:"M23.073 88.132s65.458-26.782 88.16-36.212c8.702-3.772 38.215-15.843 38.215-15.843s13.621-5.28 12.486 7.544c-.379 5.281-3.406 23.764-6.433 43.756-4.54 28.291-9.459 59.221-9.459 59.221s-.756 8.676-7.188 10.185c-6.433 1.509-17.027-5.281-18.919-6.79-1.513-1.132-28.377-18.106-38.214-26.404-2.649-2.263-5.676-6.79.378-12.071 13.621-12.447 29.891-27.913 39.728-37.72 4.54-4.527 9.081-15.089-9.837-2.264-26.864 18.483-53.35 35.835-53.35 35.835s-6.053 3.772-17.404.377c-11.351-3.395-24.594-7.921-24.594-7.921s-9.08-5.659 6.433-11.693Z"})))},{style:{width:35,height:35}}),wechat:(0,es.jsx)(function(e){return el.createElement("svg",eP({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 192 192"},e),R||(R=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:8,d:"M56 68a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm34 0a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"})),W||(W=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M170 115.24c0-19.305-20.141-35.392-45.044-35.392-24.902 0-45.043 16.087-45.043 35.392 0 19.304 20.141 35.392 45.043 35.392a55.928 55.928 0 0 0 15.122-2.06l17.053 8.494-5.342-13.449A33.588 33.588 0 0 0 170 115.24Z"})),N||(N=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:8,d:"M109 107a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm32 0a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"})),V||(V=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M128.174 79.978c0-24.903-23.744-45.044-53.087-45.044C45.744 34.934 22 54.946 22 79.849a42.988 42.988 0 0 0 20.784 35.392l-7.915 16.087 18.339-10.489a60.859 60.859 0 0 0 21.878 4.055 62.617 62.617 0 0 0 6.435-.387"})))},{style:{width:40,height:40}}),weibo:(0,es.jsx)(function(e){return el.createElement("svg",eA({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 20 20"},e),B||(B=el.createElement("path",{fill:"currentColor",d:"M14.812 9.801c-.778-.141-.4-.534-.4-.534s.761-1.178-.15-2.034c-1.13-1.061-3.877.135-3.877.135-1.05.306-.77-.14-.622-.897 0-.892-.326-2.402-3.12-1.51C3.853 5.858 1.455 9 1.455 9-.212 11.087.01 12.7.01 12.7c.416 3.562 4.448 4.54 7.584 4.771 3.299.243 7.752-1.067 9.102-3.76 1.35-2.696-1.104-3.763-1.884-3.91Zm-1.044 2.549c0 2.051-2.653 3.977-5.93 4.117-3.276.144-5.923-1.398-5.923-3.45 0-2.054 2.647-3.7 5.923-3.842 3.277-.142 5.93 1.126 5.93 3.175Zm-6.584-1.823c-3.293.362-2.913 3.259-2.913 3.259s-.034.917.883 1.384c1.927.98 3.912.387 4.915-.829 1.003-1.216.415-4.173-2.885-3.814Zm.281 3.075c0 .48-.498.925-1.112.99-.614.068-1.11-.265-1.11-.747s.44-.985 1.055-1.045c.707-.064 1.167.318 1.167.802Zm1.003-1.15c.11.174.031.437-.173.588-.208.146-.464.126-.574-.05-.115-.17-.072-.445.139-.588.244-.171.498-.122.608.05Zm4.86-9.806c.335-.06 1.532-.281 2.696-.025 2.083.456 4.941 2.346 3.655 6.368-.094.575-.398.62-.76.62-.432 0-.781-.255-.781-.662 0-.352.155-.71.155-.71.046-.148.411-1.07-.241-2.448-1.198-1.887-3.609-1.915-3.893-1.807-.192.07-.444.118-.591.141l-.106.016-.014.002c-.437 0-.786-.333-.786-.737a.75.75 0 0 1 .573-.715s.007-.011.018-.014c.024-.004.049-.027.075-.029Zm.66 2.611s3.367-.584 2.964 2.811a.21.21 0 0 1-.007.054c-.037.241-.264.426-.529.426-.3 0-.543-.225-.543-.507 0 0 .534-2.269-1.885-1.768-.299 0-.538-.227-.538-.505 0-.283.24-.51.538-.51Z"})))},{style:{width:33,height:33}}),twitch:(0,es.jsx)(function(e){return el.createElement("svg",eE({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"-7 0 32 32"},e),_||(_=el.createElement("path",{d:"M5.4 25.6c-.12 0-.2-.04-.32-.08-.32-.12-.52-.44-.52-.8v-2.8H.84c-.48 0-.84-.4-.84-.84V7.24c0-.48.4-.84.84-.84h16.24c.48 0 .84.4.84.84v10.92c0 .24-.08.44-.24.6l-2.92 2.92c-.16.16-.36.24-.6.24H9.32L6 25.32c-.12.2-.36.28-.6.28zm-3.68-5.36h3.72c.48 0 .84.4.84.84v1.56l2.08-2.16c.16-.16.4-.24.6-.24h4.84l2.4-2.4V8.12H1.72v12.12zM8.68 16v-4.12c0-.48-.4-.84-.84-.84s-.84.4-.84.84V16c0 .48.4.84.84.84s.84-.36.84-.84zm4.4 0v-4.12c0-.48-.4-.84-.84-.84s-.84.4-.84.84V16c0 .48.4.84.84.84s.84-.36.84-.84z"})))},{style:{width:45,height:45}}),elaAddress:(0,es.jsx)(function(e){return el.createElement("svg",ej({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"currentColor",viewBox:"0 0 1024 1024"},e),q||(q=el.createElement("path",{d:"M680.629 626.078c0-94.274-76.427-170.701-170.701-170.701-94.265 0-170.691 76.428-170.691 170.701s76.426 170.701 170.691 170.701c94.274 0 170.701-76.427 170.701-170.701zm40.96 0c0 116.895-94.765 211.661-211.661 211.661-116.887 0-211.651-94.767-211.651-211.661s94.764-211.661 211.651-211.661c116.895 0 211.661 94.765 211.661 211.661z"})),H||(H=el.createElement("path",{d:"M489.454 542.878v166.4c0 11.311 9.169 20.48 20.48 20.48s20.48-9.169 20.48-20.48v-166.4c0-11.311-9.169-20.48-20.48-20.48s-20.48 9.169-20.48 20.48z"})),J||(J=el.createElement("path",{d:"M593.134 605.598h-166.4c-11.311 0-20.48 9.169-20.48 20.48s9.169 20.48 20.48 20.48h166.4c11.311 0 20.48-9.169 20.48-20.48s-9.169-20.48-20.48-20.48zM456.458 285.736l-80.404-158.218c-3.461-6.812 1.489-14.878 9.134-14.878h251.628c7.645 0 12.59 8.061 9.127 14.873l-80.397 158.224c-5.124 10.084-1.103 22.412 8.981 27.536s22.412 1.103 27.536-8.981l80.394-158.218c17.319-34.058-7.427-74.394-45.64-74.394H385.189c-38.208 0-62.956 40.328-45.651 74.392l80.406 158.221c5.124 10.083 17.453 14.104 27.536 8.979s14.104-17.453 8.979-27.536z"})),z||(z=el.createElement("path",{d:"M725.04 909.844c101.8 0 184.32-82.52 184.32-184.32v-43.151c0-197.073-161.327-358.4-358.4-358.4h-79.923c-197.073 0-358.4 161.327-358.4 358.4v43.151c0 101.797 82.526 184.32 184.32 184.32H725.04zm0 40.96H296.957c-124.415 0-225.28-100.862-225.28-225.28v-43.151c0-219.695 179.665-399.36 399.36-399.36h79.923c219.695 0 399.36 179.665 399.36 399.36v43.151c0 124.422-100.858 225.28-225.28 225.28z"})))},{style:{width:35,height:35}}),wallet:(0,es.jsx)(function(e){return el.createElement("svg",e$({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),Z||(Z=el.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 8v-.8c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C16.48 4 15.92 4 14.8 4H6.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C3 5.52 3 6.08 3 7.2V8m18 4h-2a2 2 0 1 0 0 4h2M3 8v8.8c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874C4.52 20 5.08 20 6.2 20h11.6c1.12 0 1.68 0 2.108-.218a2 2 0 0 0 .874-.874C21 18.48 21 17.92 21 16.8v-5.6c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C19.48 8 18.92 8 17.8 8H3Z"})))},{style:{width:33,height:33}}),default:(0,es.jsx)(ec.Z,{style:{width:35,height:35}})};class eT extends er.h{prepareDisplayTitle(){let e=this.getDisplayableCredentialTitle();e?this.displayTitle=e:this.displayTitle=(0,ei.fm)(this.profileInfo.key)}prepareDisplayValue(){this.displayValue=this.profileInfo.options.converter.toDisplayableValue(this)}getProfileInfo(){return this.profileInfo}async prepareRepresentativeIcon(){let e=this.verifiableCredential.getType(),t=(0,ea.m7)(e),n=null==t?void 0:t.key,i=eF[n];if(null==i){let e=eF.default;this.representativeIcon$.next(e)}else this.representativeIcon$.next(i)}constructor(e){super(),this.profileInfo=e}}},51677:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var i=n(57320),r=n(66591);class a{getDIDDocument(){return this.didDocument}getCredentialByType(e){let t=this.didDocument.getCredentials();return t.find(t=>!!t.getType().find(t=>t===e))}async getRepresentativeIcon(){let{DIDURL:e}=await (0,r.hS)();if(!this)return null;let t=null,n=this.didDocument.getCredentials(),a=this.getCredentialsByType(n,"ApplicationCredential");if(a&&a.length>0){let e=a[0].getSubject().getProperties();"iconUrl"in e&&(t=e.iconUrl)}if(!t){let i=this.getCredentialsByType(n,"AvatarCredential");if(!i||0===i.length){let t=this.getCredentialById(n,new e("#avatar"));t&&i.push(t)}if(i&&i.length>0){let e=i[0].getSubject().getProperties();if("avatar"in e&&"object"==typeof e.avatar){let n=e.avatar;"type"in n&&"elastoshive"===n.type&&(t=n.data)}}}return t?(0,i.L)(t):null}async getRepresentativeOwnerName(){let{DIDURL:e}=await (0,r.hS)(),t=null,n=this.didDocument.getCredentials(),i=this.getCredentialsByType(n,"ApplicationCredential");if(i&&i.length>0){let e=i[0].getSubject().getProperties();"name"in e&&(t=e.name)}if(!t){let e=this.getCredentialsByType(n,"NameCredential");if(e&&e.length>0){let n=e[0].getSubject().getProperties();"name"in n&&(t=n.name)}}if(!t){let i=this.getCredentialById(n,new e("#name"));if(i){let e=i.getSubject().getProperties();"name"in e&&(t=e.name)}}return t}getCredentialsByType(e,t){return null==e?void 0:e.filter(e=>e.getType().indexOf(t)>=0)}getCredentialById(e,t){return e.find(e=>t.getFragment()==e.getId().getFragment())}constructor(e){this.didDocument=e}}},95815:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});class i{static fromJson(e){if(!i.isCustomException(e))return null;let t=new i;return Object.assign(t,e),t.timestamp=new Date(e.timestamp),t}static isCustomException(e){return"object"==typeof e&&"source"in e&&"api"===e.source}static newClientError(e,t){let n=new i;return n.message=t,n.appExceptionCode=e,n.statusCode=-1,n.timestamp=new Date,n.source="client",n}}},94025:function(e,t,n){"use strict";var i,r,a,s,l,o,c,u;n.d(t,{Wg:function(){return i},XF:function(){return s},gs:function(){return r}}),(l=i||(i={}))[l.SomethingTodo=10101]="SomethingTodo",l[l.AuthError=10102]="AuthError",l[l.EmailAlreadyExists=10103]="EmailAlreadyExists",l[l.EmailNotExists=10104]="EmailNotExists",l[l.AuthKeyNotExists=10105]="AuthKeyNotExists",l[l.Unspecific=10199]="Unspecific",(o=r||(r={}))[o.DatabaseError=10201]="DatabaseError",o[o.InvalidKeyRingConfig=10202]="InvalidKeyRingConfig",o[o.KeyRingNotExists=10203]="KeyRingNotExists",o[o.KeyNotExists=10204]="KeyNotExists",o[o.InvalidChallengeId=10205]="InvalidChallengeId",o[o.InvalidAuthKey=10206]="InvalidAuthKey",o[o.CanNotRemoveKey=10207]="CanNotRemoveKey",o[o.WebAuthnVerifyError=20208]="WebAuthnVerifyError",o[o.WrongPassword=10209]="WrongPassword",o[o.Unauthorized=10210]="Unauthorized",(c=a||(a={}))[c.DIDStorageError=10301]="DIDStorageError",c[c.MnemonicError=10302]="MnemonicError",c[c.DIDAlreadyExists=10303]="DIDAlreadyExists",c[c.DIDDoesNotExist=10304]="DIDDoesNotExist",c[c.CredentialAlreadyExists=10305]="CredentialAlreadyExists",c[c.CredentialNotExists=10306]="CredentialNotExists",c[c.InvalidCredential=10307]="InvalidCredential",c[c.DIDNotUpToDateError=10308]="DIDNotUpToDateError",c[c.DIDTransactionError=10309]="DIDTransactionError",c[c.NetworkError=10310]="NetworkError",(u=s||(s={}))[u.OtherApolloError=10901]="OtherApolloError",u[u.OtherAxiosError=10902]="OtherAxiosError",u[u.UnlockKeyCancelled=10903]="UnlockKeyCancelled",u[u.InvalidParameter=10904]="InvalidParameter"},4778:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});class i extends Error{}},73052:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});class i extends Error{}},82831:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});let i="\n  id\n  key\n  createdAt\n  lastUsedAt\n  userAgent\n  name\n"},18917:function(e,t,n){"use strict";n.d(t,{E:function(){return i},k:function(){return r}});let i="\n  id\n  createdAt\n  verifiableCredential\n",r="\n  verifiableCredential\n"},56094:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});let i="\n  id\n  interactingApplication { ".concat("\n  id\n  did\n"," }\n")},35289:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let i="\n  did\n  type\n  createdAt\n  lastUsedAt\n  identityRootId\n",r="\n  ".concat(i,"\n  creatingAppIdentity { ").concat(i," }\n")},69173:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(82831);let r="\n  createdAt\n  updatedAt\n  keyId\n  key\n  type\n  browser { ".concat(i.t," }\n")},84424:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});let i="id email createdAt"},12909:function(e,t,n){"use strict";n.d(t,{G:function(){return v}});var i=n(60230),r=n(23965),a=n(11920),s=n(18917);let l="\n  id\n  credential { ".concat(s.E," }\n");var o=n(29748),c=n(91395),u=n(70779),d=n(51894);function h(){let e=(0,i._)(["\n          query requestedCredentials($identityInteractingAppId: String!) {\n            requestedCredentials(identityInteractingAppId: $identityInteractingAppId) {\n              ","\n            }\n          }\n        "]);return h=function(){return e},e}function p(){let e=(0,i._)(["\n          query importedCredentials($identityInteractingAppId: String!) {\n            importedCredentials(identityInteractingAppId: $identityInteractingAppId) {\n              ","\n            }\n          }\n        "]);return p=function(){return e},e}class v{static async fromJson(e){let t=new v;Object.assign(t,e),t.createdAt=new Date(e.createdAt);let{InteractingApplication:i}=await n.e(2083).then(n.bind(n,2083));return t.interactingApplication=await i.fromJson(e.interactingApplication),t}async fetchRequestedCredentials(){return(0,d.H)(async()=>{var e;let t=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(h(),l),variables:{identityInteractingAppId:this.id}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.requestedCredentials){let{RequestedCredential:e}=await n.e(8426).then(n.bind(n,18426)),i=await Promise.all(t.data.requestedCredentials.map(t=>e.fromJson(t)));return a.logger.log("applications","Fetched requested credentials:",i),i}return null})}async fetchImportedCredentials(){return(0,d.H)(async()=>{var e;let t=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(p(),s.E),variables:{identityInteractingAppId:this.id}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.importedCredentials){let{credentialFromJson:e}=await Promise.resolve().then(n.bind(n,90726)),i=await Promise.all(t.data.importedCredentials.map(t=>e(t)));return a.logger.log("applications","Fetched imported credentials:",i),i}return null})}constructor(){this.requestedCredentials$=new u.P(null,()=>this.fetchRequestedCredentials()),this.importedCredentials$=new u.P(null,()=>this.fetchImportedCredentials())}}},396:function(e,t,n){"use strict";var i,r;n.d(t,{M:function(){return i}}),(r=i||(i={})).REGULAR="REGULAR",r.APPLICATION="APPLICATION"},59885:function(e,t,n){"use strict";n.d(t,{i:function(){return U}});var i,r,a=n(60230),s=n(23965),l=n(51894),o=n(29748),c=n(91395),u=n(62067),d=n.n(u),h=n(50676),p=n(36079),v=n(70779);class y{getCredentialByType(e){let t=this.credentials$.value;return null==t?void 0:t.find(t=>!!t.getTypes().find(t=>t===e))}async createCredential(e,t,n,i){this.ensureCredentialsFetched(),p.k.log("credentials","Creating credential",e,t,n,i);let r=await (0,l.H)(()=>this.identity.provider.credentials.createCredential(this.identity.did,e,t,n,i));return this.credentials$.next([r,...this.credentials$.value]),r}async issueCredential(e,t,n,i,r){return this.ensureCredentialsFetched(),p.k.log("credentials","Issuing credential",e,t,n,i,r),(0,l.H)(()=>this.identity.provider.credentials.issueCredential(this.identity.did,e,t,n,i,r))}async importCredential(e,t){this.ensureCredentialsFetched(),p.k.log("credentials","Importing credential",e);let n=await (0,l.H)(()=>this.identity.provider.credentials.importCredential(this.identity.did,e,t),!0,null);return this.credentials$.next([n,...this.credentials$.value]),n}async fetchCredentials(){return p.k.log("credentials","Fetching credentials",this.identity.did),(0,l.H)(()=>this.identity.provider.credentials.listCredentials(this.identity.did))}async deleteCredential(e){var t;this.ensureCredentialsFetched(),p.k.log("credentials","Deleting credential");let n=await (0,l.H)(()=>this.identity.provider.credentials.deleteCredential(e.id));return this.credentials$.next(null===(t=this.credentials$.value)||void 0===t?void 0:t.filter(t=>t.id!=e.id)),n}ensureCredentialsFetched(){if(!this.credentials$.value)throw Error("Don't try to add/delete/edit credentials before the credentials list is fetched!")}constructor(e){this.identity=e,this.credentials$=new v.P(null,()=>this.fetchCredentials())}}var g=n(66591),f=n(69810),w=n.n(f);let m=new(w())(1),b=new(w())(1);class I{async getExistingAppIdentityCredential(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return m.add(async()=>{p.k.log("did","Trying to get an existing app ID credential from storage");let t=await this.getOrCreateAppInstanceDID(e);if(!t)return null;let n=t.did,i=n.toString()+"#app-id-credential",r=await t.didStore.loadCredential(i);if(r){let e=d()(await r.getExpirationDate());if(e.isBefore(d()().subtract(1,"hours")))return p.k.log("did","Existing credential is expired or almost expired - renewing it"),null;p.k.log("did","Returning existing app id credential found in app's local storage",r)}else p.k.log("did","No app id credential found for id",i,"in store",t.didStore);return r})}async getOrCreateAppInstanceDID(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null,n=null,i=null;return b.add(async()=>{p.k.log("did","Getting or creating app instance DID");try{let r=await this.getExistingAppInstanceDIDInfo(e);if(r&&(t=await this.openDidStore(r.storeId)))try{n=await this.loadDID(t,r.didString),i=r.storePassword}catch(e){p.k.error("did",e)}if(!t||!n){p.k.log("did","No app instance DID found. Creating a new one");let r=await this.createNewAppInstanceDID(e);t=r.didStore,n=r.did,i=r.storePassword}return await this.loadDIDCredentials(t,n),{did:n,didStore:t,storePassword:i}}catch(e){p.k.error("did",e)}})}async getExistingAppInstanceDIDInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?"_".concat(e):"",n=this.identity.storage(),i=await n.get("appinstancedidstoreid"+t,null),r=await n.get("appinstancedidstring"+t,null),a=await n.get("appinstancedidstorepassword"+t,null);return i&&r?{storeId:i,didString:r,storePassword:a}:null}fastCreateDID(e){return p.k.log("did","Fast DID creation with language "+e),new Promise(async(t,n)=>{try{let{Mnemonic:n,DIDStore:i,RootIdentity:r}=await (0,g.hS)(),a=await n.getInstance(e).generate(),s=this.generateRandomDIDStoreId(),l=await i.open(s),o=this.generateRandomPassword(),c=await r.createFromMnemonic(a,null,l,o),u=await c.newDid(o);t({didStoreId:s,didStore:l,did:u.getSubject(),storePassword:o})}catch(e){n(e)}})}generateRandomPassword(){return this.generateRandomDIDStoreId()}generateRandomDIDStoreId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=16,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(let r=0;r<e;r++)i[r]=n[0|Math.random()*t];else{let e;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(let t=0;t<36;t++)i[t]||(e=0|16*Math.random(),i[t]=n[19==t?3&e|8:e])}return i.join("")}async createNewAppInstanceDID(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{Mnemonic:t}=await (0,g.hS)(),n=await this.fastCreateDID(t.ENGLISH);return await this.saveAppInstanceDIDInfo(e,n.didStoreId,n.did.toString(),n.storePassword),{didStore:n.didStore,didStoreId:n.didStoreId,did:n.did,storePassword:n.storePassword}}async saveAppInstanceDIDInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;p.k.log("did","Saving app instance DID info for store "+t+" and did "+n+" and app did "+e);let r=e?"_".concat(e):"",a=this.identity.storage();await a.set("appinstancedidstoreid"+r,t),await a.set("appinstancedidstring"+r,n),await a.set("appinstancedidstorepassword"+r,i)}openDidStore(e){return new Promise(async t=>{try{let{DIDStore:n}=await (0,g.hS)(),i=await n.open(e);t(i)}catch(e){t(null)}})}loadDID(e,t){return new Promise(async(n,i)=>{try{let r=await e.loadDid(t);r?n(r.getSubject()):i("Null DIDDocument loaded for did string "+e)}catch(e){i(e)}})}loadDIDCredentials(e,t){return new Promise(async(n,i)=>{try{let i=await e.listCredentials(t.toString()),r=[];for(let t of i)r.push(await e.loadCredential(t));n(r)}catch(e){i(e)}})}constructor(e){this.identity=e}}class D{setCredentialVisibility(e,t){return this.identity.provider.document.setCredentialVisibility(this.identity.did,e,t)}constructor(e){this.identity=e}}var C=n(12805),k=n(36126),S=n(36966),x=n(36418),P=n(4746),A=n(74548),E=n.n(A);class j{async getVaultService(){await this.awaitHiveVaultReady();let e=await this.getHiveAppContext(),{Vault:t}=await (0,g.pH)();return new t(e,null)}awaitHiveVaultReady(){return(0,P.y)(this.vaultStatus$,k.V.ReadyToUse)}getActiveUserSubscriptionServices(){return p.k.log("hive","Getting subscription services for",this.identity.did),this.getSubscriptionService()}async addRandomHiveVaultServiceToDIDDocument(){let e=(0,C.zV)();if(e)return await this.removeHiveVaultServiceFromDIDDocument(),await S.D.addDIDDocumentService(this.identity.did,"#hivevault","HiveVault",e),!0;throw Error("Hive node address cannot be null")}async removeHiveVaultServiceFromDIDDocument(){return S.D.removeDIDDocumentService(this.identity.did,"#hivevault")}documentHasVault(e){let t=e.getService("vault");return null!=t}getDocumentVaultProviderUrl(e){let t=e.getService("#hivevault");return t.serviceEndpoint}async getVaultInfo(){let e=await this.getSubscriptionService();return e.checkSubscription()}async subscribeToHiveProvider(e){p.k.log("hive","Subscribing to hive provider",e);let t=null;try{t=await this.getVaultInfo()}catch(e){}if(t)return!0;{p.k.log("hive","subscribeToHiveProvider(): no vault info, subscribing");let e=await this.getSubscriptionService();if(!(t=await e.subscribe()))return p.k.error("hive","Failed to create vault on the hive node"),!1;await this.retrieveVaultStatus()}let n=await this.getVaultService();if(n)try{p.k.log("hive","Calling an api on the hive vault to make sure everything is fine"),n=await this.getVaultService();let e=await n.getAppStats();if(e)return p.k.log("hive","Vault API could be called, all good!"),this.retrieveVaultStatus(),!0;p.k.error("hive","Error while calling a test hive vault API. No data returned")}catch(e){p.k.error("hive","Exception while calling a test vault API:",e)}else p.k.error("hive","NULL vault returned, unable to get the vault for this DID.");return!1}async retrieveVaultStatus(){let{VaultNotFoundException:e}=await (0,g.pH)();await this.identity.publication().awaitIdentityPublished(),p.k.log("hive","Looking for vault status"),this.vaultStatus$.next(k.V.NotChecked);let{ServiceEndpoint:t}=await (0,g.pH)();p.k.log("hive","Retrieving vault of current user's DID "+this.identity.did);let n=await this.getHiveAppContext(),i=new t(n),r=null;try{r=await i.getProviderAddress(),this.vaultAddress$.next(r);let e=await this.getSubscriptionService(),t=await e.checkSubscription();this.vaultInfo$.next(t),p.k.log("hive","Vault info retrieval completed",t),this.vaultStatus$.next(k.V.ReadyToUse),p.k.log("hive","Vault status retrieval completed")}catch(t){if(!(t instanceof e)||!r)return p.k.error("hive","Unknown exception while retrieving vault status:",t),this.emitUnknownErrorStatus(),null;await this.subscribeToHiveProvider(r)}}emitUnknownErrorStatus(){p.k.log("hive","Emiting unknown error status"),this.vaultStatus$.next(k.V.UnknownError),this.vaultInfo$.next(null)}async getSubscriptionService(){let{VaultSubscription:e}=await (0,g.pH)(),t=await this.getHiveAppContext();return new e(t)}async getScriptingService(){let{ScriptingService:e,ServiceEndpoint:t}=await (0,g.pH)(),n=await this.getHiveAppContext(),i=new t(n);return new e(i)}handleVaultAuthenticationChallenge(e){return this.generateAuthPresentationJWT(e)}getThisAppDID(){return"did:elastos:iddh53iyg3Eyrq4AFiA8tCULpEqUyu49td"}async getHiveAppContextProvider(){return C.gM.add(async()=>{let e=this.getThisAppDID(),t=await this.identity.DID().getOrCreateAppInstanceDID(e),n=await t.didStore.loadDid(t.did.toString());return{getLocalDataDir:()=>"/",getAppInstanceDocument:()=>n,getAuthorization:e=>{p.k.log("hive","Receiving hive client authentication challenge");try{return this.handleVaultAuthenticationChallenge(e)}catch(e){return p.k.error("hive","Exception in authentication handler:",e),null}}}})}async getHiveAppContext(){return this.appContextCache.get(this.identity.did,{create:async()=>{let{AppContext:e}=await (0,g.pH)();p.k.log("hive","Getting app context for",this.identity.did);let t=await this.getHiveAppContextProvider();return e.build(t,this.identity.did,"did:elastos:iddh53iyg3Eyrq4AFiA8tCULpEqUyu49td")}})}async generateAuthPresentationJWT(e){let t=this.getThisAppDID();p.k.log("hive","Starting process to generate hive auth presentation JWT");try{let{JWTParserBuilder:i,VerifiablePresentation:r,JWTHeader:a}=await (0,g.hS)(),s=(await new i().setAllowedClockSkewSeconds(300).build().parse(e)).getBody();if(null==s)throw Error("Invalid jwt token as authorization.");if(!s.getIssuer()||!s.get("nonce"))throw Error("The received authentication JWT token does not contain iss or nonce");let l=s.get("nonce"),o=s.getIssuer();p.k.log("hive","Getting app instance DID");let c=await this.identity.DID().getOrCreateAppInstanceDID(t),u=c.did;p.k.log("hive","App instance DID:",u);let d=await this.identity.DID().getExistingAppInstanceDIDInfo(t);p.k.log("hive","Getting app identity credential");let h=await this.identity.DID().getExistingAppIdentityCredential(t);if(!h&&(p.k.log("hive","Empty app id credential. Trying to generate a new one"),!(h=await this.generateAppIdCredential())))return p.k.warn("hive","Failed to generate a new App ID credential"),null;p.k.log("hive","Creating DID presentation response for Hive authentication challenge");let v=await r.createFor(u.toString(),null,c.didStore),y=await v.credentials(h).realm(o).nonce(l).seal(d.storePassword);if(y){p.k.log("hive","Opening DID store to create a JWT for presentation:",y.toJSON());let e=(await Promise.resolve().then(n.bind(n,11920))).DID,t=await e.DIDHelper.openDidStore(d.storeId);p.k.log("hive","Loading DID document",d.didString);let i=await t.loadDid(d.didString);p.k.log("hive","App instance DID document",i.toJSON()),p.k.log("hive","Creating JWT");let r=await i.jwtBuilder().addHeader(a.TYPE,a.JWT_TYPE).addHeader("version","1.0").setSubject("DIDAuthResponse").setAudience(s.getIssuer()).setIssuedAt(E()().unix()).setExpiration(E()().add(3,"month").unix()).setNotBefore(E()().subtract(3,"minutes").unix()).claimsWithJson("presentation",y.toString(!0)).sign(d.storePassword);return p.k.log("hive","JWT created for presentation:",r),r}throw Error("No presentation generated")}catch(e){throw Error("The received authentication JWT token signature cannot be verified or failed to verify: ".concat(e,". Is the hive back-end DID published? Are you on the right network?"))}}async generateAppIdCredential(){let e=this.getThisAppDID(),t=await this.identity.DID().getOrCreateAppInstanceDID(e);if(!t)return null;let n=t.did;p.k.log("hive","Starting to generate a new App ID credential.");try{let i=await this.generateApplicationIDCredential(n.toString(),e);if(i)return p.k.log("hive","App ID credential generated:",i),await t.didStore.storeCredential(i),p.k.log("hive","Storing app ID credential into DID store:",t.didStore,i),i;return null}catch(e){return null}}async generateApplicationIDCredential(e,t){return C.gM.add(async()=>{let n={appInstanceDid:e,appDid:t};p.k.log("hive","Asking the identity provider to generate app ID credential for appInstanceDid:",e,"appDid:",t);try{return(0,l.H)(async()=>{let t=await this.identity.provider.credentials.issueCredential(this.identity.did,e,"#app-id-credential",["https://elastos.org/fakecontext#AppIdCredential"],d()().add(30,"days").toDate(),n);return t},!0,null)}catch(e){return p.k.error("identity","Failed to issue the app id credential...",e),null}})}constructor(e){this.identity=e,this.vaultStatus$=new v.P(null,async()=>{this.retrieveVaultStatus()}),this.vaultInfo$=new h.X(null),this.vaultAddress$=new h.X(null),this.appContextCache=new x.R}}(i=r||(r={})).UNPUBLISHED="UNPUBLISHED",i.PUBLISHING="PUBLISHING",i.PUBLISHED="PUBLISHED",i.FAILED_TO_PUBLISH="FAILED_TO_PUBLISH";class ${async publish(){return await S.D.publishIdentity(this.identity.did),this.startCheckingPublicationStatus(),new Promise(e=>{this.publicationStatus$.subscribe(t=>{t==r.PUBLISHED?e(!0):t==r.FAILED_TO_PUBLISH&&e(!1)})})}async startCheckingPublicationStatus(){try{for(;this.shouldContinueCheckingStatus();)await this.fetchPublicationStatus(this.identity.did),await new Promise(e=>{setTimeout(()=>{e()},2e3)})}catch(e){p.k.error("Exception while fetching identity publication status",e)}}shouldContinueCheckingStatus(){let e=this.publicationStatus$.value;return!e||e===r.UNPUBLISHED||e===r.PUBLISHING}async fetchPublicationStatus(e){let t=await S.D.getPublicationStatus(e);p.k.log("publication","Got publication status",null==t?void 0:t.state),this.publicationStatus$.next(null==t?void 0:t.state)}awaitIdentityPublished(){return(0,P.y)(this.publicationStatus$,r.PUBLISHED)}constructor(e){this.identity=e,this.publicationStatus$=new v.P(null,async()=>{this.startCheckingPublicationStatus()})}}let O="identity_storage_index";class F{async lazyLoadIndex(){if(this.index)return;let e=await localStorage.getItem(O)||null;this.index=e?JSON.parse(e):[]}async saveIndex(){await localStorage.setItem(O,JSON.stringify(this.index))}async set(e,t){await this.lazyLoadIndex();let n=this.getFullKey(e);return this.index.includes(n)||(this.index.push(n),await this.saveIndex()),localStorage.setItem(n,t)}async get(e,t){await this.lazyLoadIndex();let n=this.getFullKey(e);return localStorage.getItem(n)||t}async unset(e){let t=this.getFullKey(e);return localStorage.removeItem(t)}async clean(){for(let e of(await this.lazyLoadIndex(),this.index))await localStorage.removeItem(e);this.index=[],await this.saveIndex()}getFullKey(e){return this.identity.did+"_"+e}setJSON(e,t){return this.set(e,JSON.stringify(t))}async getJSON(e,t){return JSON.parse(await this.get(e,JSON.stringify(t)))}constructor(e){this.identity=e,this.index=null}}function T(){let e=(0,a._)(["\n        mutation markIdentityInUse($identityDid: String!) {\n          markIdentityInUse(identityDid: $identityDid)\n        }\n      "]);return T=function(){return e},e}class U{async fillFromJson(e,t){return Object.assign(this,e),this.createdAt=new Date(e.createdAt),this.lastUsedAt$.next(new Date(e.lastUsedAt)),this.provider=t,this}credentials(){return this.features.get("credentials")}document(){return this.features.get("document")}DID(){return this.features.get("DID")}hive(){return this.features.get("hive")}storage(){return this.features.get("storage")}publication(){return this.features.get("publication")}get(e){if(!this.features.has(e))throw Error("Unhandled user feature '".concat(e,"'"));return this.features.get(e)}addFeature(e,t){if(!this.features.has(e))return this.features.set(e,t),t}createVerifiablePresentation(e,t,n){return(0,l.H)(()=>this.provider.presentation.createVerifiablePresentation(this.did,e,t,n),!0)}equals(e){return this.did===e.did}async markIdentityInUse(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,s.Ps)(T()),variables:{identityDid:e}}));return this.lastUsedAt$.next(d()().toDate()),null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.markIdentityInUse}synchronizeDIDDocument(){return null}constructor(){this.lastUsedAt$=new h.X(null),this.features=new Map,this.addFeature("credentials",new y(this)),this.addFeature("document",new D(this)),this.addFeature("DID",new I(this)),this.addFeature("hive",new j(this)),this.addFeature("storage",new F(this)),this.addFeature("publication",new $(this))}}},73762:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(4865),r=n(36079),a=n(66591),s=n(58555),l=n(67133).Buffer;async function o(e,t){let{FileDownloadExecutable:n}=await (0,a.pH)(),o=new Date().getTime(),c=t.type,u="identity/avatar/"+o,d=await (0,s.EX)(t),h=await (0,s.hv)(d,300),p=await e.hive().getVaultService(),v=await p.getFilesService().upload(u,l.from(h),{onProgress:()=>{}},!1);r.k.log("profile","Completed avatar upload to hive",v);let y="getMainIdentityAvatar"+o,g=await e.hive().getScriptingService();await g.registerScript(y,new n(y,u).setOutput(!0),void 0,!0,!0);let f=i.l.get("appDid"),w="hive://"+e.did+"@"+f+"/"+y+"?params={}";return r.k.log("identity","Generated avatar url:",w),{mimeType:c,avatarHiveURL:w}}},58087:function(e,t,n){"use strict";n.d(t,{l:function(){return $}});var i=n(59885),r=n(60230),a=n(23965),s=n(56094),l=n(12909),o=n(29748),c=n(91395),u=n(36079),d=n(70779);function h(){let e=(0,r._)(["\n          query interactingApplications($identityDid: String!) {\n            interactingApplications(identityDid: $identityDid) {\n              ","\n            }\n          }\n        "]);return h=function(){return e},e}function p(){let e=(0,r._)(["\n          mutation recordRequestedCredentials($input: RecordRequestedCredentialsInput!) {\n            recordRequestedCredentials(input: $input)\n          }\n        "]);return p=function(){return e},e}class v{async fetchInteractingApplications(){var e;let t=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,a.Ps)(h(),s.G),variables:{identityDid:this.identity.did}}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.interactingApplications){let e=await Promise.all(t.data.interactingApplications.map(e=>l.G.fromJson(e)));return u.k.log("applications","Fetched identity interacting applications:",e),e}return null}async recordRequestedCredentials(e,t){var n;let i={applicationDid:e,credentialIds:t.map(e=>e.id)},r=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(p()),variables:{input:i}}));null!=r&&null!==(n=r.data)&&void 0!==n&&n.recordRequestedCredentials||u.k.error("identity","Failed to record requested credentials")}constructor(e){this.identity=e,this.applications$=new d.P(null,()=>this.fetchInteractingApplications())}}var y=n(37105),g=n(23284),f=n(97884),w=n(59147),m=n(44853),b=n.n(m),I=n(72440),D=n.n(I),C=n(62067),k=n.n(C),S=n(50676),x=n(45685),P=n(73762);let A=(0,w.S)()&&new f.J("identity-info-names"),E=(0,w.S)()&&new f.J("identity-info-icons");class j{get name$(){return A.listen(this.identity.did)}get icon$(){return E.listen(this.identity.did)}setActiveCredential(e){this.activeCredential$.next(e)}refreshIdentityName(){let e=this.getName();this.name$.next(e),A.put(this.identity.did,e)}refreshIdentityIcon(){var e;let t=null===(e=this.avatarCredential$.value)||void 0===e?void 0:e.representativeIcon$.value;"string"==typeof t?(this.icon$.next(t),E.put(this.identity.did,t)):(this.icon$.next(null),E.put(this.identity.did,null))}async createInitialNameCredential(e){let t=(0,g.Pr)("name");return!!await this.createProfileCredential(null,t.typesForCreation(),t.key,e)}async createProfileCredential(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=[];return(0,o.Pt)(async()=>{let a;a=e||this.identity.did+"#"+n+function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return b()(Array(e),()=>"".concat(D()(1,10))).join("")}();let s=(0,g.m7)(t);r.push(s.type.getLongType());let l=k()().add(5,"years").toDate(),o=s.options.converter.toSubject(i);return this.identity.credentials().createCredential(a,r,l,o)},null)}async updateProfileCredential(e,t){let n=e.verifiableCredential.getId().toString(),i=(0,g.m7)(e.verifiableCredential.getType()),r=await this.identity.credentials().deleteCredential(e);if(!r)return null;let a=await this.createProfileCredential(n,i.typesForCreation(),i.key,t);return a}getName(){var e;let t=null===(e=this.profileCredentials$.value)||void 0===e?void 0:e.find(e=>"name"===e.getProfileInfo().key);return t?t.getDisplayValue():null}async upsertIdentityAvatar(e){let t=await (0,P.L)(this.identity,e);if(t){let e=(0,g.Pr)("avatar"),n={mimeType:t.mimeType,hiveDownloadScriptUrl:t.avatarHiveURL};await this.deleteAvatarCredential(),await this.createProfileCredential("#avatar",e.typesForCreation(),e.key,n)}else u.k.error("profile","Failed to upload avatar to hive")}async deleteAvatarCredential(){let e=this.avatarCredential$.value;e&&await this.identity.credentials().deleteCredential(e)}constructor(e){this.identity=e,this.activeCredential$=new S.X(null),this.profileCredentials$=new d.P(null,async()=>{this.identity.credentials().credentials$.pipe((0,x.U)(e=>null==e?void 0:e.filter(e=>e instanceof y.E))).subscribe(e=>{this.profileCredentials$.next(e),this.refreshIdentityName()})}),this.avatarCredential$=new d.P(null,async()=>{this.profileCredentials$.subscribe(e=>{let t=null==e?void 0:e.find(e=>"avatar"===e.verifiableCredential.getId().getFragment());console.log("avatarCredential",t),null==t||t.representativeIcon$.subscribe(e=>{this.refreshIdentityIcon()}),this.avatarCredential$.next(t),this.refreshIdentityIcon()})})}}class $ extends i.i{static async fromJson(e,t){let i=new $;await i.fillFromJson(e,t);let{identityFromJson:r}=await n.e(9510).then(n.bind(n,89510));return e.creatingAppIdentity&&(i.creatingAppIdentity=await r(e.creatingAppIdentity,t)),i}profile(){return this.get("profile")}applications(){return this.get("applications")}constructor(){super(),this.addFeature("profile",new j(this)),this.addFeature("applications",new v(this))}}},5253:function(e,t,n){"use strict";var i,r;n.d(t,{J:function(){return i}}),(r=i||(i={})).PASSWORD="PASSWORD",r.WEBAUTHN="WEBAUTHN"},2968:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var i=n(15824),r=n(36418);let a=new r.R;class s{static async fromJson(e){return a.get(e.keyId,{create:async()=>new s,async fill(t){Object.assign(t,e),t.createdAt=new Date(e.createdAt),t.updatedAt=new Date(e.updatedAt),e.browser&&(t.browser=await i.Browser.fromJson(e.browser))}})}equals(e){return this.keyId===e.keyId}}},55204:function(e,t,n){"use strict";n.d(t,{UserEmail:function(){return i}});class i{static fromJson(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object.assign(new i,e);return n.user=t,n}}},22373:function(e,t,n){"use strict";n.d(t,{lu:function(){return w},qR:function(){return f},zl:function(){return g}});var i=n(60230),r=n(23965),a=n(84424),s=n(94025),l=n(55204),o=n(29748),c=n(91395),u=n(36079),d=n(70779);function h(){let e=(0,i._)(["\n                query FetchUserEmails {\n                  fetchUserEmails {\n                    ","\n                  }\n                }\n                "]);return h=function(){return e},e}function p(){let e=(0,i._)(["\n                query RemoveUserEmail($id: String!) {\n                  removeUserEmail(id: $id)\n                }\n                "]);return p=function(){return e},e}function v(){let e=(0,i._)(["\n                    mutation CheckEmailBind($authKey: String!) {\n                        checkEmailBind(authKey: $authKey) { accessToken refreshToken }\n                    }\n                "]);return v=function(){return e},e}function y(){let e=(0,i._)(["\n                    mutation BindWithEmailAddress($emailAddress: String!) {\n                        bindWithEmailAddress(emailAddress: $emailAddress) { success }\n                    }\n                "]);return y=function(){return e},e}function g(e){return e.appExceptionCode===s.Wg.EmailAlreadyExists}function f(e){return e.appExceptionCode===s.Wg.EmailNotExists}class w{async fetchUserEmails(){var e;u.k.log("user","Fetching user emails.");let t=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(h(),a.i)}));return(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.fetchUserEmails)?t.data.fetchUserEmails.map(e=>l.UserEmail.fromJson(e,this.user)):(console.error("user","can not fetch user emails."),null)}async removeUserEmail(e){var t,n;u.k.log("user","remove user email.");let i=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(p()),variables:{id:e}}));return(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.removeUserEmail)||console.error("user","can not remove user email."),null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.removeUserEmail}static async checkRawEmailBind(e){var t;u.k.log("user","Checking temporary authentication key for email bind.");let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(v()),variables:{authKey:e}}));return null!=n&&null!==(t=n.data)&&void 0!==t&&!!t.checkEmailBind||(u.k.error("Failed to check email bind"),!1)}async bindWithEmailAddress(e){u.k.log("user","Sending request to authentication by email"),await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(y()),variables:{emailAddress:e}}))}constructor(e){this.user=e,this.userEmails$=new d.P([],()=>this.fetchUserEmails())}}},31931:function(e,t,n){"use strict";n.d(t,{n:function(){return en}});var i=n(60230),r=n(23965),a=n(84424),s=n(35289),l=n(82831);let o="\n    id \n    type \n    userEmail { ".concat(a.i," }\n    userEmailProvider \n    userEmailAddress \n    identity { ").concat(s.x," }\n    identityDid \n    credentialsCount \n    appDid \n    browser { ").concat(l.t," } \n    browserName \n    createdAt\n");var c=n(78123),u=n(29748),d=n(91395),h=n(36079),p=n(8009),v=n(792),y=n(70779);function g(){let e=(0,i._)(["\n            query Activities {\n                activities {\n                    ","\n                }\n            } "]);return g=function(){return e},e}function f(){let e=(0,i._)(["\n            mutation CreateActivity($input: CreateActivityInput!) {\n                createActivity(input: $input) {\n                    ","\n                }\n            } "]);return f=function(){return e},e}class w{connectSocketEvents(){p.p.subscribe(async e=>{if(e.event===v.v.ACTIVITY_CREATED){h.k.log("activity","ACTIVITY_CREATED:",e.data);let t=await c.Activity.fromJson(e.data);this.activities$.next([t].concat(this.activities$.value))}})}async fetchActivities(){h.k.log("activity","Fetch activities",this.user);let{data:e}=await (0,u.Pt)(async()=>await (await (0,d.W)()).query({query:(0,r.Ps)(g(),o)}));if(e){h.k.log("activity","Get activities",e.activities);let{Activity:t}=await Promise.resolve().then(n.bind(n,78123)),i=await Promise.all(e.activities.map(e=>t.fromJson(e)));return this.sortRecentActivitiesFirst(i)}throw Error("Can not get activities.")}sortRecentActivitiesFirst(e){return e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}async createActivity(e){var t;h.k.log("activity","Create activity");let i=await (0,u.Pt)(async()=>await (await (0,d.W)()).mutate({mutation:(0,r.Ps)(f(),o),variables:{input:e}}));if(null==i||null===(t=i.data)||void 0===t||!t.createActivity)return h.k.error("activity","Failed to create activity."),null;{h.k.log("activity","Create activities with input ".concat(e),i.data.createActivity);let{Activity:t}=await Promise.resolve().then(n.bind(n,78123));return t.fromJson(i.data.createActivity)}}constructor(e){this.user=e,this.activities$=new y.P([],()=>this.fetchActivities()),this.connectSocketEvents()}}var m=n(22373),b=n(53386),I=n(50676),D=n(56094),C=n(12909);function k(){let e=(0,i._)(["\n          query interactingApplications {\n            interactingApplications {\n              ","\n            }\n          }\n        "]);return k=function(){return e},e}class S{async fetchInteractingApplications(){var e;let t=await (0,u.Pt)(async()=>(await (0,d.W)()).query({query:(0,r.Ps)(k(),D.G)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.interactingApplications){let e=await Promise.all(t.data.interactingApplications.map(e=>C.G.fromJson(e)));return h.k.log("applications","Fetched all user interacting applications:",e),e}return null}constructor(e){this.user=e,this.applications$=new y.P(null,()=>this.fetchInteractingApplications())}}var x=n(15824);function P(){let e=(0,i._)(["\n        query ListBrowsers {\n          browsers {\n            ","\n          }\n        }\n      "]);return P=function(){return e},e}function A(){let e=(0,i._)(["\n        mutation deleteBrowser($browserId: String!) {\n          deleteBrowser(browserId: $browserId)\n        }\n      "]);return A=function(){return e},e}class E{async fetchBrowsers(){var e;h.k.log("devices","Fetching user browsers");let t=await (0,u.Pt)(async()=>(await (0,d.W)()).query({query:(0,r.Ps)(P(),l.t)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.browsers){let e=await Promise.all(t.data.browsers.map(e=>x.Browser.fromJson(e)));return h.k.log("browsers","Fetched browsers:",e),e}return null}async getCurrentBrowser(){return this.browsers$.value.find(e=>e.isCurrentBrowser())}async deleteBrowser(e){var t;h.k.log("browsers","Deleting browser");let n=await (0,u.Pt)(async()=>(await (0,d.W)()).mutate({mutation:(0,r.Ps)(A()),variables:{browserId:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.deleteBrowser)return this.browsers$.next(this.browsers$.value.filter(t=>t.id!=e)),!0;throw Error("Failed to delete Browser")}constructor(e){this.user=e,this.browsers$=new y.P([],()=>this.fetchBrowsers())}}let j="\n    id\n    createdAt\n    title\n";class ${static async fromJson(e){let t=Object.assign(new $,e);return t.createdAt=new Date(e.createdAt),t}}function O(){let e=(0,i._)(["\n          query DeveloperAccessKeys {\n            developerAccessKeys {\n              ","\n            }\n          }\n        "]);return O=function(){return e},e}function F(){let e=(0,i._)(["\n          mutation CreateDeveloperAccessKey {\n            createDeveloperAccessKey {\n              storedKey { "," }\n              clearKey\n            }\n          }\n        "]);return F=function(){return e},e}class T{async fetchAccessKeys(){h.k.log("development","Fetchind developer access keys");let{data:e}=await (0,u.Pt)(async()=>await (await (0,d.W)()).query({query:(0,r.Ps)(O(),j)}));if(e)return h.k.log("development","Got access keys",e.developerAccessKeys),Promise.all(e.developerAccessKeys.map(e=>$.fromJson(e)));throw Error("Failed to fetch developer access keys.")}async createAccessKey(){var e;h.k.log("development","Creating a new developer access key");let t=await (0,u.Pt)(async()=>await (await (0,d.W)()).mutate({mutation:(0,r.Ps)(F(),j)}));if(null==t||null===(e=t.data)||void 0===e||!e.createDeveloperAccessKey)return h.k.error("development","Failed to create access key."),null;{let e=await $.fromJson(t.data.createDeveloperAccessKey.storedKey);return this.accessKeys$.next([...this.accessKeys$.value,e]),{storedKey:e,clearKey:t.data.createDeveloperAccessKey.clearKey}}}constructor(e){this.user=e,this.accessKeys$=new y.P(null,()=>this.fetchAccessKeys())}}var U=n(396),K=n(12805),L=n(36966),M=n(11059),R=n(70163),W=n(45685);function N(){let e=(0,i._)(["\n          mutation claimManagedIdentity($input: ClaimIdentityInput!) {\n            claimManagedIdentity(input: $input) {\n              ","\n            }\n          }\n        "]);return N=function(){return e},e}class V{async createRegularIdentity(e){h.k.log("identity","Creating a new identity",e);let t=(0,K.zV)(),n=await L.D.createIdentity(e,U.M.REGULAR,t,this.user.defaultRootIdentityId);return this.identities$.next([n,...this.identities$.value]),this.user.defaultRootIdentityId||await (0,M.nj)(),n}async createApplicationIdentity(e){h.k.log("identity","Creating a new application identity",e);let t=(0,K.zV)(),n=await L.D.createIdentity(e,U.M.APPLICATION,t);return this.identities$.next([n,...this.identities$.value]),n}async deleteIdentity(e){h.k.log("identity","Deleting identity");let t=await L.D.deleteIdentity(e);return this.identities$.next(this.identities$.value.filter(t=>t.did!=e)),t}async listRootIdentities(){h.k.log("identity","list Root Identities identity");let e=await L.D.listRootIdentities();return this.rootIdentities$.next(this.rootIdentities$.value.filter(e=>e.id)),e}async fetchIdentities(){return h.k.log("identity","Fetching identities",this.user),L.D.listIdentities()}async fetchRootIdentities(){return h.k.log("identity","Fetching root identities",this.user),L.D.listRootIdentities()}async claimManagedIdentity(e){var t;let i={},a=await (0,u.Pt)(async()=>(await (0,d.W)()).mutate({mutation:(0,r.Ps)(N(),s.x),variables:{input:i}}));if(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.createIdentity){let{identityFromJson:e}=await n.e(9510).then(n.bind(n,89510)),t=await e(a.data.createIdentity,L.n);return this.identities$.next([t,...this.identities$.value]),h.k.log("identity","Managed identity claimed successfully",t),t}throw Error("Failed to claim identity")}constructor(e){this.user=e,this.identities$=new y.P(null,()=>this.fetchIdentities()),this.rootIdentities$=new y.P([],()=>this.fetchRootIdentities()),this.regularIdentities$=new y.P(null,async()=>{this.identities$.pipe((0,R.h)(e=>!!e),(0,W.U)(e=>e.filter(e=>e.type===U.M.REGULAR))).subscribe(e=>{this.regularIdentities$.next(e)})}),this.applicationIdentities$=new y.P(null,async()=>{this.identities$.pipe((0,R.h)(e=>!!e),(0,W.U)(e=>null==e?void 0:e.filter(e=>e.type===U.M.APPLICATION))).subscribe(e=>{this.applicationIdentities$.next(e)})})}}var B=n(69173),_=n(2968),q=n(5253),H=n(7482),J=n(2512),z=n(51894),Z=n(67133).Buffer;function G(){let e=(0,i._)(["\n        query FetchShadowKeys {\n          userKeys {\n            ","\n          }\n        }\n      "]);return G=function(){return e},e}function X(){let e=(0,i._)(["\n          query CheckMasterKeyLock {\n            checkMasterKeyLock\n          }\n        "]);return X=function(){return e},e}class Q{async fetchShadowKeys(){var e;h.k.log("devices","Fetching shadow keys");let t=await (0,u.Pt)(async()=>(await (0,d.W)()).query({query:(0,r.Ps)(G(),B.j)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.userKeys){let e=await Promise.all(t.data.userKeys.map(e=>_.M.fromJson(e)));return h.k.log("security","Fetched user shadow keys:",e),e}return null}async bindPassword(e){let t;if(h.k.log("keyring","Binding password"),this.isPasswordBound())t=await (0,H.Cp)(e);else{let n={type:q.J.PASSWORD,key:e,keyId:"unused-for-now-for-passwords"};t=[await (0,H.cI)(n)]}return!!t&&(this.deletePasswordShadowKey(),t.forEach(e=>this.upsertShadowKey(e)),!0)}async bindPasskey(){let e=await (0,H.Dk)(),t=await this.pkCredentialCreationOptions(e,this.user.name$.value),n=await (0,J.RQ)(t[1]),i={type:q.J.WEBAUTHN,keyId:n.id,key:JSON.stringify(n),challengeId:e.id},r=await (0,H.cI)(i);return!!r&&(this.upsertShadowKey(r),!0)}async unlockPasskeyLocally(){h.k.log("Keyring","start unlock passkey...");let e=await (0,H.Dk)(),t=await this.pkCredentialCreationOptions(e,null),n=await (0,J.oz)(t[0],!1),i={type:q.J.WEBAUTHN,keyId:n.id,key:JSON.stringify(n),challengeId:e.id};return h.k.log("Keyring","start unlock passkey, attResp: ",n),i}async pkCredentialCreationOptions(e,t){let n="didweb.trinity-tech.io",i=new TextEncoder,r=i.encode(e.content),a={challenge:Z.from(r).toString(),allowCredentials:[],rpId:n,userVerification:"required",timeout:6e4},s={user:{id:t,name:t,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7}],rp:{id:n,name:"DID web app"},challenge:e.content};return[a,s]}upsertShadowKey(e){let t=this.shadowKeys$.value;this.shadowKeys$.next([...t.filter(t=>!t.equals(e)),e])}deletePasswordShadowKey(){let e=this.shadowKeys$.value;this.shadowKeys$.next([...e.filter(e=>e.type!==q.J.PASSWORD)])}isPasswordBound(){var e;return!!(null===(e=this.shadowKeys$.value)||void 0===e?void 0:e.find(e=>e.type===q.J.PASSWORD))}isThisBrowserBound(){var e;return!!(null===(e=this.passkeyKeys$.value)||void 0===e?void 0:e.find(e=>{var t;return null===(t=e.browser)||void 0===t?void 0:t.isCurrentBrowser()}))}async checkRemoteUnlockStatus(){return(0,u.Pt)(async()=>{await (await (0,d.W)()).query({query:(0,r.Ps)(X())})})}ensureMasterKeyUnlocked(){return(0,z.H)(async()=>(await this.checkRemoteUnlockStatus(),!0),!0,!1)}constructor(e){this.user=e,this.shadowKeys$=new y.P(null,()=>this.fetchShadowKeys()),this.passwordKeys$=new y.P(null,async()=>{this.shadowKeys$.pipe((0,W.U)(e=>null==e?void 0:e.filter(e=>e.type===q.J.PASSWORD))).subscribe(this.passwordKeys$)}),this.passkeyKeys$=new y.P(null,async()=>{this.shadowKeys$.pipe((0,W.U)(e=>null==e?void 0:e.filter(e=>e.type===q.J.WEBAUTHN))).subscribe(this.passkeyKeys$)})}}var Y=n(36418);let ee=new Y.R;function et(){let e=(0,i._)(["\n          mutation UpdateUserProperty($input: UserPropertyInput!) {\n            updateUserProperty(input: $input)\n          }\n        "]);return et=function(){return e},e}class en{static async fromJson(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return ee.get(e.id,{create:async()=>new en,async fill(t){t.fillFromJson(e),t.createdAt=new Date(e.createdAt),t.nameInitials$.next((0,b.OX)(e.name)),t.name$.next(e.name)}},t)}toJson(){return{id:this.id,type:this.type,name:this.name$.value,nameInitials:(0,b.OX)(this.name$.value),createdAt:this.createdAt.toISOString(),defaultRootIdentityId:this.defaultRootIdentityId}}get(e){if(!this.features.has(e))throw Error("Unhandled user feature '".concat(e,"'"));return this.features.get(e)}addFeature(e,t){if(!this.features.has(e))return this.features.set(e,t),t}fillFromJson(e){Object.assign(this,e)}equals(e){return!!e&&this.id===e.id}async updateUserName(e){var t;h.k.log("user","Updating user name.");let n=await (0,u.Pt)(async()=>(await (0,d.W)()).mutate({mutation:(0,r.Ps)(et()),variables:{input:{name:e}}})),i=null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.updateUserProperty;return i&&(this.name$.next(e),h.k.log("user","User name updated successfully.")),i}constructor(){this.name$=new I.X(null),this.nameInitials$=new I.X(null),this.features=new Map,this.addFeature("email",new m.lu(this)),this.addFeature("identity",new V(this)),this.addFeature("browser",new E(this)),this.addFeature("security",new Q(this)),this.addFeature("activity",new w(this)),this.addFeature("applications",new S(this)),this.addFeature("development",new T(this))}}},39615:function(e,t,n){"use strict";n.d(t,{Pd:function(){return l},Z$:function(){return o}});var i=n(175),r=n(36079),a=n(11059);let s="browser-client-key";function l(e){var t;let n;try{n=(0,i.Z)(e)}catch(e){r.k.error("browser","Access token received from the backend cannot be decoded!");return}if(!n.browserKey)throw Error("Abnormal state: no browser key found in the access token!");let l=o();if(l&&l!==n.browserKey)throw localStorage.removeItem(s),(0,a.w7)(),Error("State error! Browser key ".concat(l," is different from access token browser key ").concat(n.browserKey," !"));t=n.browserKey,localStorage.setItem(s,t)}function o(){return localStorage.getItem(s)}},4865:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});let i=new class{init(e){this.config=e}get(e){if(!this.config)throw Error("The config service has not been initialized yet. Make sure to call configService.init() first");return this.config[e]}}},61459:function(e,t,n){"use strict";n.d(t,{N:function(){return p}});class i{static async loadOrCreate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=new i(e,n,t);return await r.load(),r}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.items.findIndex(t=>t.key==e),r={key:e,timeValue:n,data:t};-1===i?this.items.push(r):this.items[i]=r,this.items.sort((e,t)=>0===e.timeValue?-1:0===t.timeValue?1:e.timeValue>t.timeValue?-1:e.timeValue<t.timeValue?1:0)}remove(e){let t=this.items.findIndex(t=>t.key==e);t>=0&&this.items.splice(t,1)}get(e){return this.items.find(t=>t.key==e)}values(){return this.items}size(){return this.items.length}async save(){let e=this.items.slice(0,Math.min(this.items.length,this.maxItemsOnDisk)),t="cache"+this.name;localStorage.setItem(t,JSON.stringify(e))}async load(){let e="cache"+this.name,t=localStorage.getItem(e);t&&(this.items=JSON.parse(t))}async delete(){let e="cache"+this.name;localStorage.removeItem(e)}constructor(e,t,n){this.name=e,this.maxItemsOnDisk=t,this.storeGlobally=n}}var r=n(78596),a=n(36079),s=n(66591),l=n(13952),o=n.n(l),c=n(62067),u=n.n(c),d=n(69810),h=n.n(d);let p=new class{async init(){this.contextsCache=await i.loadOrCreate("credentialcontextpayloads",!0)}async resolveExpandedCredentialTypeIdentifiers(e){let t=null;try{t=e.toJSON()}catch(e){return a.k.warn("credentialtypes","Credential could not be parsed, returning empty types"),[]}if(!("@context"in t)||0!==t["@context"].indexOf("https://www.w3.org/2018/credentials/v1"))return[];try{let e=await o().expand(t,{documentLoader:this.buildElastosJsonLdDocLoader()});if(e&&e.length>0){let t=e[0];return Array.isArray(t["@type"])?t["@type"]:[t["@type"]]}console.log("error")}catch(e){a.k.warn("credentialtypes","Credential could not be expanded, returning empty types.",e)}return[]}async resolveTypesWithContexts(e){let t=null;try{if(t=e.toJSON(),!("@context"in t)||0!==t["@context"].indexOf("https://www.w3.org/2018/credentials/v1"))return[];let n=t["@context"],i=[];for(let e of n){let t=await this.fetchContext(e);if(!t){a.k.warn("credentialtypes","Failed to fetch credential type context for",e);continue}"@context"in t&&i.push({url:e,payload:t})}let r=[];for(let t of e.getType()){let e=i.find(e=>Object.keys(e.payload["@context"]).indexOf(t)>=0);e&&r.push({context:e.url,shortType:t})}return r}catch(e){return a.k.warn("credentialtypes","Credential could not be parsed or , returning empty types.",e),[]}}async fetchContext(e){let t=this.contextsCache.get(e);return t?t.data:this.fetchContextQueue.add(async()=>{if(e.startsWith("http"))try{let t=await fetch(e),n=await t.json();return this.contextsCache.set(e,n,u()().unix()),n}catch(e){return a.k.warn("credentialtypes","Failed to get payload from context.",e),null}else{if(!e.startsWith("did:"))return a.k.log("credentialtypes","Unsupported credential context url",e),null;let{publisher:t,shortType:n}=this.extractEIDContext(e);if(!t)return a.k.warn("credentialtypes","Failed to extract publisher from context",e),null;let i=await r._.resolveDIDDocument(t);if(!i)return null;{let r="".concat(t,"#").concat(n),a=await this.getContextPayloadFromDIDDocument(i.getDIDDocument(),r);return this.contextsCache.set(e,a,u()().unix()),a}}})}extractEIDContext(e){let t=new RegExp(/^did:\/\/elastos\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)/),n=t.exec(e);return!n||n.length<3?(a.k.warn("credentialtypes","Invalid url format, cannot find credential publisher and ID"),null):{publisher:"did:elastos:".concat(n[1]),shortType:n[2]}}async getContextPayloadFromDIDDocument(e,t){let n=e.getService(t);if(!n)return a.k.warn("credentialtypes","The DID document has no service with ID: "+t),null;let i=n.getServiceEndpoint(),{DIDURL:r}=await (0,s.hS)(),l=this.getCredentialById(e,new r(i));if(!l)return a.k.warn("credentialtypes","The DID document has no credential context credential that matches (service id, credential id): ",t,i),null;let o=l.getSubject().getProperties();return"definition"in o&&"@context"in o.definition?o.definition:(a.k.warn("credentialtypes","Credential ".concat(i," found but no definition/@context in the subject. Invalid format."),o),null)}buildElastosJsonLdDocLoader(){return(e,t)=>new Promise(async(t,n)=>{try{if(e.startsWith("did")){let n=await this.fetchContext(e);t({contextUrl:null,documentUrl:e,document:n})}else{let n=o().documentLoaders.xhr(),i=await n(e);t(i)}}catch(e){n(e)}})}async verifyCredential(e){try{let t=e.toJSON();if("object"!=typeof t)return a.k.warn("credentialtypes","verifyCredential false 331"),!1;if(!("@context"in t)||0!==t["@context"].indexOf("https://www.w3.org/2018/credentials/v1")||!("credentialSubject"in t)||!("proof"in t))return!1;let n=await o().compact(t,t["@context"],{documentLoader:this.buildElastosJsonLdDocLoader()});if(n){"credentialSubject"in n&&"string"!=typeof n.credentialSubject||(n.credentialSubject={id:n.credentialSubject});let{modifiedDoc:e,warningsGenerated:i}=this.addMissingFieldsToCompactHtmlResult(t,n);if(!i)return!0}}catch(e){a.k.warn("credentialtypes","verifyCredential error",e)}return!1}addMissingFieldsToCompactHtmlResult(e,t){let n=!1,i=Object.assign({},t);for(let r of Object.keys(e.credentialSubject))r in t.credentialSubject||(i.credentialSubject["MISSING_KEY_"+r]="This field is missing in credential types",n=!0);for(let r of Object.keys(e.proof))r in t.proof||(i.proof["MISSING_KEY_"+r]="This field is missing in credential types",n=!0);return{modifiedDoc:i,warningsGenerated:n}}getCredentialById(e,t){let n=e.getCredentials();return n.find(e=>t.getFragment()==e.getId().getFragment())}constructor(){this.fetchContextQueue=new(h())(1)}}},29748:function(e,t,n){"use strict";n.d(t,{Pt:function(){return w},rs:function(){return v}});var i=n(17205),r=n(95815),a=n(94025),s=n(4778),l=n(73052),o=n(22373),c=n(18701),u=n(21704),d=n(27524),h=n(36079),p=n(50707);let v=new d.x;function y(e){return h.k.error("apollo","Client error",e),r._.newClientError(a.XF.OtherApolloError,e.message)}function g(e){return h.k.error("apollo","Protocol error",e),r._.newClientError(a.XF.OtherApolloError,e.message)}function f(e){var t;let n=e.path,i=e.originalError||(null===(t=e.extensions)||void 0===t?void 0:t.originalError),s=r._.fromJson(i);return s?((0,p.z)(s)||h.k.error("graphql","Custom API exception when calling GraphQL method:",n,i),s):(h.k.error("graphql","GraphQL error when calling GraphQL method:",n,e),r._.newClientError(a.XF.OtherApolloError,e.message))}async function w(e,t){try{let t=await e();return t}catch(D){let e;if(D instanceof r._)e=[D];else if(D instanceof i.cA){var n,d,w;let t;t=(t=(t=(t=[]).concat(null===(n=D.clientErrors)||void 0===n?void 0:n.map(y))).concat(null===(d=D.graphQLErrors)||void 0===d?void 0:d.map(f))).concat(null===(w=D.protocolErrors)||void 0===w?void 0:w.map(g)),D.networkError&&(t=t.concat(function(e){let t=[];return"ServerError"===e.name?"object"==typeof e.result&&e.result.forEach(e=>{var n;null===(n=e.errors)||void 0===n||n.forEach(e=>{h.k.error("graphql","GraphQL server network error:",e.message),t.push(r._.newClientError(a.XF.OtherApolloError,e.message))})}):(h.k.error("graphql","GraphQL network error:",e),t.push(r._.newClientError(a.XF.OtherApolloError,e.message))),t}(D.networkError))),e=t}else D instanceof u.__?e=[f(D)]:D instanceof c.d7?e=[function(e){let t=r._.fromJson(e.response.data);return t?(h.k.error("axios","Axios app exception",t),t):(h.k.error("Unhandled axios error:",e),r._.newClientError(a.XF.OtherAxiosError,e.message))}(D)]:h.k.error("Unhandled error:",D);e.map(e=>{v.next(e)});let m=e.find(e=>(0,p.z)(e));if(m)throw m;let b=e.find(e=>(0,o.zl)(e));if(b)throw new s.E;let I=e.find(e=>(0,o.qR)(e));if(I)throw new l.h;return t||null}}},91395:function(e,t,n){"use strict";n.d(t,{W:function(){return v}});var i=n(23139),r=n(79977),a=n(29526),s=n(15740),l=n(2594),o=n(85932),c=n(69810),u=n.n(c),d=n(39615),h=n(4865);let p=new class{async init(){return this.queue.add(()=>{if(this.initialized)return;let e=new s.A({uri:"".concat(h.l.get("backendUrl"),"/graphql"),batchMax:30,batchInterval:50}),t=(0,o.q)(e=>{let{graphQLErrors:t,networkError:n,operation:i,forward:r}=e;if(t&&!localStorage.getItem("access_token"))return}),n=(0,l.v)((e,t)=>{let{headers:n}=t,i=localStorage.getItem("access_token"),r=(0,d.Z$)();return{headers:{...n,authorization:i?"Bearer ".concat(i):"",...r&&{"x-browser-key":r}}}});this.apolloClient=new i.f({link:(0,r.D)([t,n,e]),cache:new a.h,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}}}),this.initialized=!0})}constructor(){this.initialized=!1,this.queue=new(u())(1)}},v=async()=>(await p.init(),p.apolloClient)},57320:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var i=n(57958),r=n(36079),a=n(97884),s=n(59147),l=n(58555);let o=(0,s.S)()&&new a.J("hive-pictures",async(e,t)=>(r.k.log("hive","Cache miss for hive url picture, fetching"),u(t.hiveScriptUrl,t.identity)));async function c(e){let t=await (0,i.J9)();return o.get(e+t.did,{hiveScriptUrl:e,identity:t})}async function u(e,t){if(!e)return null;let n=await d(e,t);return n?(0,l.Ik)(n):""}async function d(e,t){e=e.replace("params={empty:0}",'params={"empty":0}');try{r.k.log("hive","Calling script url to download file",e);let n=await t.hive().getVaultService(),i=await n.getScriptingService().downloadFileByHiveUrl(e);if(!i||0===i.length)return r.k.warn("hive","Got empty data while fetching hive script picture",e),null;return r.k.log("hive","Got data after fetching hive script picture",e,"data length:",i.length),i}catch(t){return r.k.warn("hive","Failed to download hive asset at ",e,t),null}}},12805:function(e,t,n){"use strict";n.d(t,{zV:function(){return d},AX:function(){return u},gM:function(){return o}});var i=n(36079),r=n(59147),a=n(66591),s=n(69810),l=n.n(s);let o=new(l())(1),c=["https://hive1.trinity-tech.io","https://hive2.trinity-tech.io","https://hive3.trinity-tech.io"];function u(){(0,r.S)()&&(0,a.pH)().then(e=>{let{Logger:t,AppContext:n,DIDResolverAlreadySetupException:r}=e;try{t.setDefaultLevel(t.WARNING),n.setupResolver("mainnet","/anyfakedir/browserside/for/didstores")}catch(e){e instanceof r||i.k.error("hive","AppContext.setupResolver() exception:",e)}})}function d(){let e=Math.floor(Math.random()*c.length);return c[e]}},36126:function(e,t,n){"use strict";var i,r;n.d(t,{V:function(){return i}}),(r=i||(i={}))[r.NotChecked=0]="NotChecked",r[r.Subscribing=1]="Subscribing",r[r.ReadyToUse=2]="ReadyToUse",r[r.UnknownError=3]="UnknownError"},23284:function(e,t,n){"use strict";n.d(t,{Pr:function(){return d},m7:function(){return u},yd:function(){return c}});class i{setup(e){if(0>=e.indexOf("#"))this.shortType=e,this.context=null,this.longType=null;else{let t=e.split("#");this.context=t[0],this.shortType=t[1],this.longType=e}}getContext(){return this.context}getShortType(){return this.shortType}getLongType(){return this.longType}isLongType(){return!!this.longType}containedIn(e){return e.includes(this.getLongType())||e.includes(this.getShortType())}constructor(e){this.type=e,this.setup(e)}}var r=n(59545);class a{getInfo(e){return u(e.verifiableCredential.getType())}getEditionType(){return this.editionType}constructor(e){this.editionType=e}}var s=n(53386);class l extends a{toEditableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toDisplayableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toSubject(e){return{[this.subjectKey]:e}}constructor(e){super(r.E.SingleLineString),this.subjectKey=e}}let o=[new r.h("name",new i("https://ns.elastos.org/credentials/profile/name/v1#NameCredential"),{converter:new l("name")}),new r.h("avatar",new i("https://ns.elastos.org/credentials/profile/avatar/v1#AvatarCredential"),{converter:new class extends a{toEditableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toDisplayableValue(e){return null}toSubject(e){return this.buildAvatar(e.mimeType,"elastoshive",e.hiveDownloadScriptUrl)}buildAvatar(e,t,n){return{avatar:{"content-type":e,type:t,data:n}}}constructor(e){super(r.E.Undefined),this.subjectKey=e}}("avatar")}),new r.h("email",new i("https://ns.elastos.org/credentials/profile/email/v1#EmailCredential"),{multipleInstancesAllowed:!0,converter:new l("email")}),new r.h("birthDate",new i("https://ns.elastos.org/credentials/profile/birthDate/v1#BirthDateCredential"),{converter:new class extends a{toEditableValue(e){let t=e.verifiableCredential.getSubject().getProperty(this.subjectKey);return new Date(t)}toDisplayableValue(e){return(0,s.r2)(e.verifiableCredential.getSubject().getProperty(this.subjectKey))}toSubject(e){return{[this.subjectKey]:e.toISOString()}}constructor(e){super(r.E.Date),this.subjectKey=e}}("birthDate")}),new r.h("nationality",new i("did://elastos/iUq76mi2inkZfqqbHkovbcDkzEkAh2dKrb/ISONationalityCredential#ISONationalityCredential"),{multipleInstancesAllowed:!0,converter:new class extends a{toEditableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey)}toDisplayableValue(e){return e.verifiableCredential.getSubject().getProperty(this.subjectKey).label}toSubject(e){return{[this.subjectKey]:e}}constructor(e){super(r.E.Country),this.subjectKey=e}}("nationality")}),new r.h("gender",new i("https://ns.elastos.org/credentials/profile/gender/v1#GenderCredential"),{converter:new class extends a{toEditableValue(e){return(0,s.aD)(e.verifiableCredential.getSubject().getProperty(this.subjectKey))}toDisplayableValue(e){return(0,s.aD)(e.verifiableCredential.getSubject().getProperty(this.subjectKey))}toSubject(e){return{[this.subjectKey]:(0,s.OX)(e)}}constructor(e){super(r.E.Gender),this.subjectKey=e}}("gender")}),new r.h("telephone",new i("https://ns.elastos.org/credentials/profile/telephone/v1#TelephoneCredential"),{multipleInstancesAllowed:!0,converter:new l("telephone")}),new r.h("nickname",new i("https://ns.elastos.org/credentials/profile/nickname/v1#NicknameCredential"),{converter:new l("nickname")}),new r.h("birthPlace",new i("https://ns.elastos.org/credentials/profile/birthPlace/v1#BirthPlaceCredential"),{converter:new l("birthPlace")}),new r.h("occupation",new i("https://ns.elastos.org/credentials/profile/occupation/v1#OccupationCredential"),{converter:new l("occupation")}),new r.h("education",new i("https://ns.elastos.org/credentials/profile/education/v1#EducationCredential"),{converter:new l("education")}),new r.h("interests",new i("https://ns.elastos.org/credentials/profile/interests/v1#InterestsCredential"),{converter:new l("interests")}),new r.h("description",new i("https://ns.elastos.org/credentials/profile/description/v1#DescriptionCredential"),{converter:new l("description")}),new r.h("url",new i("https://ns.elastos.org/credentials/profile/url/v1#URLCredential"),{multipleInstancesAllowed:!0,converter:new l("url")}),new r.h("discord",new i("https://ns.elastos.org/credentials/social/discord/v1#DiscordCredential"),{converter:new l("discord")}),new r.h("linkedin",new i("https://ns.elastos.org/credentials/social/linkedin/v1#LinkedinCredential"),{converter:new l("linkedin")}),new r.h("facebook",new i("https://ns.elastos.org/credentials/social/facebook/v1#FacebookCredential"),{converter:new l("facebook")}),new r.h("instagram",new i("https://ns.elastos.org/credentials/social/instagram/v1#InstagramCredential"),{converter:new l("instagram")}),new r.h("twitter",new i("https://ns.elastos.org/credentials/social/twitter/v1#TwitterCredential"),{converter:new l("twitter")}),new r.h("snapchat",new i("https://ns.elastos.org/credentials/social/snapchat/v1#SnapchatCredential"),{converter:new l("snapchat")}),new r.h("telegram",new i("https://ns.elastos.org/credentials/social/telegram/v1#TelegramCredential"),{converter:new l("telegram")}),new r.h("wechat",new i("https://ns.elastos.org/credentials/social/wechat/v1#WechatCredential"),{converter:new l("wechat")}),new r.h("weibo",new i("https://ns.elastos.org/credentials/social/weibo/v1#WeiboCredential"),{converter:new l("weibo")}),new r.h("twitch",new i("https://ns.elastos.org/credentials/social/twitch/v1#TwitchCredential"),{converter:new l("twitch")}),new r.h("elaAddress",new i("https://ns.elastos.org/credentials/elaAddress/v1#ElaAddressCredential"),{multipleInstancesAllowed:!0,converter:new l("elaAddress")}),new r.h("wallet",new i("https://ns.elastos.org/credentials/wallet/v1#WalletCredential"),{isSensitive:!0,multipleInstancesAllowed:!0,converter:new l("wallet")})];function c(){return o}function u(e){return o.find(t=>{var n;return null===(n=t.type)||void 0===n?void 0:n.containedIn(e)})}function d(e){return o.find(t=>t.key===e)}},59545:function(e,t,n){"use strict";n.d(t,{E:function(){return r},h:function(){return o}});var i,r,a=n(40218),s=n.n(a);(i=r||(r={}))[i.SingleLineString=0]="SingleLineString",i[i.MultiLineText=1]="MultiLineText",i[i.Date=2]="Date",i[i.Country=3]="Country",i[i.Gender=4]="Gender",i[i.Undefined=5]="Undefined";let l={defaultSubject:"",isSensitive:!1,multipleInstancesAllowed:!1,converter:null};class o{getConverter(){return this.options.converter}typesForCreation(){return[this.type.getLongType()]}constructor(e,t,n={converter:null}){this.key=e,this.type=t,this.options=n,n=s()({},l,n)}}},78596:function(e,t,n){"use strict";n.d(t,{_:function(){return y}});var i=n(26588),r=n(51677),a=n(95815),s=n(94025),l=n(66591);let o=!1;async function c(){if(o)return;let{DIDBackend:e,DefaultDIDAdapter:t}=await (0,l.hS)();e.initialize(new t("mainnet")),o=!0}var u=n(36079),d=n(36418),h=n(97884),p=n(69810),v=n.n(p);let y=new class{async resolveDIDDocument(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await c(),t&&u.k.warn("identity","forceRemote not fully implemented for resolveDIDDocument()!"),this.documentsMemoryCache.get(e,{create:async()=>{let t=await this.documentsPermanentCache.get(e),n=await i.DIDDocument.parseAsync(t);return n?new r.B(n):null}},!t)}fetchDIDDocumentWithoutDIDStore(e,t){if(!e)throw a._.newClientError(s.XF.InvalidParameter,"Can't fetch a DID document from an empty DID string");return this.resolveDIDQueue.add(async()=>{try{let{DIDBackend:n,DID:i}=await (0,l.hS)();u.k.log("identity","Resolving DID without DID store",e,t);let r=new i(e);return n.getInstance().resolveDid(r,t)}catch(e){return u.k.error("identity",e),null}})}constructor(){this.documentsPermanentCache=new h.J("did-documents",async e=>{let t=await this.fetchDIDDocumentWithoutDIDStore(e,!1);return null==t?void 0:t.toString()},1800),this.documentsMemoryCache=new d.R,this.resolveDIDQueue=new(v())(1)}}},57958:function(e,t,n){"use strict";n.d(t,{Bx:function(){return a},J9:function(){return s}});var i=n(50676),r=n(70163);let a=new i.X(null);function s(){return new Promise(e=>{a.pipe((0,r.h)(e=>!!e)).subscribe(t=>{e(t)})})}},36966:function(e,t,n){"use strict";n.d(t,{n:function(){return V},D:function(){return B}});var i=n(58087),r=n(60230),a=n(23965),s=n(18917),l=n(90726),o=n(29748),c=n(91395),u=n(36079),d=n(66591);function h(){let e=(0,r._)(["\n        mutation createCredential($identityDid: String!, $credentialId: String!, $types: Json!, $expirationDate: String!, $properties: Json!) {\n          createCredential(input: { identityDid: $identityDid, credentialId: $credentialId, types: $types, expirationDate: $expirationDate, properties: $properties}) {\n            ","\n          }\n        }\n      "]);return h=function(){return e},e}function p(){let e=(0,r._)(["\n        mutation issueCredential($identityDid: String!, $subjectDid: String!, $credentialId: String!, $types: Json!, $expirationDate: String!, $properties: Json!) {\n          issueCredential(input: { identityDid: $identityDid, subjectDid: $subjectDid, credentialId: $credentialId, types: $types, expirationDate: $expirationDate, properties: $properties}) {\n            ","\n          }\n        }\n      "]);return p=function(){return e},e}function v(){let e=(0,r._)(["\n          mutation importCredential($input: ImportCredentialInput!) {\n            importCredential(input: $input) {\n              ","\n            }\n          }\n        "]);return v=function(){return e},e}function y(){let e=(0,r._)(["\n          query ListCredentials($identityDid: String!) {\n            credentials(identityDid: $identityDid) {\n              ","\n            }\n          }\n        "]);return y=function(){return e},e}function g(){let e=(0,r._)(["\n        mutation deleteCredential($id: String!) {\n          deleteCredential(id: $id)\n        }\n      "]);return g=function(){return e},e}class f{async createCredential(e,t,n,i,r){var d;u.k.log("custodial-provider","Creating credential",t,n,r);let p=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(h(),s.E),variables:{identityDid:e,credentialId:t,types:n,expirationDate:i,properties:r}}));return(null==p?void 0:null===(d=p.data)||void 0===d?void 0:d.createCredential)?(0,l.credentialFromJson)(p.data.createCredential):null}async issueCredential(e,t,n,i,r,l){var u;let{VerifiableCredential:h}=await (0,d.hS)(),v=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(p(),s.k),variables:{identityDid:e,subjectDid:t,credentialId:n,types:i,expirationDate:r,properties:l}}));return(null==v?void 0:null===(u=v.data)||void 0===u?void 0:u.issueCredential)?h.parse(v.data.issueCredential.verifiableCredential):null}async importCredential(e,t,n){var i;let r={identityDid:e,credentialString:t.toString(),importingApplicationDid:n},u=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(v(),s.E),variables:{input:r}}));return(null==u?void 0:null===(i=u.data)||void 0===i?void 0:i.importCredential)?(0,l.credentialFromJson)(u.data.importCredential):null}async listCredentials(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,a.Ps)(y(),s.E),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.credentials){let e=await Promise.all(n.data.credentials.map(e=>(0,l.credentialFromJson)(e)));return u.k.log("custodial-provider","Fetched credentials:",e),e}return null}async deleteCredential(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(g()),variables:{id:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.deleteCredential)return!0;throw Error("Failed to delete Credential")}}var w=n(26588),m=n(51677);function b(){let e=(0,r._)(["\n          mutation addService($input: AddServiceInput!) {\n            addService(input: $input)\n          }\n        "]);return b=function(){return e},e}function I(){let e=(0,r._)(["\n          mutation removeService($input: RemoveServiceInput!) {\n            removeService(input: $input)\n          }\n        "]);return I=function(){return e},e}function D(){let e=(0,r._)(["\n          query getLocalDIDDocument($identityDid: String!) {\n            getLocalDIDDocument(identityDid: $identityDid) {\n              ","\n            }\n          }\n        "]);return D=function(){return e},e}function C(){let e=(0,r._)(["\n          mutation synchronize($identityDid: String!) {\n            synchronize(identityDid: $identityDid)\n          }\n        "]);return C=function(){return e},e}function k(){let e=(0,r._)(["\n            mutation setCredentialVisibility($input: SetCredentialVisibilityInput!) {\n              setCredentialVisibility(input: $input)\n            }\n          "]);return k=function(){return e},e}class S{async addDIDDocumentService(e,t,n,i,r){var s;let l={identityDid:e,serviceId:t,type:n,endpoint:i,properties:r},u=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(b()),variables:{input:l}}));if(null==u?void 0:null===(s=u.data)||void 0===s?void 0:s.addService)return!0;throw Error("Failed to add DIDDocument Service")}async removeDIDDocumentService(e,t){var n;let i={identityDid:e,serviceId:t},r=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(I()),variables:{input:i}}));if(null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.removeService)return!0;throw Error("Failed to remove DIDDocument Service")}async getLocalDIDDocument(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,a.Ps)(D(),"\n  didDocument\n"),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.getLocalDIDDocument){let e=await w.DIDDocument.parseAsync(n.data.getLocalDIDDocument.didDocument);if(e)return new m.B(e)}return null}async synchronize(e){await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(C()),variables:{identityDid:e}}))}async setCredentialVisibility(e,t,n){var i;let r={identityDid:e,credentialId:t,visible:n},s=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(k()),variables:{input:r}}));if(null==s?void 0:null===(i=s.data)||void 0===i?void 0:i.setCredentialVisibility)return!0;throw Error("Failed to set credential visibility")}}var x=n(35289);let P="\n  id\n  createdAt\n  didStoreRootIdentityId\n  Identity { ".concat(x.x," }\n");var A=n(51894);function E(){let e=(0,r._)(["\n        mutation exportMnemonic($rootIdentityId: String!) {\n          exportMnemonic(rootIdentityId: $rootIdentityId) {\n            ","\n          }\n        }\n      "]);return E=function(){return e},e}class j{static async fromJson(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new j;Object.assign(i,e),i.createdAt=new Date(e.createdAt);let{identityFromJson:r}=await n.e(9510).then(n.bind(n,89510));return i.Identity=await Promise.all(e.Identity.map(e=>r(e,t))),i.provider=t,i}async exportMnemonic(e){return u.k.log("Root identity","Export mnemonic "),(0,A.H)(()=>this.exportingMnemonic(e))}async exportingMnemonic(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(E(),"\n  mnemonic\n"),variables:{rootIdentityId:e}}));return null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.exportMnemonic.mnemonic}}function $(){let e=(0,r._)(["\n          mutation createIdentity($input: CreateIdentityInput!) {\n            createIdentity(input: $input) {\n              ","\n            }\n          }\n        "]);return $=function(){return e},e}function O(){let e=(0,r._)(["\n        mutation deleteIdentity($identityDid: String!) {\n          deleteIdentity(identityDid: $identityDid)\n        }\n      "]);return O=function(){return e},e}function F(){let e=(0,r._)(["\n        query ListIdentities {\n          identities {\n            ","\n          }\n        }\n      "]);return F=function(){return e},e}function T(){let e=(0,r._)(["\n        query listRootIdentities {\n          listRootIdentities {\n            ","\n          }\n        }\n      "]);return T=function(){return e},e}class U{async createIdentity(e,t,i){var r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l={name:e,hiveVaultProvider:i,identityType:t,rootIdentityId:s},u=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)($(),x.x),variables:{input:l}}));if(null==u?void 0:null===(r=u.data)||void 0===r?void 0:r.createIdentity){let{identityFromJson:e}=await n.e(9510).then(n.bind(n,89510));return e(u.data.createIdentity,this.provider)}throw Error("Failed to create DID")}async deleteIdentity(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(O()),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.deleteIdentity)return!0;throw Error("Failed to delete DID")}async listIdentities(){var e;let t=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,a.Ps)(F(),x.x)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.identities){let{identityFromJson:e}=await n.e(9510).then(n.bind(n,89510)),i=await Promise.all(t.data.identities.map(t=>e(t,this.provider)));return u.k.log("custodial-provider","Fetched identities:",i),i}return null}async listRootIdentities(){var e;let t=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,a.Ps)(T(),P)}));if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.listRootIdentities){let e=await Promise.all(t.data.listRootIdentities.map(e=>j.fromJson(e,this.provider)));return u.k.log("custodial-provider","Fetched root identities:",e),e}return null}constructor(e){this.provider=e}}function K(){let e=(0,r._)(["\n        mutation createVerifiablePresentation($identityDid: String!, $credentials: Json!, $realm: String!, $nonce: String!) {\n          createVerifiablePresentation(input: { identityDid: $identityDid, credentials: $credentials, realm: $realm, nonce: $nonce}) {\n            ","\n          }\n        }\n      "]);return K=function(){return e},e}class L{async createVerifiablePresentation(e,t,n,i){var r;let{VerifiablePresentation:s}=await (0,d.hS)(),l=[];t.forEach(e=>{l.push(e.toJSON())});let u=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(K(),"\n  verifiablePresentation\n"),variables:{identityDid:e,credentials:l,realm:n,nonce:i}}));return(null==u?void 0:null===(r=u.data)||void 0===r?void 0:r.createVerifiablePresentation)?s.parse(u.data.createVerifiablePresentation.verifiablePresentation):null}}function M(){let e=(0,r._)(["\n        mutation publishIdentity($identityDid: String!) {\n          publishIdentity(identityDid: $identityDid) {\n            ","\n          }\n        }\n      "]);return M=function(){return e},e}function R(){let e=(0,r._)(["\n        mutation getPublicationStatus($identityDid: String!) {\n          getPublicationStatus(input: { identityDid: $identityDid}) {\n            state\n          }\n        }\n      "]);return R=function(){return e},e}class W{async publishIdentity(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(M(),"\n  publicationId\n"),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.publishIdentity.publicationId)return null==n?void 0:n.data.publishIdentity.publicationId;throw Error("Failed to publish DID")}async getPublicationStatus(e){var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,a.Ps)(R()),variables:{identityDid:e}}));if(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.getPublicationStatus)return n.data.getPublicationStatus;throw Error("Failed to get publication status")}}var N=n(57958);let V=new class{constructor(){this.identity=new U(this),this.publication=new W,this.credentials=new f,this.presentation=new L,this.document=new S}},B=new class{createIdentity(e,t,n,i){return this.provider.identity.createIdentity(e,t,n,i)}deleteIdentity(e){return this.provider.identity.deleteIdentity(e)}publishIdentity(e){return this.provider.publication.publishIdentity(e)}getPublicationStatus(e){return this.provider.publication.getPublicationStatus(e)}async setActiveIdentity(e){if(!e){N.Bx.next(null),this.activeIdentityId="",localStorage.setItem("activeIdentityId","");return}try{await e.markIdentityInUse(e.did)}catch(e){}N.Bx.next(e),this.activeIdentityId=e.did,localStorage.setItem("activeIdentityId",this.activeIdentityId)}getActiveIdentityId(){return this.activeIdentityId||(this.activeIdentityId=this.loadActiveIdentityId()),this.activeIdentityId}loadActiveIdentityId(){return localStorage.getItem("activeIdentityId")}restoreActiveIdentity(e){if(!N.Bx.value){if(this.getActiveIdentityId()){let t=this.findIdentityByDID(this.activeIdentityId,e);this.setActiveIdentity(t);return}e.length>0&&B.setActiveIdentity(e[0])}}onlyRegularIdentities(e){return e.filter(e=>e instanceof i.l)}findIdentityByDID(e,t){let n=null==t?void 0:t.find(t=>t.did===e);return n}async listIdentities(){let e=await this.provider.identity.listIdentities();return this.restoreActiveIdentity(this.onlyRegularIdentities(e)),e}async listRootIdentities(){return this.provider.identity.listRootIdentities()}addDIDDocumentService(e,t,n,i,r){return this.provider.document.addDIDDocumentService(e,t,n,i,r)}removeDIDDocumentService(e,t){return this.provider.document.removeDIDDocumentService(e,t)}getLocalDIDDocument(e){return this.provider.document.getLocalDIDDocument(e)}synchronize(e){return this.provider.document.synchronize(e)}constructor(){this.provider=V,this.activeIdentityId=""}}},57389:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var i=n(78596);let r=new class{async getIssuerName(e){let t=await this.fetchDocument(e);return t.getRepresentativeOwnerName()}async getIssuerAvatar(e){let t=await this.fetchDocument(e);return t.getRepresentativeIcon()}async isPublished(e){let t=await this.fetchDocument(e);return!!t}async fetchDocument(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e="did:elastos:iqjN3CLRjd7a4jGCZe6B3isXyeLy7KKDuK",i._.resolveDIDDocument(e,t)}}},12883:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(27524);let r=new i.x},7482:function(e,t,n){"use strict";n.d(t,{Cp:function(){return g},Dk:function(){return w},cI:function(){return y},wo:function(){return f}});var i=n(60230),r=n(23965),a=n(69173),s=n(2968),l=n(29748),o=n(91395),c=n(36079),u=n(12883);function d(){let e=(0,i._)(["\n        mutation bindKey($newKey: AuthKeyInput!) {\n          bindKey(newKey: $newKey) {\n            ","\n          }\n        }\n      "]);return d=function(){return e},e}function h(){let e=(0,i._)(["\n        mutation ChangePassword($newPassword: String!) {\n          changePassword(newPassword: $newPassword) {\n            ","\n          }\n        }\n      "]);return h=function(){return e},e}function p(){let e=(0,i._)(["\n          mutation unlockMasterKey($authKey: AuthKeyInput!) {\n            unlockMasterKey(authKey: $authKey)\n          }\n        "]);return p=function(){return e},e}function v(){let e=(0,i._)(["\n      query GenerateChallenge {\n        generateChallenge{\n          id,\n          content\n        }\n    }\n    "]);return v=function(){return e},e}async function y(e){var t,n;c.k.log("keyring","Binding key");let i=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(d(),a.j),variables:{newKey:e}}),null);if(null==i||null===(t=i.data)||void 0===t||!t.bindKey)return c.k.error("keyring","Failed to bind key"),null;{let e=await s.M.fromJson(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.bindKey);return c.k.log("keyring","Key bound successfully"),e}}async function g(e){var t,n;c.k.log("keyring","Changing password");let i=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(h(),a.j),variables:{newPassword:e}}),null);if(null==i||null===(t=i.data)||void 0===t||!t.changePassword)return null;{let e=await Promise.all(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.changePassword.map(e=>s.M.fromJson(e)));return c.k.log("keyring","Password changed successfully",e),e}}async function f(e){var t;c.k.log("security","Trying to unlock master key");let n=await (0,l.Pt)(async()=>(await (0,o.W)()).mutate({mutation:(0,r.Ps)(p()),variables:{authKey:e}}),null);return null!=n&&null!==(t=n.data)&&void 0!==t&&!!t.unlockMasterKey&&(c.k.log("security","Master key unlocked successfully"),u.Z.next(!0),!0)}async function w(){c.k.log("passkey","get challenge to generate passkey");let e=await (0,l.Pt)(async()=>(await (0,o.W)()).query({query:(0,r.Ps)(v()),variables:{}}));if(e){var t,n;let i=null===(t=e.data)||void 0===t?void 0:t.generateChallenge.id,r=null===(n=e.data)||void 0===n?void 0:n.generateChallenge.content;return{id:i,content:r}}throw Error("Can not get challenge by generateChallenge api.")}},36079:function(e,t,n){"use strict";n.d(t,{k:function(){return l},m:function(){return o}});var i=n(62067),r=n.n(i);let a={default:"#008730",hive:"#5226af",did:"#06c4ce",identity:"#40C770","custodial-provider":"#40C770",connectivity:"#444444",security:"#bc3bef"};function s(e){return a[e]||a.default}let l=new class{init(e){this.originalConsole=e,this.originalDebugLog=this.originalConsole.log,this.originalDebugWarn=this.originalConsole.warn,this.originalDebugErr=this.originalConsole.error}log(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugLog)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"*","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}warn(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugWarn)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"*","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}error(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugErr)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"*","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}test(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];let l=s(e);null===(t=this.originalDebugLog)||void 0===t||t.apply(this.originalConsole,["%c"+r()(new Date().getTime()).format("HH:mm:ss.SSS")+" "+e.toUpperCase()+"* TEST","background: ".concat(l,"; color: #FFF; font-weight:bold; padding:5px;"),...i])}constructor(){this.originalConsole=null}};class o{log(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.log.apply(l,["connectivity",...t])}warn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.warn.apply(l,["connectivity",...t])}error(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.error.apply(l,["connectivity",...t])}}},50707:function(e,t,n){"use strict";n.d(t,{L:function(){return a},z:function(){return r}});var i=n(94025);function r(e){return e.appExceptionCode===i.gs.Unauthorized}function a(e){return e.appExceptionCode===i.XF.UnlockKeyCancelled}},14776:function(e,t,n){"use strict";n.d(t,{DR:function(){return s},M6:function(){return o},jU:function(){return l}});var i=n(31931),r=n(70779),a=n(50676);let s=new a.X(!1),l=new r.P(null,async()=>{{let e=localStorage.getItem("authenticated_user");if(!e)return s.next(!0),null;let t=await i.n.fromJson(JSON.parse(e));return s.next(!0),t}});function o(){return l.value}},11059:function(e,t,n){"use strict";n.d(t,{X:function(){return A},bB:function(){return F},kv:function(){return $},nj:function(){return P},jF:function(){return O},HA:function(){return x},w7:function(){return j},y1:function(){return k},vz:function(){return E}});var i=n(60230),r=n(23965),a=n(5253),s=n(31931),l=n(39615),o=n(29748),c=n(91395),u=n(36966),d=n(7482),h=n(36079),p=n(2512),v=n(69810),y=n.n(v),g=n(14776),f=n(67133).Buffer;function w(){let e=(0,i._)(["\n        mutation SignUp($input: SignUpInput!) {\n          signUp(input: $input) { accessToken refreshToken }\n        }\n      "]);return w=function(){return e},e}function m(){let e=(0,i._)(["\n          query GetSelfUser {\n            getSelfUser { "," }\n          }\n        "]);return m=function(){return e},e}function b(){let e=(0,i._)(["\n      mutation RequestEmailAuthentication($emailAddress: String!) {\n        requestEmailAuthentication(emailAddress: $emailAddress) { success }\n      }\n    "]);return b=function(){return e},e}function I(){let e=(0,i._)(["\n        mutation CheckEmailAuthentication($authKey: String!) {\n          checkEmailAuthentication(authKey: $authKey) { accessToken refreshToken }\n        }\n      "]);return I=function(){return e},e}function D(){let e=(0,i._)(["\n        query signInWithPasskey ($authKey: AuthKeyInput!) {\n          signInWithPasskey (authKey: $authKey) {\n            accessToken,\n            refreshToken\n          }\n        }\n      "]);return D=function(){return e},e}let C=new(y())(1);async function k(e){h.k.log("user","Sign up user, creating new user entry");let t={name:e},n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(w()),variables:{input:t}}));if(null==n||!n.data||!n.data.signUp)return h.k.error("user","failed to sign up."),null;{let{accessToken:e,refreshToken:t}=n.data.signUp;return E(e,t)}}async function S(e){localStorage.setItem("authenticated_user",JSON.stringify(e)),g.jU.next(await s.n.fromJson(e))}async function x(e){return S(e.toJson())}async function P(){return C.add(async()=>{var e,t;h.k.log("users","Fetching self user profile");let n=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(m(),"id name createdAt defaultRootIdentityId")}));if(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.getSelfUser){let e=null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.getSelfUser,i=await s.n.fromJson(e);return await S(e),h.k.log("users","user from fetchSelfUser():",i),i}throw Error("no data got from fetchSelfUser()")})}async function A(e){h.k.log("user","Sending request to authentication by email"),await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(b()),variables:{emailAddress:e}}))}async function E(e,t){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t);try{let t=await P();return await (0,l.Pd)(e),h.k.log("user","Updated user by token, got user:",t),t}catch(e){return h.k.error("userService","failed to fetch user info.: ",e),j(),null}}function j(){h.k.log("user","Signing out from current user. Deleting user and access tokens"),localStorage.removeItem("authenticated_user"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),g.jU.next(null),u.D.setActiveIdentity(null)}async function $(e){h.k.log("user","Checking temporary authentication key");try{var t;let n=await (0,o.Pt)(async()=>(await (0,c.W)()).mutate({mutation:(0,r.Ps)(I()),variables:{authKey:e}}));if(null==n||null===(t=n.data)||void 0===t||!t.checkEmailAuthentication)return!1;{let{accessToken:e,refreshToken:t}=n.data.checkEmailAuthentication;return await E(e,t),!0}}catch(e){return h.k.warn("user","Exception while checking temporary auth key. Key expired?"),null}}function O(){let e=localStorage.getItem("access_token");return e&&""!==e}async function F(){var e,t,n,i,s,l;h.k.log("user","Authenticating with passkey");let u=await (0,d.Dk)(),v=function(e){let t=new TextEncoder,n=t.encode(e.content),i={challenge:f.from(n).toString(),allowCredentials:[],rpId:"didweb.trinity-tech.io",userVerification:"required",timeout:6e4};return i}(u),y=await (0,p.oz)(v,!1),g={type:a.J.WEBAUTHN,keyId:y.id,key:JSON.stringify(y),challengeId:u.id},w=await (0,o.Pt)(async()=>(await (0,c.W)()).query({query:(0,r.Ps)(D()),variables:{authKey:g}}));if(null==w||null===(t=w.data)||void 0===t||null===(e=t.signInWithPasskey)||void 0===e||!e.accessToken)return h.k.error("Failed to sign in with passkey."),!1;{let e=null==w?void 0:null===(i=w.data)||void 0===i?void 0:null===(n=i.signInWithPasskey)||void 0===n?void 0:n.accessToken,t=null==w?void 0:null===(l=w.data)||void 0===l?void 0:null===(s=l.signInWithPasskey)||void 0===s?void 0:s.refreshToken;return await E(e,t),!0}}},8009:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var i=n(27524);let r=new i.x},792:function(e,t,n){"use strict";var i,r,a;n.d(t,{L:function(){return r},v:function(){return i}}),(a=i||(i={})).INVALID_TOKEN="invalid_token",a.ACTIVITY_CREATED="activity_created",(r||(r={})).HANDSHAKE="handshake"},70779:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var i,r,a=n(12883),s=n(36079),l=n(50707),o=n(50676);(i=r||(r={}))[i.NotCalled=0]="NotCalled",i[i.Called=1]="Called",i[i.FailedUnlock=2]="FailedUnlock",i[i.Failed=3]="Failed";class c extends o.X{hasInitializer(){return!!this.initializer}subscribe(e,t,n){return this.fetchedOrFetching||(this.fetchedOrFetching=!0,this.callInitializer()),super.subscribe(...arguments)}callInitializer(){this.initializer&&this.initializer().then(e=>{e&&(this.next(e),this.initializerState.next(r.Called))}).catch(e=>{(0,l.L)(e)?(this.masterKeyUnlockSub||(this.masterKeyUnlockSub=a.Z.subscribe(()=>{(this.initializerState.value===r.NotCalled||this.initializerState.value===r.FailedUnlock)&&this.callInitializer()})),this.initializerState.next(r.FailedUnlock)):(s.k.error("AdvancedBehaviorSubject",e),this.initializerState.next(r.Failed))})}constructor(e,t){super(e),this.initializer=t,this.fetchedOrFetching=!1,this.initializerState=new o.X(r.NotCalled)}}},36418:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var i=n(36079),r=n(69810),a=n.n(r);class s{async get(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return n&&this.has(e)?this.cache[e]:(n||null===e||i.k.warn("cache","Forcing to not use cache for key:",e,". This could create duplicate objects that don't update well everywhere"),t)?this.loadQueue.add(async()=>{var i,r;if(n&&this.has(e)){let n=this.cache[e];return await (null==t?void 0:null===(r=t.fill)||void 0===r?void 0:r.call(t,n)),n}{if(!t)return null;let n=await t.create();return await (null===(i=t.fill)||void 0===i?void 0:i.call(t,n)),this.cache[e]=n,n}}):null}has(e){return e in this.cache}constructor(){this.cache={},this.loadQueue=new(a())(1)}}},97884:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var i=n(59147);class r{getObjectStore(e){return this.db.then(t=>{let n=t.transaction(this.storeName,e);return n.objectStore(this.storeName)})}get(e){return this.getObjectStore("readonly").then(t=>new Promise((n,i)=>{let r=t.get(e);r.onerror=()=>i(r.error),r.onsuccess=()=>n(r.result)}))}put(e,t){return this.getObjectStore("readwrite").then(n=>new Promise((i,r)=>{let a=n.put(t,e);a.onerror=()=>r(a.error),a.onsuccess=()=>i()}))}constructor(e){this.storeName=e,(0,i.S)()&&(this.db=new Promise((t,n)=>{let i=indexedDB.open(e);i.onerror=()=>n(i.error),i.onsuccess=()=>{i.result.objectStoreNames.contains(e)&&t(i.result)},i.onupgradeneeded=()=>{i.result.objectStoreNames.contains(e)||i.result.createObjectStore(e),t(i.result)}}))}}var a=n(62067),s=n.n(a),l=n(69810),o=n.n(l),c=n(50676);class u{async get(e,t){return this.queue.add(async()=>{let n=this.getStorageKey(e),i=await this.db.get(n),r=(null==i?void 0:i.expirationDate)&&s()().isAfter(i.expirationDate);if((!i||r)&&this.cacheMissCallback){let n=await this.cacheMissCallback(e,t);return n&&await this.put(e,n),n}return null==i?void 0:i.data})}async put(e,t){let n=this.getStorageKey(e);await this.db.put(n,{data:t,expirationDate:this.expireAfterSeconds?s()().add(this.expireAfterSeconds,"seconds").toISOString():null}),this.getListener(e).next(t)}listen(e,t){return this.getListener(e,t)}getListener(e,t){return e in this.listeners||(this.listeners[e]=new c.X(null),this.get(e,t).then(t=>this.listeners[e].next(t))),this.listeners[e]}getStorageKey(e){return"2-"+e}constructor(e,t,n){this.cacheMissCallback=t,this.expireAfterSeconds=n,this.queue=new(o())(1),this.listeners={},this.db=new r(e)}}},59147:function(e,t,n){"use strict";function i(){return!0}n.d(t,{S:function(){return i}})},66591:function(e,t,n){"use strict";n.d(t,{hS:function(){return r},pH:function(){return a}});let i={},r=async()=>(i["@elastosfoundation/did-js-sdk"]||(i["@elastosfoundation/did-js-sdk"]=await Promise.resolve().then(n.bind(n,26588))),i["@elastosfoundation/did-js-sdk"]),a=async()=>(i["@elastosfoundation/hive-js-sdk"]||(i["@elastosfoundation/hive-js-sdk"]=await Promise.all([n.e(475),n.e(4654)]).then(n.bind(n,20475))),i["@elastosfoundation/hive-js-sdk"])},58555:function(e,t,n){"use strict";n.d(t,{EX:function(){return c},Ik:function(){return l},hv:function(){return o}});var i=n(36079),r=n(35698),a=n(67133).Buffer;let s=[{mime:"image/png",pattern:[137,80,78,71]},{mime:"image/jpeg",pattern:[255,216,255]},{mime:"image/gif",pattern:[71,73,70,56]},{mime:"image/webp",pattern:[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80,86,80]}],l=async e=>{if(!e)return"";let t=await function(e){if("string"==typeof e){var t;t=e,e=a.from(t,"base64")}let n=Math.max(...s.map(e=>e.pattern.length)),i=new Blob([e.slice(0,n)]),r=new FileReader,l=new Promise(e=>{r.onloadend=t=>{if("loadend"==t.type){if(!t||!r.result){e(null);return}let n=new Uint8Array(r.result),i=s.find(e=>e.pattern.every((e,t)=>!e||n[t]===e));i?e(i.mime):e(null)}}});return r.readAsArrayBuffer(i),l}(e);if(!t)return i.k.warn("pictures","Unable to extract picture mime type. If the picture invalid?"),null;let n=a.from(e).toString("base64");return"data:".concat(t,";base64,").concat(n)},o=(e,t)=>new Promise((n,i)=>{let a=new Image;a.src=e,a.onload=()=>{let e=document.createElement("canvas"),i=a.width,s=a.height;i>=s&&i>t?(s*=t/i,i=t):s>t&&(i*=t/s,s=t),e.width=i,e.height=s;let l=e.getContext("2d");l.drawImage(a,0,0,i,s);let o=l.canvas.toDataURL();n((0,r.u0)(o))},a.onerror=e=>i(e)}),c=e=>new Promise((t,n)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e=>{n(e)},i.readAsDataURL(e)})},4746:function(e,t,n){"use strict";n.d(t,{B:function(){return a},y:function(){return r}});var i=n(70163);function r(e,t){return new Promise(n=>{let r=e.pipe((0,i.h)(e=>e===t)).subscribe(e=>{setTimeout(()=>r.unsubscribe(),0),n()})})}function a(e){return new Promise(t=>{let n=e.pipe((0,i.h)(e=>!!e)).subscribe(()=>{setTimeout(()=>n.unsubscribe(),0),t()})})}},53386:function(e,t,n){"use strict";function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t){return(null==e?void 0:e.length)>t?e.substring(0,t/2-1)+"..."+e.substring(e.length-(t/2-1),e.length):e}function a(e){return null==e?null:i(e.split(" ").map(e=>e[0]).join(""))}function s(e){if(!/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?Z)$/.test(e))return e;let t=new Date(e),n=navigator.language,i=new Intl.DateTimeFormat(n),r=i.format(t);return r}function l(e){return null==e?null:"M"===e?"male":"F"===e?"female":e}function o(e,t){return t.some(t=>e.startsWith(t))}function c(e,t){return t.some(t=>e==t)}n.d(t,{OX:function(){return a},Sy:function(){return r},aD:function(){return l},fm:function(){return i},pI:function(){return c},pd:function(){return o},r2:function(){return s}})}}]);