generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/@prisma/client/did"
}

datasource db {
  provider = "postgresql"
  url      = env("DID_DATABASE_URL")
}

model StoreMetadata {
  path                 String  @id @unique
  version              Int     @default(4)
  fingerprint          String?
  defaultRootIdentity  String?
}

model RootIdentity {
  path       String
  id         String
  defaultDid String?
  mnemonic   String?
  privateKey String?
  publicKey  String?
  index      Int

  @@unique([path, id])
}

model VerifiableCredential {
  path       String
  id         String // DID URL string.
  did        String
  credential String
  txid       String?
  published  DateTime?
  revoked    Boolean?
  alias      String?

  @@unique([path, id])
}

model DidDocument {
  path              String
  did               String
  doc               String?
  rootIdentityId    String?
  index             Int?
  txid              String?
  previousSignature String?
  signature         String?
  published         DateTime?
  deactivated       Boolean?
  alias             String?

  @@unique([path, did])
}

model PrivateKey {
  path    String
  did     String
  id      String // DID URL string.
  content String

  @@unique([path, id])
}
